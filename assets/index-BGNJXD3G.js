var NC=n=>{throw TypeError(n)};var Ix=(n,e,t)=>e.has(n)||NC("Cannot "+t);var ge=(n,e,t)=>(Ix(n,e,"read from private field"),t?t.call(n):e.get(n)),en=(n,e,t)=>e.has(n)?NC("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),kt=(n,e,t,r)=>(Ix(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),Ar=(n,e,t)=>(Ix(n,e,"access private method"),t);var og=(n,e,t,r)=>({set _(i){kt(n,e,i,t)},get _(){return ge(n,e,r)}});function Dk(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(n,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function uE(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function xV(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}var Uk={exports:{}},f0={},Fk={exports:{}},$t={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zp=Symbol.for("react.element"),wV=Symbol.for("react.portal"),SV=Symbol.for("react.fragment"),bV=Symbol.for("react.strict_mode"),EV=Symbol.for("react.profiler"),MV=Symbol.for("react.provider"),TV=Symbol.for("react.context"),AV=Symbol.for("react.forward_ref"),CV=Symbol.for("react.suspense"),PV=Symbol.for("react.memo"),RV=Symbol.for("react.lazy"),DC=Symbol.iterator;function IV(n){return n===null||typeof n!="object"?null:(n=DC&&n[DC]||n["@@iterator"],typeof n=="function"?n:null)}var Bk={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},zk=Object.assign,Vk={};function eh(n,e,t){this.props=n,this.context=e,this.refs=Vk,this.updater=t||Bk}eh.prototype.isReactComponent={};eh.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};eh.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function jk(){}jk.prototype=eh.prototype;function dE(n,e,t){this.props=n,this.context=e,this.refs=Vk,this.updater=t||Bk}var hE=dE.prototype=new jk;hE.constructor=dE;zk(hE,eh.prototype);hE.isPureReactComponent=!0;var UC=Array.isArray,Hk=Object.prototype.hasOwnProperty,fE={current:null},Wk={key:!0,ref:!0,__self:!0,__source:!0};function Gk(n,e,t){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Hk.call(e,r)&&!Wk.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=t;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(n&&n.defaultProps)for(r in a=n.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:zp,type:n,key:s,ref:o,props:i,_owner:fE.current}}function LV(n,e){return{$$typeof:zp,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function pE(n){return typeof n=="object"&&n!==null&&n.$$typeof===zp}function kV(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var FC=/\/+/g;function Lx(n,e){return typeof n=="object"&&n!==null&&n.key!=null?kV(""+n.key):e.toString(36)}function Uv(n,e,t,r,i){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case zp:case wV:o=!0}}if(o)return o=n,i=i(o),n=r===""?"."+Lx(o,0):r,UC(i)?(t="",n!=null&&(t=n.replace(FC,"$&/")+"/"),Uv(i,e,t,"",function(c){return c})):i!=null&&(pE(i)&&(i=LV(i,t+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(FC,"$&/")+"/")+n)),e.push(i)),1;if(o=0,r=r===""?".":r+":",UC(n))for(var a=0;a<n.length;a++){s=n[a];var l=r+Lx(s,a);o+=Uv(s,e,t,l,i)}else if(l=IV(n),typeof l=="function")for(n=l.call(n),a=0;!(s=n.next()).done;)s=s.value,l=r+Lx(s,a++),o+=Uv(s,e,t,l,i);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ag(n,e,t){if(n==null)return n;var r=[],i=0;return Uv(n,r,"","",function(s){return e.call(t,s,i++)}),r}function OV(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var ti={current:null},Fv={transition:null},NV={ReactCurrentDispatcher:ti,ReactCurrentBatchConfig:Fv,ReactCurrentOwner:fE};function $k(){throw Error("act(...) is not supported in production builds of React.")}$t.Children={map:ag,forEach:function(n,e,t){ag(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return ag(n,function(){e++}),e},toArray:function(n){return ag(n,function(e){return e})||[]},only:function(n){if(!pE(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};$t.Component=eh;$t.Fragment=SV;$t.Profiler=EV;$t.PureComponent=dE;$t.StrictMode=bV;$t.Suspense=CV;$t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=NV;$t.act=$k;$t.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=zk({},n.props),i=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=fE.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)Hk.call(e,l)&&!Wk.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:zp,type:n.type,key:i,ref:s,props:r,_owner:o}};$t.createContext=function(n){return n={$$typeof:TV,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:MV,_context:n},n.Consumer=n};$t.createElement=Gk;$t.createFactory=function(n){var e=Gk.bind(null,n);return e.type=n,e};$t.createRef=function(){return{current:null}};$t.forwardRef=function(n){return{$$typeof:AV,render:n}};$t.isValidElement=pE;$t.lazy=function(n){return{$$typeof:RV,_payload:{_status:-1,_result:n},_init:OV}};$t.memo=function(n,e){return{$$typeof:PV,type:n,compare:e===void 0?null:e}};$t.startTransition=function(n){var e=Fv.transition;Fv.transition={};try{n()}finally{Fv.transition=e}};$t.unstable_act=$k;$t.useCallback=function(n,e){return ti.current.useCallback(n,e)};$t.useContext=function(n){return ti.current.useContext(n)};$t.useDebugValue=function(){};$t.useDeferredValue=function(n){return ti.current.useDeferredValue(n)};$t.useEffect=function(n,e){return ti.current.useEffect(n,e)};$t.useId=function(){return ti.current.useId()};$t.useImperativeHandle=function(n,e,t){return ti.current.useImperativeHandle(n,e,t)};$t.useInsertionEffect=function(n,e){return ti.current.useInsertionEffect(n,e)};$t.useLayoutEffect=function(n,e){return ti.current.useLayoutEffect(n,e)};$t.useMemo=function(n,e){return ti.current.useMemo(n,e)};$t.useReducer=function(n,e,t){return ti.current.useReducer(n,e,t)};$t.useRef=function(n){return ti.current.useRef(n)};$t.useState=function(n){return ti.current.useState(n)};$t.useSyncExternalStore=function(n,e,t){return ti.current.useSyncExternalStore(n,e,t)};$t.useTransition=function(){return ti.current.useTransition()};$t.version="18.3.1";Fk.exports=$t;var N=Fk.exports;const Ne=uE(N),Xk=Dk({__proto__:null,default:Ne},[N]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DV=N,UV=Symbol.for("react.element"),FV=Symbol.for("react.fragment"),BV=Object.prototype.hasOwnProperty,zV=DV.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,VV={key:!0,ref:!0,__self:!0,__source:!0};function qk(n,e,t){var r,i={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)BV.call(e,r)&&!VV.hasOwnProperty(r)&&(i[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:UV,type:n,key:s,ref:o,props:i,_owner:zV.current}}f0.Fragment=FV;f0.jsx=qk;f0.jsxs=qk;Uk.exports=f0;var D=Uk.exports,Yk={exports:{}},zi={},Kk={exports:{}},Zk={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(L,U){var V=L.length;L.push(U);e:for(;0<V;){var Y=V-1>>>1,Q=L[Y];if(0<i(Q,U))L[Y]=U,L[V]=Q,V=Y;else break e}}function t(L){return L.length===0?null:L[0]}function r(L){if(L.length===0)return null;var U=L[0],V=L.pop();if(V!==U){L[0]=V;e:for(var Y=0,Q=L.length,K=Q>>>1;Y<K;){var oe=2*(Y+1)-1,xe=L[oe],Ae=oe+1,we=L[Ae];if(0>i(xe,V))Ae<Q&&0>i(we,xe)?(L[Y]=we,L[Ae]=V,Y=Ae):(L[Y]=xe,L[oe]=V,Y=oe);else if(Ae<Q&&0>i(we,V))L[Y]=we,L[Ae]=V,Y=Ae;else break e}}return U}function i(L,U){var V=L.sortIndex-U.sortIndex;return V!==0?V:L.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,f=null,p=3,m=!1,v=!1,x=!1,y=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(L){for(var U=t(c);U!==null;){if(U.callback===null)r(c);else if(U.startTime<=L)r(c),U.sortIndex=U.expirationTime,e(l,U);else break;U=t(c)}}function E(L){if(x=!1,S(L),!v)if(t(l)!==null)v=!0,J(A);else{var U=t(c);U!==null&&te(E,U.startTime-L)}}function A(L,U){v=!1,x&&(x=!1,g(k),k=-1),m=!0;var V=p;try{for(S(U),f=t(l);f!==null&&(!(f.expirationTime>U)||L&&!H());){var Y=f.callback;if(typeof Y=="function"){f.callback=null,p=f.priorityLevel;var Q=Y(f.expirationTime<=U);U=n.unstable_now(),typeof Q=="function"?f.callback=Q:f===t(l)&&r(l),S(U)}else r(l);f=t(l)}if(f!==null)var K=!0;else{var oe=t(c);oe!==null&&te(E,oe.startTime-U),K=!1}return K}finally{f=null,p=V,m=!1}}var T=!1,P=null,k=-1,R=5,I=-1;function H(){return!(n.unstable_now()-I<R)}function G(){if(P!==null){var L=n.unstable_now();I=L;var U=!0;try{U=P(!0,L)}finally{U?re():(T=!1,P=null)}}else T=!1}var re;if(typeof w=="function")re=function(){w(G)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,Z=z.port2;z.port1.onmessage=G,re=function(){Z.postMessage(null)}}else re=function(){y(G,0)};function J(L){P=L,T||(T=!0,re())}function te(L,U){k=y(function(){L(n.unstable_now())},U)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(L){L.callback=null},n.unstable_continueExecution=function(){v||m||(v=!0,J(A))},n.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<L?Math.floor(1e3/L):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(L){switch(p){case 1:case 2:case 3:var U=3;break;default:U=p}var V=p;p=U;try{return L()}finally{p=V}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(L,U){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var V=p;p=L;try{return U()}finally{p=V}},n.unstable_scheduleCallback=function(L,U,V){var Y=n.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?Y+V:Y):V=Y,L){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=V+Q,L={id:d++,callback:U,priorityLevel:L,startTime:V,expirationTime:Q,sortIndex:-1},V>Y?(L.sortIndex=V,e(c,L),t(l)===null&&L===t(c)&&(x?(g(k),k=-1):x=!0,te(E,V-Y))):(L.sortIndex=Q,e(l,L),v||m||(v=!0,J(A))),L},n.unstable_shouldYield=H,n.unstable_wrapCallback=function(L){var U=p;return function(){var V=p;p=U;try{return L.apply(this,arguments)}finally{p=V}}}})(Zk);Kk.exports=Zk;var jV=Kk.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HV=N,Ui=jV;function Pe(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Jk=new Set,Bf={};function Bc(n,e){Id(n,e),Id(n+"Capture",e)}function Id(n,e){for(Bf[n]=e,n=0;n<e.length;n++)Jk.add(e[n])}var Xo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),CS=Object.prototype.hasOwnProperty,WV=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,BC={},zC={};function GV(n){return CS.call(zC,n)?!0:CS.call(BC,n)?!1:WV.test(n)?zC[n]=!0:(BC[n]=!0,!1)}function $V(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function XV(n,e,t,r){if(e===null||typeof e>"u"||$V(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ni(n,e,t,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Sr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Sr[n]=new ni(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Sr[e]=new ni(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Sr[n]=new ni(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Sr[n]=new ni(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Sr[n]=new ni(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Sr[n]=new ni(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Sr[n]=new ni(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Sr[n]=new ni(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Sr[n]=new ni(n,5,!1,n.toLowerCase(),null,!1,!1)});var mE=/[\-:]([a-z])/g;function gE(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(mE,gE);Sr[e]=new ni(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(mE,gE);Sr[e]=new ni(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(mE,gE);Sr[e]=new ni(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Sr[n]=new ni(n,1,!1,n.toLowerCase(),null,!1,!1)});Sr.xlinkHref=new ni("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Sr[n]=new ni(n,1,!1,n.toLowerCase(),null,!0,!0)});function vE(n,e,t,r){var i=Sr.hasOwnProperty(e)?Sr[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(XV(e,t,i,r)&&(t=null),r||i===null?GV(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,r=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var ra=HV.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,lg=Symbol.for("react.element"),Hu=Symbol.for("react.portal"),Wu=Symbol.for("react.fragment"),yE=Symbol.for("react.strict_mode"),PS=Symbol.for("react.profiler"),Qk=Symbol.for("react.provider"),eO=Symbol.for("react.context"),_E=Symbol.for("react.forward_ref"),RS=Symbol.for("react.suspense"),IS=Symbol.for("react.suspense_list"),xE=Symbol.for("react.memo"),Ca=Symbol.for("react.lazy"),tO=Symbol.for("react.offscreen"),VC=Symbol.iterator;function Nh(n){return n===null||typeof n!="object"?null:(n=VC&&n[VC]||n["@@iterator"],typeof n=="function"?n:null)}var Pn=Object.assign,kx;function of(n){if(kx===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);kx=e&&e[1]||""}return`
`+kx+n}var Ox=!1;function Nx(n,e){if(!n||Ox)return"";Ox=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){r=c}n.call(e.prototype)}else{try{throw Error()}catch(c){r=c}n()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{Ox=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?of(n):""}function qV(n){switch(n.tag){case 5:return of(n.type);case 16:return of("Lazy");case 13:return of("Suspense");case 19:return of("SuspenseList");case 0:case 2:case 15:return n=Nx(n.type,!1),n;case 11:return n=Nx(n.type.render,!1),n;case 1:return n=Nx(n.type,!0),n;default:return""}}function LS(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Wu:return"Fragment";case Hu:return"Portal";case PS:return"Profiler";case yE:return"StrictMode";case RS:return"Suspense";case IS:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case eO:return(n.displayName||"Context")+".Consumer";case Qk:return(n._context.displayName||"Context")+".Provider";case _E:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case xE:return e=n.displayName||null,e!==null?e:LS(n.type)||"Memo";case Ca:e=n._payload,n=n._init;try{return LS(n(e))}catch{}}return null}function YV(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return LS(e);case 8:return e===yE?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function rl(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function nO(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function KV(n){var e=nO(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function cg(n){n._valueTracker||(n._valueTracker=KV(n))}function rO(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=nO(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function cy(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function kS(n,e){var t=e.checked;return Pn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function jC(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=rl(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function iO(n,e){e=e.checked,e!=null&&vE(n,"checked",e,!1)}function OS(n,e){iO(n,e);var t=rl(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?NS(n,e.type,t):e.hasOwnProperty("defaultValue")&&NS(n,e.type,rl(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function HC(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function NS(n,e,t){(e!=="number"||cy(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var af=Array.isArray;function hd(n,e,t,r){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&r&&(n[t].defaultSelected=!0)}else{for(t=""+rl(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,r&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function DS(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Pe(91));return Pn({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function WC(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(Pe(92));if(af(t)){if(1<t.length)throw Error(Pe(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:rl(t)}}function sO(n,e){var t=rl(e.value),r=rl(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function GC(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function oO(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function US(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?oO(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var ug,aO=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,i)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(ug=ug||document.createElement("div"),ug.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ug.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function zf(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var gf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ZV=["Webkit","ms","Moz","O"];Object.keys(gf).forEach(function(n){ZV.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),gf[e]=gf[n]})});function lO(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||gf.hasOwnProperty(n)&&gf[n]?(""+e).trim():e+"px"}function cO(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,i=lO(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,i):n[t]=i}}var JV=Pn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function FS(n,e){if(e){if(JV[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Pe(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Pe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Pe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Pe(62))}}function BS(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zS=null;function wE(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var VS=null,fd=null,pd=null;function $C(n){if(n=Hp(n)){if(typeof VS!="function")throw Error(Pe(280));var e=n.stateNode;e&&(e=y0(e),VS(n.stateNode,n.type,e))}}function uO(n){fd?pd?pd.push(n):pd=[n]:fd=n}function dO(){if(fd){var n=fd,e=pd;if(pd=fd=null,$C(n),e)for(n=0;n<e.length;n++)$C(e[n])}}function hO(n,e){return n(e)}function fO(){}var Dx=!1;function pO(n,e,t){if(Dx)return n(e,t);Dx=!0;try{return hO(n,e,t)}finally{Dx=!1,(fd!==null||pd!==null)&&(fO(),dO())}}function Vf(n,e){var t=n.stateNode;if(t===null)return null;var r=y0(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(Pe(231,e,typeof t));return t}var jS=!1;if(Xo)try{var Dh={};Object.defineProperty(Dh,"passive",{get:function(){jS=!0}}),window.addEventListener("test",Dh,Dh),window.removeEventListener("test",Dh,Dh)}catch{jS=!1}function QV(n,e,t,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(d){this.onError(d)}}var vf=!1,uy=null,dy=!1,HS=null,e5={onError:function(n){vf=!0,uy=n}};function t5(n,e,t,r,i,s,o,a,l){vf=!1,uy=null,QV.apply(e5,arguments)}function n5(n,e,t,r,i,s,o,a,l){if(t5.apply(this,arguments),vf){if(vf){var c=uy;vf=!1,uy=null}else throw Error(Pe(198));dy||(dy=!0,HS=c)}}function zc(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function mO(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function XC(n){if(zc(n)!==n)throw Error(Pe(188))}function r5(n){var e=n.alternate;if(!e){if(e=zc(n),e===null)throw Error(Pe(188));return e!==n?null:n}for(var t=n,r=e;;){var i=t.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){t=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===t)return XC(i),n;if(s===r)return XC(i),e;s=s.sibling}throw Error(Pe(188))}if(t.return!==r.return)t=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===t){o=!0,t=i,r=s;break}if(a===r){o=!0,r=i,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,r=i;break}if(a===r){o=!0,r=s,t=i;break}a=a.sibling}if(!o)throw Error(Pe(189))}}if(t.alternate!==r)throw Error(Pe(190))}if(t.tag!==3)throw Error(Pe(188));return t.stateNode.current===t?n:e}function gO(n){return n=r5(n),n!==null?vO(n):null}function vO(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=vO(n);if(e!==null)return e;n=n.sibling}return null}var yO=Ui.unstable_scheduleCallback,qC=Ui.unstable_cancelCallback,i5=Ui.unstable_shouldYield,s5=Ui.unstable_requestPaint,Hn=Ui.unstable_now,o5=Ui.unstable_getCurrentPriorityLevel,SE=Ui.unstable_ImmediatePriority,_O=Ui.unstable_UserBlockingPriority,hy=Ui.unstable_NormalPriority,a5=Ui.unstable_LowPriority,xO=Ui.unstable_IdlePriority,p0=null,ro=null;function l5(n){if(ro&&typeof ro.onCommitFiberRoot=="function")try{ro.onCommitFiberRoot(p0,n,void 0,(n.current.flags&128)===128)}catch{}}var Is=Math.clz32?Math.clz32:d5,c5=Math.log,u5=Math.LN2;function d5(n){return n>>>=0,n===0?32:31-(c5(n)/u5|0)|0}var dg=64,hg=4194304;function lf(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function fy(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,i=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~i;a!==0?r=lf(a):(s&=o,s!==0&&(r=lf(s)))}else o=t&~i,o!==0?r=lf(o):s!==0&&(r=lf(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-Is(e),i=1<<t,r|=n[t],e&=~i;return r}function h5(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function f5(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,i=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-Is(s),a=1<<o,l=i[o];l===-1?(!(a&t)||a&r)&&(i[o]=h5(a,e)):l<=e&&(n.expiredLanes|=a),s&=~a}}function WS(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function wO(){var n=dg;return dg<<=1,!(dg&4194240)&&(dg=64),n}function Ux(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function Vp(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Is(e),n[e]=t}function p5(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var i=31-Is(t),s=1<<i;e[i]=0,r[i]=-1,n[i]=-1,t&=~s}}function bE(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-Is(t),i=1<<r;i&e|n[r]&e&&(n[r]|=e),t&=~i}}var on=0;function SO(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var bO,EE,EO,MO,TO,GS=!1,fg=[],Wa=null,Ga=null,$a=null,jf=new Map,Hf=new Map,Ia=[],m5="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function YC(n,e){switch(n){case"focusin":case"focusout":Wa=null;break;case"dragenter":case"dragleave":Ga=null;break;case"mouseover":case"mouseout":$a=null;break;case"pointerover":case"pointerout":jf.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hf.delete(e.pointerId)}}function Uh(n,e,t,r,i,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Hp(e),e!==null&&EE(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function g5(n,e,t,r,i){switch(e){case"focusin":return Wa=Uh(Wa,n,e,t,r,i),!0;case"dragenter":return Ga=Uh(Ga,n,e,t,r,i),!0;case"mouseover":return $a=Uh($a,n,e,t,r,i),!0;case"pointerover":var s=i.pointerId;return jf.set(s,Uh(jf.get(s)||null,n,e,t,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Hf.set(s,Uh(Hf.get(s)||null,n,e,t,r,i)),!0}return!1}function AO(n){var e=oc(n.target);if(e!==null){var t=zc(e);if(t!==null){if(e=t.tag,e===13){if(e=mO(t),e!==null){n.blockedOn=e,TO(n.priority,function(){EO(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Bv(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=$S(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);zS=r,t.target.dispatchEvent(r),zS=null}else return e=Hp(t),e!==null&&EE(e),n.blockedOn=t,!1;e.shift()}return!0}function KC(n,e,t){Bv(n)&&t.delete(e)}function v5(){GS=!1,Wa!==null&&Bv(Wa)&&(Wa=null),Ga!==null&&Bv(Ga)&&(Ga=null),$a!==null&&Bv($a)&&($a=null),jf.forEach(KC),Hf.forEach(KC)}function Fh(n,e){n.blockedOn===e&&(n.blockedOn=null,GS||(GS=!0,Ui.unstable_scheduleCallback(Ui.unstable_NormalPriority,v5)))}function Wf(n){function e(i){return Fh(i,n)}if(0<fg.length){Fh(fg[0],n);for(var t=1;t<fg.length;t++){var r=fg[t];r.blockedOn===n&&(r.blockedOn=null)}}for(Wa!==null&&Fh(Wa,n),Ga!==null&&Fh(Ga,n),$a!==null&&Fh($a,n),jf.forEach(e),Hf.forEach(e),t=0;t<Ia.length;t++)r=Ia[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<Ia.length&&(t=Ia[0],t.blockedOn===null);)AO(t),t.blockedOn===null&&Ia.shift()}var md=ra.ReactCurrentBatchConfig,py=!0;function y5(n,e,t,r){var i=on,s=md.transition;md.transition=null;try{on=1,ME(n,e,t,r)}finally{on=i,md.transition=s}}function _5(n,e,t,r){var i=on,s=md.transition;md.transition=null;try{on=4,ME(n,e,t,r)}finally{on=i,md.transition=s}}function ME(n,e,t,r){if(py){var i=$S(n,e,t,r);if(i===null)Xx(n,e,r,my,t),YC(n,r);else if(g5(i,n,e,t,r))r.stopPropagation();else if(YC(n,r),e&4&&-1<m5.indexOf(n)){for(;i!==null;){var s=Hp(i);if(s!==null&&bO(s),s=$S(n,e,t,r),s===null&&Xx(n,e,r,my,t),s===i)break;i=s}i!==null&&r.stopPropagation()}else Xx(n,e,r,null,t)}}var my=null;function $S(n,e,t,r){if(my=null,n=wE(r),n=oc(n),n!==null)if(e=zc(n),e===null)n=null;else if(t=e.tag,t===13){if(n=mO(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return my=n,null}function CO(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(o5()){case SE:return 1;case _O:return 4;case hy:case a5:return 16;case xO:return 536870912;default:return 16}default:return 16}}var za=null,TE=null,zv=null;function PO(){if(zv)return zv;var n,e=TE,t=e.length,r,i="value"in za?za.value:za.textContent,s=i.length;for(n=0;n<t&&e[n]===i[n];n++);var o=t-n;for(r=1;r<=o&&e[t-r]===i[s-r];r++);return zv=i.slice(n,1<r?1-r:void 0)}function Vv(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function pg(){return!0}function ZC(){return!1}function Vi(n){function e(t,r,i,s,o){this._reactName=t,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?pg:ZC,this.isPropagationStopped=ZC,this}return Pn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=pg)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=pg)},persist:function(){},isPersistent:pg}),e}var th={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},AE=Vi(th),jp=Pn({},th,{view:0,detail:0}),x5=Vi(jp),Fx,Bx,Bh,m0=Pn({},jp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:CE,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Bh&&(Bh&&n.type==="mousemove"?(Fx=n.screenX-Bh.screenX,Bx=n.screenY-Bh.screenY):Bx=Fx=0,Bh=n),Fx)},movementY:function(n){return"movementY"in n?n.movementY:Bx}}),JC=Vi(m0),w5=Pn({},m0,{dataTransfer:0}),S5=Vi(w5),b5=Pn({},jp,{relatedTarget:0}),zx=Vi(b5),E5=Pn({},th,{animationName:0,elapsedTime:0,pseudoElement:0}),M5=Vi(E5),T5=Pn({},th,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),A5=Vi(T5),C5=Pn({},th,{data:0}),QC=Vi(C5),P5={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},R5={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},I5={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function L5(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=I5[n])?!!e[n]:!1}function CE(){return L5}var k5=Pn({},jp,{key:function(n){if(n.key){var e=P5[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=Vv(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?R5[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:CE,charCode:function(n){return n.type==="keypress"?Vv(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Vv(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),O5=Vi(k5),N5=Pn({},m0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),eP=Vi(N5),D5=Pn({},jp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:CE}),U5=Vi(D5),F5=Pn({},th,{propertyName:0,elapsedTime:0,pseudoElement:0}),B5=Vi(F5),z5=Pn({},m0,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),V5=Vi(z5),j5=[9,13,27,32],PE=Xo&&"CompositionEvent"in window,yf=null;Xo&&"documentMode"in document&&(yf=document.documentMode);var H5=Xo&&"TextEvent"in window&&!yf,RO=Xo&&(!PE||yf&&8<yf&&11>=yf),tP=" ",nP=!1;function IO(n,e){switch(n){case"keyup":return j5.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function LO(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Gu=!1;function W5(n,e){switch(n){case"compositionend":return LO(e);case"keypress":return e.which!==32?null:(nP=!0,tP);case"textInput":return n=e.data,n===tP&&nP?null:n;default:return null}}function G5(n,e){if(Gu)return n==="compositionend"||!PE&&IO(n,e)?(n=PO(),zv=TE=za=null,Gu=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return RO&&e.locale!=="ko"?null:e.data;default:return null}}var $5={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function rP(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!$5[n.type]:e==="textarea"}function kO(n,e,t,r){uO(r),e=gy(e,"onChange"),0<e.length&&(t=new AE("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var _f=null,Gf=null;function X5(n){WO(n,0)}function g0(n){var e=qu(n);if(rO(e))return n}function q5(n,e){if(n==="change")return e}var OO=!1;if(Xo){var Vx;if(Xo){var jx="oninput"in document;if(!jx){var iP=document.createElement("div");iP.setAttribute("oninput","return;"),jx=typeof iP.oninput=="function"}Vx=jx}else Vx=!1;OO=Vx&&(!document.documentMode||9<document.documentMode)}function sP(){_f&&(_f.detachEvent("onpropertychange",NO),Gf=_f=null)}function NO(n){if(n.propertyName==="value"&&g0(Gf)){var e=[];kO(e,Gf,n,wE(n)),pO(X5,e)}}function Y5(n,e,t){n==="focusin"?(sP(),_f=e,Gf=t,_f.attachEvent("onpropertychange",NO)):n==="focusout"&&sP()}function K5(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return g0(Gf)}function Z5(n,e){if(n==="click")return g0(e)}function J5(n,e){if(n==="input"||n==="change")return g0(e)}function Q5(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var ks=typeof Object.is=="function"?Object.is:Q5;function $f(n,e){if(ks(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var i=t[r];if(!CS.call(e,i)||!ks(n[i],e[i]))return!1}return!0}function oP(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function aP(n,e){var t=oP(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=oP(t)}}function DO(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?DO(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function UO(){for(var n=window,e=cy();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=cy(n.document)}return e}function RE(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function ej(n){var e=UO(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&DO(t.ownerDocument.documentElement,t)){if(r!==null&&RE(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var i=t.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!n.extend&&s>r&&(i=r,r=s,s=i),i=aP(t,s);var o=aP(t,r);i&&o&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),n.removeAllRanges(),s>r?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var tj=Xo&&"documentMode"in document&&11>=document.documentMode,$u=null,XS=null,xf=null,qS=!1;function lP(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;qS||$u==null||$u!==cy(r)||(r=$u,"selectionStart"in r&&RE(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),xf&&$f(xf,r)||(xf=r,r=gy(XS,"onSelect"),0<r.length&&(e=new AE("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=$u)))}function mg(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var Xu={animationend:mg("Animation","AnimationEnd"),animationiteration:mg("Animation","AnimationIteration"),animationstart:mg("Animation","AnimationStart"),transitionend:mg("Transition","TransitionEnd")},Hx={},FO={};Xo&&(FO=document.createElement("div").style,"AnimationEvent"in window||(delete Xu.animationend.animation,delete Xu.animationiteration.animation,delete Xu.animationstart.animation),"TransitionEvent"in window||delete Xu.transitionend.transition);function v0(n){if(Hx[n])return Hx[n];if(!Xu[n])return n;var e=Xu[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in FO)return Hx[n]=e[t];return n}var BO=v0("animationend"),zO=v0("animationiteration"),VO=v0("animationstart"),jO=v0("transitionend"),HO=new Map,cP="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function gl(n,e){HO.set(n,e),Bc(e,[n])}for(var Wx=0;Wx<cP.length;Wx++){var Gx=cP[Wx],nj=Gx.toLowerCase(),rj=Gx[0].toUpperCase()+Gx.slice(1);gl(nj,"on"+rj)}gl(BO,"onAnimationEnd");gl(zO,"onAnimationIteration");gl(VO,"onAnimationStart");gl("dblclick","onDoubleClick");gl("focusin","onFocus");gl("focusout","onBlur");gl(jO,"onTransitionEnd");Id("onMouseEnter",["mouseout","mouseover"]);Id("onMouseLeave",["mouseout","mouseover"]);Id("onPointerEnter",["pointerout","pointerover"]);Id("onPointerLeave",["pointerout","pointerover"]);Bc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Bc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Bc("onBeforeInput",["compositionend","keypress","textInput","paste"]);Bc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Bc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Bc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ij=new Set("cancel close invalid load scroll toggle".split(" ").concat(cf));function uP(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,n5(r,e,void 0,n),n.currentTarget=null}function WO(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;uP(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;uP(i,a,c),s=l}}}if(dy)throw n=HS,dy=!1,HS=null,n}function mn(n,e){var t=e[QS];t===void 0&&(t=e[QS]=new Set);var r=n+"__bubble";t.has(r)||(GO(e,n,2,!1),t.add(r))}function $x(n,e,t){var r=0;e&&(r|=4),GO(t,n,r,e)}var gg="_reactListening"+Math.random().toString(36).slice(2);function Xf(n){if(!n[gg]){n[gg]=!0,Jk.forEach(function(t){t!=="selectionchange"&&(ij.has(t)||$x(t,!1,n),$x(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[gg]||(e[gg]=!0,$x("selectionchange",!1,e))}}function GO(n,e,t,r){switch(CO(e)){case 1:var i=y5;break;case 4:i=_5;break;default:i=ME}t=i.bind(null,e,t,n),i=void 0,!jS||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function Xx(n,e,t,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=oc(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}pO(function(){var c=s,d=wE(t),f=[];e:{var p=HO.get(n);if(p!==void 0){var m=AE,v=n;switch(n){case"keypress":if(Vv(t)===0)break e;case"keydown":case"keyup":m=O5;break;case"focusin":v="focus",m=zx;break;case"focusout":v="blur",m=zx;break;case"beforeblur":case"afterblur":m=zx;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=JC;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=S5;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=U5;break;case BO:case zO:case VO:m=M5;break;case jO:m=B5;break;case"scroll":m=x5;break;case"wheel":m=V5;break;case"copy":case"cut":case"paste":m=A5;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=eP}var x=(e&4)!==0,y=!x&&n==="scroll",g=x?p!==null?p+"Capture":null:p;x=[];for(var w=c,S;w!==null;){S=w;var E=S.stateNode;if(S.tag===5&&E!==null&&(S=E,g!==null&&(E=Vf(w,g),E!=null&&x.push(qf(w,E,S)))),y)break;w=w.return}0<x.length&&(p=new m(p,v,null,t,d),f.push({event:p,listeners:x}))}}if(!(e&7)){e:{if(p=n==="mouseover"||n==="pointerover",m=n==="mouseout"||n==="pointerout",p&&t!==zS&&(v=t.relatedTarget||t.fromElement)&&(oc(v)||v[qo]))break e;if((m||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,m?(v=t.relatedTarget||t.toElement,m=c,v=v?oc(v):null,v!==null&&(y=zc(v),v!==y||v.tag!==5&&v.tag!==6)&&(v=null)):(m=null,v=c),m!==v)){if(x=JC,E="onMouseLeave",g="onMouseEnter",w="mouse",(n==="pointerout"||n==="pointerover")&&(x=eP,E="onPointerLeave",g="onPointerEnter",w="pointer"),y=m==null?p:qu(m),S=v==null?p:qu(v),p=new x(E,w+"leave",m,t,d),p.target=y,p.relatedTarget=S,E=null,oc(d)===c&&(x=new x(g,w+"enter",v,t,d),x.target=S,x.relatedTarget=y,E=x),y=E,m&&v)t:{for(x=m,g=v,w=0,S=x;S;S=cu(S))w++;for(S=0,E=g;E;E=cu(E))S++;for(;0<w-S;)x=cu(x),w--;for(;0<S-w;)g=cu(g),S--;for(;w--;){if(x===g||g!==null&&x===g.alternate)break t;x=cu(x),g=cu(g)}x=null}else x=null;m!==null&&dP(f,p,m,x,!1),v!==null&&y!==null&&dP(f,y,v,x,!0)}}e:{if(p=c?qu(c):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var A=q5;else if(rP(p))if(OO)A=J5;else{A=K5;var T=Y5}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(A=Z5);if(A&&(A=A(n,c))){kO(f,A,t,d);break e}T&&T(n,p,c),n==="focusout"&&(T=p._wrapperState)&&T.controlled&&p.type==="number"&&NS(p,"number",p.value)}switch(T=c?qu(c):window,n){case"focusin":(rP(T)||T.contentEditable==="true")&&($u=T,XS=c,xf=null);break;case"focusout":xf=XS=$u=null;break;case"mousedown":qS=!0;break;case"contextmenu":case"mouseup":case"dragend":qS=!1,lP(f,t,d);break;case"selectionchange":if(tj)break;case"keydown":case"keyup":lP(f,t,d)}var P;if(PE)e:{switch(n){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Gu?IO(n,t)&&(k="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(k="onCompositionStart");k&&(RO&&t.locale!=="ko"&&(Gu||k!=="onCompositionStart"?k==="onCompositionEnd"&&Gu&&(P=PO()):(za=d,TE="value"in za?za.value:za.textContent,Gu=!0)),T=gy(c,k),0<T.length&&(k=new QC(k,n,null,t,d),f.push({event:k,listeners:T}),P?k.data=P:(P=LO(t),P!==null&&(k.data=P)))),(P=H5?W5(n,t):G5(n,t))&&(c=gy(c,"onBeforeInput"),0<c.length&&(d=new QC("onBeforeInput","beforeinput",null,t,d),f.push({event:d,listeners:c}),d.data=P))}WO(f,e)})}function qf(n,e,t){return{instance:n,listener:e,currentTarget:t}}function gy(n,e){for(var t=e+"Capture",r=[];n!==null;){var i=n,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Vf(n,t),s!=null&&r.unshift(qf(n,s,i)),s=Vf(n,e),s!=null&&r.push(qf(n,s,i))),n=n.return}return r}function cu(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function dP(n,e,t,r,i){for(var s=e._reactName,o=[];t!==null&&t!==r;){var a=t,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Vf(t,s),l!=null&&o.unshift(qf(t,l,a))):i||(l=Vf(t,s),l!=null&&o.push(qf(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var sj=/\r\n?/g,oj=/\u0000|\uFFFD/g;function hP(n){return(typeof n=="string"?n:""+n).replace(sj,`
`).replace(oj,"")}function vg(n,e,t){if(e=hP(e),hP(n)!==e&&t)throw Error(Pe(425))}function vy(){}var YS=null,KS=null;function ZS(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var JS=typeof setTimeout=="function"?setTimeout:void 0,aj=typeof clearTimeout=="function"?clearTimeout:void 0,fP=typeof Promise=="function"?Promise:void 0,lj=typeof queueMicrotask=="function"?queueMicrotask:typeof fP<"u"?function(n){return fP.resolve(null).then(n).catch(cj)}:JS;function cj(n){setTimeout(function(){throw n})}function qx(n,e){var t=e,r=0;do{var i=t.nextSibling;if(n.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(r===0){n.removeChild(i),Wf(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=i}while(t);Wf(e)}function Xa(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function pP(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var nh=Math.random().toString(36).slice(2),eo="__reactFiber$"+nh,Yf="__reactProps$"+nh,qo="__reactContainer$"+nh,QS="__reactEvents$"+nh,uj="__reactListeners$"+nh,dj="__reactHandles$"+nh;function oc(n){var e=n[eo];if(e)return e;for(var t=n.parentNode;t;){if(e=t[qo]||t[eo]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=pP(n);n!==null;){if(t=n[eo])return t;n=pP(n)}return e}n=t,t=n.parentNode}return null}function Hp(n){return n=n[eo]||n[qo],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function qu(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(Pe(33))}function y0(n){return n[Yf]||null}var eb=[],Yu=-1;function vl(n){return{current:n}}function vn(n){0>Yu||(n.current=eb[Yu],eb[Yu]=null,Yu--)}function dn(n,e){Yu++,eb[Yu]=n.current,n.current=e}var il={},Vr=vl(il),pi=vl(!1),Pc=il;function Ld(n,e){var t=n.type.contextTypes;if(!t)return il;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in t)i[s]=e[s];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function mi(n){return n=n.childContextTypes,n!=null}function yy(){vn(pi),vn(Vr)}function mP(n,e,t){if(Vr.current!==il)throw Error(Pe(168));dn(Vr,e),dn(pi,t)}function $O(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Pe(108,YV(n)||"Unknown",i));return Pn({},t,r)}function _y(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||il,Pc=Vr.current,dn(Vr,n),dn(pi,pi.current),!0}function gP(n,e,t){var r=n.stateNode;if(!r)throw Error(Pe(169));t?(n=$O(n,e,Pc),r.__reactInternalMemoizedMergedChildContext=n,vn(pi),vn(Vr),dn(Vr,n)):vn(pi),dn(pi,t)}var No=null,_0=!1,Yx=!1;function XO(n){No===null?No=[n]:No.push(n)}function hj(n){_0=!0,XO(n)}function yl(){if(!Yx&&No!==null){Yx=!0;var n=0,e=on;try{var t=No;for(on=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}No=null,_0=!1}catch(i){throw No!==null&&(No=No.slice(n+1)),yO(SE,yl),i}finally{on=e,Yx=!1}}return null}var Ku=[],Zu=0,xy=null,wy=0,ns=[],rs=0,Rc=null,Bo=1,zo="";function ql(n,e){Ku[Zu++]=wy,Ku[Zu++]=xy,xy=n,wy=e}function qO(n,e,t){ns[rs++]=Bo,ns[rs++]=zo,ns[rs++]=Rc,Rc=n;var r=Bo;n=zo;var i=32-Is(r)-1;r&=~(1<<i),t+=1;var s=32-Is(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Bo=1<<32-Is(e)+i|t<<i|r,zo=s+n}else Bo=1<<s|t<<i|r,zo=n}function IE(n){n.return!==null&&(ql(n,1),qO(n,1,0))}function LE(n){for(;n===xy;)xy=Ku[--Zu],Ku[Zu]=null,wy=Ku[--Zu],Ku[Zu]=null;for(;n===Rc;)Rc=ns[--rs],ns[rs]=null,zo=ns[--rs],ns[rs]=null,Bo=ns[--rs],ns[rs]=null}var ki=null,Li=null,wn=!1,As=null;function YO(n,e){var t=is(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function vP(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,ki=n,Li=Xa(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,ki=n,Li=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Rc!==null?{id:Bo,overflow:zo}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=is(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,ki=n,Li=null,!0):!1;default:return!1}}function tb(n){return(n.mode&1)!==0&&(n.flags&128)===0}function nb(n){if(wn){var e=Li;if(e){var t=e;if(!vP(n,e)){if(tb(n))throw Error(Pe(418));e=Xa(t.nextSibling);var r=ki;e&&vP(n,e)?YO(r,t):(n.flags=n.flags&-4097|2,wn=!1,ki=n)}}else{if(tb(n))throw Error(Pe(418));n.flags=n.flags&-4097|2,wn=!1,ki=n}}}function yP(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;ki=n}function yg(n){if(n!==ki)return!1;if(!wn)return yP(n),wn=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!ZS(n.type,n.memoizedProps)),e&&(e=Li)){if(tb(n))throw KO(),Error(Pe(418));for(;e;)YO(n,e),e=Xa(e.nextSibling)}if(yP(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(Pe(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){Li=Xa(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}Li=null}}else Li=ki?Xa(n.stateNode.nextSibling):null;return!0}function KO(){for(var n=Li;n;)n=Xa(n.nextSibling)}function kd(){Li=ki=null,wn=!1}function kE(n){As===null?As=[n]:As.push(n)}var fj=ra.ReactCurrentBatchConfig;function zh(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(Pe(309));var r=t.stateNode}if(!r)throw Error(Pe(147,n));var i=r,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(Pe(284));if(!t._owner)throw Error(Pe(290,n))}return n}function _g(n,e){throw n=Object.prototype.toString.call(e),Error(Pe(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function _P(n){var e=n._init;return e(n._payload)}function ZO(n){function e(g,w){if(n){var S=g.deletions;S===null?(g.deletions=[w],g.flags|=16):S.push(w)}}function t(g,w){if(!n)return null;for(;w!==null;)e(g,w),w=w.sibling;return null}function r(g,w){for(g=new Map;w!==null;)w.key!==null?g.set(w.key,w):g.set(w.index,w),w=w.sibling;return g}function i(g,w){return g=Za(g,w),g.index=0,g.sibling=null,g}function s(g,w,S){return g.index=S,n?(S=g.alternate,S!==null?(S=S.index,S<w?(g.flags|=2,w):S):(g.flags|=2,w)):(g.flags|=1048576,w)}function o(g){return n&&g.alternate===null&&(g.flags|=2),g}function a(g,w,S,E){return w===null||w.tag!==6?(w=nw(S,g.mode,E),w.return=g,w):(w=i(w,S),w.return=g,w)}function l(g,w,S,E){var A=S.type;return A===Wu?d(g,w,S.props.children,E,S.key):w!==null&&(w.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===Ca&&_P(A)===w.type)?(E=i(w,S.props),E.ref=zh(g,w,S),E.return=g,E):(E=qv(S.type,S.key,S.props,null,g.mode,E),E.ref=zh(g,w,S),E.return=g,E)}function c(g,w,S,E){return w===null||w.tag!==4||w.stateNode.containerInfo!==S.containerInfo||w.stateNode.implementation!==S.implementation?(w=rw(S,g.mode,E),w.return=g,w):(w=i(w,S.children||[]),w.return=g,w)}function d(g,w,S,E,A){return w===null||w.tag!==7?(w=Sc(S,g.mode,E,A),w.return=g,w):(w=i(w,S),w.return=g,w)}function f(g,w,S){if(typeof w=="string"&&w!==""||typeof w=="number")return w=nw(""+w,g.mode,S),w.return=g,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case lg:return S=qv(w.type,w.key,w.props,null,g.mode,S),S.ref=zh(g,null,w),S.return=g,S;case Hu:return w=rw(w,g.mode,S),w.return=g,w;case Ca:var E=w._init;return f(g,E(w._payload),S)}if(af(w)||Nh(w))return w=Sc(w,g.mode,S,null),w.return=g,w;_g(g,w)}return null}function p(g,w,S,E){var A=w!==null?w.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return A!==null?null:a(g,w,""+S,E);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case lg:return S.key===A?l(g,w,S,E):null;case Hu:return S.key===A?c(g,w,S,E):null;case Ca:return A=S._init,p(g,w,A(S._payload),E)}if(af(S)||Nh(S))return A!==null?null:d(g,w,S,E,null);_g(g,S)}return null}function m(g,w,S,E,A){if(typeof E=="string"&&E!==""||typeof E=="number")return g=g.get(S)||null,a(w,g,""+E,A);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case lg:return g=g.get(E.key===null?S:E.key)||null,l(w,g,E,A);case Hu:return g=g.get(E.key===null?S:E.key)||null,c(w,g,E,A);case Ca:var T=E._init;return m(g,w,S,T(E._payload),A)}if(af(E)||Nh(E))return g=g.get(S)||null,d(w,g,E,A,null);_g(w,E)}return null}function v(g,w,S,E){for(var A=null,T=null,P=w,k=w=0,R=null;P!==null&&k<S.length;k++){P.index>k?(R=P,P=null):R=P.sibling;var I=p(g,P,S[k],E);if(I===null){P===null&&(P=R);break}n&&P&&I.alternate===null&&e(g,P),w=s(I,w,k),T===null?A=I:T.sibling=I,T=I,P=R}if(k===S.length)return t(g,P),wn&&ql(g,k),A;if(P===null){for(;k<S.length;k++)P=f(g,S[k],E),P!==null&&(w=s(P,w,k),T===null?A=P:T.sibling=P,T=P);return wn&&ql(g,k),A}for(P=r(g,P);k<S.length;k++)R=m(P,g,k,S[k],E),R!==null&&(n&&R.alternate!==null&&P.delete(R.key===null?k:R.key),w=s(R,w,k),T===null?A=R:T.sibling=R,T=R);return n&&P.forEach(function(H){return e(g,H)}),wn&&ql(g,k),A}function x(g,w,S,E){var A=Nh(S);if(typeof A!="function")throw Error(Pe(150));if(S=A.call(S),S==null)throw Error(Pe(151));for(var T=A=null,P=w,k=w=0,R=null,I=S.next();P!==null&&!I.done;k++,I=S.next()){P.index>k?(R=P,P=null):R=P.sibling;var H=p(g,P,I.value,E);if(H===null){P===null&&(P=R);break}n&&P&&H.alternate===null&&e(g,P),w=s(H,w,k),T===null?A=H:T.sibling=H,T=H,P=R}if(I.done)return t(g,P),wn&&ql(g,k),A;if(P===null){for(;!I.done;k++,I=S.next())I=f(g,I.value,E),I!==null&&(w=s(I,w,k),T===null?A=I:T.sibling=I,T=I);return wn&&ql(g,k),A}for(P=r(g,P);!I.done;k++,I=S.next())I=m(P,g,k,I.value,E),I!==null&&(n&&I.alternate!==null&&P.delete(I.key===null?k:I.key),w=s(I,w,k),T===null?A=I:T.sibling=I,T=I);return n&&P.forEach(function(G){return e(g,G)}),wn&&ql(g,k),A}function y(g,w,S,E){if(typeof S=="object"&&S!==null&&S.type===Wu&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case lg:e:{for(var A=S.key,T=w;T!==null;){if(T.key===A){if(A=S.type,A===Wu){if(T.tag===7){t(g,T.sibling),w=i(T,S.props.children),w.return=g,g=w;break e}}else if(T.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===Ca&&_P(A)===T.type){t(g,T.sibling),w=i(T,S.props),w.ref=zh(g,T,S),w.return=g,g=w;break e}t(g,T);break}else e(g,T);T=T.sibling}S.type===Wu?(w=Sc(S.props.children,g.mode,E,S.key),w.return=g,g=w):(E=qv(S.type,S.key,S.props,null,g.mode,E),E.ref=zh(g,w,S),E.return=g,g=E)}return o(g);case Hu:e:{for(T=S.key;w!==null;){if(w.key===T)if(w.tag===4&&w.stateNode.containerInfo===S.containerInfo&&w.stateNode.implementation===S.implementation){t(g,w.sibling),w=i(w,S.children||[]),w.return=g,g=w;break e}else{t(g,w);break}else e(g,w);w=w.sibling}w=rw(S,g.mode,E),w.return=g,g=w}return o(g);case Ca:return T=S._init,y(g,w,T(S._payload),E)}if(af(S))return v(g,w,S,E);if(Nh(S))return x(g,w,S,E);_g(g,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,w!==null&&w.tag===6?(t(g,w.sibling),w=i(w,S),w.return=g,g=w):(t(g,w),w=nw(S,g.mode,E),w.return=g,g=w),o(g)):t(g,w)}return y}var Od=ZO(!0),JO=ZO(!1),Sy=vl(null),by=null,Ju=null,OE=null;function NE(){OE=Ju=by=null}function DE(n){var e=Sy.current;vn(Sy),n._currentValue=e}function rb(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function gd(n,e){by=n,OE=Ju=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(fi=!0),n.firstContext=null)}function os(n){var e=n._currentValue;if(OE!==n)if(n={context:n,memoizedValue:e,next:null},Ju===null){if(by===null)throw Error(Pe(308));Ju=n,by.dependencies={lanes:0,firstContext:n}}else Ju=Ju.next=n;return e}var ac=null;function UE(n){ac===null?ac=[n]:ac.push(n)}function QO(n,e,t,r){var i=e.interleaved;return i===null?(t.next=t,UE(e)):(t.next=i.next,i.next=t),e.interleaved=t,Yo(n,r)}function Yo(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var Pa=!1;function FE(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function eN(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Ho(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function qa(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,Yt&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Yo(n,t)}return i=r.interleaved,i===null?(e.next=e,UE(r)):(e.next=i.next,i.next=e),r.interleaved=e,Yo(n,t)}function jv(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,bE(n,t)}}function xP(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var i=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?i=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?i=s=e:s=s.next=e}else i=s=e;t={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function Ey(n,e,t,r){var i=n.updateQueue;Pa=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var d=n.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(s!==null){var f=i.baseState;o=0,d=c=l=null,a=s;do{var p=a.lane,m=a.eventTime;if((r&p)===p){d!==null&&(d=d.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=n,x=a;switch(p=e,m=t,x.tag){case 1:if(v=x.payload,typeof v=="function"){f=v.call(m,f,p);break e}f=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=x.payload,p=typeof v=="function"?v.call(m,f,p):v,p==null)break e;f=Pn({},f,p);break e;case 2:Pa=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=m,l=f):d=d.next=m,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(d===null&&(l=f),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Lc|=o,n.lanes=o,n.memoizedState=f}}function wP(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],i=r.callback;if(i!==null){if(r.callback=null,r=t,typeof i!="function")throw Error(Pe(191,i));i.call(r)}}}var Wp={},io=vl(Wp),Kf=vl(Wp),Zf=vl(Wp);function lc(n){if(n===Wp)throw Error(Pe(174));return n}function BE(n,e){switch(dn(Zf,e),dn(Kf,n),dn(io,Wp),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:US(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=US(e,n)}vn(io),dn(io,e)}function Nd(){vn(io),vn(Kf),vn(Zf)}function tN(n){lc(Zf.current);var e=lc(io.current),t=US(e,n.type);e!==t&&(dn(Kf,n),dn(io,t))}function zE(n){Kf.current===n&&(vn(io),vn(Kf))}var Mn=vl(0);function My(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Kx=[];function VE(){for(var n=0;n<Kx.length;n++)Kx[n]._workInProgressVersionPrimary=null;Kx.length=0}var Hv=ra.ReactCurrentDispatcher,Zx=ra.ReactCurrentBatchConfig,Ic=0,Cn=null,er=null,pr=null,Ty=!1,wf=!1,Jf=0,pj=0;function Cr(){throw Error(Pe(321))}function jE(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!ks(n[t],e[t]))return!1;return!0}function HE(n,e,t,r,i,s){if(Ic=s,Cn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Hv.current=n===null||n.memoizedState===null?yj:_j,n=t(r,i),wf){s=0;do{if(wf=!1,Jf=0,25<=s)throw Error(Pe(301));s+=1,pr=er=null,e.updateQueue=null,Hv.current=xj,n=t(r,i)}while(wf)}if(Hv.current=Ay,e=er!==null&&er.next!==null,Ic=0,pr=er=Cn=null,Ty=!1,e)throw Error(Pe(300));return n}function WE(){var n=Jf!==0;return Jf=0,n}function Ks(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pr===null?Cn.memoizedState=pr=n:pr=pr.next=n,pr}function as(){if(er===null){var n=Cn.alternate;n=n!==null?n.memoizedState:null}else n=er.next;var e=pr===null?Cn.memoizedState:pr.next;if(e!==null)pr=e,er=n;else{if(n===null)throw Error(Pe(310));er=n,n={memoizedState:er.memoizedState,baseState:er.baseState,baseQueue:er.baseQueue,queue:er.queue,next:null},pr===null?Cn.memoizedState=pr=n:pr=pr.next=n}return pr}function Qf(n,e){return typeof e=="function"?e(n):e}function Jx(n){var e=as(),t=e.queue;if(t===null)throw Error(Pe(311));t.lastRenderedReducer=n;var r=er,i=r.baseQueue,s=t.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,t.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var d=c.lane;if((Ic&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:n(r,c.action);else{var f={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,Cn.lanes|=d,Lc|=d}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,ks(r,e.memoizedState)||(fi=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,t.lastRenderedState=r}if(n=t.interleaved,n!==null){i=n;do s=i.lane,Cn.lanes|=s,Lc|=s,i=i.next;while(i!==n)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function Qx(n){var e=as(),t=e.queue;if(t===null)throw Error(Pe(311));t.lastRenderedReducer=n;var r=t.dispatch,i=t.pending,s=e.memoizedState;if(i!==null){t.pending=null;var o=i=i.next;do s=n(s,o.action),o=o.next;while(o!==i);ks(s,e.memoizedState)||(fi=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,r]}function nN(){}function rN(n,e){var t=Cn,r=as(),i=e(),s=!ks(r.memoizedState,i);if(s&&(r.memoizedState=i,fi=!0),r=r.queue,GE(oN.bind(null,t,r,n),[n]),r.getSnapshot!==e||s||pr!==null&&pr.memoizedState.tag&1){if(t.flags|=2048,ep(9,sN.bind(null,t,r,i,e),void 0,null),mr===null)throw Error(Pe(349));Ic&30||iN(t,e,i)}return i}function iN(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=Cn.updateQueue,e===null?(e={lastEffect:null,stores:null},Cn.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function sN(n,e,t,r){e.value=t,e.getSnapshot=r,aN(e)&&lN(n)}function oN(n,e,t){return t(function(){aN(e)&&lN(n)})}function aN(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!ks(n,t)}catch{return!0}}function lN(n){var e=Yo(n,1);e!==null&&Ls(e,n,1,-1)}function SP(n){var e=Ks();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Qf,lastRenderedState:n},e.queue=n,n=n.dispatch=vj.bind(null,Cn,n),[e.memoizedState,n]}function ep(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=Cn.updateQueue,e===null?(e={lastEffect:null,stores:null},Cn.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function cN(){return as().memoizedState}function Wv(n,e,t,r){var i=Ks();Cn.flags|=n,i.memoizedState=ep(1|e,t,void 0,r===void 0?null:r)}function x0(n,e,t,r){var i=as();r=r===void 0?null:r;var s=void 0;if(er!==null){var o=er.memoizedState;if(s=o.destroy,r!==null&&jE(r,o.deps)){i.memoizedState=ep(e,t,s,r);return}}Cn.flags|=n,i.memoizedState=ep(1|e,t,s,r)}function bP(n,e){return Wv(8390656,8,n,e)}function GE(n,e){return x0(2048,8,n,e)}function uN(n,e){return x0(4,2,n,e)}function dN(n,e){return x0(4,4,n,e)}function hN(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function fN(n,e,t){return t=t!=null?t.concat([n]):null,x0(4,4,hN.bind(null,e,n),t)}function $E(){}function pN(n,e){var t=as();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&jE(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function mN(n,e){var t=as();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&jE(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function gN(n,e,t){return Ic&21?(ks(t,e)||(t=wO(),Cn.lanes|=t,Lc|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,fi=!0),n.memoizedState=t)}function mj(n,e){var t=on;on=t!==0&&4>t?t:4,n(!0);var r=Zx.transition;Zx.transition={};try{n(!1),e()}finally{on=t,Zx.transition=r}}function vN(){return as().memoizedState}function gj(n,e,t){var r=Ka(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},yN(n))_N(e,t);else if(t=QO(n,e,t,r),t!==null){var i=Jr();Ls(t,n,r,i),xN(t,e,r)}}function vj(n,e,t){var r=Ka(n),i={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(yN(n))_N(e,i);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(i.hasEagerState=!0,i.eagerState=a,ks(a,o)){var l=e.interleaved;l===null?(i.next=i,UE(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}t=QO(n,e,i,r),t!==null&&(i=Jr(),Ls(t,n,r,i),xN(t,e,r))}}function yN(n){var e=n.alternate;return n===Cn||e!==null&&e===Cn}function _N(n,e){wf=Ty=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function xN(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,bE(n,t)}}var Ay={readContext:os,useCallback:Cr,useContext:Cr,useEffect:Cr,useImperativeHandle:Cr,useInsertionEffect:Cr,useLayoutEffect:Cr,useMemo:Cr,useReducer:Cr,useRef:Cr,useState:Cr,useDebugValue:Cr,useDeferredValue:Cr,useTransition:Cr,useMutableSource:Cr,useSyncExternalStore:Cr,useId:Cr,unstable_isNewReconciler:!1},yj={readContext:os,useCallback:function(n,e){return Ks().memoizedState=[n,e===void 0?null:e],n},useContext:os,useEffect:bP,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,Wv(4194308,4,hN.bind(null,e,n),t)},useLayoutEffect:function(n,e){return Wv(4194308,4,n,e)},useInsertionEffect:function(n,e){return Wv(4,2,n,e)},useMemo:function(n,e){var t=Ks();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=Ks();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=gj.bind(null,Cn,n),[r.memoizedState,n]},useRef:function(n){var e=Ks();return n={current:n},e.memoizedState=n},useState:SP,useDebugValue:$E,useDeferredValue:function(n){return Ks().memoizedState=n},useTransition:function(){var n=SP(!1),e=n[0];return n=mj.bind(null,n[1]),Ks().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=Cn,i=Ks();if(wn){if(t===void 0)throw Error(Pe(407));t=t()}else{if(t=e(),mr===null)throw Error(Pe(349));Ic&30||iN(r,e,t)}i.memoizedState=t;var s={value:t,getSnapshot:e};return i.queue=s,bP(oN.bind(null,r,s,n),[n]),r.flags|=2048,ep(9,sN.bind(null,r,s,t,e),void 0,null),t},useId:function(){var n=Ks(),e=mr.identifierPrefix;if(wn){var t=zo,r=Bo;t=(r&~(1<<32-Is(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=Jf++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=pj++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},_j={readContext:os,useCallback:pN,useContext:os,useEffect:GE,useImperativeHandle:fN,useInsertionEffect:uN,useLayoutEffect:dN,useMemo:mN,useReducer:Jx,useRef:cN,useState:function(){return Jx(Qf)},useDebugValue:$E,useDeferredValue:function(n){var e=as();return gN(e,er.memoizedState,n)},useTransition:function(){var n=Jx(Qf)[0],e=as().memoizedState;return[n,e]},useMutableSource:nN,useSyncExternalStore:rN,useId:vN,unstable_isNewReconciler:!1},xj={readContext:os,useCallback:pN,useContext:os,useEffect:GE,useImperativeHandle:fN,useInsertionEffect:uN,useLayoutEffect:dN,useMemo:mN,useReducer:Qx,useRef:cN,useState:function(){return Qx(Qf)},useDebugValue:$E,useDeferredValue:function(n){var e=as();return er===null?e.memoizedState=n:gN(e,er.memoizedState,n)},useTransition:function(){var n=Qx(Qf)[0],e=as().memoizedState;return[n,e]},useMutableSource:nN,useSyncExternalStore:rN,useId:vN,unstable_isNewReconciler:!1};function _s(n,e){if(n&&n.defaultProps){e=Pn({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function ib(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:Pn({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var w0={isMounted:function(n){return(n=n._reactInternals)?zc(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=Jr(),i=Ka(n),s=Ho(r,i);s.payload=e,t!=null&&(s.callback=t),e=qa(n,s,i),e!==null&&(Ls(e,n,i,r),jv(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=Jr(),i=Ka(n),s=Ho(r,i);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=qa(n,s,i),e!==null&&(Ls(e,n,i,r),jv(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Jr(),r=Ka(n),i=Ho(t,r);i.tag=2,e!=null&&(i.callback=e),e=qa(n,i,r),e!==null&&(Ls(e,n,r,t),jv(e,n,r))}};function EP(n,e,t,r,i,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!$f(t,r)||!$f(i,s):!0}function wN(n,e,t){var r=!1,i=il,s=e.contextType;return typeof s=="object"&&s!==null?s=os(s):(i=mi(e)?Pc:Vr.current,r=e.contextTypes,s=(r=r!=null)?Ld(n,i):il),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=w0,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=s),e}function MP(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&w0.enqueueReplaceState(e,e.state,null)}function sb(n,e,t,r){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs={},FE(n);var s=e.contextType;typeof s=="object"&&s!==null?i.context=os(s):(s=mi(e)?Pc:Vr.current,i.context=Ld(n,s)),i.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(ib(n,e,s,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&w0.enqueueReplaceState(i,i.state,null),Ey(n,t,i,r),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function Dd(n,e){try{var t="",r=e;do t+=qV(r),r=r.return;while(r);var i=t}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:i,digest:null}}function ew(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function ob(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var wj=typeof WeakMap=="function"?WeakMap:Map;function SN(n,e,t){t=Ho(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){Py||(Py=!0,gb=r),ob(n,e)},t}function bN(n,e,t){t=Ho(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;t.payload=function(){return r(i)},t.callback=function(){ob(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){ob(n,e),typeof r!="function"&&(Ya===null?Ya=new Set([this]):Ya.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function TP(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new wj;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(t)||(i.add(t),n=Nj.bind(null,n,e,t),e.then(n,n))}function AP(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function CP(n,e,t,r,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Ho(-1,1),e.tag=2,qa(t,e,1))),t.lanes|=1),n)}var Sj=ra.ReactCurrentOwner,fi=!1;function qr(n,e,t,r){e.child=n===null?JO(e,null,t,r):Od(e,n.child,t,r)}function PP(n,e,t,r,i){t=t.render;var s=e.ref;return gd(e,i),r=HE(n,e,t,r,s,i),t=WE(),n!==null&&!fi?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Ko(n,e,i)):(wn&&t&&IE(e),e.flags|=1,qr(n,e,r,i),e.child)}function RP(n,e,t,r,i){if(n===null){var s=t.type;return typeof s=="function"&&!eM(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,EN(n,e,s,r,i)):(n=qv(t.type,null,r,e,e.mode,i),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&i)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:$f,t(o,r)&&n.ref===e.ref)return Ko(n,e,i)}return e.flags|=1,n=Za(s,r),n.ref=e.ref,n.return=e,e.child=n}function EN(n,e,t,r,i){if(n!==null){var s=n.memoizedProps;if($f(s,r)&&n.ref===e.ref)if(fi=!1,e.pendingProps=r=s,(n.lanes&i)!==0)n.flags&131072&&(fi=!0);else return e.lanes=n.lanes,Ko(n,e,i)}return ab(n,e,t,r,i)}function MN(n,e,t){var r=e.pendingProps,i=r.children,s=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},dn(ed,Ai),Ai|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,dn(ed,Ai),Ai|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:t,dn(ed,Ai),Ai|=r}else s!==null?(r=s.baseLanes|t,e.memoizedState=null):r=t,dn(ed,Ai),Ai|=r;return qr(n,e,i,t),e.child}function TN(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function ab(n,e,t,r,i){var s=mi(t)?Pc:Vr.current;return s=Ld(e,s),gd(e,i),t=HE(n,e,t,r,s,i),r=WE(),n!==null&&!fi?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Ko(n,e,i)):(wn&&r&&IE(e),e.flags|=1,qr(n,e,t,i),e.child)}function IP(n,e,t,r,i){if(mi(t)){var s=!0;_y(e)}else s=!1;if(gd(e,i),e.stateNode===null)Gv(n,e),wN(e,t,r),sb(e,t,r,i),r=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=t.contextType;typeof c=="object"&&c!==null?c=os(c):(c=mi(t)?Pc:Vr.current,c=Ld(e,c));var d=t.getDerivedStateFromProps,f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&MP(e,o,r,c),Pa=!1;var p=e.memoizedState;o.state=p,Ey(e,r,o,i),l=e.memoizedState,a!==r||p!==l||pi.current||Pa?(typeof d=="function"&&(ib(e,t,d,r),l=e.memoizedState),(a=Pa||EP(e,t,a,r,p,l,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,eN(n,e),a=e.memoizedProps,c=e.type===e.elementType?a:_s(e.type,a),o.props=c,f=e.pendingProps,p=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=os(l):(l=mi(t)?Pc:Vr.current,l=Ld(e,l));var m=t.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||p!==l)&&MP(e,o,r,l),Pa=!1,p=e.memoizedState,o.state=p,Ey(e,r,o,i);var v=e.memoizedState;a!==f||p!==v||pi.current||Pa?(typeof m=="function"&&(ib(e,t,m,r),v=e.memoizedState),(c=Pa||EP(e,t,c,r,p,v,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),o.props=r,o.state=v,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),r=!1)}return lb(n,e,t,r,s,i)}function lb(n,e,t,r,i,s){TN(n,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&gP(e,t,!1),Ko(n,e,s);r=e.stateNode,Sj.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&o?(e.child=Od(e,n.child,null,s),e.child=Od(e,null,a,s)):qr(n,e,a,s),e.memoizedState=r.state,i&&gP(e,t,!0),e.child}function AN(n){var e=n.stateNode;e.pendingContext?mP(n,e.pendingContext,e.pendingContext!==e.context):e.context&&mP(n,e.context,!1),BE(n,e.containerInfo)}function LP(n,e,t,r,i){return kd(),kE(i),e.flags|=256,qr(n,e,t,r),e.child}var cb={dehydrated:null,treeContext:null,retryLane:0};function ub(n){return{baseLanes:n,cachePool:null,transitions:null}}function CN(n,e,t){var r=e.pendingProps,i=Mn.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),dn(Mn,i&1),n===null)return nb(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,n=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=E0(o,r,0,null),n=Sc(n,r,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=ub(t),e.memoizedState=cb,n):XE(e,o));if(i=n.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return bj(n,e,o,r,a,i,t);if(s){s=r.fallback,o=e.mode,i=n.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Za(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Za(a,s):(s=Sc(s,o,t,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=n.child.memoizedState,o=o===null?ub(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=cb,r}return s=n.child,n=s.sibling,r=Za(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function XE(n,e){return e=E0({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function xg(n,e,t,r){return r!==null&&kE(r),Od(e,n.child,null,t),n=XE(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function bj(n,e,t,r,i,s,o){if(t)return e.flags&256?(e.flags&=-257,r=ew(Error(Pe(422))),xg(n,e,o,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=E0({mode:"visible",children:r.children},i,0,null),s=Sc(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Od(e,n.child,null,o),e.child.memoizedState=ub(o),e.memoizedState=cb,s);if(!(e.mode&1))return xg(n,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Pe(419)),r=ew(s,r,void 0),xg(n,e,o,r)}if(a=(o&n.childLanes)!==0,fi||a){if(r=mr,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Yo(n,i),Ls(r,n,i,-1))}return QE(),r=ew(Error(Pe(421))),xg(n,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=n.child,e=Dj.bind(null,n),i._reactRetry=e,null):(n=s.treeContext,Li=Xa(i.nextSibling),ki=e,wn=!0,As=null,n!==null&&(ns[rs++]=Bo,ns[rs++]=zo,ns[rs++]=Rc,Bo=n.id,zo=n.overflow,Rc=e),e=XE(e,r.children),e.flags|=4096,e)}function kP(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),rb(n.return,e,t)}function tw(n,e,t,r,i){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=t,s.tailMode=i)}function PN(n,e,t){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(qr(n,e,r.children,t),r=Mn.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&kP(n,t,e);else if(n.tag===19)kP(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(dn(Mn,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&My(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),tw(e,!1,i,t,s);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&My(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}tw(e,!0,t,null,s);break;case"together":tw(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Gv(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Ko(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Lc|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(Pe(153));if(e.child!==null){for(n=e.child,t=Za(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=Za(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function Ej(n,e,t){switch(e.tag){case 3:AN(e),kd();break;case 5:tN(e);break;case 1:mi(e.type)&&_y(e);break;case 4:BE(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;dn(Sy,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(dn(Mn,Mn.current&1),e.flags|=128,null):t&e.child.childLanes?CN(n,e,t):(dn(Mn,Mn.current&1),n=Ko(n,e,t),n!==null?n.sibling:null);dn(Mn,Mn.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return PN(n,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),dn(Mn,Mn.current),r)break;return null;case 22:case 23:return e.lanes=0,MN(n,e,t)}return Ko(n,e,t)}var RN,db,IN,LN;RN=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};db=function(){};IN=function(n,e,t,r){var i=n.memoizedProps;if(i!==r){n=e.stateNode,lc(io.current);var s=null;switch(t){case"input":i=kS(n,i),r=kS(n,r),s=[];break;case"select":i=Pn({},i,{value:void 0}),r=Pn({},r,{value:void 0}),s=[];break;case"textarea":i=DS(n,i),r=DS(n,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=vy)}FS(t,r);var o;t=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Bf.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Bf.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&mn("scroll",n),s||a===l||(s=[])):(s=s||[]).push(c,l))}t&&(s=s||[]).push("style",t);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};LN=function(n,e,t,r){t!==r&&(e.flags|=4)};function Vh(n,e){if(!wn)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function Pr(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function Mj(n,e,t){var r=e.pendingProps;switch(LE(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pr(e),null;case 1:return mi(e.type)&&yy(),Pr(e),null;case 3:return r=e.stateNode,Nd(),vn(pi),vn(Vr),VE(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(yg(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,As!==null&&(_b(As),As=null))),db(n,e),Pr(e),null;case 5:zE(e);var i=lc(Zf.current);if(t=e.type,n!==null&&e.stateNode!=null)IN(n,e,t,r,i),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Pe(166));return Pr(e),null}if(n=lc(io.current),yg(e)){r=e.stateNode,t=e.type;var s=e.memoizedProps;switch(r[eo]=e,r[Yf]=s,n=(e.mode&1)!==0,t){case"dialog":mn("cancel",r),mn("close",r);break;case"iframe":case"object":case"embed":mn("load",r);break;case"video":case"audio":for(i=0;i<cf.length;i++)mn(cf[i],r);break;case"source":mn("error",r);break;case"img":case"image":case"link":mn("error",r),mn("load",r);break;case"details":mn("toggle",r);break;case"input":jC(r,s),mn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},mn("invalid",r);break;case"textarea":WC(r,s),mn("invalid",r)}FS(t,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&vg(r.textContent,a,n),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&vg(r.textContent,a,n),i=["children",""+a]):Bf.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&mn("scroll",r)}switch(t){case"input":cg(r),HC(r,s,!0);break;case"textarea":cg(r),GC(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=vy)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=oO(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=o.createElement(t,{is:r.is}):(n=o.createElement(t),t==="select"&&(o=n,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):n=o.createElementNS(n,t),n[eo]=e,n[Yf]=r,RN(n,e,!1,!1),e.stateNode=n;e:{switch(o=BS(t,r),t){case"dialog":mn("cancel",n),mn("close",n),i=r;break;case"iframe":case"object":case"embed":mn("load",n),i=r;break;case"video":case"audio":for(i=0;i<cf.length;i++)mn(cf[i],n);i=r;break;case"source":mn("error",n),i=r;break;case"img":case"image":case"link":mn("error",n),mn("load",n),i=r;break;case"details":mn("toggle",n),i=r;break;case"input":jC(n,r),i=kS(n,r),mn("invalid",n);break;case"option":i=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},i=Pn({},r,{value:void 0}),mn("invalid",n);break;case"textarea":WC(n,r),i=DS(n,r),mn("invalid",n);break;default:i=r}FS(t,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?cO(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&aO(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&zf(n,l):typeof l=="number"&&zf(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Bf.hasOwnProperty(s)?l!=null&&s==="onScroll"&&mn("scroll",n):l!=null&&vE(n,s,l,o))}switch(t){case"input":cg(n),HC(n,r,!1);break;case"textarea":cg(n),GC(n);break;case"option":r.value!=null&&n.setAttribute("value",""+rl(r.value));break;case"select":n.multiple=!!r.multiple,s=r.value,s!=null?hd(n,!!r.multiple,s,!1):r.defaultValue!=null&&hd(n,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=vy)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Pr(e),null;case 6:if(n&&e.stateNode!=null)LN(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Pe(166));if(t=lc(Zf.current),lc(io.current),yg(e)){if(r=e.stateNode,t=e.memoizedProps,r[eo]=e,(s=r.nodeValue!==t)&&(n=ki,n!==null))switch(n.tag){case 3:vg(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&vg(r.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[eo]=e,e.stateNode=r}return Pr(e),null;case 13:if(vn(Mn),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(wn&&Li!==null&&e.mode&1&&!(e.flags&128))KO(),kd(),e.flags|=98560,s=!1;else if(s=yg(e),r!==null&&r.dehydrated!==null){if(n===null){if(!s)throw Error(Pe(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Pe(317));s[eo]=e}else kd(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Pr(e),s=!1}else As!==null&&(_b(As),As=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||Mn.current&1?ir===0&&(ir=3):QE())),e.updateQueue!==null&&(e.flags|=4),Pr(e),null);case 4:return Nd(),db(n,e),n===null&&Xf(e.stateNode.containerInfo),Pr(e),null;case 10:return DE(e.type._context),Pr(e),null;case 17:return mi(e.type)&&yy(),Pr(e),null;case 19:if(vn(Mn),s=e.memoizedState,s===null)return Pr(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Vh(s,!1);else{if(ir!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=My(n),o!==null){for(e.flags|=128,Vh(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)s=t,n=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return dn(Mn,Mn.current&1|2),e.child}n=n.sibling}s.tail!==null&&Hn()>Ud&&(e.flags|=128,r=!0,Vh(s,!1),e.lanes=4194304)}else{if(!r)if(n=My(o),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Vh(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!wn)return Pr(e),null}else 2*Hn()-s.renderingStartTime>Ud&&t!==1073741824&&(e.flags|=128,r=!0,Vh(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Hn(),e.sibling=null,t=Mn.current,dn(Mn,r?t&1|2:t&1),e):(Pr(e),null);case 22:case 23:return JE(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ai&1073741824&&(Pr(e),e.subtreeFlags&6&&(e.flags|=8192)):Pr(e),null;case 24:return null;case 25:return null}throw Error(Pe(156,e.tag))}function Tj(n,e){switch(LE(e),e.tag){case 1:return mi(e.type)&&yy(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return Nd(),vn(pi),vn(Vr),VE(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return zE(e),null;case 13:if(vn(Mn),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(Pe(340));kd()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return vn(Mn),null;case 4:return Nd(),null;case 10:return DE(e.type._context),null;case 22:case 23:return JE(),null;case 24:return null;default:return null}}var wg=!1,Dr=!1,Aj=typeof WeakSet=="function"?WeakSet:Set,Ke=null;function Qu(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){Dn(n,e,r)}else t.current=null}function hb(n,e,t){try{t()}catch(r){Dn(n,e,r)}}var OP=!1;function Cj(n,e){if(YS=py,n=UO(),RE(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,c=0,d=0,f=n,p=null;t:for(;;){for(var m;f!==t||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(m=f.firstChild)!==null;)p=f,f=m;for(;;){if(f===n)break t;if(p===t&&++c===i&&(a=o),p===s&&++d===r&&(l=o),(m=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=m}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(KS={focusedElem:n,selectionRange:t},py=!1,Ke=e;Ke!==null;)if(e=Ke,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,Ke=n;else for(;Ke!==null;){e=Ke;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var x=v.memoizedProps,y=v.memoizedState,g=e.stateNode,w=g.getSnapshotBeforeUpdate(e.elementType===e.type?x:_s(e.type,x),y);g.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Pe(163))}}catch(E){Dn(e,e.return,E)}if(n=e.sibling,n!==null){n.return=e.return,Ke=n;break}Ke=e.return}return v=OP,OP=!1,v}function Sf(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&n)===n){var s=i.destroy;i.destroy=void 0,s!==void 0&&hb(e,t,s)}i=i.next}while(i!==r)}}function S0(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function fb(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function kN(n){var e=n.alternate;e!==null&&(n.alternate=null,kN(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[eo],delete e[Yf],delete e[QS],delete e[uj],delete e[dj])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function ON(n){return n.tag===5||n.tag===3||n.tag===4}function NP(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||ON(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function pb(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=vy));else if(r!==4&&(n=n.child,n!==null))for(pb(n,e,t),n=n.sibling;n!==null;)pb(n,e,t),n=n.sibling}function mb(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(mb(n,e,t),n=n.sibling;n!==null;)mb(n,e,t),n=n.sibling}var _r=null,Ms=!1;function pa(n,e,t){for(t=t.child;t!==null;)NN(n,e,t),t=t.sibling}function NN(n,e,t){if(ro&&typeof ro.onCommitFiberUnmount=="function")try{ro.onCommitFiberUnmount(p0,t)}catch{}switch(t.tag){case 5:Dr||Qu(t,e);case 6:var r=_r,i=Ms;_r=null,pa(n,e,t),_r=r,Ms=i,_r!==null&&(Ms?(n=_r,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):_r.removeChild(t.stateNode));break;case 18:_r!==null&&(Ms?(n=_r,t=t.stateNode,n.nodeType===8?qx(n.parentNode,t):n.nodeType===1&&qx(n,t),Wf(n)):qx(_r,t.stateNode));break;case 4:r=_r,i=Ms,_r=t.stateNode.containerInfo,Ms=!0,pa(n,e,t),_r=r,Ms=i;break;case 0:case 11:case 14:case 15:if(!Dr&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&hb(t,e,o),i=i.next}while(i!==r)}pa(n,e,t);break;case 1:if(!Dr&&(Qu(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(a){Dn(t,e,a)}pa(n,e,t);break;case 21:pa(n,e,t);break;case 22:t.mode&1?(Dr=(r=Dr)||t.memoizedState!==null,pa(n,e,t),Dr=r):pa(n,e,t);break;default:pa(n,e,t)}}function DP(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new Aj),e.forEach(function(r){var i=Uj.bind(null,n,r);t.has(r)||(t.add(r),r.then(i,i))})}}function ds(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var i=t[r];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:_r=a.stateNode,Ms=!1;break e;case 3:_r=a.stateNode.containerInfo,Ms=!0;break e;case 4:_r=a.stateNode.containerInfo,Ms=!0;break e}a=a.return}if(_r===null)throw Error(Pe(160));NN(s,o,i),_r=null,Ms=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Dn(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)DN(e,n),e=e.sibling}function DN(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(ds(e,n),Ys(n),r&4){try{Sf(3,n,n.return),S0(3,n)}catch(x){Dn(n,n.return,x)}try{Sf(5,n,n.return)}catch(x){Dn(n,n.return,x)}}break;case 1:ds(e,n),Ys(n),r&512&&t!==null&&Qu(t,t.return);break;case 5:if(ds(e,n),Ys(n),r&512&&t!==null&&Qu(t,t.return),n.flags&32){var i=n.stateNode;try{zf(i,"")}catch(x){Dn(n,n.return,x)}}if(r&4&&(i=n.stateNode,i!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&iO(i,s),BS(a,o);var c=BS(a,s);for(o=0;o<l.length;o+=2){var d=l[o],f=l[o+1];d==="style"?cO(i,f):d==="dangerouslySetInnerHTML"?aO(i,f):d==="children"?zf(i,f):vE(i,d,f,c)}switch(a){case"input":OS(i,s);break;case"textarea":sO(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?hd(i,!!s.multiple,m,!1):p!==!!s.multiple&&(s.defaultValue!=null?hd(i,!!s.multiple,s.defaultValue,!0):hd(i,!!s.multiple,s.multiple?[]:"",!1))}i[Yf]=s}catch(x){Dn(n,n.return,x)}}break;case 6:if(ds(e,n),Ys(n),r&4){if(n.stateNode===null)throw Error(Pe(162));i=n.stateNode,s=n.memoizedProps;try{i.nodeValue=s}catch(x){Dn(n,n.return,x)}}break;case 3:if(ds(e,n),Ys(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{Wf(e.containerInfo)}catch(x){Dn(n,n.return,x)}break;case 4:ds(e,n),Ys(n);break;case 13:ds(e,n),Ys(n),i=n.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(KE=Hn())),r&4&&DP(n);break;case 22:if(d=t!==null&&t.memoizedState!==null,n.mode&1?(Dr=(c=Dr)||d,ds(e,n),Dr=c):ds(e,n),Ys(n),r&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!d&&n.mode&1)for(Ke=n,d=n.child;d!==null;){for(f=Ke=d;Ke!==null;){switch(p=Ke,m=p.child,p.tag){case 0:case 11:case 14:case 15:Sf(4,p,p.return);break;case 1:Qu(p,p.return);var v=p.stateNode;if(typeof v.componentWillUnmount=="function"){r=p,t=p.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(x){Dn(r,t,x)}}break;case 5:Qu(p,p.return);break;case 22:if(p.memoizedState!==null){FP(f);continue}}m!==null?(m.return=p,Ke=m):FP(f)}d=d.sibling}e:for(d=null,f=n;;){if(f.tag===5){if(d===null){d=f;try{i=f.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=lO("display",o))}catch(x){Dn(n,n.return,x)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(x){Dn(n,n.return,x)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===n)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===n)break e;for(;f.sibling===null;){if(f.return===null||f.return===n)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:ds(e,n),Ys(n),r&4&&DP(n);break;case 21:break;default:ds(e,n),Ys(n)}}function Ys(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(ON(t)){var r=t;break e}t=t.return}throw Error(Pe(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(zf(i,""),r.flags&=-33);var s=NP(n);mb(n,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=NP(n);pb(n,a,o);break;default:throw Error(Pe(161))}}catch(l){Dn(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function Pj(n,e,t){Ke=n,UN(n)}function UN(n,e,t){for(var r=(n.mode&1)!==0;Ke!==null;){var i=Ke,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||wg;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Dr;a=wg;var c=Dr;if(wg=o,(Dr=l)&&!c)for(Ke=i;Ke!==null;)o=Ke,l=o.child,o.tag===22&&o.memoizedState!==null?BP(i):l!==null?(l.return=o,Ke=l):BP(i);for(;s!==null;)Ke=s,UN(s),s=s.sibling;Ke=i,wg=a,Dr=c}UP(n)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Ke=s):UP(n)}}function UP(n){for(;Ke!==null;){var e=Ke;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Dr||S0(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Dr)if(t===null)r.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:_s(e.type,t.memoizedProps);r.componentDidUpdate(i,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&wP(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}wP(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Wf(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Pe(163))}Dr||e.flags&512&&fb(e)}catch(p){Dn(e,e.return,p)}}if(e===n){Ke=null;break}if(t=e.sibling,t!==null){t.return=e.return,Ke=t;break}Ke=e.return}}function FP(n){for(;Ke!==null;){var e=Ke;if(e===n){Ke=null;break}var t=e.sibling;if(t!==null){t.return=e.return,Ke=t;break}Ke=e.return}}function BP(n){for(;Ke!==null;){var e=Ke;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{S0(4,e)}catch(l){Dn(e,t,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Dn(e,i,l)}}var s=e.return;try{fb(e)}catch(l){Dn(e,s,l)}break;case 5:var o=e.return;try{fb(e)}catch(l){Dn(e,o,l)}}}catch(l){Dn(e,e.return,l)}if(e===n){Ke=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Ke=a;break}Ke=e.return}}var Rj=Math.ceil,Cy=ra.ReactCurrentDispatcher,qE=ra.ReactCurrentOwner,ss=ra.ReactCurrentBatchConfig,Yt=0,mr=null,Zn=null,wr=0,Ai=0,ed=vl(0),ir=0,tp=null,Lc=0,b0=0,YE=0,bf=null,ui=null,KE=0,Ud=1/0,ko=null,Py=!1,gb=null,Ya=null,Sg=!1,Va=null,Ry=0,Ef=0,vb=null,$v=-1,Xv=0;function Jr(){return Yt&6?Hn():$v!==-1?$v:$v=Hn()}function Ka(n){return n.mode&1?Yt&2&&wr!==0?wr&-wr:fj.transition!==null?(Xv===0&&(Xv=wO()),Xv):(n=on,n!==0||(n=window.event,n=n===void 0?16:CO(n.type)),n):1}function Ls(n,e,t,r){if(50<Ef)throw Ef=0,vb=null,Error(Pe(185));Vp(n,t,r),(!(Yt&2)||n!==mr)&&(n===mr&&(!(Yt&2)&&(b0|=t),ir===4&&La(n,wr)),gi(n,r),t===1&&Yt===0&&!(e.mode&1)&&(Ud=Hn()+500,_0&&yl()))}function gi(n,e){var t=n.callbackNode;f5(n,e);var r=fy(n,n===mr?wr:0);if(r===0)t!==null&&qC(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&qC(t),e===1)n.tag===0?hj(zP.bind(null,n)):XO(zP.bind(null,n)),lj(function(){!(Yt&6)&&yl()}),t=null;else{switch(SO(r)){case 1:t=SE;break;case 4:t=_O;break;case 16:t=hy;break;case 536870912:t=xO;break;default:t=hy}t=GN(t,FN.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function FN(n,e){if($v=-1,Xv=0,Yt&6)throw Error(Pe(327));var t=n.callbackNode;if(vd()&&n.callbackNode!==t)return null;var r=fy(n,n===mr?wr:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=Iy(n,r);else{e=r;var i=Yt;Yt|=2;var s=zN();(mr!==n||wr!==e)&&(ko=null,Ud=Hn()+500,wc(n,e));do try{kj();break}catch(a){BN(n,a)}while(!0);NE(),Cy.current=s,Yt=i,Zn!==null?e=0:(mr=null,wr=0,e=ir)}if(e!==0){if(e===2&&(i=WS(n),i!==0&&(r=i,e=yb(n,i))),e===1)throw t=tp,wc(n,0),La(n,r),gi(n,Hn()),t;if(e===6)La(n,r);else{if(i=n.current.alternate,!(r&30)&&!Ij(i)&&(e=Iy(n,r),e===2&&(s=WS(n),s!==0&&(r=s,e=yb(n,s))),e===1))throw t=tp,wc(n,0),La(n,r),gi(n,Hn()),t;switch(n.finishedWork=i,n.finishedLanes=r,e){case 0:case 1:throw Error(Pe(345));case 2:Yl(n,ui,ko);break;case 3:if(La(n,r),(r&130023424)===r&&(e=KE+500-Hn(),10<e)){if(fy(n,0)!==0)break;if(i=n.suspendedLanes,(i&r)!==r){Jr(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=JS(Yl.bind(null,n,ui,ko),e);break}Yl(n,ui,ko);break;case 4:if(La(n,r),(r&4194240)===r)break;for(e=n.eventTimes,i=-1;0<r;){var o=31-Is(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Hn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Rj(r/1960))-r,10<r){n.timeoutHandle=JS(Yl.bind(null,n,ui,ko),r);break}Yl(n,ui,ko);break;case 5:Yl(n,ui,ko);break;default:throw Error(Pe(329))}}}return gi(n,Hn()),n.callbackNode===t?FN.bind(null,n):null}function yb(n,e){var t=bf;return n.current.memoizedState.isDehydrated&&(wc(n,e).flags|=256),n=Iy(n,e),n!==2&&(e=ui,ui=t,e!==null&&_b(e)),n}function _b(n){ui===null?ui=n:ui.push.apply(ui,n)}function Ij(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var i=t[r],s=i.getSnapshot;i=i.value;try{if(!ks(s(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function La(n,e){for(e&=~YE,e&=~b0,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Is(e),r=1<<t;n[t]=-1,e&=~r}}function zP(n){if(Yt&6)throw Error(Pe(327));vd();var e=fy(n,0);if(!(e&1))return gi(n,Hn()),null;var t=Iy(n,e);if(n.tag!==0&&t===2){var r=WS(n);r!==0&&(e=r,t=yb(n,r))}if(t===1)throw t=tp,wc(n,0),La(n,e),gi(n,Hn()),t;if(t===6)throw Error(Pe(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,Yl(n,ui,ko),gi(n,Hn()),null}function ZE(n,e){var t=Yt;Yt|=1;try{return n(e)}finally{Yt=t,Yt===0&&(Ud=Hn()+500,_0&&yl())}}function kc(n){Va!==null&&Va.tag===0&&!(Yt&6)&&vd();var e=Yt;Yt|=1;var t=ss.transition,r=on;try{if(ss.transition=null,on=1,n)return n()}finally{on=r,ss.transition=t,Yt=e,!(Yt&6)&&yl()}}function JE(){Ai=ed.current,vn(ed)}function wc(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,aj(t)),Zn!==null)for(t=Zn.return;t!==null;){var r=t;switch(LE(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&yy();break;case 3:Nd(),vn(pi),vn(Vr),VE();break;case 5:zE(r);break;case 4:Nd();break;case 13:vn(Mn);break;case 19:vn(Mn);break;case 10:DE(r.type._context);break;case 22:case 23:JE()}t=t.return}if(mr=n,Zn=n=Za(n.current,null),wr=Ai=e,ir=0,tp=null,YE=b0=Lc=0,ui=bf=null,ac!==null){for(e=0;e<ac.length;e++)if(t=ac[e],r=t.interleaved,r!==null){t.interleaved=null;var i=r.next,s=t.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}t.pending=r}ac=null}return n}function BN(n,e){do{var t=Zn;try{if(NE(),Hv.current=Ay,Ty){for(var r=Cn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Ty=!1}if(Ic=0,pr=er=Cn=null,wf=!1,Jf=0,qE.current=null,t===null||t.return===null){ir=1,tp=e,Zn=null;break}e:{var s=n,o=t.return,a=t,l=e;if(e=wr,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=AP(o);if(m!==null){m.flags&=-257,CP(m,o,a,s,e),m.mode&1&&TP(s,c,e),e=m,l=c;var v=e.updateQueue;if(v===null){var x=new Set;x.add(l),e.updateQueue=x}else v.add(l);break e}else{if(!(e&1)){TP(s,c,e),QE();break e}l=Error(Pe(426))}}else if(wn&&a.mode&1){var y=AP(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),CP(y,o,a,s,e),kE(Dd(l,a));break e}}s=l=Dd(l,a),ir!==4&&(ir=2),bf===null?bf=[s]:bf.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var g=SN(s,l,e);xP(s,g);break e;case 1:a=l;var w=s.type,S=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Ya===null||!Ya.has(S)))){s.flags|=65536,e&=-e,s.lanes|=e;var E=bN(s,a,e);xP(s,E);break e}}s=s.return}while(s!==null)}jN(t)}catch(A){e=A,Zn===t&&t!==null&&(Zn=t=t.return);continue}break}while(!0)}function zN(){var n=Cy.current;return Cy.current=Ay,n===null?Ay:n}function QE(){(ir===0||ir===3||ir===2)&&(ir=4),mr===null||!(Lc&268435455)&&!(b0&268435455)||La(mr,wr)}function Iy(n,e){var t=Yt;Yt|=2;var r=zN();(mr!==n||wr!==e)&&(ko=null,wc(n,e));do try{Lj();break}catch(i){BN(n,i)}while(!0);if(NE(),Yt=t,Cy.current=r,Zn!==null)throw Error(Pe(261));return mr=null,wr=0,ir}function Lj(){for(;Zn!==null;)VN(Zn)}function kj(){for(;Zn!==null&&!i5();)VN(Zn)}function VN(n){var e=WN(n.alternate,n,Ai);n.memoizedProps=n.pendingProps,e===null?jN(n):Zn=e,qE.current=null}function jN(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=Tj(t,e),t!==null){t.flags&=32767,Zn=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{ir=6,Zn=null;return}}else if(t=Mj(t,e,Ai),t!==null){Zn=t;return}if(e=e.sibling,e!==null){Zn=e;return}Zn=e=n}while(e!==null);ir===0&&(ir=5)}function Yl(n,e,t){var r=on,i=ss.transition;try{ss.transition=null,on=1,Oj(n,e,t,r)}finally{ss.transition=i,on=r}return null}function Oj(n,e,t,r){do vd();while(Va!==null);if(Yt&6)throw Error(Pe(327));t=n.finishedWork;var i=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(Pe(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(p5(n,s),n===mr&&(Zn=mr=null,wr=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Sg||(Sg=!0,GN(hy,function(){return vd(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=ss.transition,ss.transition=null;var o=on;on=1;var a=Yt;Yt|=4,qE.current=null,Cj(n,t),DN(t,n),ej(KS),py=!!YS,KS=YS=null,n.current=t,Pj(t),s5(),Yt=a,on=o,ss.transition=s}else n.current=t;if(Sg&&(Sg=!1,Va=n,Ry=i),s=n.pendingLanes,s===0&&(Ya=null),l5(t.stateNode),gi(n,Hn()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)i=e[t],r(i.value,{componentStack:i.stack,digest:i.digest});if(Py)throw Py=!1,n=gb,gb=null,n;return Ry&1&&n.tag!==0&&vd(),s=n.pendingLanes,s&1?n===vb?Ef++:(Ef=0,vb=n):Ef=0,yl(),null}function vd(){if(Va!==null){var n=SO(Ry),e=ss.transition,t=on;try{if(ss.transition=null,on=16>n?16:n,Va===null)var r=!1;else{if(n=Va,Va=null,Ry=0,Yt&6)throw Error(Pe(331));var i=Yt;for(Yt|=4,Ke=n.current;Ke!==null;){var s=Ke,o=s.child;if(Ke.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Ke=c;Ke!==null;){var d=Ke;switch(d.tag){case 0:case 11:case 15:Sf(8,d,s)}var f=d.child;if(f!==null)f.return=d,Ke=f;else for(;Ke!==null;){d=Ke;var p=d.sibling,m=d.return;if(kN(d),d===c){Ke=null;break}if(p!==null){p.return=m,Ke=p;break}Ke=m}}}var v=s.alternate;if(v!==null){var x=v.child;if(x!==null){v.child=null;do{var y=x.sibling;x.sibling=null,x=y}while(x!==null)}}Ke=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Ke=o;else e:for(;Ke!==null;){if(s=Ke,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Sf(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,Ke=g;break e}Ke=s.return}}var w=n.current;for(Ke=w;Ke!==null;){o=Ke;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,Ke=S;else e:for(o=w;Ke!==null;){if(a=Ke,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:S0(9,a)}}catch(A){Dn(a,a.return,A)}if(a===o){Ke=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,Ke=E;break e}Ke=a.return}}if(Yt=i,yl(),ro&&typeof ro.onPostCommitFiberRoot=="function")try{ro.onPostCommitFiberRoot(p0,n)}catch{}r=!0}return r}finally{on=t,ss.transition=e}}return!1}function VP(n,e,t){e=Dd(t,e),e=SN(n,e,1),n=qa(n,e,1),e=Jr(),n!==null&&(Vp(n,1,e),gi(n,e))}function Dn(n,e,t){if(n.tag===3)VP(n,n,t);else for(;e!==null;){if(e.tag===3){VP(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ya===null||!Ya.has(r))){n=Dd(t,n),n=bN(e,n,1),e=qa(e,n,1),n=Jr(),e!==null&&(Vp(e,1,n),gi(e,n));break}}e=e.return}}function Nj(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=Jr(),n.pingedLanes|=n.suspendedLanes&t,mr===n&&(wr&t)===t&&(ir===4||ir===3&&(wr&130023424)===wr&&500>Hn()-KE?wc(n,0):YE|=t),gi(n,e)}function HN(n,e){e===0&&(n.mode&1?(e=hg,hg<<=1,!(hg&130023424)&&(hg=4194304)):e=1);var t=Jr();n=Yo(n,e),n!==null&&(Vp(n,e,t),gi(n,t))}function Dj(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),HN(n,t)}function Uj(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,i=n.memoizedState;i!==null&&(t=i.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(Pe(314))}r!==null&&r.delete(e),HN(n,t)}var WN;WN=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||pi.current)fi=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return fi=!1,Ej(n,e,t);fi=!!(n.flags&131072)}else fi=!1,wn&&e.flags&1048576&&qO(e,wy,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Gv(n,e),n=e.pendingProps;var i=Ld(e,Vr.current);gd(e,t),i=HE(null,e,r,n,i,t);var s=WE();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,mi(r)?(s=!0,_y(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,FE(e),i.updater=w0,e.stateNode=i,i._reactInternals=e,sb(e,r,n,t),e=lb(null,e,r,!0,s,t)):(e.tag=0,wn&&s&&IE(e),qr(null,e,i,t),e=e.child),e;case 16:r=e.elementType;e:{switch(Gv(n,e),n=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Bj(r),n=_s(r,n),i){case 0:e=ab(null,e,r,n,t);break e;case 1:e=IP(null,e,r,n,t);break e;case 11:e=PP(null,e,r,n,t);break e;case 14:e=RP(null,e,r,_s(r.type,n),t);break e}throw Error(Pe(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:_s(r,i),ab(n,e,r,i,t);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:_s(r,i),IP(n,e,r,i,t);case 3:e:{if(AN(e),n===null)throw Error(Pe(387));r=e.pendingProps,s=e.memoizedState,i=s.element,eN(n,e),Ey(e,r,null,t);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Dd(Error(Pe(423)),e),e=LP(n,e,r,t,i);break e}else if(r!==i){i=Dd(Error(Pe(424)),e),e=LP(n,e,r,t,i);break e}else for(Li=Xa(e.stateNode.containerInfo.firstChild),ki=e,wn=!0,As=null,t=JO(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(kd(),r===i){e=Ko(n,e,t);break e}qr(n,e,r,t)}e=e.child}return e;case 5:return tN(e),n===null&&nb(e),r=e.type,i=e.pendingProps,s=n!==null?n.memoizedProps:null,o=i.children,ZS(r,i)?o=null:s!==null&&ZS(r,s)&&(e.flags|=32),TN(n,e),qr(n,e,o,t),e.child;case 6:return n===null&&nb(e),null;case 13:return CN(n,e,t);case 4:return BE(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=Od(e,null,r,t):qr(n,e,r,t),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:_s(r,i),PP(n,e,r,i,t);case 7:return qr(n,e,e.pendingProps,t),e.child;case 8:return qr(n,e,e.pendingProps.children,t),e.child;case 12:return qr(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,dn(Sy,r._currentValue),r._currentValue=o,s!==null)if(ks(s.value,o)){if(s.children===i.children&&!pi.current){e=Ko(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Ho(-1,t&-t),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),rb(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Pe(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),rb(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}qr(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,gd(e,t),i=os(i),r=r(i),e.flags|=1,qr(n,e,r,t),e.child;case 14:return r=e.type,i=_s(r,e.pendingProps),i=_s(r.type,i),RP(n,e,r,i,t);case 15:return EN(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:_s(r,i),Gv(n,e),e.tag=1,mi(r)?(n=!0,_y(e)):n=!1,gd(e,t),wN(e,r,i),sb(e,r,i,t),lb(null,e,r,!0,n,t);case 19:return PN(n,e,t);case 22:return MN(n,e,t)}throw Error(Pe(156,e.tag))};function GN(n,e){return yO(n,e)}function Fj(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function is(n,e,t,r){return new Fj(n,e,t,r)}function eM(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Bj(n){if(typeof n=="function")return eM(n)?1:0;if(n!=null){if(n=n.$$typeof,n===_E)return 11;if(n===xE)return 14}return 2}function Za(n,e){var t=n.alternate;return t===null?(t=is(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function qv(n,e,t,r,i,s){var o=2;if(r=n,typeof n=="function")eM(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case Wu:return Sc(t.children,i,s,e);case yE:o=8,i|=8;break;case PS:return n=is(12,t,e,i|2),n.elementType=PS,n.lanes=s,n;case RS:return n=is(13,t,e,i),n.elementType=RS,n.lanes=s,n;case IS:return n=is(19,t,e,i),n.elementType=IS,n.lanes=s,n;case tO:return E0(t,i,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case Qk:o=10;break e;case eO:o=9;break e;case _E:o=11;break e;case xE:o=14;break e;case Ca:o=16,r=null;break e}throw Error(Pe(130,n==null?n:typeof n,""))}return e=is(o,t,e,i),e.elementType=n,e.type=r,e.lanes=s,e}function Sc(n,e,t,r){return n=is(7,n,r,e),n.lanes=t,n}function E0(n,e,t,r){return n=is(22,n,r,e),n.elementType=tO,n.lanes=t,n.stateNode={isHidden:!1},n}function nw(n,e,t){return n=is(6,n,null,e),n.lanes=t,n}function rw(n,e,t){return e=is(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function zj(n,e,t,r,i){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ux(0),this.expirationTimes=Ux(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ux(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function tM(n,e,t,r,i,s,o,a,l){return n=new zj(n,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=is(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},FE(s),n}function Vj(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Hu,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function $N(n){if(!n)return il;n=n._reactInternals;e:{if(zc(n)!==n||n.tag!==1)throw Error(Pe(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(mi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Pe(171))}if(n.tag===1){var t=n.type;if(mi(t))return $O(n,t,e)}return e}function XN(n,e,t,r,i,s,o,a,l){return n=tM(t,r,!0,n,i,s,o,a,l),n.context=$N(null),t=n.current,r=Jr(),i=Ka(t),s=Ho(r,i),s.callback=e??null,qa(t,s,i),n.current.lanes=i,Vp(n,i,r),gi(n,r),n}function M0(n,e,t,r){var i=e.current,s=Jr(),o=Ka(i);return t=$N(t),e.context===null?e.context=t:e.pendingContext=t,e=Ho(s,o),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=qa(i,e,o),n!==null&&(Ls(n,i,o,s),jv(n,i,o)),o}function Ly(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function jP(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function nM(n,e){jP(n,e),(n=n.alternate)&&jP(n,e)}function jj(){return null}var qN=typeof reportError=="function"?reportError:function(n){console.error(n)};function rM(n){this._internalRoot=n}T0.prototype.render=rM.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(Pe(409));M0(n,e,null,null)};T0.prototype.unmount=rM.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;kc(function(){M0(null,n,null,null)}),e[qo]=null}};function T0(n){this._internalRoot=n}T0.prototype.unstable_scheduleHydration=function(n){if(n){var e=MO();n={blockedOn:null,target:n,priority:e};for(var t=0;t<Ia.length&&e!==0&&e<Ia[t].priority;t++);Ia.splice(t,0,n),t===0&&AO(n)}};function iM(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function A0(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function HP(){}function Hj(n,e,t,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Ly(o);s.call(c)}}var o=XN(e,r,n,0,null,!1,!1,"",HP);return n._reactRootContainer=o,n[qo]=o.current,Xf(n.nodeType===8?n.parentNode:n),kc(),o}for(;i=n.lastChild;)n.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Ly(l);a.call(c)}}var l=tM(n,0,!1,null,null,!1,!1,"",HP);return n._reactRootContainer=l,n[qo]=l.current,Xf(n.nodeType===8?n.parentNode:n),kc(function(){M0(e,l,t,r)}),l}function C0(n,e,t,r,i){var s=t._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Ly(o);a.call(l)}}M0(e,o,n,i)}else o=Hj(t,e,n,i,r);return Ly(o)}bO=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=lf(e.pendingLanes);t!==0&&(bE(e,t|1),gi(e,Hn()),!(Yt&6)&&(Ud=Hn()+500,yl()))}break;case 13:kc(function(){var r=Yo(n,1);if(r!==null){var i=Jr();Ls(r,n,1,i)}}),nM(n,1)}};EE=function(n){if(n.tag===13){var e=Yo(n,134217728);if(e!==null){var t=Jr();Ls(e,n,134217728,t)}nM(n,134217728)}};EO=function(n){if(n.tag===13){var e=Ka(n),t=Yo(n,e);if(t!==null){var r=Jr();Ls(t,n,e,r)}nM(n,e)}};MO=function(){return on};TO=function(n,e){var t=on;try{return on=n,e()}finally{on=t}};VS=function(n,e,t){switch(e){case"input":if(OS(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var i=y0(r);if(!i)throw Error(Pe(90));rO(r),OS(r,i)}}}break;case"textarea":sO(n,t);break;case"select":e=t.value,e!=null&&hd(n,!!t.multiple,e,!1)}};hO=ZE;fO=kc;var Wj={usingClientEntryPoint:!1,Events:[Hp,qu,y0,uO,dO,ZE]},jh={findFiberByHostInstance:oc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Gj={bundleType:jh.bundleType,version:jh.version,rendererPackageName:jh.rendererPackageName,rendererConfig:jh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ra.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=gO(n),n===null?null:n.stateNode},findFiberByHostInstance:jh.findFiberByHostInstance||jj,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bg.isDisabled&&bg.supportsFiber)try{p0=bg.inject(Gj),ro=bg}catch{}}zi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Wj;zi.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!iM(e))throw Error(Pe(200));return Vj(n,e,null,t)};zi.createRoot=function(n,e){if(!iM(n))throw Error(Pe(299));var t=!1,r="",i=qN;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=tM(n,1,!1,null,null,t,!1,r,i),n[qo]=e.current,Xf(n.nodeType===8?n.parentNode:n),new rM(e)};zi.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(Pe(188)):(n=Object.keys(n).join(","),Error(Pe(268,n)));return n=gO(e),n=n===null?null:n.stateNode,n};zi.flushSync=function(n){return kc(n)};zi.hydrate=function(n,e,t){if(!A0(e))throw Error(Pe(200));return C0(null,n,e,!0,t)};zi.hydrateRoot=function(n,e,t){if(!iM(n))throw Error(Pe(405));var r=t!=null&&t.hydratedSources||null,i=!1,s="",o=qN;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=XN(e,null,n,1,t??null,i,!1,s,o),n[qo]=e.current,Xf(n),r)for(n=0;n<r.length;n++)t=r[n],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new T0(e)};zi.render=function(n,e,t){if(!A0(e))throw Error(Pe(200));return C0(null,n,e,!1,t)};zi.unmountComponentAtNode=function(n){if(!A0(n))throw Error(Pe(40));return n._reactRootContainer?(kc(function(){C0(null,null,n,!1,function(){n._reactRootContainer=null,n[qo]=null})}),!0):!1};zi.unstable_batchedUpdates=ZE;zi.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!A0(t))throw Error(Pe(200));if(n==null||n._reactInternals===void 0)throw Error(Pe(38));return C0(n,e,t,!1,r)};zi.version="18.3.1-next-f1338f8080-20240426";function YN(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(YN)}catch(n){console.error(n)}}YN(),Yk.exports=zi;var Gp=Yk.exports;const KN=uE(Gp);var ZN,WP=Gp;ZN=WP.createRoot,WP.hydrateRoot;const $j=1,Xj=1e6;let iw=0;function qj(){return iw=(iw+1)%Number.MAX_SAFE_INTEGER,iw.toString()}const sw=new Map,GP=n=>{if(sw.has(n))return;const e=setTimeout(()=>{sw.delete(n),Mf({type:"REMOVE_TOAST",toastId:n})},Xj);sw.set(n,e)},Yj=(n,e)=>{switch(e.type){case"ADD_TOAST":return{...n,toasts:[e.toast,...n.toasts].slice(0,$j)};case"UPDATE_TOAST":return{...n,toasts:n.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case"DISMISS_TOAST":{const{toastId:t}=e;return t?GP(t):n.toasts.forEach(r=>{GP(r.id)}),{...n,toasts:n.toasts.map(r=>r.id===t||t===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(t=>t.id!==e.toastId)}}},Yv=[];let Kv={toasts:[]};function Mf(n){Kv=Yj(Kv,n),Yv.forEach(e=>{e(Kv)})}function Kj({...n}){const e=qj(),t=i=>Mf({type:"UPDATE_TOAST",toast:{...i,id:e}}),r=()=>Mf({type:"DISMISS_TOAST",toastId:e});return Mf({type:"ADD_TOAST",toast:{...n,id:e,open:!0,onOpenChange:i=>{i||r()}}}),{id:e,dismiss:r,update:t}}function Zj(){const[n,e]=N.useState(Kv);return N.useEffect(()=>(Yv.push(e),()=>{const t=Yv.indexOf(e);t>-1&&Yv.splice(t,1)}),[n]),{...n,toast:Kj,dismiss:t=>Mf({type:"DISMISS_TOAST",toastId:t})}}function nr(n,e,{checkForDefaultPrevented:t=!0}={}){return function(i){if(n==null||n(i),t===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function $P(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function JN(...n){return e=>{let t=!1;const r=n.map(i=>{const s=$P(i,e);return!t&&typeof s=="function"&&(t=!0),s});if(t)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():$P(n[i],null)}}}}function Os(...n){return N.useCallback(JN(...n),n)}function P0(n,e=[]){let t=[];function r(s,o){const a=N.createContext(o),l=t.length;t=[...t,o];const c=f=>{var g;const{scope:p,children:m,...v}=f,x=((g=p==null?void 0:p[n])==null?void 0:g[l])||a,y=N.useMemo(()=>v,Object.values(v));return D.jsx(x.Provider,{value:y,children:m})};c.displayName=s+"Provider";function d(f,p){var x;const m=((x=p==null?void 0:p[n])==null?void 0:x[l])||a,v=N.useContext(m);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${s}\``)}return[c,d]}const i=()=>{const s=t.map(o=>N.createContext(o));return function(a){const l=(a==null?void 0:a[n])||s;return N.useMemo(()=>({[`__scope${n}`]:{...a,[n]:l}}),[a,l])}};return i.scopeName=n,[r,Jj(i,...e)]}function Jj(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const f=l(s)[`__scope${c}`];return{...a,...f}},{});return N.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}function ky(n){const e=eH(n),t=N.forwardRef((r,i)=>{const{children:s,...o}=r,a=N.Children.toArray(s),l=a.find(nH);if(l){const c=l.props.children,d=a.map(f=>f===l?N.Children.count(c)>1?N.Children.only(null):N.isValidElement(c)?c.props.children:null:f);return D.jsx(e,{...o,ref:i,children:N.isValidElement(c)?N.cloneElement(c,void 0,d):null})}return D.jsx(e,{...o,ref:i,children:s})});return t.displayName=`${n}.Slot`,t}var Qj=ky("Slot");function eH(n){const e=N.forwardRef((t,r)=>{const{children:i,...s}=t;if(N.isValidElement(i)){const o=iH(i),a=rH(s,i.props);return i.type!==N.Fragment&&(a.ref=r?JN(r,o):o),N.cloneElement(i,a)}return N.Children.count(i)>1?N.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var QN=Symbol("radix.slottable");function tH(n){const e=({children:t})=>D.jsx(D.Fragment,{children:t});return e.displayName=`${n}.Slottable`,e.__radixId=QN,e}function nH(n){return N.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===QN}function rH(n,e){const t={...e};for(const r in e){const i=n[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?t[r]=(...a)=>{const l=s(...a);return i(...a),l}:i&&(t[r]=i):r==="style"?t[r]={...i,...s}:r==="className"&&(t[r]=[i,s].filter(Boolean).join(" "))}return{...n,...t}}function iH(n){var r,i;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(i=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function sH(n){const e=n+"CollectionProvider",[t,r]=P0(e),[i,s]=t(e,{collectionRef:{current:null},itemMap:new Map}),o=x=>{const{scope:y,children:g}=x,w=Ne.useRef(null),S=Ne.useRef(new Map).current;return D.jsx(i,{scope:y,itemMap:S,collectionRef:w,children:g})};o.displayName=e;const a=n+"CollectionSlot",l=ky(a),c=Ne.forwardRef((x,y)=>{const{scope:g,children:w}=x,S=s(a,g),E=Os(y,S.collectionRef);return D.jsx(l,{ref:E,children:w})});c.displayName=a;const d=n+"CollectionItemSlot",f="data-radix-collection-item",p=ky(d),m=Ne.forwardRef((x,y)=>{const{scope:g,children:w,...S}=x,E=Ne.useRef(null),A=Os(y,E),T=s(d,g);return Ne.useEffect(()=>(T.itemMap.set(E,{ref:E,...S}),()=>void T.itemMap.delete(E))),D.jsx(p,{[f]:"",ref:A,children:w})});m.displayName=d;function v(x){const y=s(n+"CollectionConsumer",x);return Ne.useCallback(()=>{const w=y.collectionRef.current;if(!w)return[];const S=Array.from(w.querySelectorAll(`[${f}]`));return Array.from(y.itemMap.values()).sort((T,P)=>S.indexOf(T.ref.current)-S.indexOf(P.ref.current))},[y.collectionRef,y.itemMap])}return[{Provider:o,Slot:c,ItemSlot:m},v,r]}var oH=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],yi=oH.reduce((n,e)=>{const t=ky(`Primitive.${e}`),r=N.forwardRef((i,s)=>{const{asChild:o,...a}=i,l=o?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),D.jsx(l,{...a,ref:s})});return r.displayName=`Primitive.${e}`,{...n,[e]:r}},{});function eD(n,e){n&&Gp.flushSync(()=>n.dispatchEvent(e))}function sl(n){const e=N.useRef(n);return N.useEffect(()=>{e.current=n}),N.useMemo(()=>(...t)=>{var r;return(r=e.current)==null?void 0:r.call(e,...t)},[])}function aH(n,e=globalThis==null?void 0:globalThis.document){const t=sl(n);N.useEffect(()=>{const r=i=>{i.key==="Escape"&&t(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[t,e])}var lH="DismissableLayer",xb="dismissableLayer.update",cH="dismissableLayer.pointerDownOutside",uH="dismissableLayer.focusOutside",XP,tD=N.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),sM=N.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...l}=n,c=N.useContext(tD),[d,f]=N.useState(null),p=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=N.useState({}),v=Os(e,P=>f(P)),x=Array.from(c.layers),[y]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),g=x.indexOf(y),w=d?x.indexOf(d):-1,S=c.layersWithOutsidePointerEventsDisabled.size>0,E=w>=g,A=hH(P=>{const k=P.target,R=[...c.branches].some(I=>I.contains(k));!E||R||(i==null||i(P),o==null||o(P),P.defaultPrevented||a==null||a())},p),T=fH(P=>{const k=P.target;[...c.branches].some(I=>I.contains(k))||(s==null||s(P),o==null||o(P),P.defaultPrevented||a==null||a())},p);return aH(P=>{w===c.layers.size-1&&(r==null||r(P),!P.defaultPrevented&&a&&(P.preventDefault(),a()))},p),N.useEffect(()=>{if(d)return t&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(XP=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(d)),c.layers.add(d),qP(),()=>{t&&c.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=XP)}},[d,p,t,c]),N.useEffect(()=>()=>{d&&(c.layers.delete(d),c.layersWithOutsidePointerEventsDisabled.delete(d),qP())},[d,c]),N.useEffect(()=>{const P=()=>m({});return document.addEventListener(xb,P),()=>document.removeEventListener(xb,P)},[]),D.jsx(yi.div,{...l,ref:v,style:{pointerEvents:S?E?"auto":"none":void 0,...n.style},onFocusCapture:nr(n.onFocusCapture,T.onFocusCapture),onBlurCapture:nr(n.onBlurCapture,T.onBlurCapture),onPointerDownCapture:nr(n.onPointerDownCapture,A.onPointerDownCapture)})});sM.displayName=lH;var dH="DismissableLayerBranch",nD=N.forwardRef((n,e)=>{const t=N.useContext(tD),r=N.useRef(null),i=Os(e,r);return N.useEffect(()=>{const s=r.current;if(s)return t.branches.add(s),()=>{t.branches.delete(s)}},[t.branches]),D.jsx(yi.div,{...n,ref:i})});nD.displayName=dH;function hH(n,e=globalThis==null?void 0:globalThis.document){const t=sl(n),r=N.useRef(!1),i=N.useRef(()=>{});return N.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let l=function(){rD(cH,t,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=l,e.addEventListener("click",i.current,{once:!0})):l()}else e.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function fH(n,e=globalThis==null?void 0:globalThis.document){const t=sl(n),r=N.useRef(!1);return N.useEffect(()=>{const i=s=>{s.target&&!r.current&&rD(uH,t,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function qP(){const n=new CustomEvent(xb);document.dispatchEvent(n)}function rD(n,e,t,{discrete:r}){const i=t.originalEvent.target,s=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?eD(i,s):i.dispatchEvent(s)}var pH=sM,mH=nD,ol=globalThis!=null&&globalThis.document?N.useLayoutEffect:()=>{},gH="Portal",iD=N.forwardRef((n,e)=>{var a;const{container:t,...r}=n,[i,s]=N.useState(!1);ol(()=>s(!0),[]);const o=t||i&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?KN.createPortal(D.jsx(yi.div,{...r,ref:e}),o):null});iD.displayName=gH;function vH(n,e){return N.useReducer((t,r)=>e[t][r]??t,n)}var oM=n=>{const{present:e,children:t}=n,r=yH(e),i=typeof t=="function"?t({present:r.isPresent}):N.Children.only(t),s=Os(r.ref,_H(i));return typeof t=="function"||r.isPresent?N.cloneElement(i,{ref:s}):null};oM.displayName="Presence";function yH(n){const[e,t]=N.useState(),r=N.useRef(null),i=N.useRef(n),s=N.useRef("none"),o=n?"mounted":"unmounted",[a,l]=vH(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return N.useEffect(()=>{const c=Eg(r.current);s.current=a==="mounted"?c:"none"},[a]),ol(()=>{const c=r.current,d=i.current;if(d!==n){const p=s.current,m=Eg(c);n?l("MOUNT"):m==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(d&&p!==m?"ANIMATION_OUT":"UNMOUNT"),i.current=n}},[n,l]),ol(()=>{if(e){let c;const d=e.ownerDocument.defaultView??window,f=m=>{const x=Eg(r.current).includes(m.animationName);if(m.target===e&&x&&(l("ANIMATION_END"),!i.current)){const y=e.style.animationFillMode;e.style.animationFillMode="forwards",c=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=y)})}},p=m=>{m.target===e&&(s.current=Eg(r.current))};return e.addEventListener("animationstart",p),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{d.clearTimeout(c),e.removeEventListener("animationstart",p),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:N.useCallback(c=>{r.current=c?getComputedStyle(c):null,t(c)},[])}}function Eg(n){return(n==null?void 0:n.animationName)||"none"}function _H(n){var r,i;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(i=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var xH=Xk[" useInsertionEffect ".trim().toString()]||ol;function wH({prop:n,defaultProp:e,onChange:t=()=>{},caller:r}){const[i,s,o]=SH({defaultProp:e,onChange:t}),a=n!==void 0,l=a?n:i;{const d=N.useRef(n!==void 0);N.useEffect(()=>{const f=d.current;f!==a&&console.warn(`${r} is changing from ${f?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=a},[a,r])}const c=N.useCallback(d=>{var f;if(a){const p=bH(d)?d(n):d;p!==n&&((f=o.current)==null||f.call(o,p))}else s(d)},[a,n,s,o]);return[l,c]}function SH({defaultProp:n,onChange:e}){const[t,r]=N.useState(n),i=N.useRef(t),s=N.useRef(e);return xH(()=>{s.current=e},[e]),N.useEffect(()=>{var o;i.current!==t&&((o=s.current)==null||o.call(s,t),i.current=t)},[t,i]),[t,r,s]}function bH(n){return typeof n=="function"}var EH=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),MH="VisuallyHidden",R0=N.forwardRef((n,e)=>D.jsx(yi.span,{...n,ref:e,style:{...EH,...n.style}}));R0.displayName=MH;var TH=R0,aM="ToastProvider",[lM,AH,CH]=sH("Toast"),[sD,$oe]=P0("Toast",[CH]),[PH,I0]=sD(aM),oD=n=>{const{__scopeToast:e,label:t="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:s=50,children:o}=n,[a,l]=N.useState(null),[c,d]=N.useState(0),f=N.useRef(!1),p=N.useRef(!1);return t.trim()||console.error(`Invalid prop \`label\` supplied to \`${aM}\`. Expected non-empty \`string\`.`),D.jsx(lM.Provider,{scope:e,children:D.jsx(PH,{scope:e,label:t,duration:r,swipeDirection:i,swipeThreshold:s,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:N.useCallback(()=>d(m=>m+1),[]),onToastRemove:N.useCallback(()=>d(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:p,children:o})})};oD.displayName=aM;var aD="ToastViewport",RH=["F8"],wb="toast.viewportPause",Sb="toast.viewportResume",lD=N.forwardRef((n,e)=>{const{__scopeToast:t,hotkey:r=RH,label:i="Notifications ({hotkey})",...s}=n,o=I0(aD,t),a=AH(t),l=N.useRef(null),c=N.useRef(null),d=N.useRef(null),f=N.useRef(null),p=Os(e,f,o.onViewportChange),m=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),v=o.toastCount>0;N.useEffect(()=>{const y=g=>{var S;r.length!==0&&r.every(E=>g[E]||g.code===E)&&((S=f.current)==null||S.focus())};return document.addEventListener("keydown",y),()=>document.removeEventListener("keydown",y)},[r]),N.useEffect(()=>{const y=l.current,g=f.current;if(v&&y&&g){const w=()=>{if(!o.isClosePausedRef.current){const T=new CustomEvent(wb);g.dispatchEvent(T),o.isClosePausedRef.current=!0}},S=()=>{if(o.isClosePausedRef.current){const T=new CustomEvent(Sb);g.dispatchEvent(T),o.isClosePausedRef.current=!1}},E=T=>{!y.contains(T.relatedTarget)&&S()},A=()=>{y.contains(document.activeElement)||S()};return y.addEventListener("focusin",w),y.addEventListener("focusout",E),y.addEventListener("pointermove",w),y.addEventListener("pointerleave",A),window.addEventListener("blur",w),window.addEventListener("focus",S),()=>{y.removeEventListener("focusin",w),y.removeEventListener("focusout",E),y.removeEventListener("pointermove",w),y.removeEventListener("pointerleave",A),window.removeEventListener("blur",w),window.removeEventListener("focus",S)}}},[v,o.isClosePausedRef]);const x=N.useCallback(({tabbingDirection:y})=>{const w=a().map(S=>{const E=S.ref.current,A=[E,...WH(E)];return y==="forwards"?A:A.reverse()});return(y==="forwards"?w.reverse():w).flat()},[a]);return N.useEffect(()=>{const y=f.current;if(y){const g=w=>{var A,T,P;const S=w.altKey||w.ctrlKey||w.metaKey;if(w.key==="Tab"&&!S){const k=document.activeElement,R=w.shiftKey;if(w.target===y&&R){(A=c.current)==null||A.focus();return}const G=x({tabbingDirection:R?"backwards":"forwards"}),re=G.findIndex(z=>z===k);ow(G.slice(re+1))?w.preventDefault():R?(T=c.current)==null||T.focus():(P=d.current)==null||P.focus()}};return y.addEventListener("keydown",g),()=>y.removeEventListener("keydown",g)}},[a,x]),D.jsxs(mH,{ref:l,role:"region","aria-label":i.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:v?void 0:"none"},children:[v&&D.jsx(bb,{ref:c,onFocusFromOutsideViewport:()=>{const y=x({tabbingDirection:"forwards"});ow(y)}}),D.jsx(lM.Slot,{scope:t,children:D.jsx(yi.ol,{tabIndex:-1,...s,ref:p})}),v&&D.jsx(bb,{ref:d,onFocusFromOutsideViewport:()=>{const y=x({tabbingDirection:"backwards"});ow(y)}})]})});lD.displayName=aD;var cD="ToastFocusProxy",bb=N.forwardRef((n,e)=>{const{__scopeToast:t,onFocusFromOutsideViewport:r,...i}=n,s=I0(cD,t);return D.jsx(R0,{"aria-hidden":!0,tabIndex:0,...i,ref:e,style:{position:"fixed"},onFocus:o=>{var c;const a=o.relatedTarget;!((c=s.viewport)!=null&&c.contains(a))&&r()}})});bb.displayName=cD;var $p="Toast",IH="toast.swipeStart",LH="toast.swipeMove",kH="toast.swipeCancel",OH="toast.swipeEnd",uD=N.forwardRef((n,e)=>{const{forceMount:t,open:r,defaultOpen:i,onOpenChange:s,...o}=n,[a,l]=wH({prop:r,defaultProp:i??!0,onChange:s,caller:$p});return D.jsx(oM,{present:t||a,children:D.jsx(UH,{open:a,...o,ref:e,onClose:()=>l(!1),onPause:sl(n.onPause),onResume:sl(n.onResume),onSwipeStart:nr(n.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:nr(n.onSwipeMove,c=>{const{x:d,y:f}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:nr(n.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:nr(n.onSwipeEnd,c=>{const{x:d,y:f}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),l(!1)})})})});uD.displayName=$p;var[NH,DH]=sD($p,{onClose(){}}),UH=N.forwardRef((n,e)=>{const{__scopeToast:t,type:r="foreground",duration:i,open:s,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:d,onSwipeMove:f,onSwipeCancel:p,onSwipeEnd:m,...v}=n,x=I0($p,t),[y,g]=N.useState(null),w=Os(e,z=>g(z)),S=N.useRef(null),E=N.useRef(null),A=i||x.duration,T=N.useRef(0),P=N.useRef(A),k=N.useRef(0),{onToastAdd:R,onToastRemove:I}=x,H=sl(()=>{var Z;(y==null?void 0:y.contains(document.activeElement))&&((Z=x.viewport)==null||Z.focus()),o()}),G=N.useCallback(z=>{!z||z===1/0||(window.clearTimeout(k.current),T.current=new Date().getTime(),k.current=window.setTimeout(H,z))},[H]);N.useEffect(()=>{const z=x.viewport;if(z){const Z=()=>{G(P.current),c==null||c()},J=()=>{const te=new Date().getTime()-T.current;P.current=P.current-te,window.clearTimeout(k.current),l==null||l()};return z.addEventListener(wb,J),z.addEventListener(Sb,Z),()=>{z.removeEventListener(wb,J),z.removeEventListener(Sb,Z)}}},[x.viewport,A,l,c,G]),N.useEffect(()=>{s&&!x.isClosePausedRef.current&&G(A)},[s,A,x.isClosePausedRef,G]),N.useEffect(()=>(R(),()=>I()),[R,I]);const re=N.useMemo(()=>y?gD(y):null,[y]);return x.viewport?D.jsxs(D.Fragment,{children:[re&&D.jsx(FH,{__scopeToast:t,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:re}),D.jsx(NH,{scope:t,onClose:H,children:Gp.createPortal(D.jsx(lM.ItemSlot,{scope:t,children:D.jsx(pH,{asChild:!0,onEscapeKeyDown:nr(a,()=>{x.isFocusedToastEscapeKeyDownRef.current||H(),x.isFocusedToastEscapeKeyDownRef.current=!1}),children:D.jsx(yi.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":x.swipeDirection,...v,ref:w,style:{userSelect:"none",touchAction:"none",...n.style},onKeyDown:nr(n.onKeyDown,z=>{z.key==="Escape"&&(a==null||a(z.nativeEvent),z.nativeEvent.defaultPrevented||(x.isFocusedToastEscapeKeyDownRef.current=!0,H()))}),onPointerDown:nr(n.onPointerDown,z=>{z.button===0&&(S.current={x:z.clientX,y:z.clientY})}),onPointerMove:nr(n.onPointerMove,z=>{if(!S.current)return;const Z=z.clientX-S.current.x,J=z.clientY-S.current.y,te=!!E.current,L=["left","right"].includes(x.swipeDirection),U=["left","up"].includes(x.swipeDirection)?Math.min:Math.max,V=L?U(0,Z):0,Y=L?0:U(0,J),Q=z.pointerType==="touch"?10:2,K={x:V,y:Y},oe={originalEvent:z,delta:K};te?(E.current=K,Mg(LH,f,oe,{discrete:!1})):YP(K,x.swipeDirection,Q)?(E.current=K,Mg(IH,d,oe,{discrete:!1}),z.target.setPointerCapture(z.pointerId)):(Math.abs(Z)>Q||Math.abs(J)>Q)&&(S.current=null)}),onPointerUp:nr(n.onPointerUp,z=>{const Z=E.current,J=z.target;if(J.hasPointerCapture(z.pointerId)&&J.releasePointerCapture(z.pointerId),E.current=null,S.current=null,Z){const te=z.currentTarget,L={originalEvent:z,delta:Z};YP(Z,x.swipeDirection,x.swipeThreshold)?Mg(OH,m,L,{discrete:!0}):Mg(kH,p,L,{discrete:!0}),te.addEventListener("click",U=>U.preventDefault(),{once:!0})}})})})}),x.viewport)})]}):null}),FH=n=>{const{__scopeToast:e,children:t,...r}=n,i=I0($p,e),[s,o]=N.useState(!1),[a,l]=N.useState(!1);return jH(()=>o(!0)),N.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),a?null:D.jsx(iD,{asChild:!0,children:D.jsx(R0,{...r,children:s&&D.jsxs(D.Fragment,{children:[i.label," ",t]})})})},BH="ToastTitle",dD=N.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return D.jsx(yi.div,{...r,ref:e})});dD.displayName=BH;var zH="ToastDescription",hD=N.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return D.jsx(yi.div,{...r,ref:e})});hD.displayName=zH;var fD="ToastAction",VH=N.forwardRef((n,e)=>{const{altText:t,...r}=n;return t.trim()?D.jsx(mD,{altText:t,asChild:!0,children:D.jsx(cM,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${fD}\`. Expected non-empty \`string\`.`),null)});VH.displayName=fD;var pD="ToastClose",cM=N.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n,i=DH(pD,t);return D.jsx(mD,{asChild:!0,children:D.jsx(yi.button,{type:"button",...r,ref:e,onClick:nr(n.onClick,i.onClose)})})});cM.displayName=pD;var mD=N.forwardRef((n,e)=>{const{__scopeToast:t,altText:r,...i}=n;return D.jsx(yi.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...i,ref:e})});function gD(n){const e=[];return Array.from(n.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),HH(r)){const i=r.ariaHidden||r.hidden||r.style.display==="none",s=r.dataset.radixToastAnnounceExclude==="";if(!i)if(s){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...gD(r))}}),e}function Mg(n,e,t,{discrete:r}){const i=t.originalEvent.currentTarget,s=new CustomEvent(n,{bubbles:!0,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?eD(i,s):i.dispatchEvent(s)}var YP=(n,e,t=0)=>{const r=Math.abs(n.x),i=Math.abs(n.y),s=r>i;return e==="left"||e==="right"?s&&r>t:!s&&i>t};function jH(n=()=>{}){const e=sl(n);ol(()=>{let t=0,r=0;return t=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(r)}},[e])}function HH(n){return n.nodeType===n.ELEMENT_NODE}function WH(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function ow(n){const e=document.activeElement;return n.some(t=>t===e?!0:(t.focus(),document.activeElement!==e))}function GH(){const{toasts:n}=Zj();return D.jsxs(oD,{children:[n.map(function({id:e,title:t,description:r,action:i,...s}){return D.jsxs(uD,{...s,children:[D.jsxs("div",{className:"grid gap-1",children:[t&&D.jsx(dD,{children:t}),r&&D.jsx(hD,{children:r})]}),i,D.jsx(cM,{})]},e)}),D.jsx(lD,{})]})}var KP=["light","dark"],$H="(prefers-color-scheme: dark)",XH=N.createContext(void 0),qH={setTheme:n=>{},themes:[]},YH=()=>{var n;return(n=N.useContext(XH))!=null?n:qH};N.memo(({forcedTheme:n,storageKey:e,attribute:t,enableSystem:r,enableColorScheme:i,defaultTheme:s,value:o,attrs:a,nonce:l})=>{let c=s==="system",d=t==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${a.map(v=>`'${v}'`).join(",")})`};`:`var d=document.documentElement,n='${t}',s='setAttribute';`,f=i?KP.includes(s)&&s?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${s}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",p=(v,x=!1,y=!0)=>{let g=o?o[v]:v,w=x?v+"|| ''":`'${g}'`,S="";return i&&y&&!x&&KP.includes(v)&&(S+=`d.style.colorScheme = '${v}';`),t==="class"?x||g?S+=`c.add(${w})`:S+="null":g&&(S+=`d[s](n,${w})`),S},m=n?`!function(){${d}${p(n)}}()`:r?`!function(){try{${d}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${c})){var t='${$H}',m=window.matchMedia(t);if(m.media!==t||m.matches){${p("dark")}}else{${p("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${p(o?"x[e]":"e",!0)}}${c?"":"else{"+p(s,!1,!1)+"}"}${f}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${p(o?"x[e]":"e",!0)}}else{${p(s,!1,!1)};}${f}}catch(t){}}();`;return N.createElement("script",{nonce:l,dangerouslySetInnerHTML:{__html:m}})});var KH=n=>{switch(n){case"success":return QH;case"info":return tW;case"warning":return eW;case"error":return nW;default:return null}},ZH=Array(12).fill(0),JH=({visible:n,className:e})=>Ne.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":n},Ne.createElement("div",{className:"sonner-spinner"},ZH.map((t,r)=>Ne.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),QH=Ne.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ne.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),eW=Ne.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Ne.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),tW=Ne.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ne.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),nW=Ne.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ne.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),rW=Ne.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Ne.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Ne.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),iW=()=>{let[n,e]=Ne.useState(document.hidden);return Ne.useEffect(()=>{let t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),n},Eb=1,sW=class{constructor(){this.subscribe=n=>(this.subscribers.push(n),()=>{let e=this.subscribers.indexOf(n);this.subscribers.splice(e,1)}),this.publish=n=>{this.subscribers.forEach(e=>e(n))},this.addToast=n=>{this.publish(n),this.toasts=[...this.toasts,n]},this.create=n=>{var e;let{message:t,...r}=n,i=typeof(n==null?void 0:n.id)=="number"||((e=n.id)==null?void 0:e.length)>0?n.id:Eb++,s=this.toasts.find(a=>a.id===i),o=n.dismissible===void 0?!0:n.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),s?this.toasts=this.toasts.map(a=>a.id===i?(this.publish({...a,...n,id:i,title:t}),{...a,...n,id:i,dismissible:o,title:t}):a):this.addToast({title:t,...r,dismissible:o,id:i}),i},this.dismiss=n=>(this.dismissedToasts.add(n),n||this.toasts.forEach(e=>{this.subscribers.forEach(t=>t({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:n,dismiss:!0})),n),this.message=(n,e)=>this.create({...e,message:n}),this.error=(n,e)=>this.create({...e,message:n,type:"error"}),this.success=(n,e)=>this.create({...e,type:"success",message:n}),this.info=(n,e)=>this.create({...e,type:"info",message:n}),this.warning=(n,e)=>this.create({...e,type:"warning",message:n}),this.loading=(n,e)=>this.create({...e,type:"loading",message:n}),this.promise=(n,e)=>{if(!e)return;let t;e.loading!==void 0&&(t=this.create({...e,promise:n,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let r=n instanceof Promise?n:n(),i=t!==void 0,s,o=r.then(async l=>{if(s=["resolve",l],Ne.isValidElement(l))i=!1,this.create({id:t,type:"default",message:l});else if(aW(l)&&!l.ok){i=!1;let c=typeof e.error=="function"?await e.error(`HTTP error! status: ${l.status}`):e.error,d=typeof e.description=="function"?await e.description(`HTTP error! status: ${l.status}`):e.description;this.create({id:t,type:"error",message:c,description:d})}else if(e.success!==void 0){i=!1;let c=typeof e.success=="function"?await e.success(l):e.success,d=typeof e.description=="function"?await e.description(l):e.description;this.create({id:t,type:"success",message:c,description:d})}}).catch(async l=>{if(s=["reject",l],e.error!==void 0){i=!1;let c=typeof e.error=="function"?await e.error(l):e.error,d=typeof e.description=="function"?await e.description(l):e.description;this.create({id:t,type:"error",message:c,description:d})}}).finally(()=>{var l;i&&(this.dismiss(t),t=void 0),(l=e.finally)==null||l.call(e)}),a=()=>new Promise((l,c)=>o.then(()=>s[0]==="reject"?c(s[1]):l(s[1])).catch(c));return typeof t!="string"&&typeof t!="number"?{unwrap:a}:Object.assign(t,{unwrap:a})},this.custom=(n,e)=>{let t=(e==null?void 0:e.id)||Eb++;return this.create({jsx:n(t),id:t,...e}),t},this.getActiveToasts=()=>this.toasts.filter(n=>!this.dismissedToasts.has(n.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},ci=new sW,oW=(n,e)=>{let t=(e==null?void 0:e.id)||Eb++;return ci.addToast({title:n,...e,id:t}),t},aW=n=>n&&typeof n=="object"&&"ok"in n&&typeof n.ok=="boolean"&&"status"in n&&typeof n.status=="number",lW=oW,cW=()=>ci.toasts,uW=()=>ci.getActiveToasts(),Tg=Object.assign(lW,{success:ci.success,info:ci.info,warning:ci.warning,error:ci.error,custom:ci.custom,message:ci.message,promise:ci.promise,dismiss:ci.dismiss,loading:ci.loading},{getHistory:cW,getToasts:uW});function dW(n,{insertAt:e}={}){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&t.firstChild?t.insertBefore(r,t.firstChild):t.appendChild(r),r.styleSheet?r.styleSheet.cssText=n:r.appendChild(document.createTextNode(n))}dW(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Ag(n){return n.label!==void 0}var hW=3,fW="32px",pW="16px",ZP=4e3,mW=356,gW=14,vW=20,yW=200;function hs(...n){return n.filter(Boolean).join(" ")}function _W(n){let[e,t]=n.split("-"),r=[];return e&&r.push(e),t&&r.push(t),r}var xW=n=>{var e,t,r,i,s,o,a,l,c,d,f;let{invert:p,toast:m,unstyled:v,interacting:x,setHeights:y,visibleToasts:g,heights:w,index:S,toasts:E,expanded:A,removeToast:T,defaultRichColors:P,closeButton:k,style:R,cancelButtonStyle:I,actionButtonStyle:H,className:G="",descriptionClassName:re="",duration:z,position:Z,gap:J,loadingIcon:te,expandByDefault:L,classNames:U,icons:V,closeButtonAriaLabel:Y="Close toast",pauseWhenPageIsHidden:Q}=n,[K,oe]=Ne.useState(null),[xe,Ae]=Ne.useState(null),[we,lt]=Ne.useState(!1),[ct,He]=Ne.useState(!1),[Ye,$]=Ne.useState(!1),[Se,fe]=Ne.useState(!1),[Ce,pe]=Ne.useState(!1),[et,De]=Ne.useState(0),[F,O]=Ne.useState(0),ie=Ne.useRef(m.duration||z||ZP),Me=Ne.useRef(null),_e=Ne.useRef(null),ve=S===0,Qe=S+1<=g,Re=m.type,Fe=m.dismissible!==!1,ut=m.className||"",bt=m.descriptionClassName||"",be=Ne.useMemo(()=>w.findIndex(Ee=>Ee.toastId===m.id)||0,[w,m.id]),Wt=Ne.useMemo(()=>{var Ee;return(Ee=m.closeButton)!=null?Ee:k},[m.closeButton,k]),Ct=Ne.useMemo(()=>m.duration||z||ZP,[m.duration,z]),vt=Ne.useRef(0),tt=Ne.useRef(0),We=Ne.useRef(0),X=Ne.useRef(null),[ye,Ve]=Z.split("-"),Be=Ne.useMemo(()=>w.reduce((Ee,qe,it)=>it>=be?Ee:Ee+qe.height,0),[w,be]),Te=iW(),q=m.invert||p,Ie=Re==="loading";tt.current=Ne.useMemo(()=>be*J+Be,[be,Be]),Ne.useEffect(()=>{ie.current=Ct},[Ct]),Ne.useEffect(()=>{lt(!0)},[]),Ne.useEffect(()=>{let Ee=_e.current;if(Ee){let qe=Ee.getBoundingClientRect().height;return O(qe),y(it=>[{toastId:m.id,height:qe,position:m.position},...it]),()=>y(it=>it.filter(Vt=>Vt.toastId!==m.id))}},[y,m.id]),Ne.useLayoutEffect(()=>{if(!we)return;let Ee=_e.current,qe=Ee.style.height;Ee.style.height="auto";let it=Ee.getBoundingClientRect().height;Ee.style.height=qe,O(it),y(Vt=>Vt.find(Xt=>Xt.toastId===m.id)?Vt.map(Xt=>Xt.toastId===m.id?{...Xt,height:it}:Xt):[{toastId:m.id,height:it,position:m.position},...Vt])},[we,m.title,m.description,y,m.id]);let Oe=Ne.useCallback(()=>{He(!0),De(tt.current),y(Ee=>Ee.filter(qe=>qe.toastId!==m.id)),setTimeout(()=>{T(m)},yW)},[m,T,y,tt]);Ne.useEffect(()=>{if(m.promise&&Re==="loading"||m.duration===1/0||m.type==="loading")return;let Ee;return A||x||Q&&Te?(()=>{if(We.current<vt.current){let qe=new Date().getTime()-vt.current;ie.current=ie.current-qe}We.current=new Date().getTime()})():ie.current!==1/0&&(vt.current=new Date().getTime(),Ee=setTimeout(()=>{var qe;(qe=m.onAutoClose)==null||qe.call(m,m),Oe()},ie.current)),()=>clearTimeout(Ee)},[A,x,m,Re,Q,Te,Oe]),Ne.useEffect(()=>{m.delete&&Oe()},[Oe,m.delete]);function pt(){var Ee,qe,it;return V!=null&&V.loading?Ne.createElement("div",{className:hs(U==null?void 0:U.loader,(Ee=m==null?void 0:m.classNames)==null?void 0:Ee.loader,"sonner-loader"),"data-visible":Re==="loading"},V.loading):te?Ne.createElement("div",{className:hs(U==null?void 0:U.loader,(qe=m==null?void 0:m.classNames)==null?void 0:qe.loader,"sonner-loader"),"data-visible":Re==="loading"},te):Ne.createElement(JH,{className:hs(U==null?void 0:U.loader,(it=m==null?void 0:m.classNames)==null?void 0:it.loader),visible:Re==="loading"})}return Ne.createElement("li",{tabIndex:0,ref:_e,className:hs(G,ut,U==null?void 0:U.toast,(e=m==null?void 0:m.classNames)==null?void 0:e.toast,U==null?void 0:U.default,U==null?void 0:U[Re],(t=m==null?void 0:m.classNames)==null?void 0:t[Re]),"data-sonner-toast":"","data-rich-colors":(r=m.richColors)!=null?r:P,"data-styled":!(m.jsx||m.unstyled||v),"data-mounted":we,"data-promise":!!m.promise,"data-swiped":Ce,"data-removed":ct,"data-visible":Qe,"data-y-position":ye,"data-x-position":Ve,"data-index":S,"data-front":ve,"data-swiping":Ye,"data-dismissible":Fe,"data-type":Re,"data-invert":q,"data-swipe-out":Se,"data-swipe-direction":xe,"data-expanded":!!(A||L&&we),style:{"--index":S,"--toasts-before":S,"--z-index":E.length-S,"--offset":`${ct?et:tt.current}px`,"--initial-height":L?"auto":`${F}px`,...R,...m.style},onDragEnd:()=>{$(!1),oe(null),X.current=null},onPointerDown:Ee=>{Ie||!Fe||(Me.current=new Date,De(tt.current),Ee.target.setPointerCapture(Ee.pointerId),Ee.target.tagName!=="BUTTON"&&($(!0),X.current={x:Ee.clientX,y:Ee.clientY}))},onPointerUp:()=>{var Ee,qe,it,Vt;if(Se||!Fe)return;X.current=null;let Xt=Number(((Ee=_e.current)==null?void 0:Ee.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Ot=Number(((qe=_e.current)==null?void 0:qe.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),hn=new Date().getTime()-((it=Me.current)==null?void 0:it.getTime()),_n=K==="x"?Xt:Ot,ii=Math.abs(_n)/hn;if(Math.abs(_n)>=vW||ii>.11){De(tt.current),(Vt=m.onDismiss)==null||Vt.call(m,m),Ae(K==="x"?Xt>0?"right":"left":Ot>0?"down":"up"),Oe(),fe(!0),pe(!1);return}$(!1),oe(null)},onPointerMove:Ee=>{var qe,it,Vt,Xt;if(!X.current||!Fe||((qe=window.getSelection())==null?void 0:qe.toString().length)>0)return;let Ot=Ee.clientY-X.current.y,hn=Ee.clientX-X.current.x,_n=(it=n.swipeDirections)!=null?it:_W(Z);!K&&(Math.abs(hn)>1||Math.abs(Ot)>1)&&oe(Math.abs(hn)>Math.abs(Ot)?"x":"y");let ii={x:0,y:0};K==="y"?(_n.includes("top")||_n.includes("bottom"))&&(_n.includes("top")&&Ot<0||_n.includes("bottom")&&Ot>0)&&(ii.y=Ot):K==="x"&&(_n.includes("left")||_n.includes("right"))&&(_n.includes("left")&&hn<0||_n.includes("right")&&hn>0)&&(ii.x=hn),(Math.abs(ii.x)>0||Math.abs(ii.y)>0)&&pe(!0),(Vt=_e.current)==null||Vt.style.setProperty("--swipe-amount-x",`${ii.x}px`),(Xt=_e.current)==null||Xt.style.setProperty("--swipe-amount-y",`${ii.y}px`)}},Wt&&!m.jsx?Ne.createElement("button",{"aria-label":Y,"data-disabled":Ie,"data-close-button":!0,onClick:Ie||!Fe?()=>{}:()=>{var Ee;Oe(),(Ee=m.onDismiss)==null||Ee.call(m,m)},className:hs(U==null?void 0:U.closeButton,(i=m==null?void 0:m.classNames)==null?void 0:i.closeButton)},(s=V==null?void 0:V.close)!=null?s:rW):null,m.jsx||N.isValidElement(m.title)?m.jsx?m.jsx:typeof m.title=="function"?m.title():m.title:Ne.createElement(Ne.Fragment,null,Re||m.icon||m.promise?Ne.createElement("div",{"data-icon":"",className:hs(U==null?void 0:U.icon,(o=m==null?void 0:m.classNames)==null?void 0:o.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||pt():null,m.type!=="loading"?m.icon||(V==null?void 0:V[Re])||KH(Re):null):null,Ne.createElement("div",{"data-content":"",className:hs(U==null?void 0:U.content,(a=m==null?void 0:m.classNames)==null?void 0:a.content)},Ne.createElement("div",{"data-title":"",className:hs(U==null?void 0:U.title,(l=m==null?void 0:m.classNames)==null?void 0:l.title)},typeof m.title=="function"?m.title():m.title),m.description?Ne.createElement("div",{"data-description":"",className:hs(re,bt,U==null?void 0:U.description,(c=m==null?void 0:m.classNames)==null?void 0:c.description)},typeof m.description=="function"?m.description():m.description):null),N.isValidElement(m.cancel)?m.cancel:m.cancel&&Ag(m.cancel)?Ne.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||I,onClick:Ee=>{var qe,it;Ag(m.cancel)&&Fe&&((it=(qe=m.cancel).onClick)==null||it.call(qe,Ee),Oe())},className:hs(U==null?void 0:U.cancelButton,(d=m==null?void 0:m.classNames)==null?void 0:d.cancelButton)},m.cancel.label):null,N.isValidElement(m.action)?m.action:m.action&&Ag(m.action)?Ne.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||H,onClick:Ee=>{var qe,it;Ag(m.action)&&((it=(qe=m.action).onClick)==null||it.call(qe,Ee),!Ee.defaultPrevented&&Oe())},className:hs(U==null?void 0:U.actionButton,(f=m==null?void 0:m.classNames)==null?void 0:f.actionButton)},m.action.label):null))};function JP(){if(typeof window>"u"||typeof document>"u")return"ltr";let n=document.documentElement.getAttribute("dir");return n==="auto"||!n?window.getComputedStyle(document.documentElement).direction:n}function wW(n,e){let t={};return[n,e].forEach((r,i)=>{let s=i===1,o=s?"--mobile-offset":"--offset",a=s?pW:fW;function l(c){["top","right","bottom","left"].forEach(d=>{t[`${o}-${d}`]=typeof c=="number"?`${c}px`:c})}typeof r=="number"||typeof r=="string"?l(r):typeof r=="object"?["top","right","bottom","left"].forEach(c=>{r[c]===void 0?t[`${o}-${c}`]=a:t[`${o}-${c}`]=typeof r[c]=="number"?`${r[c]}px`:r[c]}):l(a)}),t}var SW=N.forwardRef(function(n,e){let{invert:t,position:r="bottom-right",hotkey:i=["altKey","KeyT"],expand:s,closeButton:o,className:a,offset:l,mobileOffset:c,theme:d="light",richColors:f,duration:p,style:m,visibleToasts:v=hW,toastOptions:x,dir:y=JP(),gap:g=gW,loadingIcon:w,icons:S,containerAriaLabel:E="Notifications",pauseWhenPageIsHidden:A}=n,[T,P]=Ne.useState([]),k=Ne.useMemo(()=>Array.from(new Set([r].concat(T.filter(Q=>Q.position).map(Q=>Q.position)))),[T,r]),[R,I]=Ne.useState([]),[H,G]=Ne.useState(!1),[re,z]=Ne.useState(!1),[Z,J]=Ne.useState(d!=="system"?d:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),te=Ne.useRef(null),L=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),U=Ne.useRef(null),V=Ne.useRef(!1),Y=Ne.useCallback(Q=>{P(K=>{var oe;return(oe=K.find(xe=>xe.id===Q.id))!=null&&oe.delete||ci.dismiss(Q.id),K.filter(({id:xe})=>xe!==Q.id)})},[]);return Ne.useEffect(()=>ci.subscribe(Q=>{if(Q.dismiss){P(K=>K.map(oe=>oe.id===Q.id?{...oe,delete:!0}:oe));return}setTimeout(()=>{KN.flushSync(()=>{P(K=>{let oe=K.findIndex(xe=>xe.id===Q.id);return oe!==-1?[...K.slice(0,oe),{...K[oe],...Q},...K.slice(oe+1)]:[Q,...K]})})})}),[]),Ne.useEffect(()=>{if(d!=="system"){J(d);return}if(d==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?J("dark"):J("light")),typeof window>"u")return;let Q=window.matchMedia("(prefers-color-scheme: dark)");try{Q.addEventListener("change",({matches:K})=>{J(K?"dark":"light")})}catch{Q.addListener(({matches:oe})=>{try{J(oe?"dark":"light")}catch(xe){console.error(xe)}})}},[d]),Ne.useEffect(()=>{T.length<=1&&G(!1)},[T]),Ne.useEffect(()=>{let Q=K=>{var oe,xe;i.every(Ae=>K[Ae]||K.code===Ae)&&(G(!0),(oe=te.current)==null||oe.focus()),K.code==="Escape"&&(document.activeElement===te.current||(xe=te.current)!=null&&xe.contains(document.activeElement))&&G(!1)};return document.addEventListener("keydown",Q),()=>document.removeEventListener("keydown",Q)},[i]),Ne.useEffect(()=>{if(te.current)return()=>{U.current&&(U.current.focus({preventScroll:!0}),U.current=null,V.current=!1)}},[te.current]),Ne.createElement("section",{ref:e,"aria-label":`${E} ${L}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},k.map((Q,K)=>{var oe;let[xe,Ae]=Q.split("-");return T.length?Ne.createElement("ol",{key:Q,dir:y==="auto"?JP():y,tabIndex:-1,ref:te,className:a,"data-sonner-toaster":!0,"data-theme":Z,"data-y-position":xe,"data-lifted":H&&T.length>1&&!s,"data-x-position":Ae,style:{"--front-toast-height":`${((oe=R[0])==null?void 0:oe.height)||0}px`,"--width":`${mW}px`,"--gap":`${g}px`,...m,...wW(l,c)},onBlur:we=>{V.current&&!we.currentTarget.contains(we.relatedTarget)&&(V.current=!1,U.current&&(U.current.focus({preventScroll:!0}),U.current=null))},onFocus:we=>{we.target instanceof HTMLElement&&we.target.dataset.dismissible==="false"||V.current||(V.current=!0,U.current=we.relatedTarget)},onMouseEnter:()=>G(!0),onMouseMove:()=>G(!0),onMouseLeave:()=>{re||G(!1)},onDragEnd:()=>G(!1),onPointerDown:we=>{we.target instanceof HTMLElement&&we.target.dataset.dismissible==="false"||z(!0)},onPointerUp:()=>z(!1)},T.filter(we=>!we.position&&K===0||we.position===Q).map((we,lt)=>{var ct,He;return Ne.createElement(xW,{key:we.id,icons:S,index:lt,toast:we,defaultRichColors:f,duration:(ct=x==null?void 0:x.duration)!=null?ct:p,className:x==null?void 0:x.className,descriptionClassName:x==null?void 0:x.descriptionClassName,invert:t,visibleToasts:v,closeButton:(He=x==null?void 0:x.closeButton)!=null?He:o,interacting:re,position:Q,style:x==null?void 0:x.style,unstyled:x==null?void 0:x.unstyled,classNames:x==null?void 0:x.classNames,cancelButtonStyle:x==null?void 0:x.cancelButtonStyle,actionButtonStyle:x==null?void 0:x.actionButtonStyle,removeToast:Y,toasts:T.filter(Ye=>Ye.position==we.position),heights:R.filter(Ye=>Ye.position==we.position),setHeights:I,expandByDefault:s,gap:g,loadingIcon:w,expanded:H,pauseWhenPageIsHidden:A,swipeDirections:n.swipeDirections})})):null}))});const bW=({...n})=>{const{theme:e="system"}=YH();return D.jsx(SW,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...n})},EW=["top","right","bottom","left"],al=Math.min,Ci=Math.max,Oy=Math.round,Cg=Math.floor,so=n=>({x:n,y:n}),MW={left:"right",right:"left",bottom:"top",top:"bottom"},TW={start:"end",end:"start"};function Mb(n,e,t){return Ci(n,al(e,t))}function Zo(n,e){return typeof n=="function"?n(e):n}function Jo(n){return n.split("-")[0]}function rh(n){return n.split("-")[1]}function uM(n){return n==="x"?"y":"x"}function dM(n){return n==="y"?"height":"width"}const AW=new Set(["top","bottom"]);function no(n){return AW.has(Jo(n))?"y":"x"}function hM(n){return uM(no(n))}function CW(n,e,t){t===void 0&&(t=!1);const r=rh(n),i=hM(n),s=dM(i);let o=i==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=Ny(o)),[o,Ny(o)]}function PW(n){const e=Ny(n);return[Tb(n),e,Tb(e)]}function Tb(n){return n.replace(/start|end/g,e=>TW[e])}const QP=["left","right"],eR=["right","left"],RW=["top","bottom"],IW=["bottom","top"];function LW(n,e,t){switch(n){case"top":case"bottom":return t?e?eR:QP:e?QP:eR;case"left":case"right":return e?RW:IW;default:return[]}}function kW(n,e,t,r){const i=rh(n);let s=LW(Jo(n),t==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(Tb)))),s}function Ny(n){return n.replace(/left|right|bottom|top/g,e=>MW[e])}function OW(n){return{top:0,right:0,bottom:0,left:0,...n}}function vD(n){return typeof n!="number"?OW(n):{top:n,right:n,bottom:n,left:n}}function Dy(n){const{x:e,y:t,width:r,height:i}=n;return{width:r,height:i,top:t,left:e,right:e+r,bottom:t+i,x:e,y:t}}function tR(n,e,t){let{reference:r,floating:i}=n;const s=no(e),o=hM(e),a=dM(o),l=Jo(e),c=s==="y",d=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,p=r[a]/2-i[a]/2;let m;switch(l){case"top":m={x:d,y:r.y-i.height};break;case"bottom":m={x:d,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:f};break;case"left":m={x:r.x-i.width,y:f};break;default:m={x:r.x,y:r.y}}switch(rh(e)){case"start":m[o]-=p*(t&&c?-1:1);break;case"end":m[o]+=p*(t&&c?-1:1);break}return m}const NW=async(n,e,t)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=t,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:n,floating:e,strategy:i}),{x:d,y:f}=tR(c,r,l),p=r,m={},v=0;for(let x=0;x<a.length;x++){const{name:y,fn:g}=a[x],{x:w,y:S,data:E,reset:A}=await g({x:d,y:f,initialPlacement:r,placement:p,strategy:i,middlewareData:m,rects:c,platform:o,elements:{reference:n,floating:e}});d=w??d,f=S??f,m={...m,[y]:{...m[y],...E}},A&&v<=50&&(v++,typeof A=="object"&&(A.placement&&(p=A.placement),A.rects&&(c=A.rects===!0?await o.getElementRects({reference:n,floating:e,strategy:i}):A.rects),{x:d,y:f}=tR(c,p,l)),x=-1)}return{x:d,y:f,placement:p,strategy:i,middlewareData:m}};async function np(n,e){var t;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:l}=n,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:f="floating",altBoundary:p=!1,padding:m=0}=Zo(e,n),v=vD(m),y=a[p?f==="floating"?"reference":"floating":f],g=Dy(await s.getClippingRect({element:(t=await(s.isElement==null?void 0:s.isElement(y)))==null||t?y:y.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:d,strategy:l})),w=f==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,S=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),E=await(s.isElement==null?void 0:s.isElement(S))?await(s.getScale==null?void 0:s.getScale(S))||{x:1,y:1}:{x:1,y:1},A=Dy(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:w,offsetParent:S,strategy:l}):w);return{top:(g.top-A.top+v.top)/E.y,bottom:(A.bottom-g.bottom+v.bottom)/E.y,left:(g.left-A.left+v.left)/E.x,right:(A.right-g.right+v.right)/E.x}}const DW=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:d=0}=Zo(n,e)||{};if(c==null)return{};const f=vD(d),p={x:t,y:r},m=hM(i),v=dM(m),x=await o.getDimensions(c),y=m==="y",g=y?"top":"left",w=y?"bottom":"right",S=y?"clientHeight":"clientWidth",E=s.reference[v]+s.reference[m]-p[m]-s.floating[v],A=p[m]-s.reference[m],T=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let P=T?T[S]:0;(!P||!await(o.isElement==null?void 0:o.isElement(T)))&&(P=a.floating[S]||s.floating[v]);const k=E/2-A/2,R=P/2-x[v]/2-1,I=al(f[g],R),H=al(f[w],R),G=I,re=P-x[v]-H,z=P/2-x[v]/2+k,Z=Mb(G,z,re),J=!l.arrow&&rh(i)!=null&&z!==Z&&s.reference[v]/2-(z<G?I:H)-x[v]/2<0,te=J?z<G?z-G:z-re:0;return{[m]:p[m]+te,data:{[m]:Z,centerOffset:z-Z-te,...J&&{alignmentOffset:te}},reset:J}}}),UW=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:d=!0,crossAxis:f=!0,fallbackPlacements:p,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:x=!0,...y}=Zo(n,e);if((t=s.arrow)!=null&&t.alignmentOffset)return{};const g=Jo(i),w=no(a),S=Jo(a)===a,E=await(l.isRTL==null?void 0:l.isRTL(c.floating)),A=p||(S||!x?[Ny(a)]:PW(a)),T=v!=="none";!p&&T&&A.push(...kW(a,x,v,E));const P=[a,...A],k=await np(e,y),R=[];let I=((r=s.flip)==null?void 0:r.overflows)||[];if(d&&R.push(k[g]),f){const z=CW(i,o,E);R.push(k[z[0]],k[z[1]])}if(I=[...I,{placement:i,overflows:R}],!R.every(z=>z<=0)){var H,G;const z=(((H=s.flip)==null?void 0:H.index)||0)+1,Z=P[z];if(Z&&(!(f==="alignment"?w!==no(Z):!1)||I.every(L=>L.overflows[0]>0&&no(L.placement)===w)))return{data:{index:z,overflows:I},reset:{placement:Z}};let J=(G=I.filter(te=>te.overflows[0]<=0).sort((te,L)=>te.overflows[1]-L.overflows[1])[0])==null?void 0:G.placement;if(!J)switch(m){case"bestFit":{var re;const te=(re=I.filter(L=>{if(T){const U=no(L.placement);return U===w||U==="y"}return!0}).map(L=>[L.placement,L.overflows.filter(U=>U>0).reduce((U,V)=>U+V,0)]).sort((L,U)=>L[1]-U[1])[0])==null?void 0:re[0];te&&(J=te);break}case"initialPlacement":J=a;break}if(i!==J)return{reset:{placement:J}}}return{}}}};function nR(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function rR(n){return EW.some(e=>n[e]>=0)}const FW=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:r="referenceHidden",...i}=Zo(n,e);switch(r){case"referenceHidden":{const s=await np(e,{...i,elementContext:"reference"}),o=nR(s,t.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:rR(o)}}}case"escaped":{const s=await np(e,{...i,altBoundary:!0}),o=nR(s,t.floating);return{data:{escapedOffsets:o,escaped:rR(o)}}}default:return{}}}}},yD=new Set(["left","top"]);async function BW(n,e){const{placement:t,platform:r,elements:i}=n,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=Jo(t),a=rh(t),l=no(t)==="y",c=yD.has(o)?-1:1,d=s&&l?-1:1,f=Zo(e,n);let{mainAxis:p,crossAxis:m,alignmentAxis:v}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return a&&typeof v=="number"&&(m=a==="end"?v*-1:v),l?{x:m*d,y:p*c}:{x:p*c,y:m*d}}const zW=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,r;const{x:i,y:s,placement:o,middlewareData:a}=e,l=await BW(e,n);return o===((t=a.offset)==null?void 0:t.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:o}}}}},VW=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:y=>{let{x:g,y:w}=y;return{x:g,y:w}}},...l}=Zo(n,e),c={x:t,y:r},d=await np(e,l),f=no(Jo(i)),p=uM(f);let m=c[p],v=c[f];if(s){const y=p==="y"?"top":"left",g=p==="y"?"bottom":"right",w=m+d[y],S=m-d[g];m=Mb(w,m,S)}if(o){const y=f==="y"?"top":"left",g=f==="y"?"bottom":"right",w=v+d[y],S=v-d[g];v=Mb(w,v,S)}const x=a.fn({...e,[p]:m,[f]:v});return{...x,data:{x:x.x-t,y:x.y-r,enabled:{[p]:s,[f]:o}}}}}},jW=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:r,placement:i,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=Zo(n,e),d={x:t,y:r},f=no(i),p=uM(f);let m=d[p],v=d[f];const x=Zo(a,e),y=typeof x=="number"?{mainAxis:x,crossAxis:0}:{mainAxis:0,crossAxis:0,...x};if(l){const S=p==="y"?"height":"width",E=s.reference[p]-s.floating[S]+y.mainAxis,A=s.reference[p]+s.reference[S]-y.mainAxis;m<E?m=E:m>A&&(m=A)}if(c){var g,w;const S=p==="y"?"width":"height",E=yD.has(Jo(i)),A=s.reference[f]-s.floating[S]+(E&&((g=o.offset)==null?void 0:g[f])||0)+(E?0:y.crossAxis),T=s.reference[f]+s.reference[S]+(E?0:((w=o.offset)==null?void 0:w[f])||0)-(E?y.crossAxis:0);v<A?v=A:v>T&&(v=T)}return{[p]:m,[f]:v}}}},HW=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,r;const{placement:i,rects:s,platform:o,elements:a}=e,{apply:l=()=>{},...c}=Zo(n,e),d=await np(e,c),f=Jo(i),p=rh(i),m=no(i)==="y",{width:v,height:x}=s.floating;let y,g;f==="top"||f==="bottom"?(y=f,g=p===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(g=f,y=p==="end"?"top":"bottom");const w=x-d.top-d.bottom,S=v-d.left-d.right,E=al(x-d[y],w),A=al(v-d[g],S),T=!e.middlewareData.shift;let P=E,k=A;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(k=S),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(P=w),T&&!p){const I=Ci(d.left,0),H=Ci(d.right,0),G=Ci(d.top,0),re=Ci(d.bottom,0);m?k=v-2*(I!==0||H!==0?I+H:Ci(d.left,d.right)):P=x-2*(G!==0||re!==0?G+re:Ci(d.top,d.bottom))}await l({...e,availableWidth:k,availableHeight:P});const R=await o.getDimensions(a.floating);return v!==R.width||x!==R.height?{reset:{rects:!0}}:{}}}};function L0(){return typeof window<"u"}function ih(n){return _D(n)?(n.nodeName||"").toLowerCase():"#document"}function Oi(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function vo(n){var e;return(e=(_D(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function _D(n){return L0()?n instanceof Node||n instanceof Oi(n).Node:!1}function Ns(n){return L0()?n instanceof Element||n instanceof Oi(n).Element:!1}function fo(n){return L0()?n instanceof HTMLElement||n instanceof Oi(n).HTMLElement:!1}function iR(n){return!L0()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof Oi(n).ShadowRoot}const WW=new Set(["inline","contents"]);function Xp(n){const{overflow:e,overflowX:t,overflowY:r,display:i}=Ds(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!WW.has(i)}const GW=new Set(["table","td","th"]);function $W(n){return GW.has(ih(n))}const XW=[":popover-open",":modal"];function k0(n){return XW.some(e=>{try{return n.matches(e)}catch{return!1}})}const qW=["transform","translate","scale","rotate","perspective"],YW=["transform","translate","scale","rotate","perspective","filter"],KW=["paint","layout","strict","content"];function fM(n){const e=pM(),t=Ns(n)?Ds(n):n;return qW.some(r=>t[r]?t[r]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||YW.some(r=>(t.willChange||"").includes(r))||KW.some(r=>(t.contain||"").includes(r))}function ZW(n){let e=ll(n);for(;fo(e)&&!Fd(e);){if(fM(e))return e;if(k0(e))return null;e=ll(e)}return null}function pM(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const JW=new Set(["html","body","#document"]);function Fd(n){return JW.has(ih(n))}function Ds(n){return Oi(n).getComputedStyle(n)}function O0(n){return Ns(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function ll(n){if(ih(n)==="html")return n;const e=n.assignedSlot||n.parentNode||iR(n)&&n.host||vo(n);return iR(e)?e.host:e}function xD(n){const e=ll(n);return Fd(e)?n.ownerDocument?n.ownerDocument.body:n.body:fo(e)&&Xp(e)?e:xD(e)}function rp(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const i=xD(n),s=i===((r=n.ownerDocument)==null?void 0:r.body),o=Oi(i);if(s){const a=Ab(o);return e.concat(o,o.visualViewport||[],Xp(i)?i:[],a&&t?rp(a):[])}return e.concat(i,rp(i,[],t))}function Ab(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function wD(n){const e=Ds(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=fo(n),s=i?n.offsetWidth:t,o=i?n.offsetHeight:r,a=Oy(t)!==s||Oy(r)!==o;return a&&(t=s,r=o),{width:t,height:r,$:a}}function mM(n){return Ns(n)?n:n.contextElement}function yd(n){const e=mM(n);if(!fo(e))return so(1);const t=e.getBoundingClientRect(),{width:r,height:i,$:s}=wD(e);let o=(s?Oy(t.width):t.width)/r,a=(s?Oy(t.height):t.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const QW=so(0);function SD(n){const e=Oi(n);return!pM()||!e.visualViewport?QW:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function eG(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==Oi(n)?!1:e}function Oc(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const i=n.getBoundingClientRect(),s=mM(n);let o=so(1);e&&(r?Ns(r)&&(o=yd(r)):o=yd(n));const a=eG(s,t,r)?SD(s):so(0);let l=(i.left+a.x)/o.x,c=(i.top+a.y)/o.y,d=i.width/o.x,f=i.height/o.y;if(s){const p=Oi(s),m=r&&Ns(r)?Oi(r):r;let v=p,x=Ab(v);for(;x&&r&&m!==v;){const y=yd(x),g=x.getBoundingClientRect(),w=Ds(x),S=g.left+(x.clientLeft+parseFloat(w.paddingLeft))*y.x,E=g.top+(x.clientTop+parseFloat(w.paddingTop))*y.y;l*=y.x,c*=y.y,d*=y.x,f*=y.y,l+=S,c+=E,v=Oi(x),x=Ab(v)}}return Dy({width:d,height:f,x:l,y:c})}function gM(n,e){const t=O0(n).scrollLeft;return e?e.left+t:Oc(vo(n)).left+t}function bD(n,e,t){t===void 0&&(t=!1);const r=n.getBoundingClientRect(),i=r.left+e.scrollLeft-(t?0:gM(n,r)),s=r.top+e.scrollTop;return{x:i,y:s}}function tG(n){let{elements:e,rect:t,offsetParent:r,strategy:i}=n;const s=i==="fixed",o=vo(r),a=e?k0(e.floating):!1;if(r===o||a&&s)return t;let l={scrollLeft:0,scrollTop:0},c=so(1);const d=so(0),f=fo(r);if((f||!f&&!s)&&((ih(r)!=="body"||Xp(o))&&(l=O0(r)),fo(r))){const m=Oc(r);c=yd(r),d.x=m.x+r.clientLeft,d.y=m.y+r.clientTop}const p=o&&!f&&!s?bD(o,l,!0):so(0);return{width:t.width*c.x,height:t.height*c.y,x:t.x*c.x-l.scrollLeft*c.x+d.x+p.x,y:t.y*c.y-l.scrollTop*c.y+d.y+p.y}}function nG(n){return Array.from(n.getClientRects())}function rG(n){const e=vo(n),t=O0(n),r=n.ownerDocument.body,i=Ci(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=Ci(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-t.scrollLeft+gM(n);const a=-t.scrollTop;return Ds(r).direction==="rtl"&&(o+=Ci(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function iG(n,e){const t=Oi(n),r=vo(n),i=t.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const c=pM();(!c||c&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a,y:l}}const sG=new Set(["absolute","fixed"]);function oG(n,e){const t=Oc(n,!0,e==="fixed"),r=t.top+n.clientTop,i=t.left+n.clientLeft,s=fo(n)?yd(n):so(1),o=n.clientWidth*s.x,a=n.clientHeight*s.y,l=i*s.x,c=r*s.y;return{width:o,height:a,x:l,y:c}}function sR(n,e,t){let r;if(e==="viewport")r=iG(n,t);else if(e==="document")r=rG(vo(n));else if(Ns(e))r=oG(e,t);else{const i=SD(n);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return Dy(r)}function ED(n,e){const t=ll(n);return t===e||!Ns(t)||Fd(t)?!1:Ds(t).position==="fixed"||ED(t,e)}function aG(n,e){const t=e.get(n);if(t)return t;let r=rp(n,[],!1).filter(a=>Ns(a)&&ih(a)!=="body"),i=null;const s=Ds(n).position==="fixed";let o=s?ll(n):n;for(;Ns(o)&&!Fd(o);){const a=Ds(o),l=fM(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&sG.has(i.position)||Xp(o)&&!l&&ED(n,o))?r=r.filter(d=>d!==o):i=a,o=ll(o)}return e.set(n,r),r}function lG(n){let{element:e,boundary:t,rootBoundary:r,strategy:i}=n;const o=[...t==="clippingAncestors"?k0(e)?[]:aG(e,this._c):[].concat(t),r],a=o[0],l=o.reduce((c,d)=>{const f=sR(e,d,i);return c.top=Ci(f.top,c.top),c.right=al(f.right,c.right),c.bottom=al(f.bottom,c.bottom),c.left=Ci(f.left,c.left),c},sR(e,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function cG(n){const{width:e,height:t}=wD(n);return{width:e,height:t}}function uG(n,e,t){const r=fo(e),i=vo(e),s=t==="fixed",o=Oc(n,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=so(0);function c(){l.x=gM(i)}if(r||!r&&!s)if((ih(e)!=="body"||Xp(i))&&(a=O0(e)),r){const m=Oc(e,!0,s,e);l.x=m.x+e.clientLeft,l.y=m.y+e.clientTop}else i&&c();s&&!r&&i&&c();const d=i&&!r&&!s?bD(i,a):so(0),f=o.left+a.scrollLeft-l.x-d.x,p=o.top+a.scrollTop-l.y-d.y;return{x:f,y:p,width:o.width,height:o.height}}function aw(n){return Ds(n).position==="static"}function oR(n,e){if(!fo(n)||Ds(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return vo(n)===t&&(t=t.ownerDocument.body),t}function MD(n,e){const t=Oi(n);if(k0(n))return t;if(!fo(n)){let i=ll(n);for(;i&&!Fd(i);){if(Ns(i)&&!aw(i))return i;i=ll(i)}return t}let r=oR(n,e);for(;r&&$W(r)&&aw(r);)r=oR(r,e);return r&&Fd(r)&&aw(r)&&!fM(r)?t:r||ZW(n)||t}const dG=async function(n){const e=this.getOffsetParent||MD,t=this.getDimensions,r=await t(n.floating);return{reference:uG(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function hG(n){return Ds(n).direction==="rtl"}const fG={convertOffsetParentRelativeRectToViewportRelativeRect:tG,getDocumentElement:vo,getClippingRect:lG,getOffsetParent:MD,getElementRects:dG,getClientRects:nG,getDimensions:cG,getScale:yd,isElement:Ns,isRTL:hG};function TD(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function pG(n,e){let t=null,r;const i=vo(n);function s(){var a;clearTimeout(r),(a=t)==null||a.disconnect(),t=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const c=n.getBoundingClientRect(),{left:d,top:f,width:p,height:m}=c;if(a||e(),!p||!m)return;const v=Cg(f),x=Cg(i.clientWidth-(d+p)),y=Cg(i.clientHeight-(f+m)),g=Cg(d),S={rootMargin:-v+"px "+-x+"px "+-y+"px "+-g+"px",threshold:Ci(0,al(1,l))||1};let E=!0;function A(T){const P=T[0].intersectionRatio;if(P!==l){if(!E)return o();P?o(!1,P):r=setTimeout(()=>{o(!1,1e-7)},1e3)}P===1&&!TD(c,n.getBoundingClientRect())&&o(),E=!1}try{t=new IntersectionObserver(A,{...S,root:i.ownerDocument})}catch{t=new IntersectionObserver(A,S)}t.observe(n)}return o(!0),s}function mG(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=mM(n),d=i||s?[...c?rp(c):[],...rp(e)]:[];d.forEach(g=>{i&&g.addEventListener("scroll",t,{passive:!0}),s&&g.addEventListener("resize",t)});const f=c&&a?pG(c,t):null;let p=-1,m=null;o&&(m=new ResizeObserver(g=>{let[w]=g;w&&w.target===c&&m&&(m.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var S;(S=m)==null||S.observe(e)})),t()}),c&&!l&&m.observe(c),m.observe(e));let v,x=l?Oc(n):null;l&&y();function y(){const g=Oc(n);x&&!TD(x,g)&&t(),x=g,v=requestAnimationFrame(y)}return t(),()=>{var g;d.forEach(w=>{i&&w.removeEventListener("scroll",t),s&&w.removeEventListener("resize",t)}),f==null||f(),(g=m)==null||g.disconnect(),m=null,l&&cancelAnimationFrame(v)}}const gG=zW,vG=VW,yG=UW,_G=HW,xG=FW,aR=DW,wG=jW,SG=(n,e,t)=>{const r=new Map,i={platform:fG,...t},s={...i.platform,_c:r};return NW(n,e,{...i,platform:s})};var bG=typeof document<"u",EG=function(){},Zv=bG?N.useLayoutEffect:EG;function Uy(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,r,i;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(r=t;r--!==0;)if(!Uy(n[r],e[r]))return!1;return!0}if(i=Object.keys(n),t=i.length,t!==Object.keys(e).length)return!1;for(r=t;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=t;r--!==0;){const s=i[r];if(!(s==="_owner"&&n.$$typeof)&&!Uy(n[s],e[s]))return!1}return!0}return n!==n&&e!==e}function AD(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function lR(n,e){const t=AD(n);return Math.round(e*t)/t}function lw(n){const e=N.useRef(n);return Zv(()=>{e.current=n}),e}function MG(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=n,[d,f]=N.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[p,m]=N.useState(r);Uy(p,r)||m(r);const[v,x]=N.useState(null),[y,g]=N.useState(null),w=N.useCallback(L=>{L!==T.current&&(T.current=L,x(L))},[]),S=N.useCallback(L=>{L!==P.current&&(P.current=L,g(L))},[]),E=s||v,A=o||y,T=N.useRef(null),P=N.useRef(null),k=N.useRef(d),R=l!=null,I=lw(l),H=lw(i),G=lw(c),re=N.useCallback(()=>{if(!T.current||!P.current)return;const L={placement:e,strategy:t,middleware:p};H.current&&(L.platform=H.current),SG(T.current,P.current,L).then(U=>{const V={...U,isPositioned:G.current!==!1};z.current&&!Uy(k.current,V)&&(k.current=V,Gp.flushSync(()=>{f(V)}))})},[p,e,t,H,G]);Zv(()=>{c===!1&&k.current.isPositioned&&(k.current.isPositioned=!1,f(L=>({...L,isPositioned:!1})))},[c]);const z=N.useRef(!1);Zv(()=>(z.current=!0,()=>{z.current=!1}),[]),Zv(()=>{if(E&&(T.current=E),A&&(P.current=A),E&&A){if(I.current)return I.current(E,A,re);re()}},[E,A,re,I,R]);const Z=N.useMemo(()=>({reference:T,floating:P,setReference:w,setFloating:S}),[w,S]),J=N.useMemo(()=>({reference:E,floating:A}),[E,A]),te=N.useMemo(()=>{const L={position:t,left:0,top:0};if(!J.floating)return L;const U=lR(J.floating,d.x),V=lR(J.floating,d.y);return a?{...L,transform:"translate("+U+"px, "+V+"px)",...AD(J.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:U,top:V}},[t,a,J.floating,d.x,d.y]);return N.useMemo(()=>({...d,update:re,refs:Z,elements:J,floatingStyles:te}),[d,re,Z,J,te])}const TG=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:r,padding:i}=typeof n=="function"?n(t):n;return r&&e(r)?r.current!=null?aR({element:r.current,padding:i}).fn(t):{}:r?aR({element:r,padding:i}).fn(t):{}}}},AG=(n,e)=>({...gG(n),options:[n,e]}),CG=(n,e)=>({...vG(n),options:[n,e]}),PG=(n,e)=>({...wG(n),options:[n,e]}),RG=(n,e)=>({...yG(n),options:[n,e]}),IG=(n,e)=>({..._G(n),options:[n,e]}),LG=(n,e)=>({...xG(n),options:[n,e]}),kG=(n,e)=>({...TG(n),options:[n,e]});var OG="Arrow",CD=N.forwardRef((n,e)=>{const{children:t,width:r=10,height:i=5,...s}=n;return D.jsx(yi.svg,{...s,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:D.jsx("polygon",{points:"0,0 30,0 15,10"})})});CD.displayName=OG;var NG=CD;function DG(n){const[e,t]=N.useState(void 0);return ol(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=n.offsetWidth,a=n.offsetHeight;t({width:o,height:a})});return r.observe(n,{box:"border-box"}),()=>r.unobserve(n)}else t(void 0)},[n]),e}var PD="Popper",[RD,ID]=P0(PD),[Xoe,LD]=RD(PD),kD="PopperAnchor",OD=N.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:r,...i}=n,s=LD(kD,t),o=N.useRef(null),a=Os(e,o);return N.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:D.jsx(yi.div,{...i,ref:a})});OD.displayName=kD;var vM="PopperContent",[UG,FG]=RD(vM),ND=N.forwardRef((n,e)=>{var we,lt,ct,He,Ye,$;const{__scopePopper:t,side:r="bottom",sideOffset:i=0,align:s="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:d=0,sticky:f="partial",hideWhenDetached:p=!1,updatePositionStrategy:m="optimized",onPlaced:v,...x}=n,y=LD(vM,t),[g,w]=N.useState(null),S=Os(e,Se=>w(Se)),[E,A]=N.useState(null),T=DG(E),P=(T==null?void 0:T.width)??0,k=(T==null?void 0:T.height)??0,R=r+(s!=="center"?"-"+s:""),I=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},H=Array.isArray(c)?c:[c],G=H.length>0,re={padding:I,boundary:H.filter(zG),altBoundary:G},{refs:z,floatingStyles:Z,placement:J,isPositioned:te,middlewareData:L}=MG({strategy:"fixed",placement:R,whileElementsMounted:(...Se)=>mG(...Se,{animationFrame:m==="always"}),elements:{reference:y.anchor},middleware:[AG({mainAxis:i+k,alignmentAxis:o}),l&&CG({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?PG():void 0,...re}),l&&RG({...re}),IG({...re,apply:({elements:Se,rects:fe,availableWidth:Ce,availableHeight:pe})=>{const{width:et,height:De}=fe.reference,F=Se.floating.style;F.setProperty("--radix-popper-available-width",`${Ce}px`),F.setProperty("--radix-popper-available-height",`${pe}px`),F.setProperty("--radix-popper-anchor-width",`${et}px`),F.setProperty("--radix-popper-anchor-height",`${De}px`)}}),E&&kG({element:E,padding:a}),VG({arrowWidth:P,arrowHeight:k}),p&&LG({strategy:"referenceHidden",...re})]}),[U,V]=FD(J),Y=sl(v);ol(()=>{te&&(Y==null||Y())},[te,Y]);const Q=(we=L.arrow)==null?void 0:we.x,K=(lt=L.arrow)==null?void 0:lt.y,oe=((ct=L.arrow)==null?void 0:ct.centerOffset)!==0,[xe,Ae]=N.useState();return ol(()=>{g&&Ae(window.getComputedStyle(g).zIndex)},[g]),D.jsx("div",{ref:z.setFloating,"data-radix-popper-content-wrapper":"",style:{...Z,transform:te?Z.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:xe,"--radix-popper-transform-origin":[(He=L.transformOrigin)==null?void 0:He.x,(Ye=L.transformOrigin)==null?void 0:Ye.y].join(" "),...(($=L.hide)==null?void 0:$.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:D.jsx(UG,{scope:t,placedSide:U,onArrowChange:A,arrowX:Q,arrowY:K,shouldHideArrow:oe,children:D.jsx(yi.div,{"data-side":U,"data-align":V,...x,ref:S,style:{...x.style,animation:te?void 0:"none"}})})})});ND.displayName=vM;var DD="PopperArrow",BG={top:"bottom",right:"left",bottom:"top",left:"right"},UD=N.forwardRef(function(e,t){const{__scopePopper:r,...i}=e,s=FG(DD,r),o=BG[s.placedSide];return D.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:D.jsx(NG,{...i,ref:t,style:{...i.style,display:"block"}})})});UD.displayName=DD;function zG(n){return n!==null}var VG=n=>({name:"transformOrigin",options:n,fn(e){var y,g,w;const{placement:t,rects:r,middlewareData:i}=e,o=((y=i.arrow)==null?void 0:y.centerOffset)!==0,a=o?0:n.arrowWidth,l=o?0:n.arrowHeight,[c,d]=FD(t),f={start:"0%",center:"50%",end:"100%"}[d],p=(((g=i.arrow)==null?void 0:g.x)??0)+a/2,m=(((w=i.arrow)==null?void 0:w.y)??0)+l/2;let v="",x="";return c==="bottom"?(v=o?f:`${p}px`,x=`${-l}px`):c==="top"?(v=o?f:`${p}px`,x=`${r.floating.height+l}px`):c==="right"?(v=`${-l}px`,x=o?f:`${m}px`):c==="left"&&(v=`${r.floating.width+l}px`,x=o?f:`${m}px`),{data:{x:v,y:x}}}});function FD(n){const[e,t="center"]=n.split("-");return[e,t]}var jG=OD,HG=ND,WG=UD,[N0,qoe]=P0("Tooltip",[ID]),yM=ID(),BD="TooltipProvider",GG=700,cR="tooltip.open",[$G,zD]=N0(BD),VD=n=>{const{__scopeTooltip:e,delayDuration:t=GG,skipDelayDuration:r=300,disableHoverableContent:i=!1,children:s}=n,o=N.useRef(!0),a=N.useRef(!1),l=N.useRef(0);return N.useEffect(()=>{const c=l.current;return()=>window.clearTimeout(c)},[]),D.jsx($G,{scope:e,isOpenDelayedRef:o,delayDuration:t,onOpen:N.useCallback(()=>{window.clearTimeout(l.current),o.current=!1},[]),onClose:N.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:N.useCallback(c=>{a.current=c},[]),disableHoverableContent:i,children:s})};VD.displayName=BD;var jD="Tooltip",[Yoe,D0]=N0(jD),Cb="TooltipTrigger",XG=N.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,i=D0(Cb,t),s=zD(Cb,t),o=yM(t),a=N.useRef(null),l=Os(e,a,i.onTriggerChange),c=N.useRef(!1),d=N.useRef(!1),f=N.useCallback(()=>c.current=!1,[]);return N.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),D.jsx(jG,{asChild:!0,...o,children:D.jsx(yi.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...r,ref:l,onPointerMove:nr(n.onPointerMove,p=>{p.pointerType!=="touch"&&!d.current&&!s.isPointerInTransitRef.current&&(i.onTriggerEnter(),d.current=!0)}),onPointerLeave:nr(n.onPointerLeave,()=>{i.onTriggerLeave(),d.current=!1}),onPointerDown:nr(n.onPointerDown,()=>{i.open&&i.onClose(),c.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:nr(n.onFocus,()=>{c.current||i.onOpen()}),onBlur:nr(n.onBlur,i.onClose),onClick:nr(n.onClick,i.onClose)})})});XG.displayName=Cb;var qG="TooltipPortal",[Koe,YG]=N0(qG,{forceMount:void 0}),Bd="TooltipContent",HD=N.forwardRef((n,e)=>{const t=YG(Bd,n.__scopeTooltip),{forceMount:r=t.forceMount,side:i="top",...s}=n,o=D0(Bd,n.__scopeTooltip);return D.jsx(oM,{present:r||o.open,children:o.disableHoverableContent?D.jsx(WD,{side:i,...s,ref:e}):D.jsx(KG,{side:i,...s,ref:e})})}),KG=N.forwardRef((n,e)=>{const t=D0(Bd,n.__scopeTooltip),r=zD(Bd,n.__scopeTooltip),i=N.useRef(null),s=Os(e,i),[o,a]=N.useState(null),{trigger:l,onClose:c}=t,d=i.current,{onPointerInTransitChange:f}=r,p=N.useCallback(()=>{a(null),f(!1)},[f]),m=N.useCallback((v,x)=>{const y=v.currentTarget,g={x:v.clientX,y:v.clientY},w=t6(g,y.getBoundingClientRect()),S=n6(g,w),E=r6(x.getBoundingClientRect()),A=s6([...S,...E]);a(A),f(!0)},[f]);return N.useEffect(()=>()=>p(),[p]),N.useEffect(()=>{if(l&&d){const v=y=>m(y,d),x=y=>m(y,l);return l.addEventListener("pointerleave",v),d.addEventListener("pointerleave",x),()=>{l.removeEventListener("pointerleave",v),d.removeEventListener("pointerleave",x)}}},[l,d,m,p]),N.useEffect(()=>{if(o){const v=x=>{const y=x.target,g={x:x.clientX,y:x.clientY},w=(l==null?void 0:l.contains(y))||(d==null?void 0:d.contains(y)),S=!i6(g,o);w?p():S&&(p(),c())};return document.addEventListener("pointermove",v),()=>document.removeEventListener("pointermove",v)}},[l,d,o,c,p]),D.jsx(WD,{...n,ref:s})}),[ZG,JG]=N0(jD,{isInside:!1}),QG=tH("TooltipContent"),WD=N.forwardRef((n,e)=>{const{__scopeTooltip:t,children:r,"aria-label":i,onEscapeKeyDown:s,onPointerDownOutside:o,...a}=n,l=D0(Bd,t),c=yM(t),{onClose:d}=l;return N.useEffect(()=>(document.addEventListener(cR,d),()=>document.removeEventListener(cR,d)),[d]),N.useEffect(()=>{if(l.trigger){const f=p=>{const m=p.target;m!=null&&m.contains(l.trigger)&&d()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[l.trigger,d]),D.jsx(sM,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:f=>f.preventDefault(),onDismiss:d,children:D.jsxs(HG,{"data-state":l.stateAttribute,...c,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[D.jsx(QG,{children:r}),D.jsx(ZG,{scope:t,isInside:!0,children:D.jsx(TH,{id:l.contentId,role:"tooltip",children:i||r})})]})})});HD.displayName=Bd;var GD="TooltipArrow",e6=N.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,i=yM(t);return JG(GD,t).isInside?null:D.jsx(WG,{...i,...r,ref:e})});e6.displayName=GD;function t6(n,e){const t=Math.abs(e.top-n.y),r=Math.abs(e.bottom-n.y),i=Math.abs(e.right-n.x),s=Math.abs(e.left-n.x);switch(Math.min(t,r,i,s)){case s:return"left";case i:return"right";case t:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function n6(n,e,t=5){const r=[];switch(e){case"top":r.push({x:n.x-t,y:n.y+t},{x:n.x+t,y:n.y+t});break;case"bottom":r.push({x:n.x-t,y:n.y-t},{x:n.x+t,y:n.y-t});break;case"left":r.push({x:n.x+t,y:n.y-t},{x:n.x+t,y:n.y+t});break;case"right":r.push({x:n.x-t,y:n.y-t},{x:n.x-t,y:n.y+t});break}return r}function r6(n){const{top:e,right:t,bottom:r,left:i}=n;return[{x:i,y:e},{x:t,y:e},{x:t,y:r},{x:i,y:r}]}function i6(n,e){const{x:t,y:r}=n;let i=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s],l=e[o],c=a.x,d=a.y,f=l.x,p=l.y;d>r!=p>r&&t<(f-c)*(r-d)/(p-d)+c&&(i=!i)}return i}function s6(n){const e=n.slice();return e.sort((t,r)=>t.x<r.x?-1:t.x>r.x?1:t.y<r.y?-1:t.y>r.y?1:0),o6(e)}function o6(n){if(n.length<=1)return n.slice();const e=[];for(let r=0;r<n.length;r++){const i=n[r];for(;e.length>=2;){const s=e[e.length-1],o=e[e.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))e.pop();else break}e.push(i)}e.pop();const t=[];for(let r=n.length-1;r>=0;r--){const i=n[r];for(;t.length>=2;){const s=t[t.length-1],o=t[t.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))t.pop();else break}t.push(i)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}var a6=VD,$D=HD;function XD(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=XD(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function qD(){for(var n,e,t=0,r="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=XD(n))&&(r&&(r+=" "),r+=e);return r}const _M="-",l6=n=>{const e=u6(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=n;return{getClassGroupId:o=>{const a=o.split(_M);return a[0]===""&&a.length!==1&&a.shift(),YD(a,e)||c6(o)},getConflictingClassGroupIds:(o,a)=>{const l=t[o]||[];return a&&r[o]?[...l,...r[o]]:l}}},YD=(n,e)=>{var o;if(n.length===0)return e.classGroupId;const t=n[0],r=e.nextPart.get(t),i=r?YD(n.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const s=n.join(_M);return(o=e.validators.find(({validator:a})=>a(s)))==null?void 0:o.classGroupId},uR=/^\[(.+)\]$/,c6=n=>{if(uR.test(n)){const e=uR.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},u6=n=>{const{theme:e,prefix:t}=n,r={nextPart:new Map,validators:[]};return h6(Object.entries(n.classGroups),t).forEach(([s,o])=>{Pb(o,r,s,e)}),r},Pb=(n,e,t,r)=>{n.forEach(i=>{if(typeof i=="string"){const s=i===""?e:dR(e,i);s.classGroupId=t;return}if(typeof i=="function"){if(d6(i)){Pb(i(r),e,t,r);return}e.validators.push({validator:i,classGroupId:t});return}Object.entries(i).forEach(([s,o])=>{Pb(o,dR(e,s),t,r)})})},dR=(n,e)=>{let t=n;return e.split(_M).forEach(r=>{t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t},d6=n=>n.isThemeGetter,h6=(n,e)=>e?n.map(([t,r])=>{const i=r.map(s=>typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([o,a])=>[e+o,a])):s);return[t,i]}):n,f6=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,r=new Map;const i=(s,o)=>{t.set(s,o),e++,e>n&&(e=0,r=t,t=new Map)};return{get(s){let o=t.get(s);if(o!==void 0)return o;if((o=r.get(s))!==void 0)return i(s,o),o},set(s,o){t.has(s)?t.set(s,o):i(s,o)}}},KD="!",p6=n=>{const{separator:e,experimentalParseClassName:t}=n,r=e.length===1,i=e[0],s=e.length,o=a=>{const l=[];let c=0,d=0,f;for(let y=0;y<a.length;y++){let g=a[y];if(c===0){if(g===i&&(r||a.slice(y,y+s)===e)){l.push(a.slice(d,y)),d=y+s;continue}if(g==="/"){f=y;continue}}g==="["?c++:g==="]"&&c--}const p=l.length===0?a:a.substring(d),m=p.startsWith(KD),v=m?p.substring(1):p,x=f&&f>d?f-d:void 0;return{modifiers:l,hasImportantModifier:m,baseClassName:v,maybePostfixModifierPosition:x}};return t?a=>t({className:a,parseClassName:o}):o},m6=n=>{if(n.length<=1)return n;const e=[];let t=[];return n.forEach(r=>{r[0]==="["?(e.push(...t.sort(),r),t=[]):t.push(r)}),e.push(...t.sort()),e},g6=n=>({cache:f6(n.cacheSize),parseClassName:p6(n),...l6(n)}),v6=/\s+/,y6=(n,e)=>{const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:i}=e,s=[],o=n.trim().split(v6);let a="";for(let l=o.length-1;l>=0;l-=1){const c=o[l],{modifiers:d,hasImportantModifier:f,baseClassName:p,maybePostfixModifierPosition:m}=t(c);let v=!!m,x=r(v?p.substring(0,m):p);if(!x){if(!v){a=c+(a.length>0?" "+a:a);continue}if(x=r(p),!x){a=c+(a.length>0?" "+a:a);continue}v=!1}const y=m6(d).join(":"),g=f?y+KD:y,w=g+x;if(s.includes(w))continue;s.push(w);const S=i(x,v);for(let E=0;E<S.length;++E){const A=S[E];s.push(g+A)}a=c+(a.length>0?" "+a:a)}return a};function _6(){let n=0,e,t,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=ZD(e))&&(r&&(r+=" "),r+=t);return r}const ZD=n=>{if(typeof n=="string")return n;let e,t="";for(let r=0;r<n.length;r++)n[r]&&(e=ZD(n[r]))&&(t&&(t+=" "),t+=e);return t};function x6(n,...e){let t,r,i,s=o;function o(l){const c=e.reduce((d,f)=>f(d),n());return t=g6(c),r=t.cache.get,i=t.cache.set,s=a,a(l)}function a(l){const c=r(l);if(c)return c;const d=y6(l,t);return i(l,d),d}return function(){return s(_6.apply(null,arguments))}}const pn=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},JD=/^\[(?:([a-z-]+):)?(.+)\]$/i,w6=/^\d+\/\d+$/,S6=new Set(["px","full","screen"]),b6=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,E6=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,M6=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,T6=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,A6=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Mo=n=>_d(n)||S6.has(n)||w6.test(n),ma=n=>sh(n,"length",N6),_d=n=>!!n&&!Number.isNaN(Number(n)),cw=n=>sh(n,"number",_d),Hh=n=>!!n&&Number.isInteger(Number(n)),C6=n=>n.endsWith("%")&&_d(n.slice(0,-1)),Nt=n=>JD.test(n),ga=n=>b6.test(n),P6=new Set(["length","size","percentage"]),R6=n=>sh(n,P6,QD),I6=n=>sh(n,"position",QD),L6=new Set(["image","url"]),k6=n=>sh(n,L6,U6),O6=n=>sh(n,"",D6),Wh=()=>!0,sh=(n,e,t)=>{const r=JD.exec(n);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):t(r[2]):!1},N6=n=>E6.test(n)&&!M6.test(n),QD=()=>!1,D6=n=>T6.test(n),U6=n=>A6.test(n),F6=()=>{const n=pn("colors"),e=pn("spacing"),t=pn("blur"),r=pn("brightness"),i=pn("borderColor"),s=pn("borderRadius"),o=pn("borderSpacing"),a=pn("borderWidth"),l=pn("contrast"),c=pn("grayscale"),d=pn("hueRotate"),f=pn("invert"),p=pn("gap"),m=pn("gradientColorStops"),v=pn("gradientColorStopPositions"),x=pn("inset"),y=pn("margin"),g=pn("opacity"),w=pn("padding"),S=pn("saturate"),E=pn("scale"),A=pn("sepia"),T=pn("skew"),P=pn("space"),k=pn("translate"),R=()=>["auto","contain","none"],I=()=>["auto","hidden","clip","visible","scroll"],H=()=>["auto",Nt,e],G=()=>[Nt,e],re=()=>["",Mo,ma],z=()=>["auto",_d,Nt],Z=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],J=()=>["solid","dashed","dotted","double","none"],te=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],L=()=>["start","end","center","between","around","evenly","stretch"],U=()=>["","0",Nt],V=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Y=()=>[_d,Nt];return{cacheSize:500,separator:":",theme:{colors:[Wh],spacing:[Mo,ma],blur:["none","",ga,Nt],brightness:Y(),borderColor:[n],borderRadius:["none","","full",ga,Nt],borderSpacing:G(),borderWidth:re(),contrast:Y(),grayscale:U(),hueRotate:Y(),invert:U(),gap:G(),gradientColorStops:[n],gradientColorStopPositions:[C6,ma],inset:H(),margin:H(),opacity:Y(),padding:G(),saturate:Y(),scale:Y(),sepia:U(),skew:Y(),space:G(),translate:G()},classGroups:{aspect:[{aspect:["auto","square","video",Nt]}],container:["container"],columns:[{columns:[ga]}],"break-after":[{"break-after":V()}],"break-before":[{"break-before":V()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Z(),Nt]}],overflow:[{overflow:I()}],"overflow-x":[{"overflow-x":I()}],"overflow-y":[{"overflow-y":I()}],overscroll:[{overscroll:R()}],"overscroll-x":[{"overscroll-x":R()}],"overscroll-y":[{"overscroll-y":R()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[x]}],"inset-x":[{"inset-x":[x]}],"inset-y":[{"inset-y":[x]}],start:[{start:[x]}],end:[{end:[x]}],top:[{top:[x]}],right:[{right:[x]}],bottom:[{bottom:[x]}],left:[{left:[x]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Hh,Nt]}],basis:[{basis:H()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Nt]}],grow:[{grow:U()}],shrink:[{shrink:U()}],order:[{order:["first","last","none",Hh,Nt]}],"grid-cols":[{"grid-cols":[Wh]}],"col-start-end":[{col:["auto",{span:["full",Hh,Nt]},Nt]}],"col-start":[{"col-start":z()}],"col-end":[{"col-end":z()}],"grid-rows":[{"grid-rows":[Wh]}],"row-start-end":[{row:["auto",{span:[Hh,Nt]},Nt]}],"row-start":[{"row-start":z()}],"row-end":[{"row-end":z()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Nt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Nt]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...L()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...L(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...L(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[w]}],px:[{px:[w]}],py:[{py:[w]}],ps:[{ps:[w]}],pe:[{pe:[w]}],pt:[{pt:[w]}],pr:[{pr:[w]}],pb:[{pb:[w]}],pl:[{pl:[w]}],m:[{m:[y]}],mx:[{mx:[y]}],my:[{my:[y]}],ms:[{ms:[y]}],me:[{me:[y]}],mt:[{mt:[y]}],mr:[{mr:[y]}],mb:[{mb:[y]}],ml:[{ml:[y]}],"space-x":[{"space-x":[P]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[P]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Nt,e]}],"min-w":[{"min-w":[Nt,e,"min","max","fit"]}],"max-w":[{"max-w":[Nt,e,"none","full","min","max","fit","prose",{screen:[ga]},ga]}],h:[{h:[Nt,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Nt,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Nt,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Nt,e,"auto","min","max","fit"]}],"font-size":[{text:["base",ga,ma]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",cw]}],"font-family":[{font:[Wh]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Nt]}],"line-clamp":[{"line-clamp":["none",_d,cw]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Mo,Nt]}],"list-image":[{"list-image":["none",Nt]}],"list-style-type":[{list:["none","disc","decimal",Nt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[g]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[g]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...J(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Mo,ma]}],"underline-offset":[{"underline-offset":["auto",Mo,Nt]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:G()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Nt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Nt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[g]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Z(),I6]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",R6]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},k6]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[v]}],"gradient-via-pos":[{via:[v]}],"gradient-to-pos":[{to:[v]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[g]}],"border-style":[{border:[...J(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[g]}],"divide-style":[{divide:J()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...J()]}],"outline-offset":[{"outline-offset":[Mo,Nt]}],"outline-w":[{outline:[Mo,ma]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:re()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[g]}],"ring-offset-w":[{"ring-offset":[Mo,ma]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",ga,O6]}],"shadow-color":[{shadow:[Wh]}],opacity:[{opacity:[g]}],"mix-blend":[{"mix-blend":[...te(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":te()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",ga,Nt]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[f]}],saturate:[{saturate:[S]}],sepia:[{sepia:[A]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[g]}],"backdrop-saturate":[{"backdrop-saturate":[S]}],"backdrop-sepia":[{"backdrop-sepia":[A]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Nt]}],duration:[{duration:Y()}],ease:[{ease:["linear","in","out","in-out",Nt]}],delay:[{delay:Y()}],animate:[{animate:["none","spin","ping","pulse","bounce",Nt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[E]}],"scale-x":[{"scale-x":[E]}],"scale-y":[{"scale-y":[E]}],rotate:[{rotate:[Hh,Nt]}],"translate-x":[{"translate-x":[k]}],"translate-y":[{"translate-y":[k]}],"skew-x":[{"skew-x":[T]}],"skew-y":[{"skew-y":[T]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Nt]}],accent:[{accent:["auto",n]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Nt]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":G()}],"scroll-mx":[{"scroll-mx":G()}],"scroll-my":[{"scroll-my":G()}],"scroll-ms":[{"scroll-ms":G()}],"scroll-me":[{"scroll-me":G()}],"scroll-mt":[{"scroll-mt":G()}],"scroll-mr":[{"scroll-mr":G()}],"scroll-mb":[{"scroll-mb":G()}],"scroll-ml":[{"scroll-ml":G()}],"scroll-p":[{"scroll-p":G()}],"scroll-px":[{"scroll-px":G()}],"scroll-py":[{"scroll-py":G()}],"scroll-ps":[{"scroll-ps":G()}],"scroll-pe":[{"scroll-pe":G()}],"scroll-pt":[{"scroll-pt":G()}],"scroll-pr":[{"scroll-pr":G()}],"scroll-pb":[{"scroll-pb":G()}],"scroll-pl":[{"scroll-pl":G()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Nt]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[Mo,ma,cw]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},B6=x6(F6);function U0(...n){return B6(qD(n))}const z6=a6,V6=N.forwardRef(({className:n,sideOffset:e=4,...t},r)=>D.jsx($D,{ref:r,sideOffset:e,className:U0("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...t}));V6.displayName=$D.displayName;var F0=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},B0=typeof window>"u"||"Deno"in globalThis;function xs(){}function j6(n,e){return typeof n=="function"?n(e):n}function H6(n){return typeof n=="number"&&n>=0&&n!==1/0}function W6(n,e){return Math.max(n+(e||0)-Date.now(),0)}function Rb(n,e){return typeof n=="function"?n(e):n}function G6(n,e){return typeof n=="function"?n(e):n}function hR(n,e){const{type:t="all",exact:r,fetchStatus:i,predicate:s,queryKey:o,stale:a}=n;if(o){if(r){if(e.queryHash!==xM(o,e.options))return!1}else if(!sp(e.queryKey,o))return!1}if(t!=="all"){const l=e.isActive();if(t==="active"&&!l||t==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||i&&i!==e.state.fetchStatus||s&&!s(e))}function fR(n,e){const{exact:t,status:r,predicate:i,mutationKey:s}=n;if(s){if(!e.options.mutationKey)return!1;if(t){if(ip(e.options.mutationKey)!==ip(s))return!1}else if(!sp(e.options.mutationKey,s))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function xM(n,e){return((e==null?void 0:e.queryKeyHashFn)||ip)(n)}function ip(n){return JSON.stringify(n,(e,t)=>Ib(t)?Object.keys(t).sort().reduce((r,i)=>(r[i]=t[i],r),{}):t)}function sp(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?Object.keys(e).every(t=>sp(n[t],e[t])):!1}function e3(n,e){if(n===e)return n;const t=pR(n)&&pR(e);if(t||Ib(n)&&Ib(e)){const r=t?n:Object.keys(n),i=r.length,s=t?e:Object.keys(e),o=s.length,a=t?[]:{},l=new Set(r);let c=0;for(let d=0;d<o;d++){const f=t?d:s[d];(!t&&l.has(f)||t)&&n[f]===void 0&&e[f]===void 0?(a[f]=void 0,c++):(a[f]=e3(n[f],e[f]),a[f]===n[f]&&n[f]!==void 0&&c++)}return i===o&&c===i?n:a}return e}function pR(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function Ib(n){if(!mR(n))return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!mR(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function mR(n){return Object.prototype.toString.call(n)==="[object Object]"}function $6(n){return new Promise(e=>{setTimeout(e,n)})}function X6(n,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(n,e):t.structuralSharing!==!1?e3(n,e):e}function q6(n,e,t=0){const r=[...n,e];return t&&r.length>t?r.slice(1):r}function Y6(n,e,t=0){const r=[e,...n];return t&&r.length>t?r.slice(0,-1):r}var wM=Symbol();function t3(n,e){return!n.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!n.queryFn||n.queryFn===wM?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}var mc,Na,bd,Ck,K6=(Ck=class extends F0{constructor(){super();en(this,mc);en(this,Na);en(this,bd);kt(this,bd,e=>{if(!B0&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){ge(this,Na)||this.setEventListener(ge(this,bd))}onUnsubscribe(){var e;this.hasListeners()||((e=ge(this,Na))==null||e.call(this),kt(this,Na,void 0))}setEventListener(e){var t;kt(this,bd,e),(t=ge(this,Na))==null||t.call(this),kt(this,Na,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){ge(this,mc)!==e&&(kt(this,mc,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof ge(this,mc)=="boolean"?ge(this,mc):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},mc=new WeakMap,Na=new WeakMap,bd=new WeakMap,Ck),n3=new K6,Ed,Da,Md,Pk,Z6=(Pk=class extends F0{constructor(){super();en(this,Ed,!0);en(this,Da);en(this,Md);kt(this,Md,e=>{if(!B0&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}})}onSubscribe(){ge(this,Da)||this.setEventListener(ge(this,Md))}onUnsubscribe(){var e;this.hasListeners()||((e=ge(this,Da))==null||e.call(this),kt(this,Da,void 0))}setEventListener(e){var t;kt(this,Md,e),(t=ge(this,Da))==null||t.call(this),kt(this,Da,e(this.setOnline.bind(this)))}setOnline(e){ge(this,Ed)!==e&&(kt(this,Ed,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return ge(this,Ed)}},Ed=new WeakMap,Da=new WeakMap,Md=new WeakMap,Pk),Fy=new Z6;function J6(){let n,e;const t=new Promise((i,s)=>{n=i,e=s});t.status="pending",t.catch(()=>{});function r(i){Object.assign(t,i),delete t.resolve,delete t.reject}return t.resolve=i=>{r({status:"fulfilled",value:i}),n(i)},t.reject=i=>{r({status:"rejected",reason:i}),e(i)},t}function Q6(n){return Math.min(1e3*2**n,3e4)}function r3(n){return(n??"online")==="online"?Fy.isOnline():!0}var i3=class extends Error{constructor(n){super("CancelledError"),this.revert=n==null?void 0:n.revert,this.silent=n==null?void 0:n.silent}};function uw(n){return n instanceof i3}function s3(n){let e=!1,t=0,r=!1,i;const s=J6(),o=x=>{var y;r||(p(new i3(x)),(y=n.abort)==null||y.call(n))},a=()=>{e=!0},l=()=>{e=!1},c=()=>n3.isFocused()&&(n.networkMode==="always"||Fy.isOnline())&&n.canRun(),d=()=>r3(n.networkMode)&&n.canRun(),f=x=>{var y;r||(r=!0,(y=n.onSuccess)==null||y.call(n,x),i==null||i(),s.resolve(x))},p=x=>{var y;r||(r=!0,(y=n.onError)==null||y.call(n,x),i==null||i(),s.reject(x))},m=()=>new Promise(x=>{var y;i=g=>{(r||c())&&x(g)},(y=n.onPause)==null||y.call(n)}).then(()=>{var x;i=void 0,r||(x=n.onContinue)==null||x.call(n)}),v=()=>{if(r)return;let x;const y=t===0?n.initialPromise:void 0;try{x=y??n.fn()}catch(g){x=Promise.reject(g)}Promise.resolve(x).then(f).catch(g=>{var T;if(r)return;const w=n.retry??(B0?0:3),S=n.retryDelay??Q6,E=typeof S=="function"?S(t,g):S,A=w===!0||typeof w=="number"&&t<w||typeof w=="function"&&w(t,g);if(e||!A){p(g);return}t++,(T=n.onFail)==null||T.call(n,t,g),$6(E).then(()=>c()?void 0:m()).then(()=>{e?p(g):v()})})};return{promise:s,cancel:o,continue:()=>(i==null||i(),s),cancelRetry:a,continueRetry:l,canStart:d,start:()=>(d()?v():m().then(v),s)}}var e8=n=>setTimeout(n,0);function t8(){let n=[],e=0,t=a=>{a()},r=a=>{a()},i=e8;const s=a=>{e?n.push(a):i(()=>{t(a)})},o=()=>{const a=n;n=[],a.length&&i(()=>{r(()=>{a.forEach(l=>{t(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{s(()=>{a(...l)})},schedule:s,setNotifyFunction:a=>{t=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{i=a}}}var Yr=t8(),gc,Rk,o3=(Rk=class{constructor(){en(this,gc)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),H6(this.gcTime)&&kt(this,gc,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??(B0?1/0:5*60*1e3))}clearGcTimeout(){ge(this,gc)&&(clearTimeout(ge(this,gc)),kt(this,gc,void 0))}},gc=new WeakMap,Rk),Td,vc,ts,yc,Or,Fp,_c,bs,Lo,Ik,n8=(Ik=class extends o3{constructor(e){super();en(this,bs);en(this,Td);en(this,vc);en(this,ts);en(this,yc);en(this,Or);en(this,Fp);en(this,_c);kt(this,_c,!1),kt(this,Fp,e.defaultOptions),this.setOptions(e.options),this.observers=[],kt(this,yc,e.client),kt(this,ts,ge(this,yc).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,kt(this,Td,i8(this.options)),this.state=e.state??ge(this,Td),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=ge(this,Or))==null?void 0:e.promise}setOptions(e){this.options={...ge(this,Fp),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&ge(this,ts).remove(this)}setData(e,t){const r=X6(this.state.data,e,this.options);return Ar(this,bs,Lo).call(this,{data:r,type:"success",dataUpdatedAt:t==null?void 0:t.updatedAt,manual:t==null?void 0:t.manual}),r}setState(e,t){Ar(this,bs,Lo).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var r,i;const t=(r=ge(this,Or))==null?void 0:r.promise;return(i=ge(this,Or))==null||i.cancel(e),t?t.then(xs).catch(xs):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(ge(this,Td))}isActive(){return this.observers.some(e=>G6(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===wM||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>Rb(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!W6(this.state.dataUpdatedAt,e)}onFocus(){var t;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(t=ge(this,Or))==null||t.continue()}onOnline(){var t;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(t=ge(this,Or))==null||t.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),ge(this,ts).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(ge(this,Or)&&(ge(this,_c)?ge(this,Or).cancel({revert:!0}):ge(this,Or).cancelRetry()),this.scheduleGc()),ge(this,ts).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Ar(this,bs,Lo).call(this,{type:"invalidate"})}fetch(e,t){var c,d,f;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(t!=null&&t.cancelRefetch))this.cancel({silent:!0});else if(ge(this,Or))return ge(this,Or).continueRetry(),ge(this,Or).promise}if(e&&this.setOptions(e),!this.options.queryFn){const p=this.observers.find(m=>m.options.queryFn);p&&this.setOptions(p.options)}const r=new AbortController,i=p=>{Object.defineProperty(p,"signal",{enumerable:!0,get:()=>(kt(this,_c,!0),r.signal)})},s=()=>{const p=t3(this.options,t),v=(()=>{const x={client:ge(this,yc),queryKey:this.queryKey,meta:this.meta};return i(x),x})();return kt(this,_c,!1),this.options.persister?this.options.persister(p,v,this):p(v)},a=(()=>{const p={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:ge(this,yc),state:this.state,fetchFn:s};return i(p),p})();(c=this.options.behavior)==null||c.onFetch(a,this),kt(this,vc,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=a.fetchOptions)==null?void 0:d.meta))&&Ar(this,bs,Lo).call(this,{type:"fetch",meta:(f=a.fetchOptions)==null?void 0:f.meta});const l=p=>{var m,v,x,y;uw(p)&&p.silent||Ar(this,bs,Lo).call(this,{type:"error",error:p}),uw(p)||((v=(m=ge(this,ts).config).onError)==null||v.call(m,p,this),(y=(x=ge(this,ts).config).onSettled)==null||y.call(x,this.state.data,p,this)),this.scheduleGc()};return kt(this,Or,s3({initialPromise:t==null?void 0:t.initialPromise,fn:a.fetchFn,abort:r.abort.bind(r),onSuccess:p=>{var m,v,x,y;if(p===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(p)}catch(g){l(g);return}(v=(m=ge(this,ts).config).onSuccess)==null||v.call(m,p,this),(y=(x=ge(this,ts).config).onSettled)==null||y.call(x,p,this.state.error,this),this.scheduleGc()},onError:l,onFail:(p,m)=>{Ar(this,bs,Lo).call(this,{type:"failed",failureCount:p,error:m})},onPause:()=>{Ar(this,bs,Lo).call(this,{type:"pause"})},onContinue:()=>{Ar(this,bs,Lo).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),ge(this,Or).start()}},Td=new WeakMap,vc=new WeakMap,ts=new WeakMap,yc=new WeakMap,Or=new WeakMap,Fp=new WeakMap,_c=new WeakMap,bs=new WeakSet,Lo=function(e){const t=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...r8(r.data,this.options),fetchMeta:e.meta??null};case"success":return kt(this,vc,void 0),{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=e.error;return uw(i)&&i.revert&&ge(this,vc)?{...ge(this,vc),fetchStatus:"idle"}:{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=t(this.state),Yr.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),ge(this,ts).notify({query:this,type:"updated",action:e})})},Ik);function r8(n,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:r3(e.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function i8(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,t=e!==void 0,r=t?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var Zs,Lk,s8=(Lk=class extends F0{constructor(e={}){super();en(this,Zs);this.config=e,kt(this,Zs,new Map)}build(e,t,r){const i=t.queryKey,s=t.queryHash??xM(i,t);let o=this.get(s);return o||(o=new n8({client:e,queryKey:i,queryHash:s,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(i)}),this.add(o)),o}add(e){ge(this,Zs).has(e.queryHash)||(ge(this,Zs).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=ge(this,Zs).get(e.queryHash);t&&(e.destroy(),t===e&&ge(this,Zs).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Yr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return ge(this,Zs).get(e)}getAll(){return[...ge(this,Zs).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(r=>hR(t,r))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(r=>hR(e,r)):t}notify(e){Yr.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){Yr.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Yr.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Zs=new WeakMap,Lk),Js,Xr,xc,Qs,Ta,kk,o8=(kk=class extends o3{constructor(e){super();en(this,Qs);en(this,Js);en(this,Xr);en(this,xc);this.mutationId=e.mutationId,kt(this,Xr,e.mutationCache),kt(this,Js,[]),this.state=e.state||a8(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){ge(this,Js).includes(e)||(ge(this,Js).push(e),this.clearGcTimeout(),ge(this,Xr).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){kt(this,Js,ge(this,Js).filter(t=>t!==e)),this.scheduleGc(),ge(this,Xr).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){ge(this,Js).length||(this.state.status==="pending"?this.scheduleGc():ge(this,Xr).remove(this))}continue(){var e;return((e=ge(this,xc))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var s,o,a,l,c,d,f,p,m,v,x,y,g,w,S,E,A,T,P,k;const t=()=>{Ar(this,Qs,Ta).call(this,{type:"continue"})};kt(this,xc,s3({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(R,I)=>{Ar(this,Qs,Ta).call(this,{type:"failed",failureCount:R,error:I})},onPause:()=>{Ar(this,Qs,Ta).call(this,{type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>ge(this,Xr).canRun(this)}));const r=this.state.status==="pending",i=!ge(this,xc).canStart();try{if(r)t();else{Ar(this,Qs,Ta).call(this,{type:"pending",variables:e,isPaused:i}),await((o=(s=ge(this,Xr).config).onMutate)==null?void 0:o.call(s,e,this));const I=await((l=(a=this.options).onMutate)==null?void 0:l.call(a,e));I!==this.state.context&&Ar(this,Qs,Ta).call(this,{type:"pending",context:I,variables:e,isPaused:i})}const R=await ge(this,xc).start();return await((d=(c=ge(this,Xr).config).onSuccess)==null?void 0:d.call(c,R,e,this.state.context,this)),await((p=(f=this.options).onSuccess)==null?void 0:p.call(f,R,e,this.state.context)),await((v=(m=ge(this,Xr).config).onSettled)==null?void 0:v.call(m,R,null,this.state.variables,this.state.context,this)),await((y=(x=this.options).onSettled)==null?void 0:y.call(x,R,null,e,this.state.context)),Ar(this,Qs,Ta).call(this,{type:"success",data:R}),R}catch(R){try{throw await((w=(g=ge(this,Xr).config).onError)==null?void 0:w.call(g,R,e,this.state.context,this)),await((E=(S=this.options).onError)==null?void 0:E.call(S,R,e,this.state.context)),await((T=(A=ge(this,Xr).config).onSettled)==null?void 0:T.call(A,void 0,R,this.state.variables,this.state.context,this)),await((k=(P=this.options).onSettled)==null?void 0:k.call(P,void 0,R,e,this.state.context)),R}finally{Ar(this,Qs,Ta).call(this,{type:"error",error:R})}}finally{ge(this,Xr).runNext(this)}}},Js=new WeakMap,Xr=new WeakMap,xc=new WeakMap,Qs=new WeakSet,Ta=function(e){const t=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),Yr.batch(()=>{ge(this,Js).forEach(r=>{r.onMutationUpdate(e)}),ge(this,Xr).notify({mutation:this,type:"updated",action:e})})},kk);function a8(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Uo,Es,Bp,Ok,l8=(Ok=class extends F0{constructor(e={}){super();en(this,Uo);en(this,Es);en(this,Bp);this.config=e,kt(this,Uo,new Set),kt(this,Es,new Map),kt(this,Bp,0)}build(e,t,r){const i=new o8({mutationCache:this,mutationId:++og(this,Bp)._,options:e.defaultMutationOptions(t),state:r});return this.add(i),i}add(e){ge(this,Uo).add(e);const t=Pg(e);if(typeof t=="string"){const r=ge(this,Es).get(t);r?r.push(e):ge(this,Es).set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(ge(this,Uo).delete(e)){const t=Pg(e);if(typeof t=="string"){const r=ge(this,Es).get(t);if(r)if(r.length>1){const i=r.indexOf(e);i!==-1&&r.splice(i,1)}else r[0]===e&&ge(this,Es).delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=Pg(e);if(typeof t=="string"){const r=ge(this,Es).get(t),i=r==null?void 0:r.find(s=>s.state.status==="pending");return!i||i===e}else return!0}runNext(e){var r;const t=Pg(e);if(typeof t=="string"){const i=(r=ge(this,Es).get(t))==null?void 0:r.find(s=>s!==e&&s.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Yr.batch(()=>{ge(this,Uo).forEach(e=>{this.notify({type:"removed",mutation:e})}),ge(this,Uo).clear(),ge(this,Es).clear()})}getAll(){return Array.from(ge(this,Uo))}find(e){const t={exact:!0,...e};return this.getAll().find(r=>fR(t,r))}findAll(e={}){return this.getAll().filter(t=>fR(e,t))}notify(e){Yr.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return Yr.batch(()=>Promise.all(e.map(t=>t.continue().catch(xs))))}},Uo=new WeakMap,Es=new WeakMap,Bp=new WeakMap,Ok);function Pg(n){var e;return(e=n.options.scope)==null?void 0:e.id}function gR(n){return{onFetch:(e,t)=>{var d,f,p,m,v;const r=e.options,i=(p=(f=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:f.fetchMore)==null?void 0:p.direction,s=((m=e.state.data)==null?void 0:m.pages)||[],o=((v=e.state.data)==null?void 0:v.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let x=!1;const y=S=>{Object.defineProperty(S,"signal",{enumerable:!0,get:()=>(e.signal.aborted?x=!0:e.signal.addEventListener("abort",()=>{x=!0}),e.signal)})},g=t3(e.options,e.fetchOptions),w=async(S,E,A)=>{if(x)return Promise.reject();if(E==null&&S.pages.length)return Promise.resolve(S);const P=(()=>{const H={client:e.client,queryKey:e.queryKey,pageParam:E,direction:A?"backward":"forward",meta:e.options.meta};return y(H),H})(),k=await g(P),{maxPages:R}=e.options,I=A?Y6:q6;return{pages:I(S.pages,k,R),pageParams:I(S.pageParams,E,R)}};if(i&&s.length){const S=i==="backward",E=S?c8:vR,A={pages:s,pageParams:o},T=E(r,A);a=await w(A,T,S)}else{const S=n??s.length;do{const E=l===0?o[0]??r.initialPageParam:vR(r,a);if(l>0&&E==null)break;a=await w(a,E),l++}while(l<S)}return a};e.options.persister?e.fetchFn=()=>{var x,y;return(y=(x=e.options).persister)==null?void 0:y.call(x,c,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=c}}}function vR(n,{pages:e,pageParams:t}){const r=e.length-1;return e.length>0?n.getNextPageParam(e[r],e,t[r],t):void 0}function c8(n,{pages:e,pageParams:t}){var r;return e.length>0?(r=n.getPreviousPageParam)==null?void 0:r.call(n,e[0],e,t[0],t):void 0}var kn,Ua,Fa,Ad,Cd,Ba,Pd,Rd,Nk,u8=(Nk=class{constructor(n={}){en(this,kn);en(this,Ua);en(this,Fa);en(this,Ad);en(this,Cd);en(this,Ba);en(this,Pd);en(this,Rd);kt(this,kn,n.queryCache||new s8),kt(this,Ua,n.mutationCache||new l8),kt(this,Fa,n.defaultOptions||{}),kt(this,Ad,new Map),kt(this,Cd,new Map),kt(this,Ba,0)}mount(){og(this,Ba)._++,ge(this,Ba)===1&&(kt(this,Pd,n3.subscribe(async n=>{n&&(await this.resumePausedMutations(),ge(this,kn).onFocus())})),kt(this,Rd,Fy.subscribe(async n=>{n&&(await this.resumePausedMutations(),ge(this,kn).onOnline())})))}unmount(){var n,e;og(this,Ba)._--,ge(this,Ba)===0&&((n=ge(this,Pd))==null||n.call(this),kt(this,Pd,void 0),(e=ge(this,Rd))==null||e.call(this),kt(this,Rd,void 0))}isFetching(n){return ge(this,kn).findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return ge(this,Ua).findAll({...n,status:"pending"}).length}getQueryData(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=ge(this,kn).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(n){const e=this.defaultQueryOptions(n),t=ge(this,kn).build(this,e),r=t.state.data;return r===void 0?this.fetchQuery(n):(n.revalidateIfStale&&t.isStaleByTime(Rb(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(n){return ge(this,kn).findAll(n).map(({queryKey:e,state:t})=>{const r=t.data;return[e,r]})}setQueryData(n,e,t){const r=this.defaultQueryOptions({queryKey:n}),i=ge(this,kn).get(r.queryHash),s=i==null?void 0:i.state.data,o=j6(e,s);if(o!==void 0)return ge(this,kn).build(this,r).setData(o,{...t,manual:!0})}setQueriesData(n,e,t){return Yr.batch(()=>ge(this,kn).findAll(n).map(({queryKey:r})=>[r,this.setQueryData(r,e,t)]))}getQueryState(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=ge(this,kn).get(e.queryHash))==null?void 0:t.state}removeQueries(n){const e=ge(this,kn);Yr.batch(()=>{e.findAll(n).forEach(t=>{e.remove(t)})})}resetQueries(n,e){const t=ge(this,kn);return Yr.batch(()=>(t.findAll(n).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...n},e)))}cancelQueries(n,e={}){const t={revert:!0,...e},r=Yr.batch(()=>ge(this,kn).findAll(n).map(i=>i.cancel(t)));return Promise.all(r).then(xs).catch(xs)}invalidateQueries(n,e={}){return Yr.batch(()=>(ge(this,kn).findAll(n).forEach(t=>{t.invalidate()}),(n==null?void 0:n.refetchType)==="none"?Promise.resolve():this.refetchQueries({...n,type:(n==null?void 0:n.refetchType)??(n==null?void 0:n.type)??"active"},e)))}refetchQueries(n,e={}){const t={...e,cancelRefetch:e.cancelRefetch??!0},r=Yr.batch(()=>ge(this,kn).findAll(n).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let s=i.fetch(void 0,t);return t.throwOnError||(s=s.catch(xs)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(r).then(xs)}fetchQuery(n){const e=this.defaultQueryOptions(n);e.retry===void 0&&(e.retry=!1);const t=ge(this,kn).build(this,e);return t.isStaleByTime(Rb(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(n){return this.fetchQuery(n).then(xs).catch(xs)}fetchInfiniteQuery(n){return n.behavior=gR(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then(xs).catch(xs)}ensureInfiniteQueryData(n){return n.behavior=gR(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return Fy.isOnline()?ge(this,Ua).resumePausedMutations():Promise.resolve()}getQueryCache(){return ge(this,kn)}getMutationCache(){return ge(this,Ua)}getDefaultOptions(){return ge(this,Fa)}setDefaultOptions(n){kt(this,Fa,n)}setQueryDefaults(n,e){ge(this,Ad).set(ip(n),{queryKey:n,defaultOptions:e})}getQueryDefaults(n){const e=[...ge(this,Ad).values()],t={};return e.forEach(r=>{sp(n,r.queryKey)&&Object.assign(t,r.defaultOptions)}),t}setMutationDefaults(n,e){ge(this,Cd).set(ip(n),{mutationKey:n,defaultOptions:e})}getMutationDefaults(n){const e=[...ge(this,Cd).values()],t={};return e.forEach(r=>{sp(n,r.mutationKey)&&Object.assign(t,r.defaultOptions)}),t}defaultQueryOptions(n){if(n._defaulted)return n;const e={...ge(this,Fa).queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return e.queryHash||(e.queryHash=xM(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===wM&&(e.enabled=!1),e}defaultMutationOptions(n){return n!=null&&n._defaulted?n:{...ge(this,Fa).mutations,...(n==null?void 0:n.mutationKey)&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){ge(this,kn).clear(),ge(this,Ua).clear()}},kn=new WeakMap,Ua=new WeakMap,Fa=new WeakMap,Ad=new WeakMap,Cd=new WeakMap,Ba=new WeakMap,Pd=new WeakMap,Rd=new WeakMap,Nk),d8=N.createContext(void 0),h8=({client:n,children:e})=>(N.useEffect(()=>(n.mount(),()=>{n.unmount()}),[n]),D.jsx(d8.Provider,{value:n,children:e}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function By(){return By=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},By.apply(this,arguments)}var ja;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(ja||(ja={}));const yR="popstate";function f8(n){n===void 0&&(n={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return Lb("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:l3(i)}return m8(e,t,null,n)}function vi(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function a3(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function p8(){return Math.random().toString(36).substr(2,8)}function _R(n,e){return{usr:n.state,key:n.key,idx:e}}function Lb(n,e,t,r){return t===void 0&&(t=null),By({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?z0(e):e,{state:t,key:e&&e.key||r||p8()})}function l3(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function z0(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function m8(n,e,t,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=ja.Pop,l=null,c=d();c==null&&(c=0,o.replaceState(By({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function f(){a=ja.Pop;let y=d(),g=y==null?null:y-c;c=y,l&&l({action:a,location:x.location,delta:g})}function p(y,g){a=ja.Push;let w=Lb(x.location,y,g);c=d()+1;let S=_R(w,c),E=x.createHref(w);try{o.pushState(S,"",E)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;i.location.assign(E)}s&&l&&l({action:a,location:x.location,delta:1})}function m(y,g){a=ja.Replace;let w=Lb(x.location,y,g);c=d();let S=_R(w,c),E=x.createHref(w);o.replaceState(S,"",E),s&&l&&l({action:a,location:x.location,delta:0})}function v(y){let g=i.location.origin!=="null"?i.location.origin:i.location.href,w=typeof y=="string"?y:l3(y);return w=w.replace(/ $/,"%20"),vi(g,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,g)}let x={get action(){return a},get location(){return n(i,o)},listen(y){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(yR,f),l=y,()=>{i.removeEventListener(yR,f),l=null}},createHref(y){return e(i,y)},createURL:v,encodeLocation(y){let g=v(y);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:p,replace:m,go(y){return o.go(y)}};return x}var xR;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(xR||(xR={}));function g8(n,e,t){return t===void 0&&(t="/"),v8(n,e,t,!1)}function v8(n,e,t,r){let i=typeof e=="string"?z0(e):e,s=d3(i.pathname||"/",t);if(s==null)return null;let o=c3(n);y8(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=P8(s);a=A8(o[l],c,r)}return a}function c3(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(vi(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=xd([r,l.relativePath]),d=t.concat(l);s.children&&s.children.length>0&&(vi(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),c3(s.children,e,d,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:M8(c,s.index),routesMeta:d})};return n.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of u3(s.path))i(s,o,l)}),e}function u3(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),s=t.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=u3(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>n.startsWith("/")&&l===""?"/":l)}function y8(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:T8(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const _8=/^:[\w-]+$/,x8=3,w8=2,S8=1,b8=10,E8=-2,wR=n=>n==="*";function M8(n,e){let t=n.split("/"),r=t.length;return t.some(wR)&&(r+=E8),e&&(r+=w8),t.filter(i=>!wR(i)).reduce((i,s)=>i+(_8.test(s)?x8:s===""?S8:b8),r)}function T8(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function A8(n,e,t){let{routesMeta:r}=n,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,d=s==="/"?e:e.slice(s.length)||"/",f=SR({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),p=l.route;if(!f&&c&&t&&!r[r.length-1].route.index&&(f=SR({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},d)),!f)return null;Object.assign(i,f.params),o.push({params:i,pathname:xd([s,f.pathname]),pathnameBase:R8(xd([s,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(s=xd([s,f.pathnameBase]))}return o}function SR(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=C8(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,d,f)=>{let{paramName:p,isOptional:m}=d;if(p==="*"){let x=a[f]||"";o=s.slice(0,s.length-x.length).replace(/(.)\/+$/,"$1")}const v=a[f];return m&&!v?c[p]=void 0:c[p]=(v||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:n}}function C8(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),a3(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function P8(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return a3(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function d3(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}const xd=n=>n.join("/").replace(/\/\/+/g,"/"),R8=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/");function I8(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const h3=["post","put","patch","delete"];new Set(h3);const L8=["get",...h3];new Set(L8);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zy(){return zy=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},zy.apply(this,arguments)}const k8=N.createContext(null),O8=N.createContext(null),f3=N.createContext(null),V0=N.createContext(null),j0=N.createContext({outlet:null,matches:[],isDataRoute:!1}),p3=N.createContext(null);function SM(){return N.useContext(V0)!=null}function m3(){return SM()||vi(!1),N.useContext(V0).location}function N8(n,e){return D8(n,e)}function D8(n,e,t,r){SM()||vi(!1);let{navigator:i}=N.useContext(f3),{matches:s}=N.useContext(j0),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=m3(),d;if(e){var f;let y=typeof e=="string"?z0(e):e;l==="/"||(f=y.pathname)!=null&&f.startsWith(l)||vi(!1),d=y}else d=c;let p=d.pathname||"/",m=p;if(l!=="/"){let y=l.replace(/^\//,"").split("/");m="/"+p.replace(/^\//,"").split("/").slice(y.length).join("/")}let v=g8(n,{pathname:m}),x=V8(v&&v.map(y=>Object.assign({},y,{params:Object.assign({},a,y.params),pathname:xd([l,i.encodeLocation?i.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?l:xd([l,i.encodeLocation?i.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),s,t,r);return e&&x?N.createElement(V0.Provider,{value:{location:zy({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:ja.Pop}},x):x}function U8(){let n=G8(),e=I8(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},e),t?N.createElement("pre",{style:i},t):null,null)}const F8=N.createElement(U8,null);class B8 extends N.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?N.createElement(j0.Provider,{value:this.props.routeContext},N.createElement(p3.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function z8(n){let{routeContext:e,match:t,children:r}=n,i=N.useContext(k8);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),N.createElement(j0.Provider,{value:e},r)}function V8(n,e,t,r){var i;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var s;if(!t)return null;if(t.errors)n=t.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,a=(i=t)==null?void 0:i.errors;if(a!=null){let d=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);d>=0||vi(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,c=-1;if(t&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let f=o[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=d),f.route.id){let{loaderData:p,errors:m}=t,v=f.route.loader&&p[f.route.id]===void 0&&(!m||m[f.route.id]===void 0);if(f.route.lazy||v){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((d,f,p)=>{let m,v=!1,x=null,y=null;t&&(m=a&&f.route.id?a[f.route.id]:void 0,x=f.route.errorElement||F8,l&&(c<0&&p===0?(v=!0,y=null):c===p&&(v=!0,y=f.route.hydrateFallbackElement||null)));let g=e.concat(o.slice(0,p+1)),w=()=>{let S;return m?S=x:v?S=y:f.route.Component?S=N.createElement(f.route.Component,null):f.route.element?S=f.route.element:S=d,N.createElement(z8,{match:f,routeContext:{outlet:d,matches:g,isDataRoute:t!=null},children:S})};return t&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?N.createElement(B8,{location:t.location,revalidation:t.revalidation,component:x,error:m,children:w(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):w()},null)}var kb=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(kb||{});function j8(n){let e=N.useContext(O8);return e||vi(!1),e}function H8(n){let e=N.useContext(j0);return e||vi(!1),e}function W8(n){let e=H8(),t=e.matches[e.matches.length-1];return t.route.id||vi(!1),t.route.id}function G8(){var n;let e=N.useContext(p3),t=j8(kb.UseRouteError),r=W8(kb.UseRouteError);return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function $8(n,e){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function Ob(n){vi(!1)}function X8(n){let{basename:e="/",children:t=null,location:r,navigationType:i=ja.Pop,navigator:s,static:o=!1,future:a}=n;SM()&&vi(!1);let l=e.replace(/^\/*/,"/"),c=N.useMemo(()=>({basename:l,navigator:s,static:o,future:zy({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=z0(r));let{pathname:d="/",search:f="",hash:p="",state:m=null,key:v="default"}=r,x=N.useMemo(()=>{let y=d3(d,l);return y==null?null:{location:{pathname:y,search:f,hash:p,state:m,key:v},navigationType:i}},[l,d,f,p,m,v,i]);return x==null?null:N.createElement(f3.Provider,{value:c},N.createElement(V0.Provider,{children:t,value:x}))}function q8(n){let{children:e,location:t}=n;return N8(Nb(e),t)}new Promise(()=>{});function Nb(n,e){e===void 0&&(e=[]);let t=[];return N.Children.forEach(n,(r,i)=>{if(!N.isValidElement(r))return;let s=[...e,i];if(r.type===N.Fragment){t.push.apply(t,Nb(r.props.children,s));return}r.type!==Ob&&vi(!1),!r.props.index||!r.props.children||vi(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Nb(r.props.children,s)),t.push(o)}),t}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const Y8="6";try{window.__reactRouterVersion=Y8}catch{}const K8="startTransition",bR=Xk[K8];function Z8(n){let{basename:e,children:t,future:r,window:i}=n,s=N.useRef();s.current==null&&(s.current=f8({window:i,v5Compat:!0}));let o=s.current,[a,l]=N.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=N.useCallback(f=>{c&&bR?bR(()=>l(f)):l(f)},[l,c]);return N.useLayoutEffect(()=>o.listen(d),[o,d]),N.useEffect(()=>$8(r),[r]),N.createElement(X8,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:o,future:r})}var ER;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(ER||(ER={}));var MR;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(MR||(MR={}));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J8=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),g3=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Q8={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e9=N.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...a},l)=>N.createElement("svg",{ref:l,...Q8,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:g3("lucide",i),...a},[...o.map(([c,d])=>N.createElement(c,d)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _l=(n,e)=>{const t=N.forwardRef(({className:r,...i},s)=>N.createElement(e9,{ref:s,iconNode:e,className:g3(`lucide-${J8(n)}`,r),...i}));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TR=_l("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t9=_l("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v3=_l("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n9=_l("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r9=_l("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i9=_l("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s9=_l("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o9=_l("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),AR=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,CR=qD,a9=(n,e)=>t=>{var r;if((e==null?void 0:e.variants)==null)return CR(n,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:i,defaultVariants:s}=e,o=Object.keys(i).map(c=>{const d=t==null?void 0:t[c],f=s==null?void 0:s[c];if(d===null)return null;const p=AR(d)||AR(f);return i[c][p]}),a=t&&Object.entries(t).reduce((c,d)=>{let[f,p]=d;return p===void 0||(c[f]=p),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,d)=>{let{class:f,className:p,...m}=d;return Object.entries(m).every(v=>{let[x,y]=v;return Array.isArray(y)?y.includes({...s,...a}[x]):{...s,...a}[x]===y})?[...c,f,p]:c},[]);return CR(n,o,l,t==null?void 0:t.class,t==null?void 0:t.className)},l9=a9("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Vy=N.forwardRef(({className:n,variant:e,size:t,asChild:r=!1,...i},s)=>{const o=r?Qj:"button";return D.jsx(o,{className:U0(l9({variant:e,size:t,className:n})),ref:s,...i})});Vy.displayName="Button";const c9=()=>{const[n,e]=N.useState(!1),[t,r]=N.useState(!1);N.useEffect(()=>{const s=()=>{r(window.scrollY>50)};return window.addEventListener("scroll",s),()=>window.removeEventListener("scroll",s)},[]);const i=s=>{const o=document.getElementById(s);if(o){const c=o.getBoundingClientRect().top+window.pageYOffset-80;window.scrollTo({top:c,behavior:"smooth"})}e(!1)};return D.jsx("nav",{className:`fixed top-0 left-0 right-0 z-50 transition-all duration-300 ${t?"bg-background/95 backdrop-blur-md border-b border-border":"bg-transparent"}`,children:D.jsxs("div",{className:"container mx-auto px-6 py-4",children:[D.jsxs("div",{className:"flex items-center justify-between",children:[D.jsx("h1",{className:"text-2xl font-black text-gradient",children:"Sanjay Chavan"}),D.jsxs("div",{className:"hidden md:flex items-center gap-8",children:[D.jsx("button",{onClick:()=>i("about"),className:"text-sm font-semibold hover:text-primary transition-colors",children:"About"}),D.jsx("button",{onClick:()=>i("experience"),className:"text-sm font-semibold hover:text-primary transition-colors",children:"Work"}),D.jsx("button",{onClick:()=>i("projects"),className:"text-sm font-semibold hover:text-primary transition-colors",children:"Projects"}),D.jsx("button",{onClick:()=>i("skills"),className:"text-sm font-semibold hover:text-primary transition-colors",children:"Skills"}),D.jsx("button",{onClick:()=>i("contact"),className:"text-sm font-semibold hover:text-primary transition-colors",children:"Contact"}),D.jsx("a",{href:"/Sanjay_Chavan_Resume.pdf",download:!0,children:D.jsxs(Vy,{className:"bg-gradient-to-r from-primary to-secondary hover:opacity-90 font-bold",children:[D.jsx(TR,{className:"mr-2 h-4 w-4"}),"Download Resume"]})})]}),D.jsx("button",{className:"md:hidden",onClick:()=>e(!n),children:n?D.jsx(o9,{className:"h-6 w-6"}):D.jsx(i9,{className:"h-6 w-6"})})]}),n&&D.jsxs("div",{className:"md:hidden mt-4 pb-4 space-y-4",children:[D.jsx("button",{onClick:()=>i("about"),className:"block text-sm font-semibold hover:text-primary transition-colors",children:"About"}),D.jsx("button",{onClick:()=>i("experience"),className:"block text-sm font-semibold hover:text-primary transition-colors",children:"Work"}),D.jsx("button",{onClick:()=>i("projects"),className:"block text-sm font-semibold hover:text-primary transition-colors",children:"Projects"}),D.jsx("button",{onClick:()=>i("skills"),className:"block text-sm font-semibold hover:text-primary transition-colors",children:"Skills"}),D.jsx("button",{onClick:()=>i("contact"),className:"block text-sm font-semibold hover:text-primary transition-colors",children:"Contact"}),D.jsx("a",{href:"/Sanjay_Chavan_Resume.pdf",download:!0,className:"block",children:D.jsxs(Vy,{className:"w-full bg-gradient-to-r from-primary to-secondary hover:opacity-90 font-bold",children:[D.jsx(TR,{className:"mr-2 h-4 w-4"}),"Download Resume"]})})]})]})})},y3=N.createContext({});function u9(n){const e=N.useRef(null);return e.current===null&&(e.current=n()),e.current}const bM=N.createContext(null),_3=N.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function d9(n=!0){const e=N.useContext(bM);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:i}=e,s=N.useId();N.useEffect(()=>{n&&i(s)},[n]);const o=N.useCallback(()=>n&&r&&r(s),[s,r,n]);return!t&&r?[!1,o]:[!0]}const EM=typeof window<"u",h9=EM?N.useLayoutEffect:N.useEffect,Ni=n=>n;let Db=Ni;function MM(n){let e;return()=>(e===void 0&&(e=n()),e)}const zd=(n,e,t)=>{const r=e-n;return r===0?1:(t-n)/r},Wo=n=>n*1e3,Go=n=>n/1e3,f9={skipAnimations:!1,useManualTiming:!1};function p9(n){let e=new Set,t=new Set,r=!1,i=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function a(c){s.has(c)&&(l.schedule(c),n()),c(o)}const l={schedule:(c,d=!1,f=!1)=>{const m=f&&r?e:t;return d&&s.add(c),m.has(c)||m.add(c),c},cancel:c=>{t.delete(c),s.delete(c)},process:c=>{if(o=c,r){i=!0;return}r=!0,[e,t]=[t,e],e.forEach(a),e.clear(),r=!1,i&&(i=!1,l.process(c))}};return l}const Rg=["read","resolveKeyframes","update","preRender","render","postRender"],m9=40;function x3(n,e){let t=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>t=!0,o=Rg.reduce((g,w)=>(g[w]=p9(s),g),{}),{read:a,resolveKeyframes:l,update:c,preRender:d,render:f,postRender:p}=o,m=()=>{const g=performance.now();t=!1,i.delta=r?1e3/60:Math.max(Math.min(g-i.timestamp,m9),1),i.timestamp=g,i.isProcessing=!0,a.process(i),l.process(i),c.process(i),d.process(i),f.process(i),p.process(i),i.isProcessing=!1,t&&e&&(r=!1,n(m))},v=()=>{t=!0,r=!0,i.isProcessing||n(m)};return{schedule:Rg.reduce((g,w)=>{const S=o[w];return g[w]=(E,A=!1,T=!1)=>(t||v(),S.schedule(E,A,T)),g},{}),cancel:g=>{for(let w=0;w<Rg.length;w++)o[Rg[w]].cancel(g)},state:i,steps:o}}const{schedule:yn,cancel:cl,state:xr,steps:dw}=x3(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ni,!0),w3=N.createContext({strict:!1}),PR={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Vd={};for(const n in PR)Vd[n]={isEnabled:e=>PR[n].some(t=>!!e[t])};function g9(n){for(const e in n)Vd[e]={...Vd[e],...n[e]}}const v9=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function jy(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||v9.has(n)}let S3=n=>!jy(n);function y9(n){n&&(S3=e=>e.startsWith("on")?!jy(e):n(e))}try{y9(require("@emotion/is-prop-valid").default)}catch{}function _9(n,e,t){const r={};for(const i in n)i==="values"&&typeof n.values=="object"||(S3(i)||t===!0&&jy(i)||!e&&!jy(i)||n.draggable&&i.startsWith("onDrag"))&&(r[i]=n[i]);return r}function x9(n){if(typeof Proxy>"u")return n;const e=new Map,t=(...r)=>n(...r);return new Proxy(t,{get:(r,i)=>i==="create"?n:(e.has(i)||e.set(i,n(i)),e.get(i))})}const H0=N.createContext({});function op(n){return typeof n=="string"||Array.isArray(n)}function W0(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}const TM=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],AM=["initial",...TM];function G0(n){return W0(n.animate)||AM.some(e=>op(n[e]))}function b3(n){return!!(G0(n)||n.variants)}function w9(n,e){if(G0(n)){const{initial:t,animate:r}=n;return{initial:t===!1||op(t)?t:void 0,animate:op(r)?r:void 0}}return n.inherit!==!1?e:{}}function S9(n){const{initial:e,animate:t}=w9(n,N.useContext(H0));return N.useMemo(()=>({initial:e,animate:t}),[RR(e),RR(t)])}function RR(n){return Array.isArray(n)?n.join(" "):n}const b9=Symbol.for("motionComponentSymbol");function td(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function E9(n,e,t){return N.useCallback(r=>{r&&n.onMount&&n.onMount(r),e&&(r?e.mount(r):e.unmount()),t&&(typeof t=="function"?t(r):td(t)&&(t.current=r))},[e])}const CM=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),M9="framerAppearId",E3="data-"+CM(M9),{schedule:PM,cancel:Zoe}=x3(queueMicrotask,!1),M3=N.createContext({});function T9(n,e,t,r,i){var s,o;const{visualElement:a}=N.useContext(H0),l=N.useContext(w3),c=N.useContext(bM),d=N.useContext(_3).reducedMotion,f=N.useRef(null);r=r||l.renderer,!f.current&&r&&(f.current=r(n,{visualState:e,parent:a,props:t,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:d}));const p=f.current,m=N.useContext(M3);p&&!p.projection&&i&&(p.type==="html"||p.type==="svg")&&A9(f.current,t,i,m);const v=N.useRef(!1);N.useInsertionEffect(()=>{p&&v.current&&p.update(t,c)});const x=t[E3],y=N.useRef(!!x&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,x))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,x)));return h9(()=>{p&&(v.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),PM.render(p.render),y.current&&p.animationState&&p.animationState.animateChanges())}),N.useEffect(()=>{p&&(!y.current&&p.animationState&&p.animationState.animateChanges(),y.current&&(queueMicrotask(()=>{var g;(g=window.MotionHandoffMarkAsComplete)===null||g===void 0||g.call(window,x)}),y.current=!1))}),p}function A9(n,e,t,r){const{layoutId:i,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:T3(n.parent)),n.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||a&&td(a),visualElement:n,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:c})}function T3(n){if(n)return n.options.allowProjection!==!1?n.projection:T3(n.parent)}function C9({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:r,Component:i}){var s,o;n&&g9(n);function a(c,d){let f;const p={...N.useContext(_3),...c,layoutId:P9(c)},{isStatic:m}=p,v=S9(c),x=r(c,m);if(!m&&EM){R9();const y=I9(p);f=y.MeasureLayout,v.visualElement=T9(i,x,p,e,y.ProjectionNode)}return D.jsxs(H0.Provider,{value:v,children:[f&&v.visualElement?D.jsx(f,{visualElement:v.visualElement,...p}):null,t(i,c,E9(x,v.visualElement,d),x,m,v.visualElement)]})}a.displayName=`motion.${typeof i=="string"?i:`create(${(o=(s=i.displayName)!==null&&s!==void 0?s:i.name)!==null&&o!==void 0?o:""})`}`;const l=N.forwardRef(a);return l[b9]=i,l}function P9({layoutId:n}){const e=N.useContext(y3).id;return e&&n!==void 0?e+"-"+n:n}function R9(n,e){N.useContext(w3).strict}function I9(n){const{drag:e,layout:t}=Vd;if(!e&&!t)return{};const r={...e,...t};return{MeasureLayout:e!=null&&e.isEnabled(n)||t!=null&&t.isEnabled(n)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const L9=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function RM(n){return typeof n!="string"||n.includes("-")?!1:!!(L9.indexOf(n)>-1||/[A-Z]/u.test(n))}function IR(n){const e=[{},{}];return n==null||n.values.forEach((t,r)=>{e[0][r]=t.get(),e[1][r]=t.getVelocity()}),e}function IM(n,e,t,r){if(typeof e=="function"){const[i,s]=IR(r);e=e(t!==void 0?t:n.custom,i,s)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[i,s]=IR(r);e=e(t!==void 0?t:n.custom,i,s)}return e}const Ub=n=>Array.isArray(n),k9=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),O9=n=>Ub(n)?n[n.length-1]||0:n,Fr=n=>!!(n&&n.getVelocity);function Jv(n){const e=Fr(n)?n.get():n;return k9(e)?e.toValue():e}function N9({scrapeMotionValuesFromProps:n,createRenderState:e,onUpdate:t},r,i,s){const o={latestValues:D9(r,i,s,n),renderState:e()};return t&&(o.onMount=a=>t({props:r,current:a,...o}),o.onUpdate=a=>t(a)),o}const A3=n=>(e,t)=>{const r=N.useContext(H0),i=N.useContext(bM),s=()=>N9(n,e,r,i);return t?s():u9(s)};function D9(n,e,t,r){const i={},s=r(n,{});for(const p in s)i[p]=Jv(s[p]);let{initial:o,animate:a}=n;const l=G0(n),c=b3(n);e&&c&&!l&&n.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let d=t?t.initial===!1:!1;d=d||o===!1;const f=d?a:o;if(f&&typeof f!="boolean"&&!W0(f)){const p=Array.isArray(f)?f:[f];for(let m=0;m<p.length;m++){const v=IM(n,p[m]);if(v){const{transitionEnd:x,transition:y,...g}=v;for(const w in g){let S=g[w];if(Array.isArray(S)){const E=d?S.length-1:0;S=S[E]}S!==null&&(i[w]=S)}for(const w in x)i[w]=x[w]}}}return i}const oh=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Vc=new Set(oh),C3=n=>e=>typeof e=="string"&&e.startsWith(n),P3=C3("--"),U9=C3("var(--"),LM=n=>U9(n)?F9.test(n.split("/*")[0].trim()):!1,F9=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,R3=(n,e)=>e&&typeof n=="number"?e.transform(n):n,Qo=(n,e,t)=>t>e?e:t<n?n:t,ah={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},ap={...ah,transform:n=>Qo(0,1,n)},Ig={...ah,default:1},qp=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),Aa=qp("deg"),oo=qp("%"),_t=qp("px"),B9=qp("vh"),z9=qp("vw"),LR={...oo,parse:n=>oo.parse(n)/100,transform:n=>oo.transform(n*100)},V9={borderWidth:_t,borderTopWidth:_t,borderRightWidth:_t,borderBottomWidth:_t,borderLeftWidth:_t,borderRadius:_t,radius:_t,borderTopLeftRadius:_t,borderTopRightRadius:_t,borderBottomRightRadius:_t,borderBottomLeftRadius:_t,width:_t,maxWidth:_t,height:_t,maxHeight:_t,top:_t,right:_t,bottom:_t,left:_t,padding:_t,paddingTop:_t,paddingRight:_t,paddingBottom:_t,paddingLeft:_t,margin:_t,marginTop:_t,marginRight:_t,marginBottom:_t,marginLeft:_t,backgroundPositionX:_t,backgroundPositionY:_t},j9={rotate:Aa,rotateX:Aa,rotateY:Aa,rotateZ:Aa,scale:Ig,scaleX:Ig,scaleY:Ig,scaleZ:Ig,skew:Aa,skewX:Aa,skewY:Aa,distance:_t,translateX:_t,translateY:_t,translateZ:_t,x:_t,y:_t,z:_t,perspective:_t,transformPerspective:_t,opacity:ap,originX:LR,originY:LR,originZ:_t},kR={...ah,transform:Math.round},kM={...V9,...j9,zIndex:kR,size:_t,fillOpacity:ap,strokeOpacity:ap,numOctaves:kR},H9={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},W9=oh.length;function G9(n,e,t){let r="",i=!0;for(let s=0;s<W9;s++){const o=oh[s],a=n[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||t){const c=R3(a,kM[o]);if(!l){i=!1;const d=H9[o]||o;r+=`${d}(${c}) `}t&&(e[o]=c)}}return r=r.trim(),t?r=t(e,i?"":r):i&&(r="none"),r}function OM(n,e,t){const{style:r,vars:i,transformOrigin:s}=n;let o=!1,a=!1;for(const l in e){const c=e[l];if(Vc.has(l)){o=!0;continue}else if(P3(l)){i[l]=c;continue}else{const d=R3(c,kM[l]);l.startsWith("origin")?(a=!0,s[l]=d):r[l]=d}}if(e.transform||(o||t?r.transform=G9(e,n.transform,t):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:d=0}=s;r.transformOrigin=`${l} ${c} ${d}`}}const $9={offset:"stroke-dashoffset",array:"stroke-dasharray"},X9={offset:"strokeDashoffset",array:"strokeDasharray"};function q9(n,e,t=1,r=0,i=!0){n.pathLength=1;const s=i?$9:X9;n[s.offset]=_t.transform(-r);const o=_t.transform(e),a=_t.transform(t);n[s.array]=`${o} ${a}`}function OR(n,e,t){return typeof n=="string"?n:_t.transform(e+t*n)}function Y9(n,e,t){const r=OR(e,n.x,n.width),i=OR(t,n.y,n.height);return`${r} ${i}`}function NM(n,{attrX:e,attrY:t,attrScale:r,originX:i,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},d,f){if(OM(n,c,f),d){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:p,style:m,dimensions:v}=n;p.transform&&(v&&(m.transform=p.transform),delete p.transform),v&&(i!==void 0||s!==void 0||m.transform)&&(m.transformOrigin=Y9(v,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(p.x=e),t!==void 0&&(p.y=t),r!==void 0&&(p.scale=r),o!==void 0&&q9(p,o,a,l,!1)}const DM=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),I3=()=>({...DM(),attrs:{}}),UM=n=>typeof n=="string"&&n.toLowerCase()==="svg";function L3(n,{style:e,vars:t},r,i){Object.assign(n.style,e,i&&i.getProjectionStyles(r));for(const s in t)n.style.setProperty(s,t[s])}const k3=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function O3(n,e,t,r){L3(n,e,void 0,r);for(const i in e.attrs)n.setAttribute(k3.has(i)?i:CM(i),e.attrs[i])}const Hy={};function K9(n){Object.assign(Hy,n)}function N3(n,{layout:e,layoutId:t}){return Vc.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!Hy[n]||n==="opacity")}function FM(n,e,t){var r;const{style:i}=n,s={};for(const o in i)(Fr(i[o])||e.style&&Fr(e.style[o])||N3(o,n)||((r=t==null?void 0:t.getValue(o))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(s[o]=i[o]);return s}function D3(n,e,t){const r=FM(n,e,t);for(const i in n)if(Fr(n[i])||Fr(e[i])){const s=oh.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=n[i]}return r}function Z9(n,e){try{e.dimensions=typeof n.getBBox=="function"?n.getBBox():n.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const NR=["x","y","width","height","cx","cy","r"],J9={useVisualState:A3({scrapeMotionValuesFromProps:D3,createRenderState:I3,onUpdate:({props:n,prevProps:e,current:t,renderState:r,latestValues:i})=>{if(!t)return;let s=!!n.drag;if(!s){for(const a in i)if(Vc.has(a)){s=!0;break}}if(!s)return;let o=!e;if(e)for(let a=0;a<NR.length;a++){const l=NR[a];n[l]!==e[l]&&(o=!0)}o&&yn.read(()=>{Z9(t,r),yn.render(()=>{NM(r,i,UM(t.tagName),n.transformTemplate),O3(t,r)})})}})},Q9={useVisualState:A3({scrapeMotionValuesFromProps:FM,createRenderState:DM})};function U3(n,e,t){for(const r in e)!Fr(e[r])&&!N3(r,t)&&(n[r]=e[r])}function e$({transformTemplate:n},e){return N.useMemo(()=>{const t=DM();return OM(t,e,n),Object.assign({},t.vars,t.style)},[e])}function t$(n,e){const t=n.style||{},r={};return U3(r,t,n),Object.assign(r,e$(n,e)),r}function n$(n,e){const t={},r=t$(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=r,t}function r$(n,e,t,r){const i=N.useMemo(()=>{const s=I3();return NM(s,e,UM(r),n.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(n.style){const s={};U3(s,n.style,n),i.style={...s,...i.style}}return i}function i$(n=!1){return(t,r,i,{latestValues:s},o)=>{const l=(RM(t)?r$:n$)(r,s,o,t),c=_9(r,typeof t=="string",n),d=t!==N.Fragment?{...c,...l,ref:i}:{},{children:f}=r,p=N.useMemo(()=>Fr(f)?f.get():f,[f]);return N.createElement(t,{...d,children:p})}}function s$(n,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const o={...RM(r)?J9:Q9,preloadedFeatures:n,useRender:i$(i),createVisualElement:e,Component:r};return C9(o)}}function F3(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let r=0;r<t;r++)if(e[r]!==n[r])return!1;return!0}function $0(n,e,t){const r=n.getProps();return IM(r,e,t!==void 0?t:r.custom,n)}const o$=MM(()=>window.ScrollTimeline!==void 0);class a${constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,t){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=t}attachTimeline(e,t){const r=this.animations.map(i=>{if(o$()&&i.attachTimeline)return i.attachTimeline(e);if(typeof t=="function")return t(i)});return()=>{r.forEach((i,s)=>{i&&i(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let t=0;t<this.animations.length;t++)e=Math.max(e,this.animations[t].duration);return e}runAll(e){this.animations.forEach(t=>t[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class l$ extends a${then(e,t){return Promise.all(this.animations).then(e).catch(t)}}function BM(n,e){return n?n[e]||n.default||n:void 0}const Fb=2e4;function B3(n){let e=0;const t=50;let r=n.next(e);for(;!r.done&&e<Fb;)e+=t,r=n.next(e);return e>=Fb?1/0:e}function zM(n){return typeof n=="function"}function DR(n,e){n.timeline=e,n.onfinish=null}const VM=n=>Array.isArray(n)&&typeof n[0]=="number",c$={linearEasing:void 0};function u$(n,e){const t=MM(n);return()=>{var r;return(r=c$[e])!==null&&r!==void 0?r:t()}}const Wy=u$(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),z3=(n,e,t=10)=>{let r="";const i=Math.max(Math.round(e/t),2);for(let s=0;s<i;s++)r+=n(zd(0,i-1,s))+", ";return`linear(${r.substring(0,r.length-2)})`};function V3(n){return!!(typeof n=="function"&&Wy()||!n||typeof n=="string"&&(n in Bb||Wy())||VM(n)||Array.isArray(n)&&n.every(V3))}const uf=([n,e,t,r])=>`cubic-bezier(${n}, ${e}, ${t}, ${r})`,Bb={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:uf([0,.65,.55,1]),circOut:uf([.55,0,1,.45]),backIn:uf([.31,.01,.66,-.59]),backOut:uf([.33,1.53,.69,.99])};function j3(n,e){if(n)return typeof n=="function"&&Wy()?z3(n,e):VM(n)?uf(n):Array.isArray(n)?n.map(t=>j3(t,e)||Bb.easeOut):Bb[n]}const ys={x:!1,y:!1};function H3(){return ys.x||ys.y}function d$(n,e,t){var r;if(n instanceof Element)return[n];if(typeof n=="string"){let i=document;const s=(r=void 0)!==null&&r!==void 0?r:i.querySelectorAll(n);return s?Array.from(s):[]}return Array.from(n)}function W3(n,e){const t=d$(n),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[t,i,()=>r.abort()]}function UR(n){return e=>{e.pointerType==="touch"||H3()||n(e)}}function h$(n,e,t={}){const[r,i,s]=W3(n,t),o=UR(a=>{const{target:l}=a,c=e(a);if(typeof c!="function"||!l)return;const d=UR(f=>{c(f),l.removeEventListener("pointerleave",d)});l.addEventListener("pointerleave",d,i)});return r.forEach(a=>{a.addEventListener("pointerenter",o,i)}),s}const G3=(n,e)=>e?n===e?!0:G3(n,e.parentElement):!1,jM=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,f$=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function p$(n){return f$.has(n.tagName)||n.tabIndex!==-1}const df=new WeakSet;function FR(n){return e=>{e.key==="Enter"&&n(e)}}function hw(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const m$=(n,e)=>{const t=n.currentTarget;if(!t)return;const r=FR(()=>{if(df.has(t))return;hw(t,"down");const i=FR(()=>{hw(t,"up")}),s=()=>hw(t,"cancel");t.addEventListener("keyup",i,e),t.addEventListener("blur",s,e)});t.addEventListener("keydown",r,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",r),e)};function BR(n){return jM(n)&&!H3()}function g$(n,e,t={}){const[r,i,s]=W3(n,t),o=a=>{const l=a.currentTarget;if(!BR(a)||df.has(l))return;df.add(l);const c=e(a),d=(m,v)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",p),!(!BR(m)||!df.has(l))&&(df.delete(l),typeof c=="function"&&c(m,{success:v}))},f=m=>{d(m,t.useGlobalTarget||G3(l,m.target))},p=m=>{d(m,!1)};window.addEventListener("pointerup",f,i),window.addEventListener("pointercancel",p,i)};return r.forEach(a=>{!p$(a)&&a.getAttribute("tabindex")===null&&(a.tabIndex=0),(t.useGlobalTarget?window:a).addEventListener("pointerdown",o,i),a.addEventListener("focus",c=>m$(c,i),i)}),s}function v$(n){return n==="x"||n==="y"?ys[n]?null:(ys[n]=!0,()=>{ys[n]=!1}):ys.x||ys.y?null:(ys.x=ys.y=!0,()=>{ys.x=ys.y=!1})}const $3=new Set(["width","height","top","left","right","bottom",...oh]);let Qv;function y$(){Qv=void 0}const ao={now:()=>(Qv===void 0&&ao.set(xr.isProcessing||f9.useManualTiming?xr.timestamp:performance.now()),Qv),set:n=>{Qv=n,queueMicrotask(y$)}};function HM(n,e){n.indexOf(e)===-1&&n.push(e)}function WM(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}class GM{constructor(){this.subscriptions=[]}add(e){return HM(this.subscriptions,e),()=>WM(this.subscriptions,e)}notify(e,t,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,t,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function X3(n,e){return e?n*(1e3/e):0}const zR=30,_$=n=>!isNaN(parseFloat(n));class x${constructor(e,t={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const s=ao.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=ao.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=_$(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new GM);const r=this.events[e].add(t);return e==="change"?()=>{r(),yn.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,r){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=ao.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>zR)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,zR);return X3(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function lp(n,e){return new x$(n,e)}function w$(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,lp(t))}function S$(n,e){const t=$0(n,e);let{transitionEnd:r={},transition:i={},...s}=t||{};s={...s,...r};for(const o in s){const a=O9(s[o]);w$(n,o,a)}}function b$(n){return!!(Fr(n)&&n.add)}function zb(n,e){const t=n.getValue("willChange");if(b$(t))return t.add(e)}function q3(n){return n.props[E3]}const Y3=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,E$=1e-7,M$=12;function T$(n,e,t,r,i){let s,o,a=0;do o=e+(t-e)/2,s=Y3(o,r,i)-n,s>0?t=o:e=o;while(Math.abs(s)>E$&&++a<M$);return o}function Yp(n,e,t,r){if(n===e&&t===r)return Ni;const i=s=>T$(s,0,1,n,t);return s=>s===0||s===1?s:Y3(i(s),e,r)}const K3=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,Z3=n=>e=>1-n(1-e),J3=Yp(.33,1.53,.69,.99),$M=Z3(J3),Q3=K3($M),eU=n=>(n*=2)<1?.5*$M(n):.5*(2-Math.pow(2,-10*(n-1))),XM=n=>1-Math.sin(Math.acos(n)),tU=Z3(XM),nU=K3(XM),rU=n=>/^0[^.\s]+$/u.test(n);function A$(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||rU(n):!0}const Tf=n=>Math.round(n*1e5)/1e5,qM=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function C$(n){return n==null}const P$=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,YM=(n,e)=>t=>!!(typeof t=="string"&&P$.test(t)&&t.startsWith(n)||e&&!C$(t)&&Object.prototype.hasOwnProperty.call(t,e)),iU=(n,e,t)=>r=>{if(typeof r!="string")return r;const[i,s,o,a]=r.match(qM);return{[n]:parseFloat(i),[e]:parseFloat(s),[t]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},R$=n=>Qo(0,255,n),fw={...ah,transform:n=>Math.round(R$(n))},cc={test:YM("rgb","red"),parse:iU("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:r=1})=>"rgba("+fw.transform(n)+", "+fw.transform(e)+", "+fw.transform(t)+", "+Tf(ap.transform(r))+")"};function I$(n){let e="",t="",r="",i="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),r=n.substring(5,7),i=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),r=n.substring(3,4),i=n.substring(4,5),e+=e,t+=t,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const Vb={test:YM("#"),parse:I$,transform:cc.transform},nd={test:YM("hsl","hue"),parse:iU("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:r=1})=>"hsla("+Math.round(n)+", "+oo.transform(Tf(e))+", "+oo.transform(Tf(t))+", "+Tf(ap.transform(r))+")"},Nr={test:n=>cc.test(n)||Vb.test(n)||nd.test(n),parse:n=>cc.test(n)?cc.parse(n):nd.test(n)?nd.parse(n):Vb.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?cc.transform(n):nd.transform(n)},L$=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function k$(n){var e,t;return isNaN(n)&&typeof n=="string"&&(((e=n.match(qM))===null||e===void 0?void 0:e.length)||0)+(((t=n.match(L$))===null||t===void 0?void 0:t.length)||0)>0}const sU="number",oU="color",O$="var",N$="var(",VR="${}",D$=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function cp(n){const e=n.toString(),t=[],r={color:[],number:[],var:[]},i=[];let s=0;const a=e.replace(D$,l=>(Nr.test(l)?(r.color.push(s),i.push(oU),t.push(Nr.parse(l))):l.startsWith(N$)?(r.var.push(s),i.push(O$),t.push(l)):(r.number.push(s),i.push(sU),t.push(parseFloat(l))),++s,VR)).split(VR);return{values:t,split:a,indexes:r,types:i}}function aU(n){return cp(n).values}function lU(n){const{split:e,types:t}=cp(n),r=e.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=e[o],i[o]!==void 0){const a=t[o];a===sU?s+=Tf(i[o]):a===oU?s+=Nr.transform(i[o]):s+=i[o]}return s}}const U$=n=>typeof n=="number"?0:n;function F$(n){const e=aU(n);return lU(n)(e.map(U$))}const ul={test:k$,parse:aU,createTransformer:lU,getAnimatableNone:F$},B$=new Set(["brightness","contrast","saturate","opacity"]);function z$(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[r]=t.match(qM)||[];if(!r)return n;const i=t.replace(r,"");let s=B$.has(e)?1:0;return r!==t&&(s*=100),e+"("+s+i+")"}const V$=/\b([a-z-]*)\(.*?\)/gu,jb={...ul,getAnimatableNone:n=>{const e=n.match(V$);return e?e.map(z$).join(" "):n}},j$={...kM,color:Nr,backgroundColor:Nr,outlineColor:Nr,fill:Nr,stroke:Nr,borderColor:Nr,borderTopColor:Nr,borderRightColor:Nr,borderBottomColor:Nr,borderLeftColor:Nr,filter:jb,WebkitFilter:jb},KM=n=>j$[n];function cU(n,e){let t=KM(n);return t!==jb&&(t=ul),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const H$=new Set(["auto","none","0"]);function W$(n,e,t){let r=0,i;for(;r<n.length&&!i;){const s=n[r];typeof s=="string"&&!H$.has(s)&&cp(s).values.length&&(i=n[r]),r++}if(i&&t)for(const s of e)n[s]=cU(t,i)}const jR=n=>n===ah||n===_t,HR=(n,e)=>parseFloat(n.split(", ")[e]),WR=(n,e)=>(t,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return HR(i[1],e);{const s=r.match(/^matrix\((.+)\)$/u);return s?HR(s[1],n):0}},G$=new Set(["x","y","z"]),$$=oh.filter(n=>!G$.has(n));function X$(n){const e=[];return $$.forEach(t=>{const r=n.getValue(t);r!==void 0&&(e.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))}),e}const jd={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:WR(4,13),y:WR(5,14)};jd.translateX=jd.x;jd.translateY=jd.y;const bc=new Set;let Hb=!1,Wb=!1;function uU(){if(Wb){const n=Array.from(bc).filter(r=>r.needsMeasurement),e=new Set(n.map(r=>r.element)),t=new Map;e.forEach(r=>{const i=X$(r);i.length&&(t.set(r,i),r.render())}),n.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=t.get(r);i&&i.forEach(([s,o])=>{var a;(a=r.getValue(s))===null||a===void 0||a.set(o)})}),n.forEach(r=>r.measureEndState()),n.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Wb=!1,Hb=!1,bc.forEach(n=>n.complete()),bc.clear()}function dU(){bc.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(Wb=!0)})}function q$(){dU(),uU()}class ZM{constructor(e,t,r,i,s,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(bc.add(this),Hb||(Hb=!0,yn.read(dU),yn.resolveKeyframes(uU))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:r,motionValue:i}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const o=i==null?void 0:i.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&t){const l=r.readValue(t,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),i&&o===void 0&&i.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),bc.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,bc.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const hU=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n),Y$=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function K$(n){const e=Y$.exec(n);if(!e)return[,];const[,t,r,i]=e;return[`--${t??r}`,i]}function fU(n,e,t=1){const[r,i]=K$(n);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return hU(o)?parseFloat(o):o}return LM(i)?fU(i,e,t+1):i}const pU=n=>e=>e.test(n),Z$={test:n=>n==="auto",parse:n=>n},mU=[ah,_t,oo,Aa,z9,B9,Z$],GR=n=>mU.find(pU(n));class gU extends ZM{constructor(e,t,r,i,s){super(e,t,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:r}=this;if(!t||!t.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),LM(c))){const d=fU(c,t.current);d!==void 0&&(e[l]=d),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!$3.has(r)||e.length!==2)return;const[i,s]=e,o=GR(i),a=GR(s);if(o!==a)if(jR(o)&&jR(a))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,r=[];for(let i=0;i<e.length;i++)A$(e[i])&&r.push(i);r.length&&W$(e,r,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=jd[r](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const i=t[t.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var e;const{element:t,name:r,unresolvedKeyframes:i}=this;if(!t||!t.current)return;const s=t.getValue(r);s&&s.jump(this.measuredOrigin,!1);const o=i.length-1,a=i[o];i[o]=jd[r](t.measureViewportBox(),window.getComputedStyle(t.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,c])=>{t.getValue(l).set(c)}),this.resolveNoneKeyframes()}}const $R=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(ul.test(n)||n==="0")&&!n.startsWith("url("));function J$(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function Q$(n,e,t,r){const i=n[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=n[n.length-1],o=$R(i,e),a=$R(s,e);return!o||!a?!1:J$(n)||(t==="spring"||zM(t))&&r}const e7=n=>n!==null;function X0(n,{repeat:e,repeatType:t="loop"},r){const i=n.filter(e7),s=e&&t!=="loop"&&e%2===1?0:i.length-1;return!s||r===void 0?i[s]:r}const t7=40;class vU{constructor({autoplay:e=!0,delay:t=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=ao.now(),this.options={autoplay:e,delay:t,type:r,repeat:i,repeatDelay:s,repeatType:o,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>t7?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&q$(),this._resolved}onKeyframesResolved(e,t){this.resolvedAt=ao.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:s,delay:o,onComplete:a,onUpdate:l,isGenerator:c}=this.options;if(!c&&!Q$(e,r,i,s))if(o)this.options.duration=0;else{l&&l(X0(e,this.options,t)),a&&a(),this.resolveFinishedPromise();return}const d=this.initPlayback(e,t);d!==!1&&(this._resolved={keyframes:e,finalKeyframe:t,...d},this.onPostResolved())}onPostResolved(){}then(e,t){return this.currentFinishedPromise.then(e,t)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const Tn=(n,e,t)=>n+(e-n)*t;function pw(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function n7({hue:n,saturation:e,lightness:t,alpha:r}){n/=360,e/=100,t/=100;let i=0,s=0,o=0;if(!e)i=s=o=t;else{const a=t<.5?t*(1+e):t+e-t*e,l=2*t-a;i=pw(l,a,n+1/3),s=pw(l,a,n),o=pw(l,a,n-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function Gy(n,e){return t=>t>0?e:n}const mw=(n,e,t)=>{const r=n*n,i=t*(e*e-r)+r;return i<0?0:Math.sqrt(i)},r7=[Vb,cc,nd],i7=n=>r7.find(e=>e.test(n));function XR(n){const e=i7(n);if(!e)return!1;let t=e.parse(n);return e===nd&&(t=n7(t)),t}const qR=(n,e)=>{const t=XR(n),r=XR(e);if(!t||!r)return Gy(n,e);const i={...t};return s=>(i.red=mw(t.red,r.red,s),i.green=mw(t.green,r.green,s),i.blue=mw(t.blue,r.blue,s),i.alpha=Tn(t.alpha,r.alpha,s),cc.transform(i))},s7=(n,e)=>t=>e(n(t)),Kp=(...n)=>n.reduce(s7),Gb=new Set(["none","hidden"]);function o7(n,e){return Gb.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function a7(n,e){return t=>Tn(n,e,t)}function JM(n){return typeof n=="number"?a7:typeof n=="string"?LM(n)?Gy:Nr.test(n)?qR:u7:Array.isArray(n)?yU:typeof n=="object"?Nr.test(n)?qR:l7:Gy}function yU(n,e){const t=[...n],r=t.length,i=n.map((s,o)=>JM(s)(s,e[o]));return s=>{for(let o=0;o<r;o++)t[o]=i[o](s);return t}}function l7(n,e){const t={...n,...e},r={};for(const i in t)n[i]!==void 0&&e[i]!==void 0&&(r[i]=JM(n[i])(n[i],e[i]));return i=>{for(const s in r)t[s]=r[s](i);return t}}function c7(n,e){var t;const r=[],i={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],a=n.indexes[o][i[o]],l=(t=n.values[a])!==null&&t!==void 0?t:0;r[s]=l,i[o]++}return r}const u7=(n,e)=>{const t=ul.createTransformer(e),r=cp(n),i=cp(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?Gb.has(n)&&!i.values.length||Gb.has(e)&&!r.values.length?o7(n,e):Kp(yU(c7(r,i),i.values),t):Gy(n,e)};function _U(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?Tn(n,e,t):JM(n)(n,e)}const d7=5;function xU(n,e,t){const r=Math.max(e-d7,0);return X3(t-n(r),e-r)}const On={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},gw=.001;function h7({duration:n=On.duration,bounce:e=On.bounce,velocity:t=On.velocity,mass:r=On.mass}){let i,s,o=1-e;o=Qo(On.minDamping,On.maxDamping,o),n=Qo(On.minDuration,On.maxDuration,Go(n)),o<1?(i=c=>{const d=c*o,f=d*n,p=d-t,m=$b(c,o),v=Math.exp(-f);return gw-p/m*v},s=c=>{const f=c*o*n,p=f*t+t,m=Math.pow(o,2)*Math.pow(c,2)*n,v=Math.exp(-f),x=$b(Math.pow(c,2),o);return(-i(c)+gw>0?-1:1)*((p-m)*v)/x}):(i=c=>{const d=Math.exp(-c*n),f=(c-t)*n+1;return-gw+d*f},s=c=>{const d=Math.exp(-c*n),f=(t-c)*(n*n);return d*f});const a=5/n,l=p7(i,s,a);if(n=Wo(n),isNaN(l))return{stiffness:On.stiffness,damping:On.damping,duration:n};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:n}}}const f7=12;function p7(n,e,t){let r=t;for(let i=1;i<f7;i++)r=r-n(r)/e(r);return r}function $b(n,e){return n*Math.sqrt(1-e*e)}const m7=["duration","bounce"],g7=["stiffness","damping","mass"];function YR(n,e){return e.some(t=>n[t]!==void 0)}function v7(n){let e={velocity:On.velocity,stiffness:On.stiffness,damping:On.damping,mass:On.mass,isResolvedFromDuration:!1,...n};if(!YR(n,g7)&&YR(n,m7))if(n.visualDuration){const t=n.visualDuration,r=2*Math.PI/(t*1.2),i=r*r,s=2*Qo(.05,1,1-(n.bounce||0))*Math.sqrt(i);e={...e,mass:On.mass,stiffness:i,damping:s}}else{const t=h7(n);e={...e,...t,mass:On.mass},e.isResolvedFromDuration=!0}return e}function wU(n=On.visualDuration,e=On.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:r,restDelta:i}=t;const s=t.keyframes[0],o=t.keyframes[t.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:c,mass:d,duration:f,velocity:p,isResolvedFromDuration:m}=v7({...t,velocity:-Go(t.velocity||0)}),v=p||0,x=c/(2*Math.sqrt(l*d)),y=o-s,g=Go(Math.sqrt(l/d)),w=Math.abs(y)<5;r||(r=w?On.restSpeed.granular:On.restSpeed.default),i||(i=w?On.restDelta.granular:On.restDelta.default);let S;if(x<1){const A=$b(g,x);S=T=>{const P=Math.exp(-x*g*T);return o-P*((v+x*g*y)/A*Math.sin(A*T)+y*Math.cos(A*T))}}else if(x===1)S=A=>o-Math.exp(-g*A)*(y+(v+g*y)*A);else{const A=g*Math.sqrt(x*x-1);S=T=>{const P=Math.exp(-x*g*T),k=Math.min(A*T,300);return o-P*((v+x*g*y)*Math.sinh(k)+A*y*Math.cosh(k))/A}}const E={calculatedDuration:m&&f||null,next:A=>{const T=S(A);if(m)a.done=A>=f;else{let P=0;x<1&&(P=A===0?Wo(v):xU(S,A,T));const k=Math.abs(P)<=r,R=Math.abs(o-T)<=i;a.done=k&&R}return a.value=a.done?o:T,a},toString:()=>{const A=Math.min(B3(E),Fb),T=z3(P=>E.next(A*P).value,A,30);return A+"ms "+T}};return E}function KR({keyframes:n,velocity:e=0,power:t=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:d}){const f=n[0],p={done:!1,value:f},m=k=>a!==void 0&&k<a||l!==void 0&&k>l,v=k=>a===void 0?l:l===void 0||Math.abs(a-k)<Math.abs(l-k)?a:l;let x=t*e;const y=f+x,g=o===void 0?y:o(y);g!==y&&(x=g-f);const w=k=>-x*Math.exp(-k/r),S=k=>g+w(k),E=k=>{const R=w(k),I=S(k);p.done=Math.abs(R)<=c,p.value=p.done?g:I};let A,T;const P=k=>{m(p.value)&&(A=k,T=wU({keyframes:[p.value,v(p.value)],velocity:xU(S,k,p.value),damping:i,stiffness:s,restDelta:c,restSpeed:d}))};return P(0),{calculatedDuration:null,next:k=>{let R=!1;return!T&&A===void 0&&(R=!0,E(k),P(k)),A!==void 0&&k>=A?T.next(k-A):(!R&&E(k),p)}}}const y7=Yp(.42,0,1,1),_7=Yp(0,0,.58,1),SU=Yp(.42,0,.58,1),x7=n=>Array.isArray(n)&&typeof n[0]!="number",ZR={linear:Ni,easeIn:y7,easeInOut:SU,easeOut:_7,circIn:XM,circInOut:nU,circOut:tU,backIn:$M,backInOut:Q3,backOut:J3,anticipate:eU},JR=n=>{if(VM(n)){Db(n.length===4);const[e,t,r,i]=n;return Yp(e,t,r,i)}else if(typeof n=="string")return Db(ZR[n]!==void 0),ZR[n];return n};function w7(n,e,t){const r=[],i=t||_U,s=n.length-1;for(let o=0;o<s;o++){let a=i(n[o],n[o+1]);if(e){const l=Array.isArray(e)?e[o]||Ni:e;a=Kp(l,a)}r.push(a)}return r}function S7(n,e,{clamp:t=!0,ease:r,mixer:i}={}){const s=n.length;if(Db(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=n[0]===n[1];n[0]>n[s-1]&&(n=[...n].reverse(),e=[...e].reverse());const a=w7(e,r,i),l=a.length,c=d=>{if(o&&d<n[0])return e[0];let f=0;if(l>1)for(;f<n.length-2&&!(d<n[f+1]);f++);const p=zd(n[f],n[f+1],d);return a[f](p)};return t?d=>c(Qo(n[0],n[s-1],d)):c}function b7(n,e){const t=n[n.length-1];for(let r=1;r<=e;r++){const i=zd(0,e,r);n.push(Tn(t,1,i))}}function E7(n){const e=[0];return b7(e,n.length-1),e}function M7(n,e){return n.map(t=>t*e)}function T7(n,e){return n.map(()=>e||SU).splice(0,n.length-1)}function $y({duration:n=300,keyframes:e,times:t,ease:r="easeInOut"}){const i=x7(r)?r.map(JR):JR(r),s={done:!1,value:e[0]},o=M7(t&&t.length===e.length?t:E7(e),n),a=S7(o,e,{ease:Array.isArray(i)?i:T7(e,i)});return{calculatedDuration:n,next:l=>(s.value=a(l),s.done=l>=n,s)}}const A7=n=>{const e=({timestamp:t})=>n(t);return{start:()=>yn.update(e,!0),stop:()=>cl(e),now:()=>xr.isProcessing?xr.timestamp:ao.now()}},C7={decay:KR,inertia:KR,tween:$y,keyframes:$y,spring:wU},P7=n=>n/100;class QM extends vU{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:t,motionValue:r,element:i,keyframes:s}=this.options,o=(i==null?void 0:i.KeyframeResolver)||ZM,a=(l,c)=>this.onKeyframesResolved(l,c);this.resolver=new o(s,a,t,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:t="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=this.options,a=zM(t)?t:C7[t]||$y;let l,c;a!==$y&&typeof e[0]!="number"&&(l=Kp(P7,_U(e[0],e[1])),e=[0,100]);const d=a({...this.options,keyframes:e});s==="mirror"&&(c=a({...this.options,keyframes:[...e].reverse(),velocity:-o})),d.calculatedDuration===null&&(d.calculatedDuration=B3(d));const{calculatedDuration:f}=d,p=f+i,m=p*(r+1)-i;return{generator:d,mirroredGenerator:c,mapPercentToKeyframes:l,calculatedDuration:f,resolvedDuration:p,totalDuration:m}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,t=!1){const{resolved:r}=this;if(!r){const{keyframes:k}=this.options;return{done:!0,value:k[k.length-1]}}const{finalKeyframe:i,generator:s,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:l,calculatedDuration:c,totalDuration:d,resolvedDuration:f}=r;if(this.startTime===null)return s.next(0);const{delay:p,repeat:m,repeatType:v,repeatDelay:x,onUpdate:y}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-d/this.speed,this.startTime)),t?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const g=this.currentTime-p*(this.speed>=0?1:-1),w=this.speed>=0?g<0:g>d;this.currentTime=Math.max(g,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=d);let S=this.currentTime,E=s;if(m){const k=Math.min(this.currentTime,d)/f;let R=Math.floor(k),I=k%1;!I&&k>=1&&(I=1),I===1&&R--,R=Math.min(R,m+1),!!(R%2)&&(v==="reverse"?(I=1-I,x&&(I-=x/f)):v==="mirror"&&(E=o)),S=Qo(0,1,I)*f}const A=w?{done:!1,value:l[0]}:E.next(S);a&&(A.value=a(A.value));let{done:T}=A;!w&&c!==null&&(T=this.speed>=0?this.currentTime>=d:this.currentTime<=0);const P=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&T);return P&&i!==void 0&&(A.value=X0(l,this.options,i)),y&&y(A.value),P&&this.finish(),A}get duration(){const{resolved:e}=this;return e?Go(e.calculatedDuration):0}get time(){return Go(this.currentTime)}set time(e){e=Wo(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=Go(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=A7,onPlay:t,startTime:r}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),t&&t();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const R7=new Set(["opacity","clipPath","filter","transform"]);function I7(n,e,t,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:a="easeInOut",times:l}={}){const c={[e]:t};l&&(c.offset=l);const d=j3(a,i);return Array.isArray(d)&&(c.easing=d),n.animate(c,{delay:r,duration:i,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}const L7=MM(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Xy=10,k7=2e4;function O7(n){return zM(n.type)||n.type==="spring"||!V3(n.ease)}function N7(n,e){const t=new QM({...e,keyframes:n,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:n[0]};const i=[];let s=0;for(;!r.done&&s<k7;)r=t.sample(s),i.push(r.value),s+=Xy;return{times:void 0,keyframes:i,duration:s-Xy,ease:"linear"}}const bU={anticipate:eU,backInOut:Q3,circInOut:nU};function D7(n){return n in bU}class QR extends vU{constructor(e){super(e);const{name:t,motionValue:r,element:i,keyframes:s}=this.options;this.resolver=new gU(s,(o,a)=>this.onKeyframesResolved(o,a),t,r,i),this.resolver.scheduleResolve()}initPlayback(e,t){let{duration:r=300,times:i,ease:s,type:o,motionValue:a,name:l,startTime:c}=this.options;if(!a.owner||!a.owner.current)return!1;if(typeof s=="string"&&Wy()&&D7(s)&&(s=bU[s]),O7(this.options)){const{onComplete:f,onUpdate:p,motionValue:m,element:v,...x}=this.options,y=N7(e,x);e=y.keyframes,e.length===1&&(e[1]=e[0]),r=y.duration,i=y.times,s=y.ease,o="keyframes"}const d=I7(a.owner.current,l,e,{...this.options,duration:r,times:i,ease:s});return d.startTime=c??this.calcStartTime(),this.pendingTimeline?(DR(d,this.pendingTimeline),this.pendingTimeline=void 0):d.onfinish=()=>{const{onComplete:f}=this.options;a.set(X0(e,this.options,t)),f&&f(),this.cancel(),this.resolveFinishedPromise()},{animation:d,duration:r,times:i,type:o,ease:s,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:t}=e;return Go(t)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:t}=e;return Go(t.currentTime||0)}set time(e){const{resolved:t}=this;if(!t)return;const{animation:r}=t;r.currentTime=Wo(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:t}=e;return t.playbackRate}set speed(e){const{resolved:t}=this;if(!t)return;const{animation:r}=t;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:t}=e;return t.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:t}=e;return t.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:t}=this;if(!t)return Ni;const{animation:r}=t;DR(r,e)}return Ni}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.playState==="finished"&&this.updateFinishedPromise(),t.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:t,keyframes:r,duration:i,type:s,ease:o,times:a}=e;if(t.playState==="idle"||t.playState==="finished")return;if(this.time){const{motionValue:c,onUpdate:d,onComplete:f,element:p,...m}=this.options,v=new QM({...m,keyframes:r,duration:i,type:s,ease:o,times:a,isGenerator:!0}),x=Wo(this.time);c.setWithVelocity(v.sample(x-Xy).value,v.sample(x).value,Xy)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:t,name:r,repeatDelay:i,repeatType:s,damping:o,type:a}=e;if(!t||!t.owner||!(t.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=t.owner.getProps();return L7()&&r&&R7.has(r)&&!l&&!c&&!i&&s!=="mirror"&&o!==0&&a!=="inertia"}}const U7={type:"spring",stiffness:500,damping:25,restSpeed:10},F7=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),B7={type:"keyframes",duration:.8},z7={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},V7=(n,{keyframes:e})=>e.length>2?B7:Vc.has(n)?n.startsWith("scale")?F7(e[1]):U7:z7;function j7({when:n,delay:e,delayChildren:t,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:c,...d}){return!!Object.keys(d).length}const eT=(n,e,t,r={},i,s)=>o=>{const a=BM(r,n)||{},l=a.delay||r.delay||0;let{elapsed:c=0}=r;c=c-Wo(l);let d={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:p=>{e.set(p),a.onUpdate&&a.onUpdate(p)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:n,motionValue:e,element:s?void 0:i};j7(a)||(d={...d,...V7(n,d)}),d.duration&&(d.duration=Wo(d.duration)),d.repeatDelay&&(d.repeatDelay=Wo(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let f=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(d.duration=0,d.delay===0&&(f=!0)),f&&!s&&e.get()!==void 0){const p=X0(d.keyframes,a);if(p!==void 0)return yn.update(()=>{d.onUpdate(p),d.onComplete()}),new l$([])}return!s&&QR.supports(d)?new QR(d):new QM(d)};function H7({protectedKeys:n,needsAnimating:e},t){const r=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,r}function EU(n,e,{delay:t=0,transitionOverride:r,type:i}={}){var s;let{transition:o=n.getDefaultTransition(),transitionEnd:a,...l}=e;r&&(o=r);const c=[],d=i&&n.animationState&&n.animationState.getState()[i];for(const f in l){const p=n.getValue(f,(s=n.latestValues[f])!==null&&s!==void 0?s:null),m=l[f];if(m===void 0||d&&H7(d,f))continue;const v={delay:t,...BM(o||{},f)};let x=!1;if(window.MotionHandoffAnimation){const g=q3(n);if(g){const w=window.MotionHandoffAnimation(g,f,yn);w!==null&&(v.startTime=w,x=!0)}}zb(n,f),p.start(eT(f,p,m,n.shouldReduceMotion&&$3.has(f)?{type:!1}:v,n,x));const y=p.animation;y&&c.push(y)}return a&&Promise.all(c).then(()=>{yn.update(()=>{a&&S$(n,a)})}),c}function Xb(n,e,t={}){var r;const i=$0(n,e,t.type==="exit"?(r=n.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:s=n.getDefaultTransition()||{}}=i||{};t.transitionOverride&&(s=t.transitionOverride);const o=i?()=>Promise.all(EU(n,i,t)):()=>Promise.resolve(),a=n.variantChildren&&n.variantChildren.size?(c=0)=>{const{delayChildren:d=0,staggerChildren:f,staggerDirection:p}=s;return W7(n,e,d+c,f,p,t)}:()=>Promise.resolve(),{when:l}=s;if(l){const[c,d]=l==="beforeChildren"?[o,a]:[a,o];return c().then(()=>d())}else return Promise.all([o(),a(t.delay)])}function W7(n,e,t=0,r=0,i=1,s){const o=[],a=(n.variantChildren.size-1)*r,l=i===1?(c=0)=>c*r:(c=0)=>a-c*r;return Array.from(n.variantChildren).sort(G7).forEach((c,d)=>{c.notify("AnimationStart",e),o.push(Xb(c,e,{...s,delay:t+l(d)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function G7(n,e){return n.sortNodePosition(e)}function $7(n,e,t={}){n.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>Xb(n,s,t));r=Promise.all(i)}else if(typeof e=="string")r=Xb(n,e,t);else{const i=typeof e=="function"?$0(n,e,t.custom):e;r=Promise.all(EU(n,i,t))}return r.then(()=>{n.notify("AnimationComplete",e)})}const X7=AM.length;function MU(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?MU(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<X7;t++){const r=AM[t],i=n.props[r];(op(i)||i===!1)&&(e[r]=i)}return e}const q7=[...TM].reverse(),Y7=TM.length;function K7(n){return e=>Promise.all(e.map(({animation:t,options:r})=>$7(n,t,r)))}function Z7(n){let e=K7(n),t=e2(),r=!0;const i=l=>(c,d)=>{var f;const p=$0(n,d,l==="exit"?(f=n.presenceContext)===null||f===void 0?void 0:f.custom:void 0);if(p){const{transition:m,transitionEnd:v,...x}=p;c={...c,...x,...v}}return c};function s(l){e=l(n)}function o(l){const{props:c}=n,d=MU(n.parent)||{},f=[],p=new Set;let m={},v=1/0;for(let y=0;y<Y7;y++){const g=q7[y],w=t[g],S=c[g]!==void 0?c[g]:d[g],E=op(S),A=g===l?w.isActive:null;A===!1&&(v=y);let T=S===d[g]&&S!==c[g]&&E;if(T&&r&&n.manuallyAnimateOnMount&&(T=!1),w.protectedKeys={...m},!w.isActive&&A===null||!S&&!w.prevProp||W0(S)||typeof S=="boolean")continue;const P=J7(w.prevProp,S);let k=P||g===l&&w.isActive&&!T&&E||y>v&&E,R=!1;const I=Array.isArray(S)?S:[S];let H=I.reduce(i(g),{});A===!1&&(H={});const{prevResolvedValues:G={}}=w,re={...G,...H},z=te=>{k=!0,p.has(te)&&(R=!0,p.delete(te)),w.needsAnimating[te]=!0;const L=n.getValue(te);L&&(L.liveStyle=!1)};for(const te in re){const L=H[te],U=G[te];if(m.hasOwnProperty(te))continue;let V=!1;Ub(L)&&Ub(U)?V=!F3(L,U):V=L!==U,V?L!=null?z(te):p.add(te):L!==void 0&&p.has(te)?z(te):w.protectedKeys[te]=!0}w.prevProp=S,w.prevResolvedValues=H,w.isActive&&(m={...m,...H}),r&&n.blockInitialAnimation&&(k=!1),k&&(!(T&&P)||R)&&f.push(...I.map(te=>({animation:te,options:{type:g}})))}if(p.size){const y={};p.forEach(g=>{const w=n.getBaseTarget(g),S=n.getValue(g);S&&(S.liveStyle=!0),y[g]=w??null}),f.push({animation:y})}let x=!!f.length;return r&&(c.initial===!1||c.initial===c.animate)&&!n.manuallyAnimateOnMount&&(x=!1),r=!1,x?e(f):Promise.resolve()}function a(l,c){var d;if(t[l].isActive===c)return Promise.resolve();(d=n.variantChildren)===null||d===void 0||d.forEach(p=>{var m;return(m=p.animationState)===null||m===void 0?void 0:m.setActive(l,c)}),t[l].isActive=c;const f=o(l);for(const p in t)t[p].protectedKeys={};return f}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>t,reset:()=>{t=e2(),r=!0}}}function J7(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!F3(e,n):!1}function Nl(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function e2(){return{animate:Nl(!0),whileInView:Nl(),whileHover:Nl(),whileTap:Nl(),whileDrag:Nl(),whileFocus:Nl(),exit:Nl()}}class xl{constructor(e){this.isMounted=!1,this.node=e}update(){}}class Q7 extends xl{constructor(e){super(e),e.animationState||(e.animationState=Z7(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();W0(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let eX=0;class tX extends xl{constructor(){super(...arguments),this.id=eX++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);t&&!e&&i.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const nX={animation:{Feature:Q7},exit:{Feature:tX}};function up(n,e,t,r={passive:!0}){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t)}function Zp(n){return{point:{x:n.pageX,y:n.pageY}}}const rX=n=>e=>jM(e)&&n(e,Zp(e));function Af(n,e,t,r){return up(n,e,rX(t),r)}const t2=(n,e)=>Math.abs(n-e);function iX(n,e){const t=t2(n.x,e.x),r=t2(n.y,e.y);return Math.sqrt(t**2+r**2)}class TU{constructor(e,t,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=yw(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,m=iX(f.offset,{x:0,y:0})>=3;if(!p&&!m)return;const{point:v}=f,{timestamp:x}=xr;this.history.push({...v,timestamp:x});const{onStart:y,onMove:g}=this.handlers;p||(y&&y(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),g&&g(this.lastMoveEvent,f)},this.handlePointerMove=(f,p)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=vw(p,this.transformPagePoint),yn.update(this.updatePoint,!0)},this.handlePointerUp=(f,p)=>{this.end();const{onEnd:m,onSessionEnd:v,resumeAnimation:x}=this.handlers;if(this.dragSnapToOrigin&&x&&x(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=yw(f.type==="pointercancel"?this.lastMoveEventInfo:vw(p,this.transformPagePoint),this.history);this.startEvent&&m&&m(f,y),v&&v(f,y)},!jM(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=r,this.contextWindow=i||window;const o=Zp(e),a=vw(o,this.transformPagePoint),{point:l}=a,{timestamp:c}=xr;this.history=[{...l,timestamp:c}];const{onSessionStart:d}=t;d&&d(e,yw(a,this.history)),this.removeListeners=Kp(Af(this.contextWindow,"pointermove",this.handlePointerMove),Af(this.contextWindow,"pointerup",this.handlePointerUp),Af(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),cl(this.updatePoint)}}function vw(n,e){return e?{point:e(n.point)}:n}function n2(n,e){return{x:n.x-e.x,y:n.y-e.y}}function yw({point:n},e){return{point:n,delta:n2(n,AU(e)),offset:n2(n,sX(e)),velocity:oX(e,.1)}}function sX(n){return n[0]}function AU(n){return n[n.length-1]}function oX(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,r=null;const i=AU(n);for(;t>=0&&(r=n[t],!(i.timestamp-r.timestamp>Wo(e)));)t--;if(!r)return{x:0,y:0};const s=Go(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}const CU=1e-4,aX=1-CU,lX=1+CU,PU=.01,cX=0-PU,uX=0+PU;function Fi(n){return n.max-n.min}function dX(n,e,t){return Math.abs(n-e)<=t}function r2(n,e,t,r=.5){n.origin=r,n.originPoint=Tn(e.min,e.max,n.origin),n.scale=Fi(t)/Fi(e),n.translate=Tn(t.min,t.max,n.origin)-n.originPoint,(n.scale>=aX&&n.scale<=lX||isNaN(n.scale))&&(n.scale=1),(n.translate>=cX&&n.translate<=uX||isNaN(n.translate))&&(n.translate=0)}function Cf(n,e,t,r){r2(n.x,e.x,t.x,r?r.originX:void 0),r2(n.y,e.y,t.y,r?r.originY:void 0)}function i2(n,e,t){n.min=t.min+e.min,n.max=n.min+Fi(e)}function hX(n,e,t){i2(n.x,e.x,t.x),i2(n.y,e.y,t.y)}function s2(n,e,t){n.min=e.min-t.min,n.max=n.min+Fi(e)}function Pf(n,e,t){s2(n.x,e.x,t.x),s2(n.y,e.y,t.y)}function fX(n,{min:e,max:t},r){return e!==void 0&&n<e?n=r?Tn(e,n,r.min):Math.max(n,e):t!==void 0&&n>t&&(n=r?Tn(t,n,r.max):Math.min(n,t)),n}function o2(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function pX(n,{top:e,left:t,bottom:r,right:i}){return{x:o2(n.x,t,i),y:o2(n.y,e,r)}}function a2(n,e){let t=e.min-n.min,r=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,r]=[r,t]),{min:t,max:r}}function mX(n,e){return{x:a2(n.x,e.x),y:a2(n.y,e.y)}}function gX(n,e){let t=.5;const r=Fi(n),i=Fi(e);return i>r?t=zd(e.min,e.max-r,n.min):r>i&&(t=zd(n.min,n.max-i,e.min)),Qo(0,1,t)}function vX(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const qb=.35;function yX(n=qb){return n===!1?n=0:n===!0&&(n=qb),{x:l2(n,"left","right"),y:l2(n,"top","bottom")}}function l2(n,e,t){return{min:c2(n,e),max:c2(n,t)}}function c2(n,e){return typeof n=="number"?n:n[e]||0}const u2=()=>({translate:0,scale:1,origin:0,originPoint:0}),rd=()=>({x:u2(),y:u2()}),d2=()=>({min:0,max:0}),Vn=()=>({x:d2(),y:d2()});function es(n){return[n("x"),n("y")]}function RU({top:n,left:e,right:t,bottom:r}){return{x:{min:e,max:t},y:{min:n,max:r}}}function _X({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function xX(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),r=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:r.y,right:r.x}}function _w(n){return n===void 0||n===1}function Yb({scale:n,scaleX:e,scaleY:t}){return!_w(n)||!_w(e)||!_w(t)}function Kl(n){return Yb(n)||IU(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function IU(n){return h2(n.x)||h2(n.y)}function h2(n){return n&&n!=="0%"}function qy(n,e,t){const r=n-t,i=e*r;return t+i}function f2(n,e,t,r,i){return i!==void 0&&(n=qy(n,i,r)),qy(n,t,r)+e}function Kb(n,e=0,t=1,r,i){n.min=f2(n.min,e,t,r,i),n.max=f2(n.max,e,t,r,i)}function LU(n,{x:e,y:t}){Kb(n.x,e.translate,e.scale,e.originPoint),Kb(n.y,t.translate,t.scale,t.originPoint)}const p2=.999999999999,m2=1.0000000000001;function wX(n,e,t,r=!1){const i=t.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=t[a],o=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&sd(n,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,LU(n,o)),r&&Kl(s.latestValues)&&sd(n,s.latestValues))}e.x<m2&&e.x>p2&&(e.x=1),e.y<m2&&e.y>p2&&(e.y=1)}function id(n,e){n.min=n.min+e,n.max=n.max+e}function g2(n,e,t,r,i=.5){const s=Tn(n.min,n.max,i);Kb(n,e,t,s,r)}function sd(n,e){g2(n.x,e.x,e.scaleX,e.scale,e.originX),g2(n.y,e.y,e.scaleY,e.scale,e.originY)}function kU(n,e){return RU(xX(n.getBoundingClientRect(),e))}function SX(n,e,t){const r=kU(n,t),{scroll:i}=e;return i&&(id(r.x,i.offset.x),id(r.y,i.offset.y)),r}const OU=({current:n})=>n?n.ownerDocument.defaultView:null,bX=new WeakMap;class EX{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Vn(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=d=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(Zp(d).point)},s=(d,f)=>{const{drag:p,dragPropagation:m,onDragStart:v}=this.getProps();if(p&&!m&&(this.openDragLock&&this.openDragLock(),this.openDragLock=v$(p),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),es(y=>{let g=this.getAxisMotionValue(y).get()||0;if(oo.test(g)){const{projection:w}=this.visualElement;if(w&&w.layout){const S=w.layout.layoutBox[y];S&&(g=Fi(S)*(parseFloat(g)/100))}}this.originPoint[y]=g}),v&&yn.postRender(()=>v(d,f)),zb(this.visualElement,"transform");const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},o=(d,f)=>{const{dragPropagation:p,dragDirectionLock:m,onDirectionLock:v,onDrag:x}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:y}=f;if(m&&this.currentDirection===null){this.currentDirection=MX(y),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",f.point,y),this.updateAxis("y",f.point,y),this.visualElement.render(),x&&x(d,f)},a=(d,f)=>this.stop(d,f),l=()=>es(d=>{var f;return this.getAnimationState(d)==="paused"&&((f=this.getAxisMotionValue(d).animation)===null||f===void 0?void 0:f.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new TU(e,{onSessionStart:i,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:OU(this.visualElement)})}stop(e,t){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=t;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&yn.postRender(()=>s(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:i}=this.getProps();if(!r||!Lg(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=fX(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;t&&td(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&i?this.constraints=pX(i.layoutBox,t):this.constraints=!1,this.elastic=yX(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&es(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=vX(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!td(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=SX(r,i.root,this.visualElement.getTransformPagePoint());let o=mX(i.layout.layoutBox,s);if(t){const a=t(_X(o));this.hasMutatedConstraints=!!a,a&&(o=RU(a))}return o}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=es(d=>{if(!Lg(d,t,this.currentDirection))return;let f=l&&l[d]||{};o&&(f={min:0,max:0});const p=i?200:1e6,m=i?40:1e7,v={type:"inertia",velocity:r?e[d]:0,bounceStiffness:p,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...s,...f};return this.startAxisValueAnimation(d,v)});return Promise.all(c).then(a)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return zb(this.visualElement,e),r.start(eT(e,r,0,t,this.visualElement,!1))}stopAnimation(){es(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){es(e=>{var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[t];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){es(t=>{const{drag:r}=this.getProps();if(!Lg(t,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(t);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[t];s.set(e[t]-Tn(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!td(t)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};es(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();i[o]=gX({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),es(o=>{if(!Lg(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(Tn(l,c,i[o]))})}addListeners(){if(!this.visualElement.current)return;bX.set(this.visualElement,this);const e=this.visualElement.current,t=Af(e,"pointerdown",l=>{const{drag:c,dragListener:d=!0}=this.getProps();c&&d&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();td(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),yn.read(r);const o=up(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(es(d=>{const f=this.getAxisMotionValue(d);f&&(this.originPoint[d]+=l[d].translate,f.set(f.get()+l[d].translate))}),this.visualElement.render())});return()=>{o(),t(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=qb,dragMomentum:a=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function Lg(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function MX(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class TX extends xl{constructor(e){super(e),this.removeGroupControls=Ni,this.removeListeners=Ni,this.controls=new EX(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ni}unmount(){this.removeGroupControls(),this.removeListeners()}}const v2=n=>(e,t)=>{n&&yn.postRender(()=>n(e,t))};class AX extends xl{constructor(){super(...arguments),this.removePointerDownListener=Ni}onPointerDown(e){this.session=new TU(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:OU(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:v2(e),onStart:v2(t),onMove:r,onEnd:(s,o)=>{delete this.session,i&&yn.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=Af(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const ey={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function y2(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Gh={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(_t.test(n))n=parseFloat(n);else return n;const t=y2(n,e.target.x),r=y2(n,e.target.y);return`${t}% ${r}%`}},CX={correct:(n,{treeScale:e,projectionDelta:t})=>{const r=n,i=ul.parse(n);if(i.length>5)return r;const s=ul.createTransformer(n),o=typeof i[0]!="number"?1:0,a=t.x.scale*e.x,l=t.y.scale*e.y;i[0+o]/=a,i[1+o]/=l;const c=Tn(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=c),typeof i[3+o]=="number"&&(i[3+o]/=c),s(i)}};class PX extends N.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;K9(RX),s&&(t.group&&t.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),ey.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:i,isPresent:s}=this.props,o=r.projection;return o&&(o.isPresent=s,i||e.layoutDependency!==t||t===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||yn.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),PM.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function NU(n){const[e,t]=d9(),r=N.useContext(y3);return D.jsx(PX,{...n,layoutGroup:r,switchLayoutGroup:N.useContext(M3),isPresent:e,safeToRemove:t})}const RX={borderRadius:{...Gh,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Gh,borderTopRightRadius:Gh,borderBottomLeftRadius:Gh,borderBottomRightRadius:Gh,boxShadow:CX};function IX(n,e,t){const r=Fr(n)?n:lp(n);return r.start(eT("",r,e,t)),r.animation}function LX(n){return n instanceof SVGElement&&n.tagName!=="svg"}const kX=(n,e)=>n.depth-e.depth;class OX{constructor(){this.children=[],this.isDirty=!1}add(e){HM(this.children,e),this.isDirty=!0}remove(e){WM(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(kX),this.isDirty=!1,this.children.forEach(e)}}function NX(n,e){const t=ao.now(),r=({timestamp:i})=>{const s=i-t;s>=e&&(cl(r),n(s-e))};return yn.read(r,!0),()=>cl(r)}const DU=["TopLeft","TopRight","BottomLeft","BottomRight"],DX=DU.length,_2=n=>typeof n=="string"?parseFloat(n):n,x2=n=>typeof n=="number"||_t.test(n);function UX(n,e,t,r,i,s){i?(n.opacity=Tn(0,t.opacity!==void 0?t.opacity:1,FX(r)),n.opacityExit=Tn(e.opacity!==void 0?e.opacity:1,0,BX(r))):s&&(n.opacity=Tn(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,r));for(let o=0;o<DX;o++){const a=`border${DU[o]}Radius`;let l=w2(e,a),c=w2(t,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||x2(l)===x2(c)?(n[a]=Math.max(Tn(_2(l),_2(c),r),0),(oo.test(c)||oo.test(l))&&(n[a]+="%")):n[a]=c}(e.rotate||t.rotate)&&(n.rotate=Tn(e.rotate||0,t.rotate||0,r))}function w2(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const FX=UU(0,.5,tU),BX=UU(.5,.95,Ni);function UU(n,e,t){return r=>r<n?0:r>e?1:t(zd(n,e,r))}function S2(n,e){n.min=e.min,n.max=e.max}function Ji(n,e){S2(n.x,e.x),S2(n.y,e.y)}function b2(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function E2(n,e,t,r,i){return n-=e,n=qy(n,1/t,r),i!==void 0&&(n=qy(n,1/i,r)),n}function zX(n,e=0,t=1,r=.5,i,s=n,o=n){if(oo.test(e)&&(e=parseFloat(e),e=Tn(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Tn(s.min,s.max,r);n===s&&(a-=e),n.min=E2(n.min,e,t,a,i),n.max=E2(n.max,e,t,a,i)}function M2(n,e,[t,r,i],s,o){zX(n,e[t],e[r],e[i],e.scale,s,o)}const VX=["x","scaleX","originX"],jX=["y","scaleY","originY"];function T2(n,e,t,r){M2(n.x,e,VX,t?t.x:void 0,r?r.x:void 0),M2(n.y,e,jX,t?t.y:void 0,r?r.y:void 0)}function A2(n){return n.translate===0&&n.scale===1}function FU(n){return A2(n.x)&&A2(n.y)}function C2(n,e){return n.min===e.min&&n.max===e.max}function HX(n,e){return C2(n.x,e.x)&&C2(n.y,e.y)}function P2(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function BU(n,e){return P2(n.x,e.x)&&P2(n.y,e.y)}function R2(n){return Fi(n.x)/Fi(n.y)}function I2(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class WX{constructor(){this.members=[]}add(e){HM(this.members,e),e.scheduleRender()}remove(e){if(WM(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(i=>e===i);if(t===0)return!1;let r;for(let i=t;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function GX(n,e,t){let r="";const i=n.x.translate/e.x,s=n.y.translate/e.y,o=(t==null?void 0:t.z)||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:c,rotate:d,rotateX:f,rotateY:p,skewX:m,skewY:v}=t;c&&(r=`perspective(${c}px) ${r}`),d&&(r+=`rotate(${d}deg) `),f&&(r+=`rotateX(${f}deg) `),p&&(r+=`rotateY(${p}deg) `),m&&(r+=`skewX(${m}deg) `),v&&(r+=`skewY(${v}deg) `)}const a=n.x.scale*e.x,l=n.y.scale*e.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const Zl={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},hf=typeof window<"u"&&window.MotionDebug!==void 0,xw=["","X","Y","Z"],$X={visibility:"hidden"},L2=1e3;let XX=0;function ww(n,e,t,r){const{latestValues:i}=e;i[n]&&(t[n]=i[n],e.setStaticValue(n,0),r&&(r[n]=0))}function zU(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=q3(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:i,layoutId:s}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",yn,!(i||s))}const{parent:r}=n;r&&!r.hasCheckedOptimisedAppear&&zU(r)}function VU({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e==null?void 0:e()){this.id=XX++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,hf&&(Zl.totalNodes=Zl.resolvedTargetDeltas=Zl.recalculatedProjection=0),this.nodes.forEach(KX),this.nodes.forEach(tq),this.nodes.forEach(nq),this.nodes.forEach(ZX),hf&&window.MotionDebug.record(Zl)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new OX)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new GM),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=LX(o),this.instance=o;const{layoutId:l,layout:c,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),n){let f;const p=()=>this.root.updateBlockedByResize=!1;n(o,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=NX(p,250),ey.hasAnimatedSinceResize&&(ey.hasAnimatedSinceResize=!1,this.nodes.forEach(O2))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&d&&(l||c)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:p,hasRelativeTargetChanged:m,layout:v})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const x=this.options.transition||d.getDefaultTransition()||aq,{onLayoutAnimationStart:y,onLayoutAnimationComplete:g}=d.getProps(),w=!this.targetLayout||!BU(this.targetLayout,v)||m,S=!p&&m;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||S||p&&(w||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(f,S);const E={...BM(x,"layout"),onPlay:y,onComplete:g};(d.shouldReduceMotion||this.options.layoutRoot)&&(E.delay=0,E.type=!1),this.startAnimation(E)}else p||O2(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=v})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,cl(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(rq),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&zU(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const f=this.path[d];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(k2);return}this.isUpdating||this.nodes.forEach(QX),this.isUpdating=!1,this.nodes.forEach(eq),this.nodes.forEach(qX),this.nodes.forEach(YX),this.clearAllSnapshots();const a=ao.now();xr.delta=Qo(0,1e3/60,a-xr.timestamp),xr.timestamp=a,xr.isProcessing=!0,dw.update.process(xr),dw.preRender.process(xr),dw.render.process(xr),xr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,PM.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(JX),this.sharedNodes.forEach(iq)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,yn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){yn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Vn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!FU(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,d=c!==this.prevTransformTemplateValue;o&&(a||Kl(this.latestValues)||d)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),lq(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:a}=this.options;if(!a)return Vn();const l=a.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(cq))){const{scroll:d}=this.root;d&&(id(l.x,d.offset.x),id(l.y,d.offset.y))}return l}removeElementScroll(o){var a;const l=Vn();if(Ji(l,o),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return l;for(let c=0;c<this.path.length;c++){const d=this.path[c],{scroll:f,options:p}=d;d!==this.root&&f&&p.layoutScroll&&(f.wasRoot&&Ji(l,o),id(l.x,f.offset.x),id(l.y,f.offset.y))}return l}applyTransform(o,a=!1){const l=Vn();Ji(l,o);for(let c=0;c<this.path.length;c++){const d=this.path[c];!a&&d.options.layoutScroll&&d.scroll&&d!==d.root&&sd(l,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),Kl(d.latestValues)&&sd(l,d.latestValues)}return Kl(this.latestValues)&&sd(l,this.latestValues),l}removeTransform(o){const a=Vn();Ji(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!Kl(c.latestValues))continue;Yb(c.latestValues)&&c.updateSnapshot();const d=Vn(),f=c.measurePageBox();Ji(d,f),T2(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,d)}return Kl(this.latestValues)&&T2(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==xr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:p}=this.options;if(!(!this.layout||!(f||p))){if(this.resolvedRelativeTargetAt=xr.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Vn(),this.relativeTargetOrigin=Vn(),Pf(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),Ji(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Vn(),this.targetWithTransforms=Vn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),hX(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ji(this.target,this.layout.layoutBox),LU(this.target,this.targetDelta)):Ji(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Vn(),this.relativeTargetOrigin=Vn(),Pf(this.relativeTargetOrigin,this.target,m.target),Ji(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}hf&&Zl.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Yb(this.parent.latestValues)||IU(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===xr.timestamp&&(c=!1),c)return;const{layout:d,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||f))return;Ji(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,m=this.treeScale.y;wX(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=Vn());const{target:v}=a;if(!v){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(b2(this.prevProjectionDelta.x,this.projectionDelta.x),b2(this.prevProjectionDelta.y,this.projectionDelta.y)),Cf(this.projectionDelta,this.layoutCorrected,v,this.latestValues),(this.treeScale.x!==p||this.treeScale.y!==m||!I2(this.projectionDelta.x,this.prevProjectionDelta.x)||!I2(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",v)),hf&&Zl.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=rd(),this.projectionDelta=rd(),this.projectionDeltaWithTransform=rd()}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},d={...this.latestValues},f=rd();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const p=Vn(),m=l?l.source:void 0,v=this.layout?this.layout.source:void 0,x=m!==v,y=this.getStack(),g=!y||y.members.length<=1,w=!!(x&&!g&&this.options.crossfade===!0&&!this.path.some(oq));this.animationProgress=0;let S;this.mixTargetDelta=E=>{const A=E/1e3;N2(f.x,o.x,A),N2(f.y,o.y,A),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Pf(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),sq(this.relativeTarget,this.relativeTargetOrigin,p,A),S&&HX(this.relativeTarget,S)&&(this.isProjectionDirty=!1),S||(S=Vn()),Ji(S,this.relativeTarget)),x&&(this.animationValues=d,UX(d,c,this.latestValues,A,w,g)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=A},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(cl(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=yn.update(()=>{ey.hasAnimatedSinceResize=!0,this.currentAnimation=IX(0,L2,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(L2),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:d}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&jU(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||Vn();const f=Fi(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+f;const p=Fi(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+p}Ji(a,l),sd(a,d),Cf(this.projectionDeltaWithTransform,this.layoutCorrected,a,d)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new WX),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&ww("z",o,c,this.animationValues);for(let d=0;d<xw.length;d++)ww(`rotate${xw[d]}`,o,c,this.animationValues),ww(`skew${xw[d]}`,o,c,this.animationValues);o.render();for(const d in c)o.setStaticValue(d,c[d]),this.animationValues&&(this.animationValues[d]=c[d]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return $X;const c={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=Jv(o==null?void 0:o.pointerEvents)||"",c.transform=d?d(this.latestValues,""):"none",c;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const x={};return this.options.layoutId&&(x.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,x.pointerEvents=Jv(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Kl(this.latestValues)&&(x.transform=d?d({},""):"none",this.hasProjected=!1),x}const p=f.animationValues||f.latestValues;this.applyTransformsToTarget(),c.transform=GX(this.projectionDeltaWithTransform,this.treeScale,p),d&&(c.transform=d(p,c.transform));const{x:m,y:v}=this.projectionDelta;c.transformOrigin=`${m.origin*100}% ${v.origin*100}% 0`,f.animationValues?c.opacity=f===this?(l=(a=p.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:c.opacity=f===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const x in Hy){if(p[x]===void 0)continue;const{correct:y,applyTo:g}=Hy[x],w=c.transform==="none"?p[x]:y(p[x],f);if(g){const S=g.length;for(let E=0;E<S;E++)c[g[E]]=w}else c[x]=w}return this.options.layoutId&&(c.pointerEvents=f===this?Jv(o==null?void 0:o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(k2),this.root.sharedNodes.clear()}}}function qX(n){n.updateLayout()}function YX(n){var e;const t=((e=n.resumeFrom)===null||e===void 0?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=n.layout,{animationType:s}=n.options,o=t.source!==n.layout.source;s==="size"?es(f=>{const p=o?t.measuredBox[f]:t.layoutBox[f],m=Fi(p);p.min=r[f].min,p.max=p.min+m}):jU(s,t.layoutBox,r)&&es(f=>{const p=o?t.measuredBox[f]:t.layoutBox[f],m=Fi(r[f]);p.max=p.min+m,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[f].max=n.relativeTarget[f].min+m)});const a=rd();Cf(a,r,t.layoutBox);const l=rd();o?Cf(l,n.applyTransform(i,!0),t.measuredBox):Cf(l,r,t.layoutBox);const c=!FU(a);let d=!1;if(!n.resumeFrom){const f=n.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:p,layout:m}=f;if(p&&m){const v=Vn();Pf(v,t.layoutBox,p.layoutBox);const x=Vn();Pf(x,r,m.layoutBox),BU(v,x)||(d=!0),f.options.layoutRoot&&(n.relativeTarget=x,n.relativeTargetOrigin=v,n.relativeParent=f)}}}n.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:d})}else if(n.isLead()){const{onExitComplete:r}=n.options;r&&r()}n.options.transition=void 0}function KX(n){hf&&Zl.totalNodes++,n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function ZX(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function JX(n){n.clearSnapshot()}function k2(n){n.clearMeasurements()}function QX(n){n.isLayoutDirty=!1}function eq(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function O2(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function tq(n){n.resolveTargetDelta()}function nq(n){n.calcProjection()}function rq(n){n.resetSkewAndRotation()}function iq(n){n.removeLeadSnapshot()}function N2(n,e,t){n.translate=Tn(e.translate,0,t),n.scale=Tn(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function D2(n,e,t,r){n.min=Tn(e.min,t.min,r),n.max=Tn(e.max,t.max,r)}function sq(n,e,t,r){D2(n.x,e.x,t.x,r),D2(n.y,e.y,t.y,r)}function oq(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const aq={duration:.45,ease:[.4,0,.1,1]},U2=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),F2=U2("applewebkit/")&&!U2("chrome/")?Math.round:Ni;function B2(n){n.min=F2(n.min),n.max=F2(n.max)}function lq(n){B2(n.x),B2(n.y)}function jU(n,e,t){return n==="position"||n==="preserve-aspect"&&!dX(R2(e),R2(t),.2)}function cq(n){var e;return n!==n.root&&((e=n.scroll)===null||e===void 0?void 0:e.wasRoot)}const uq=VU({attachResizeListener:(n,e)=>up(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Sw={current:void 0},HU=VU({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!Sw.current){const n=new uq({});n.mount(window),n.setOptions({layoutScroll:!0}),Sw.current=n}return Sw.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),dq={pan:{Feature:AX},drag:{Feature:TX,ProjectionNode:HU,MeasureLayout:NU}};function z2(n,e,t){const{props:r}=n;n.animationState&&r.whileHover&&n.animationState.setActive("whileHover",t==="Start");const i="onHover"+t,s=r[i];s&&yn.postRender(()=>s(e,Zp(e)))}class hq extends xl{mount(){const{current:e}=this.node;e&&(this.unmount=h$(e,t=>(z2(this.node,t,"Start"),r=>z2(this.node,r,"End"))))}unmount(){}}class fq extends xl{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Kp(up(this.node.current,"focus",()=>this.onFocus()),up(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function V2(n,e,t){const{props:r}=n;n.animationState&&r.whileTap&&n.animationState.setActive("whileTap",t==="Start");const i="onTap"+(t==="End"?"":t),s=r[i];s&&yn.postRender(()=>s(e,Zp(e)))}class pq extends xl{mount(){const{current:e}=this.node;e&&(this.unmount=g$(e,t=>(V2(this.node,t,"Start"),(r,{success:i})=>V2(this.node,r,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Zb=new WeakMap,bw=new WeakMap,mq=n=>{const e=Zb.get(n.target);e&&e(n)},gq=n=>{n.forEach(mq)};function vq({root:n,...e}){const t=n||document;bw.has(t)||bw.set(t,{});const r=bw.get(t),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(gq,{root:n,...e})),r[i]}function yq(n,e,t){const r=vq(e);return Zb.set(n,t),r.observe(n),()=>{Zb.delete(n),r.unobserve(n)}}const _q={some:0,all:1};class xq extends xl{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:i="some",once:s}=e,o={root:t?t.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:_q[i]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:d,onViewportLeave:f}=this.node.getProps(),p=c?d:f;p&&p(l)};return yq(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(wq(e,t))&&this.startObserver()}unmount(){}}function wq({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const Sq={inView:{Feature:xq},tap:{Feature:pq},focus:{Feature:fq},hover:{Feature:hq}},bq={layout:{ProjectionNode:HU,MeasureLayout:NU}},Jb={current:null},WU={current:!1};function Eq(){if(WU.current=!0,!!EM)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>Jb.current=n.matches;n.addListener(e),e()}else Jb.current=!1}const Mq=[...mU,Nr,ul],Tq=n=>Mq.find(pU(n)),j2=new WeakMap;function Aq(n,e,t){for(const r in e){const i=e[r],s=t[r];if(Fr(i))n.addValue(r,i);else if(Fr(s))n.addValue(r,lp(i,{owner:n}));else if(s!==i)if(n.hasValue(r)){const o=n.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=n.getStaticValue(r);n.addValue(r,lp(o!==void 0?o:i,{owner:n}))}}for(const r in t)e[r]===void 0&&n.removeValue(r);return e}const H2=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Cq{scrapeMotionValuesFromProps(e,t,r){return{}}constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=ZM,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=ao.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,yn.render(this.render,!1,!0))};const{latestValues:l,renderState:c,onUpdate:d}=o;this.onUpdate=d,this.latestValues=l,this.baseTarget={...l},this.initialValues=t.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=G0(t),this.isVariantNode=b3(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:f,...p}=this.scrapeMotionValuesFromProps(t,{},this);for(const m in p){const v=p[m];l[m]!==void 0&&Fr(v)&&v.set(l[m],!1)}}mount(e){this.current=e,j2.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,r)=>this.bindToMotionValue(r,t)),WU.current||Eq(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Jb.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){j2.delete(this.current),this.projection&&this.projection.unmount(),cl(this.notifyUpdate),cl(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Vc.has(e),i=t.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&yn.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=t.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{i(),s(),o&&o(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Vd){const t=Vd[e];if(!t)continue;const{isEnabled:r,Feature:i}=t;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Vn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<H2.length;r++){const i=H2[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=Aq(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const r=this.values.get(e);t!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&t!==void 0&&(r=lp(t===null?void 0:t,{owner:this}),this.addValue(e,r)),r}readValue(e,t){var r;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(hU(i)||rU(i))?i=parseFloat(i):!Tq(i)&&ul.test(t)&&(i=cU(e,t)),this.setBaseTarget(e,Fr(i)?i.get():i)),Fr(i)?i.get():i}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const o=IM(this.props,r,(t=this.presenceContext)===null||t===void 0?void 0:t.custom);o&&(i=o[e])}if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Fr(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new GM),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class GU extends Cq{constructor(){super(...arguments),this.KeyframeResolver=gU}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Fr(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function Pq(n){return window.getComputedStyle(n)}class Rq extends GU{constructor(){super(...arguments),this.type="html",this.renderInstance=L3}readValueFromInstance(e,t){if(Vc.has(t)){const r=KM(t);return r&&r.default||0}else{const r=Pq(e),i=(P3(t)?r.getPropertyValue(t):r[t])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:t}){return kU(e,t)}build(e,t,r){OM(e,t,r.transformTemplate)}scrapeMotionValuesFromProps(e,t,r){return FM(e,t,r)}}class Iq extends GU{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Vn}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Vc.has(t)){const r=KM(t);return r&&r.default||0}return t=k3.has(t)?t:CM(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,r){return D3(e,t,r)}build(e,t,r){NM(e,t,this.isSVGTag,r.transformTemplate)}renderInstance(e,t,r,i){O3(e,t,r,i)}mount(e){this.isSVGTag=UM(e.tagName),super.mount(e)}}const Lq=(n,e)=>RM(n)?new Iq(e):new Rq(e,{allowProjection:n!==N.Fragment}),kq=s$({...nX,...Sq,...dq,...bq},Lq),rr=x9(kq),Oq="/Sanjay-Portfolio/assets/hero-workspace-B6B_Ohmj.jpg",Nq=()=>D.jsxs("section",{className:"min-h-screen flex items-center justify-center relative overflow-hidden bg-gradient-to-br from-[#0a0a1f] via-[#1a0a2e] to-[#0a0a1f] z-10",children:[D.jsx("div",{className:"absolute inset-0 overflow-hidden",children:D.jsx("div",{className:"absolute inset-0 bg-cover bg-center opacity-20",style:{backgroundImage:`url(${Oq})`}})}),D.jsx("div",{className:"container mx-auto px-6 relative z-10",children:D.jsx("div",{className:"max-w-4xl mx-auto",children:D.jsxs(rr.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-center",children:[D.jsx(rr.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"text-primary font-bold text-lg mb-4",children:"Hi, I'm"}),D.jsx("h1",{className:"text-5xl md:text-7xl lg:text-8xl font-black mb-6 leading-tight",children:D.jsx("span",{className:"block text-gradient",children:"Sanjay Chavan"})}),D.jsx("p",{className:"text-2xl md:text-3xl font-bold mb-8 text-foreground/90",children:"Full Stack Developer | Machine Learning Enthusiast"}),D.jsxs("div",{className:"flex gap-6 justify-center mb-8 flex-wrap",children:[D.jsx(rr.a,{href:"https://github.com/sanjaychavan05",target:"_blank",rel:"noopener noreferrer",whileHover:{scale:1.1},className:"w-16 h-16 rounded-full bg-background/80 backdrop-blur-sm border-2 border-foreground/20 hover:border-primary flex items-center justify-center text-foreground hover:text-primary transition-all",children:D.jsx(v3,{size:28})}),D.jsx(rr.a,{href:"https://linkedin.com/in/sanjay-prakash-chavan-7105082ab",target:"_blank",rel:"noopener noreferrer",whileHover:{scale:1.1},className:"w-16 h-16 rounded-full bg-background/80 backdrop-blur-sm border-2 border-foreground/20 hover:border-primary flex items-center justify-center text-foreground hover:text-primary transition-all",children:D.jsx(n9,{size:28})}),D.jsx(rr.a,{href:"mailto:sanjaychavan487652@gmail.com",whileHover:{scale:1.1},className:"w-16 h-16 rounded-full bg-background/80 backdrop-blur-sm border-2 border-foreground/20 hover:border-primary flex items-center justify-center text-foreground hover:text-primary transition-all",children:D.jsx(r9,{size:28})})]})]})})})]}),Dq=()=>D.jsx("section",{id:"about",className:"py-20 relative overflow-hidden",children:D.jsx("div",{className:"container mx-auto px-6 relative z-10",children:D.jsxs(rr.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6},viewport:{once:!0},className:"text-center mb-16",children:[D.jsx("p",{className:"text-sm text-muted-foreground font-semibold mb-2",children:"INTRODUCTION"}),D.jsx("h2",{className:"text-5xl md:text-7xl font-black mb-6",children:"About Me."}),D.jsx("p",{className:"text-lg text-muted-foreground max-w-4xl mx-auto leading-relaxed",children:"Computer Science Engineering student with hands-on experience in Full Stack Development, Machine Learning, and AI automation. Completed virtual internships with JPMorgan Chase and Deloitte. Oracle Cloud Infrastructure AI Foundations Certified. Passionate about building scalable software solutions and solving real-world problems through code."})]})})}),Uq="/Sanjay-Portfolio/assets/campus-connect-logo-BRcdf6tg.jpg",Fq="/Sanjay-Portfolio/assets/deloitte-logo-BAM1MGsL.jpg",Bq="/Sanjay-Portfolio/assets/jpmorgan-logo-C73NHGqP.jpg",zq=[{company:"GlowLogics Solutions & LetsUpgrade",logo:Uq,role:"Campus Ambassador",period:"Jan 2025 - Present",location:"Belagavi, India",responsibilities:["Promoted tech initiatives and organized campus events for both companies.","Fostered a collaborative tech community and engaged students in learning programs."]},{company:"Deloitte Australia",logo:Fq,role:"Data Analytics Virtual Intern",period:"Oct 2025",location:"Remote",responsibilities:["Developed Tableau dashboards and performed business data analysis."]},{company:"JPMorgan Chase & Co.",logo:Bq,role:"Software Engineer Virtual Intern",period:"Oct 2025",location:"Remote",responsibilities:["Worked on Kafka integration, REST API design, and backend development best practices."]}],Vq=()=>D.jsx("section",{id:"experience",className:"py-20 relative overflow-hidden",children:D.jsxs("div",{className:"container mx-auto px-6 relative z-10",children:[D.jsxs(rr.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6},viewport:{once:!0},className:"text-center mb-16",children:[D.jsx("p",{className:"text-sm text-muted-foreground font-semibold mb-2",children:"WHAT I HAVE DONE SO FAR"}),D.jsx("h2",{className:"text-5xl md:text-7xl font-black",children:"Work Experience."})]}),D.jsxs("div",{className:"max-w-7xl mx-auto relative",children:[D.jsx("div",{className:"absolute left-1/2 top-0 bottom-0 w-1 bg-gradient-to-b from-primary/50 via-secondary/50 to-primary/50 hidden md:block rounded-full"}),zq.map((n,e)=>D.jsx(rr.div,{initial:{opacity:0,x:e%2===0?-50:50},whileInView:{opacity:1,x:0},transition:{duration:.6,delay:e*.2},viewport:{once:!0},className:"relative mb-16 md:mb-24",children:D.jsxs("div",{className:`grid md:grid-cols-2 gap-8 items-center ${e%2===0?"":"md:flex-row-reverse"}`,children:[D.jsx("div",{className:`${e%2===0?"md:pr-16":"md:pl-16 md:col-start-2"}`,children:D.jsxs("div",{className:"card-gradient p-8 rounded-2xl hover:bg-card/80 transition-all duration-300 group",children:[D.jsxs("div",{className:"flex items-start justify-between gap-4 mb-4",children:[D.jsxs("div",{className:"flex-1",children:[D.jsx("h3",{className:"text-2xl font-black mb-2 group-hover:text-gradient transition-all",children:n.role}),D.jsx("p",{className:"text-lg text-primary font-semibold mb-1",children:n.company})]}),D.jsxs("div",{className:"text-right min-w-[140px]",children:[D.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-1",children:n.period}),D.jsx("p",{className:"text-sm text-muted-foreground",children:n.location})]})]}),D.jsx("ul",{className:"space-y-2",children:n.responsibilities.map((t,r)=>D.jsxs("li",{className:"text-sm text-muted-foreground flex items-start gap-2",children:[D.jsx("span",{className:"text-primary mt-1 flex-shrink-0",children:""}),D.jsx("span",{children:t})]},r))})]})}),D.jsx("div",{className:"hidden md:block absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 z-10",children:D.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-primary to-secondary border-4 border-foreground/20 glow-primary overflow-hidden shadow-2xl rounded-full",children:D.jsx("img",{src:n.logo,alt:n.company,className:"w-full h-full object-cover"})})})]})},e))]})]})}),jq="/Sanjay-Portfolio/assets/resume-screening-dashboard-DIxT_Ak8.jpg",Hq=[{title:"GradNet - Alumni Association Platform",description:"Full-stack platform connecting 500+ students and alumni for mentorship and referral programs",tech:"Node.js, Express, EJS, PostgreSQL, JavaScript",github:"https://github.com/sanjaychavan05/GradNet",image:"https://images.unsplash.com/photo-1522071820081-009f0129c71c?w=800&q=80"},{title:"Real-Time Website Safety Checker",description:"Browser extension for real-time phishing and malware detection with instant safety alerts",tech:"JavaScript, Google Safe Browsing API, Chrome Extension",github:"https://github.com/sanjaychavan05",image:"https://images.unsplash.com/photo-1563986768609-322da13575f3?w=800&q=80"},{title:"Product Price Prediction",description:"Machine learning model for predicting product prices using advanced regression techniques and feature engineering. Achieved competitive accuracy scores in the national-level hackathon competition",tech:"Python, Scikit-learn, Pandas, Machine Learning",github:"https://github.com/sanjaychavan05",image:"https://images.unsplash.com/photo-1460925895917-afdab827c52f?w=800&q=80"},{title:"Resume Screening Dashboard",description:"AI-powered talent matching system with resume relevance scoring and candidate analytics dashboard built for recruitment optimization",tech:"Python, Streamlit, AI/ML, SQLite",github:"https://github.com/sanjaychavan05/resume-dashboard-clean",image:jq},{title:"Driver Drowsiness Detection",description:"Real-time drowsiness detection system using eye aspect ratio (EAR) from facial landmarks. Triggers audio alerts to enhance road safety",tech:"Python, OpenCV, dlib, pygame, scipy",github:"https://github.com/sanjaychavan05/DriverDrowsinessDetection",image:"https://images.unsplash.com/photo-1549317661-bd32c8ce0db2?w=800&q=80"}],Wq=()=>{const[n,e]=N.useState(null);return D.jsxs("section",{id:"projects",className:"py-20 relative overflow-hidden",children:[D.jsx("div",{className:"absolute inset-0 overflow-hidden",children:D.jsx("div",{className:"absolute bottom-1/4 left-1/4 w-96 h-96 bg-primary/10 rounded-full blur-3xl"})}),D.jsxs("div",{className:"container mx-auto px-6 relative z-10",children:[D.jsxs(rr.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6},viewport:{once:!0},className:"text-center mb-16",children:[D.jsx("p",{className:"text-sm text-muted-foreground font-semibold mb-2",children:"MY WORK"}),D.jsx("h2",{className:"text-5xl md:text-7xl font-black mb-6",children:"Projects."}),D.jsx("p",{className:"text-muted-foreground max-w-3xl mx-auto",children:"Following projects showcases my skills and experience through real-world examples of my work. Each project reflects my ability to solve complex problems, work with different technologies, and manage projects effectively."})]}),D.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-10 max-w-7xl mx-auto",children:Hq.map((t,r)=>D.jsx(rr.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:r*.15},viewport:{once:!0},className:"relative h-[420px] perspective-1000",onMouseEnter:()=>e(r),onMouseLeave:()=>e(null),children:D.jsxs("div",{className:`relative w-full h-full transition-transform duration-700 transform-style-3d ${n===r?"rotate-y-180":""}`,children:[D.jsxs("div",{className:"absolute inset-0 backface-hidden rounded-3xl overflow-hidden border-2 border-border shadow-2xl",children:[D.jsx("img",{src:t.image,alt:t.title,className:"w-full h-full object-cover"}),D.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-background via-background/60 to-transparent"}),D.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-8",children:[D.jsx("h3",{className:"text-3xl font-black mb-3 text-white drop-shadow-lg",children:t.title}),D.jsx("p",{className:"text-sm text-primary font-bold bg-background/50 px-3 py-1 rounded-full inline-block",children:t.tech})]})]}),D.jsxs("div",{className:"absolute inset-0 backface-hidden rotate-y-180 card-gradient rounded-3xl border-2 border-primary p-8 flex flex-col justify-between shadow-2xl",children:[D.jsxs("div",{children:[D.jsx("h3",{className:"text-2xl font-black mb-5 text-gradient",children:t.title}),D.jsx("p",{className:"text-base text-muted-foreground mb-6 leading-relaxed",children:t.description}),D.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:t.tech.split(", ").map((i,s)=>D.jsx("span",{className:"text-xs bg-primary/20 text-primary px-3 py-1 rounded-full font-bold",children:i},s))})]}),D.jsxs("div",{className:"flex gap-4",children:[D.jsxs("a",{href:t.github,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-4 py-2 rounded-full bg-card border border-primary hover:bg-primary transition-all text-sm font-bold",children:[D.jsx(v3,{className:"h-4 w-4"}),"Code"]}),D.jsxs("a",{href:t.github,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-4 py-2 rounded-full bg-card border border-secondary hover:bg-secondary transition-all text-sm font-bold",children:[D.jsx(t9,{className:"h-4 w-4"}),"Demo"]})]})]})]})},r))})]}),D.jsx("style",{children:`
        .perspective-1000 {
          perspective: 1000px;
        }
        .transform-style-3d {
          transform-style: preserve-3d;
        }
        .backface-hidden {
          backface-visibility: hidden;
        }
        .rotate-y-180 {
          transform: rotateY(180deg);
        }
      `})]})},Gq=[{name:"Java",icon:"https://cdn.jsdelivr.net/gh/devicons/devicon/icons/java/java-original.svg"},{name:"HTML5",icon:"https://cdn.jsdelivr.net/gh/devicons/devicon/icons/html5/html5-original.svg"},{name:"CSS3",icon:"https://cdn.jsdelivr.net/gh/devicons/devicon/icons/css3/css3-original.svg"},{name:"MongoDB",icon:"https://cdn.jsdelivr.net/gh/devicons/devicon/icons/mongodb/mongodb-original.svg"},{name:"JavaScript",icon:"https://cdn.jsdelivr.net/gh/devicons/devicon/icons/javascript/javascript-original.svg"},{name:"Node.js",icon:"https://cdn.jsdelivr.net/gh/devicons/devicon/icons/nodejs/nodejs-original.svg"},{name:"Git",icon:"https://cdn.jsdelivr.net/gh/devicons/devicon/icons/git/git-original.svg"},{name:"Python",icon:"https://cdn.jsdelivr.net/gh/devicons/devicon/icons/python/python-original.svg"},{name:"React",icon:"https://cdn.jsdelivr.net/gh/devicons/devicon/icons/react/react-original.svg"},{name:"AWS",icon:"https://cdn.jsdelivr.net/gh/devicons/devicon/icons/amazonwebservices/amazonwebservices-original-wordmark.svg"}],$q=()=>D.jsxs("section",{id:"skills",className:"py-20 relative overflow-hidden",children:[D.jsx("div",{className:"absolute inset-0 overflow-hidden",children:D.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-primary/10 rounded-full blur-3xl"})}),D.jsxs("div",{className:"container mx-auto px-6 relative z-10",children:[D.jsxs(rr.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6},viewport:{once:!0},className:"text-center mb-16",children:[D.jsx("p",{className:"text-sm text-muted-foreground font-semibold mb-2",children:"TECHNOLOGIES I WORK WITH"}),D.jsx("h2",{className:"text-5xl md:text-7xl font-black",children:"Skills."})]}),D.jsx("div",{className:"grid grid-cols-3 md:grid-cols-5 lg:grid-cols-7 gap-8 max-w-6xl mx-auto",children:Gq.map((n,e)=>D.jsxs(rr.div,{initial:{opacity:0,scale:0},whileInView:{opacity:1,scale:1},transition:{duration:.5,delay:e*.05},viewport:{once:!0},whileHover:{scale:1.15,rotate:5},className:"flex flex-col items-center gap-3 group",children:[D.jsx(rr.div,{animate:{rotate:[0,-2,2,-2,0],y:[0,-2,0,-2,0]},transition:{duration:2,repeat:1/0,repeatDelay:3,delay:e*.1},className:"w-20 h-20 md:w-24 md:h-24 rounded-2xl bg-card border border-border flex items-center justify-center group-hover:border-primary group-hover:shadow-lg group-hover:shadow-primary/50 transition-all duration-300",children:D.jsx("img",{src:n.icon,alt:n.name,className:"w-12 h-12 md:w-14 md:h-14 object-contain"})}),D.jsx("p",{className:"text-xs font-bold text-muted-foreground group-hover:text-primary transition-colors",children:n.name})]},e))})]})]}),Xq=()=>D.jsxs("section",{className:"py-20 relative overflow-hidden",children:[D.jsx("div",{className:"absolute inset-0 overflow-hidden",children:D.jsx("div",{className:"absolute top-1/2 right-1/4 w-96 h-96 bg-primary/10 rounded-full blur-3xl"})}),D.jsxs("div",{className:"container mx-auto px-6 relative z-10",children:[D.jsxs(rr.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6},viewport:{once:!0},className:"text-center mb-16",children:[D.jsx("p",{className:"text-sm text-muted-foreground font-semibold mb-2",children:"CREDENTIALS"}),D.jsx("h2",{className:"text-5xl md:text-7xl font-black",children:"Certifications & Achievements."})]}),D.jsxs("div",{className:"grid md:grid-cols-2 gap-8 max-w-6xl mx-auto",children:[D.jsxs(rr.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},transition:{duration:.6},viewport:{once:!0},className:"relative overflow-hidden h-full",children:[D.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/20 via-secondary/10 to-primary/20 rounded-3xl blur-xl"}),D.jsxs("div",{className:"relative card-gradient p-10 rounded-3xl border-2 border-primary/30 hover:border-primary transition-all duration-500 group bg-card/50 backdrop-blur-sm h-full flex flex-col",children:[D.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[D.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-primary to-secondary flex items-center justify-center",children:D.jsx("span",{className:"text-2xl",children:""})}),D.jsx("h3",{className:"text-3xl font-black text-gradient",children:"Certifications"})]}),D.jsxs("ul",{className:"space-y-4 flex-1",children:[D.jsxs("li",{className:"flex items-start gap-4 p-4 rounded-xl bg-background/50 hover:bg-background/80 transition-all duration-300 group-hover:translate-x-1",children:[D.jsx("div",{className:"w-2 h-2 rounded-full bg-primary mt-2 flex-shrink-0"}),D.jsx("span",{className:"text-foreground font-medium",children:"Oracle Cloud Infrastructure Certified AI Foundations Associate"})]}),D.jsxs("li",{className:"flex items-start gap-4 p-4 rounded-xl bg-background/50 hover:bg-background/80 transition-all duration-300 group-hover:translate-x-1",children:[D.jsx("div",{className:"w-2 h-2 rounded-full bg-primary mt-2 flex-shrink-0"}),D.jsx("span",{className:"text-foreground font-medium",children:"Microsoft AI Skills Challenge Certified"})]}),D.jsxs("li",{className:"flex items-start gap-4 p-4 rounded-xl bg-background/50 hover:bg-background/80 transition-all duration-300 group-hover:translate-x-1",children:[D.jsx("div",{className:"w-2 h-2 rounded-full bg-primary mt-2 flex-shrink-0"}),D.jsx("span",{className:"text-foreground font-medium",children:"AWS Cloud Practitioner Certificate"})]}),D.jsxs("li",{className:"flex items-start gap-4 p-4 rounded-xl bg-background/50 hover:bg-background/80 transition-all duration-300 group-hover:translate-x-1",children:[D.jsx("div",{className:"w-2 h-2 rounded-full bg-primary mt-2 flex-shrink-0"}),D.jsx("span",{className:"text-foreground font-medium",children:"Google Cloud Generative AI Badge"})]})]})]})]}),D.jsxs(rr.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:.2},viewport:{once:!0},className:"relative overflow-hidden h-full",children:[D.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-secondary/20 via-primary/10 to-secondary/20 rounded-3xl blur-xl"}),D.jsxs("div",{className:"relative card-gradient p-10 rounded-3xl border-2 border-secondary/30 hover:border-secondary transition-all duration-500 group bg-card/50 backdrop-blur-sm h-full flex flex-col",children:[D.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[D.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-secondary to-primary flex items-center justify-center",children:D.jsx("span",{className:"text-2xl",children:""})}),D.jsx("h3",{className:"text-3xl font-black text-gradient",children:"Achievements"})]}),D.jsxs("ul",{className:"space-y-4 flex-1",children:[D.jsxs("li",{className:"flex items-start gap-4 p-4 rounded-xl bg-background/50 hover:bg-background/80 transition-all duration-300 group-hover:translate-x-1",children:[D.jsx("div",{className:"w-2 h-2 rounded-full bg-secondary mt-2 flex-shrink-0"}),D.jsx("span",{className:"text-foreground font-medium",children:"Amazon ML Challenge Hackathon"})]}),D.jsxs("li",{className:"flex items-start gap-4 p-4 rounded-xl bg-background/50 hover:bg-background/80 transition-all duration-300 group-hover:translate-x-1",children:[D.jsx("div",{className:"w-2 h-2 rounded-full bg-secondary mt-2 flex-shrink-0"}),D.jsx("span",{className:"text-foreground font-medium",children:"Code4EdTech-Hack-A-Thon"})]}),D.jsxs("li",{className:"flex items-start gap-4 p-4 rounded-xl bg-background/50 hover:bg-background/80 transition-all duration-300 group-hover:translate-x-1",children:[D.jsx("div",{className:"w-2 h-2 rounded-full bg-secondary mt-2 flex-shrink-0"}),D.jsx("span",{className:"text-foreground font-medium",children:"Student Ambassador - GlowLogics Solutions"})]}),D.jsxs("li",{className:"flex items-start gap-4 p-4 rounded-xl bg-background/50 hover:bg-background/80 transition-all duration-300 group-hover:translate-x-1",children:[D.jsx("div",{className:"w-2 h-2 rounded-full bg-secondary mt-2 flex-shrink-0"}),D.jsx("span",{className:"text-foreground font-medium",children:"Student Ambassador - LetsUpgrade Technologies"})]})]})]})]})]})]})]}),Qb=N.forwardRef(({className:n,type:e,...t},r)=>D.jsx("input",{type:e,className:U0("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:r,...t}));Qb.displayName="Input";const $U=N.forwardRef(({className:n,...e},t)=>D.jsx("textarea",{className:U0("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),ref:t,...e}));$U.displayName="Textarea";/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const q0="160",Jl={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Ql={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},XU=0,e1=1,qU=2,qq=3,YU=0,Y0=1,Rf=2,ws=3,ea=0,Qr=1,to=2,Yq=2,$o=0,Ec=1,t1=2,n1=3,r1=4,KU=5,ka=100,ZU=101,JU=102,i1=103,s1=104,QU=200,eF=201,tF=202,nF=203,Yy=204,Ky=205,rF=206,iF=207,sF=208,oF=209,aF=210,lF=211,cF=212,uF=213,dF=214,hF=0,fF=1,pF=2,dp=3,mF=4,gF=5,vF=6,yF=7,Jp=0,_F=1,xF=2,lo=0,wF=1,SF=2,bF=3,tT=4,EF=5,MF=6,o1="attached",TF="detached",K0=300,ta=301,dl=302,hp=303,fp=304,lh=306,pp=1e3,Ur=1001,mp=1002,jn=1003,Zy=1004,Kq=1004,If=1005,Zq=1005,Wn=1006,nT=1007,Jq=1007,hl=1008,Qq=1008,co=1009,AF=1010,CF=1011,Z0=1012,rT=1013,Vo=1014,Ps=1015,Hd=1016,iT=1017,sT=1018,Ja=1020,PF=1021,Zr=1023,RF=1024,IF=1025,Qa=1026,Nc=1027,LF=1028,oT=1029,kF=1030,aT=1031,lT=1033,ty=33776,ny=33777,ry=33778,iy=33779,a1=35840,l1=35841,c1=35842,u1=35843,cT=36196,d1=37492,h1=37496,f1=37808,p1=37809,m1=37810,g1=37811,v1=37812,y1=37813,_1=37814,x1=37815,w1=37816,S1=37817,b1=37818,E1=37819,M1=37820,T1=37821,sy=36492,A1=36494,C1=36495,OF=36283,P1=36284,R1=36285,I1=36286,NF=2200,DF=2201,UF=2202,gp=2300,vp=2301,oy=2302,uc=2400,dc=2401,yp=2402,J0=2500,uT=2501,eY=0,tY=1,nY=2,dT=3e3,el=3001,FF=3200,BF=3201,wl=0,zF=1,Pi="",tr="srgb",po="srgb-linear",Q0="display-p3",Qp="display-p3-linear",_p="linear",un="srgb",xp="rec709",wp="p3",rY=0,ec=7680,iY=7681,sY=7682,oY=7683,aY=34055,lY=34056,cY=5386,uY=512,dY=513,hY=514,fY=515,pY=516,mY=517,gY=518,L1=519,VF=512,jF=513,HF=514,hT=515,WF=516,GF=517,$F=518,XF=519,Sp=35044,vY=35048,yY=35040,_Y=35045,xY=35049,wY=35041,SY=35046,bY=35050,EY=35042,MY="100",k1="300 es",Jy=1035,Rs=2e3,Wd=2001;let ia=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}};const Rr=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let W2=1234567;const Mc=Math.PI/180,Gd=180/Math.PI;function Di(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(Rr[n&255]+Rr[n>>8&255]+Rr[n>>16&255]+Rr[n>>24&255]+"-"+Rr[e&255]+Rr[e>>8&255]+"-"+Rr[e>>16&15|64]+Rr[e>>24&255]+"-"+Rr[t&63|128]+Rr[t>>8&255]+"-"+Rr[t>>16&255]+Rr[t>>24&255]+Rr[r&255]+Rr[r>>8&255]+Rr[r>>16&255]+Rr[r>>24&255]).toLowerCase()}function Un(n,e,t){return Math.max(e,Math.min(t,n))}function fT(n,e){return(n%e+e)%e}function TY(n,e,t,r,i){return r+(n-e)*(i-r)/(t-e)}function AY(n,e,t){return n!==e?(t-n)/(e-n):0}function Lf(n,e,t){return(1-t)*n+t*e}function CY(n,e,t,r){return Lf(n,e,1-Math.exp(-t*r))}function PY(n,e=1){return e-Math.abs(fT(n,e*2)-e)}function RY(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function IY(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function LY(n,e){return n+Math.floor(Math.random()*(e-n+1))}function kY(n,e){return n+Math.random()*(e-n)}function OY(n){return n*(.5-Math.random())}function NY(n){n!==void 0&&(W2=n);let e=W2+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function DY(n){return n*Mc}function UY(n){return n*Gd}function O1(n){return(n&n-1)===0&&n!==0}function FY(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function Qy(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function BY(n,e,t,r,i){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),c=s((e+r)/2),d=o((e+r)/2),f=s((e-r)/2),p=o((e-r)/2),m=s((r-e)/2),v=o((r-e)/2);switch(i){case"XYX":n.set(a*d,l*f,l*p,a*c);break;case"YZY":n.set(l*p,a*d,l*f,a*c);break;case"ZXZ":n.set(l*f,l*p,a*d,a*c);break;case"XZX":n.set(a*d,l*v,l*m,a*c);break;case"YXY":n.set(l*m,a*d,l*v,a*c);break;case"ZYZ":n.set(l*v,l*m,a*d,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function hi(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function Ut(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const zY={DEG2RAD:Mc,RAD2DEG:Gd,generateUUID:Di,clamp:Un,euclideanModulo:fT,mapLinear:TY,inverseLerp:AY,lerp:Lf,damp:CY,pingpong:PY,smoothstep:RY,smootherstep:IY,randInt:LY,randFloat:kY,randFloatSpread:OY,seededRandom:NY,degToRad:DY,radToDeg:UY,isPowerOfTwo:O1,ceilPowerOfTwo:FY,floorPowerOfTwo:Qy,setQuaternionFromProperEuler:BY,normalize:Ut,denormalize:hi};class me{constructor(e=0,t=0){me.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,r=this.y,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6],this.y=i[1]*t+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(Un(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const r=Math.cos(t),i=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*r-o*i+e.x,this.y=s*i+o*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Bt{constructor(e,t,r,i,s,o,a,l,c){Bt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,r,i,s,o,a,l,c)}set(e,t,r,i,s,o,a,l,c){const d=this.elements;return d[0]=e,d[1]=i,d[2]=a,d[3]=t,d[4]=s,d[5]=l,d[6]=r,d[7]=o,d[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[3],l=r[6],c=r[1],d=r[4],f=r[7],p=r[2],m=r[5],v=r[8],x=i[0],y=i[3],g=i[6],w=i[1],S=i[4],E=i[7],A=i[2],T=i[5],P=i[8];return s[0]=o*x+a*w+l*A,s[3]=o*y+a*S+l*T,s[6]=o*g+a*E+l*P,s[1]=c*x+d*w+f*A,s[4]=c*y+d*S+f*T,s[7]=c*g+d*E+f*P,s[2]=p*x+m*w+v*A,s[5]=p*y+m*S+v*T,s[8]=p*g+m*E+v*P,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],d=e[8];return t*o*d-t*a*c-r*s*d+r*a*l+i*s*c-i*o*l}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],d=e[8],f=d*o-a*c,p=a*l-d*s,m=c*s-o*l,v=t*f+r*p+i*m;if(v===0)return this.set(0,0,0,0,0,0,0,0,0);const x=1/v;return e[0]=f*x,e[1]=(i*c-d*r)*x,e[2]=(a*r-i*o)*x,e[3]=p*x,e[4]=(d*t-i*l)*x,e[5]=(i*s-a*t)*x,e[6]=m*x,e[7]=(r*l-c*t)*x,e[8]=(o*t-r*s)*x,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,i,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(r*l,r*c,-r*(l*o+c*a)+o+e,-i*c,i*l,-i*(-c*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(Ew.makeScale(e,t)),this}rotate(e){return this.premultiply(Ew.makeRotation(-e)),this}translate(e,t){return this.premultiply(Ew.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,r,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<9;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const Ew=new Bt;function qF(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const VY={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function od(n,e){return new VY[n](e)}function bp(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function YF(){const n=bp("canvas");return n.style.display="block",n}const G2={};function kf(n){n in G2||(G2[n]=!0,console.warn(n))}const $2=new Bt().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),X2=new Bt().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),kg={[po]:{transfer:_p,primaries:xp,toReference:n=>n,fromReference:n=>n},[tr]:{transfer:un,primaries:xp,toReference:n=>n.convertSRGBToLinear(),fromReference:n=>n.convertLinearToSRGB()},[Qp]:{transfer:_p,primaries:wp,toReference:n=>n.applyMatrix3(X2),fromReference:n=>n.applyMatrix3($2)},[Q0]:{transfer:un,primaries:wp,toReference:n=>n.convertSRGBToLinear().applyMatrix3(X2),fromReference:n=>n.applyMatrix3($2).convertLinearToSRGB()}},jY=new Set([po,Qp]),rn={enabled:!0,_workingColorSpace:po,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(n){if(!jY.has(n))throw new Error(`Unsupported working color space, "${n}".`);this._workingColorSpace=n},convert:function(n,e,t){if(this.enabled===!1||e===t||!e||!t)return n;const r=kg[e].toReference,i=kg[t].fromReference;return i(r(n))},fromWorkingColorSpace:function(n,e){return this.convert(n,this._workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this._workingColorSpace)},getPrimaries:function(n){return kg[n].primaries},getTransfer:function(n){return n===Pi?_p:kg[n].transfer}};function wd(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function Mw(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let uu;class pT{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{uu===void 0&&(uu=bp("canvas")),uu.width=e.width,uu.height=e.height;const r=uu.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=uu}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=bp("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),s=i.data;for(let o=0;o<s.length;o++)s[o]=wd(s[o]/255)*255;return r.putImageData(i,0,0),t}else if(e.data){const t=e.data.slice(0);for(let r=0;r<t.length;r++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[r]=Math.floor(wd(t[r]/255)*255):t[r]=wd(t[r]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let HY=0;class hc{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:HY++}),this.uuid=Di(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let o=0,a=i.length;o<a;o++)i[o].isDataTexture?s.push(Tw(i[o].image)):s.push(Tw(i[o]))}else s=Tw(i);r.url=s}return t||(e.images[this.uuid]=r),r}}function Tw(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?pT.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let WY=0;class $n extends ia{constructor(e=$n.DEFAULT_IMAGE,t=$n.DEFAULT_MAPPING,r=Ur,i=Ur,s=Wn,o=hl,a=Zr,l=co,c=$n.DEFAULT_ANISOTROPY,d=Pi){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:WY++}),this.uuid=Di(),this.name="",this.source=new hc(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=s,this.minFilter=o,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new me(0,0),this.repeat=new me(1,1),this.center=new me(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Bt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof d=="string"?this.colorSpace=d:(kf("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=d===el?tr:Pi),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==K0)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case pp:e.x=e.x-Math.floor(e.x);break;case Ur:e.x=e.x<0?0:1;break;case mp:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case pp:e.y=e.y-Math.floor(e.y);break;case Ur:e.y=e.y<0?0:1;break;case mp:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return kf("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===tr?el:dT}set encoding(e){kf("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===el?tr:Pi}}$n.DEFAULT_IMAGE=null;$n.DEFAULT_MAPPING=K0;$n.DEFAULT_ANISOTROPY=1;class sn{constructor(e=0,t=0,r=0,i=1){sn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*r+o[8]*i+o[12]*s,this.y=o[1]*t+o[5]*r+o[9]*i+o[13]*s,this.z=o[2]*t+o[6]*r+o[10]*i+o[14]*s,this.w=o[3]*t+o[7]*r+o[11]*i+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,i,s;const l=e.elements,c=l[0],d=l[4],f=l[8],p=l[1],m=l[5],v=l[9],x=l[2],y=l[6],g=l[10];if(Math.abs(d-p)<.01&&Math.abs(f-x)<.01&&Math.abs(v-y)<.01){if(Math.abs(d+p)<.1&&Math.abs(f+x)<.1&&Math.abs(v+y)<.1&&Math.abs(c+m+g-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const S=(c+1)/2,E=(m+1)/2,A=(g+1)/2,T=(d+p)/4,P=(f+x)/4,k=(v+y)/4;return S>E&&S>A?S<.01?(r=0,i=.707106781,s=.707106781):(r=Math.sqrt(S),i=T/r,s=P/r):E>A?E<.01?(r=.707106781,i=0,s=.707106781):(i=Math.sqrt(E),r=T/i,s=k/i):A<.01?(r=.707106781,i=.707106781,s=0):(s=Math.sqrt(A),r=P/s,i=k/s),this.set(r,i,s,t),this}let w=Math.sqrt((y-v)*(y-v)+(f-x)*(f-x)+(p-d)*(p-d));return Math.abs(w)<.001&&(w=1),this.x=(y-v)/w,this.y=(f-x)/w,this.z=(p-d)/w,this.w=Math.acos((c+m+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class KF extends ia{constructor(e=1,t=1,r={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new sn(0,0,e,t),this.scissorTest=!1,this.viewport=new sn(0,0,e,t);const i={width:e,height:t,depth:1};r.encoding!==void 0&&(kf("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),r.colorSpace=r.encoding===el?tr:Pi),r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Wn,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0},r),this.texture=new $n(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=r.generateMipmaps,this.texture.internalFormat=r.internalFormat,this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.depthTexture=r.depthTexture,this.samples=r.samples}setSize(e,t,r=1){(this.width!==e||this.height!==t||this.depth!==r)&&(this.width=e,this.height=t,this.depth=r,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new hc(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Us extends KF{constructor(e=1,t=1,r={}){super(e,t,r),this.isWebGLRenderTarget=!0}}class e_ extends $n{constructor(e=null,t=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=jn,this.minFilter=jn,this.wrapR=Ur,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class GY extends Us{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isWebGLArrayRenderTarget=!0,this.depth=r,this.texture=new e_(null,e,t,r),this.texture.isRenderTargetTexture=!0}}class mT extends $n{constructor(e=null,t=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=jn,this.minFilter=jn,this.wrapR=Ur,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class $Y extends Us{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isWebGL3DRenderTarget=!0,this.depth=r,this.texture=new mT(null,e,t,r),this.texture.isRenderTargetTexture=!0}}class XY extends Us{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isWebGLMultipleRenderTargets=!0;const s=this.texture;this.texture=[];for(let o=0;o<r;o++)this.texture[o]=s.clone(),this.texture[o].isRenderTargetTexture=!0}setSize(e,t,r=1){if(this.width!==e||this.height!==t||this.depth!==r){this.width=e,this.height=t,this.depth=r;for(let i=0,s=this.texture.length;i<s;i++)this.texture[i].image.width=e,this.texture[i].image.height=t,this.texture[i].image.depth=r;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,r=e.texture.length;t<r;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}class Br{constructor(e=0,t=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=r,this._w=i}static slerpFlat(e,t,r,i,s,o,a){let l=r[i+0],c=r[i+1],d=r[i+2],f=r[i+3];const p=s[o+0],m=s[o+1],v=s[o+2],x=s[o+3];if(a===0){e[t+0]=l,e[t+1]=c,e[t+2]=d,e[t+3]=f;return}if(a===1){e[t+0]=p,e[t+1]=m,e[t+2]=v,e[t+3]=x;return}if(f!==x||l!==p||c!==m||d!==v){let y=1-a;const g=l*p+c*m+d*v+f*x,w=g>=0?1:-1,S=1-g*g;if(S>Number.EPSILON){const A=Math.sqrt(S),T=Math.atan2(A,g*w);y=Math.sin(y*T)/A,a=Math.sin(a*T)/A}const E=a*w;if(l=l*y+p*E,c=c*y+m*E,d=d*y+v*E,f=f*y+x*E,y===1-a){const A=1/Math.sqrt(l*l+c*c+d*d+f*f);l*=A,c*=A,d*=A,f*=A}}e[t]=l,e[t+1]=c,e[t+2]=d,e[t+3]=f}static multiplyQuaternionsFlat(e,t,r,i,s,o){const a=r[i],l=r[i+1],c=r[i+2],d=r[i+3],f=s[o],p=s[o+1],m=s[o+2],v=s[o+3];return e[t]=a*v+d*f+l*m-c*p,e[t+1]=l*v+d*p+c*f-a*m,e[t+2]=c*v+d*m+a*p-l*f,e[t+3]=d*v-a*f-l*p-c*m,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const r=e._x,i=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(r/2),d=a(i/2),f=a(s/2),p=l(r/2),m=l(i/2),v=l(s/2);switch(o){case"XYZ":this._x=p*d*f+c*m*v,this._y=c*m*f-p*d*v,this._z=c*d*v+p*m*f,this._w=c*d*f-p*m*v;break;case"YXZ":this._x=p*d*f+c*m*v,this._y=c*m*f-p*d*v,this._z=c*d*v-p*m*f,this._w=c*d*f+p*m*v;break;case"ZXY":this._x=p*d*f-c*m*v,this._y=c*m*f+p*d*v,this._z=c*d*v+p*m*f,this._w=c*d*f-p*m*v;break;case"ZYX":this._x=p*d*f-c*m*v,this._y=c*m*f+p*d*v,this._z=c*d*v-p*m*f,this._w=c*d*f+p*m*v;break;case"YZX":this._x=p*d*f+c*m*v,this._y=c*m*f+p*d*v,this._z=c*d*v-p*m*f,this._w=c*d*f-p*m*v;break;case"XZY":this._x=p*d*f-c*m*v,this._y=c*m*f-p*d*v,this._z=c*d*v+p*m*f,this._w=c*d*f+p*m*v;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const r=t/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,r=t[0],i=t[4],s=t[8],o=t[1],a=t[5],l=t[9],c=t[2],d=t[6],f=t[10],p=r+a+f;if(p>0){const m=.5/Math.sqrt(p+1);this._w=.25/m,this._x=(d-l)*m,this._y=(s-c)*m,this._z=(o-i)*m}else if(r>a&&r>f){const m=2*Math.sqrt(1+r-a-f);this._w=(d-l)/m,this._x=.25*m,this._y=(i+o)/m,this._z=(s+c)/m}else if(a>f){const m=2*Math.sqrt(1+a-r-f);this._w=(s-c)/m,this._x=(i+o)/m,this._y=.25*m,this._z=(l+d)/m}else{const m=2*Math.sqrt(1+f-r-a);this._w=(o-i)/m,this._x=(s+c)/m,this._y=(l+d)/m,this._z=.25*m}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Un(this.dot(e),-1,1)))}rotateTowards(e,t){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,t/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const r=e._x,i=e._y,s=e._z,o=e._w,a=t._x,l=t._y,c=t._z,d=t._w;return this._x=r*d+o*a+i*c-s*l,this._y=i*d+o*l+s*a-r*c,this._z=s*d+o*c+r*l-i*a,this._w=o*d-r*a-i*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const r=this._x,i=this._y,s=this._z,o=this._w;let a=o*e._w+r*e._x+i*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=r,this._y=i,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const m=1-t;return this._w=m*o+t*this._w,this._x=m*r+t*this._x,this._y=m*i+t*this._y,this._z=m*s+t*this._z,this.normalize(),this}const c=Math.sqrt(l),d=Math.atan2(c,a),f=Math.sin((1-t)*d)/c,p=Math.sin(t*d)/c;return this._w=o*f+this._w*p,this._x=r*f+this._x*p,this._y=i*f+this._y*p,this._z=s*f+this._z*p,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){const e=Math.random(),t=Math.sqrt(1-e),r=Math.sqrt(e),i=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(i),r*Math.sin(s),r*Math.cos(s),t*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class j{constructor(e=0,t=0,r=0){j.prototype.isVector3=!0,this.x=e,this.y=t,this.z=r}set(e,t,r){return r===void 0&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(q2.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(q2.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[3]*r+s[6]*i,this.y=s[1]*t+s[4]*r+s[7]*i,this.z=s[2]*t+s[5]*r+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=e.elements,o=1/(s[3]*t+s[7]*r+s[11]*i+s[15]);return this.x=(s[0]*t+s[4]*r+s[8]*i+s[12])*o,this.y=(s[1]*t+s[5]*r+s[9]*i+s[13])*o,this.z=(s[2]*t+s[6]*r+s[10]*i+s[14])*o,this}applyQuaternion(e){const t=this.x,r=this.y,i=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=2*(o*i-a*r),d=2*(a*t-s*i),f=2*(s*r-o*t);return this.x=t+l*c+o*f-a*d,this.y=r+l*d+a*c-s*f,this.z=i+l*f+s*d-o*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[4]*r+s[8]*i,this.y=s[1]*t+s[5]*r+s[9]*i,this.z=s[2]*t+s[6]*r+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const r=e.x,i=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=i*l-s*a,this.y=s*o-r*l,this.z=r*a-i*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return Aw.copy(this).projectOnVector(e),this.sub(Aw)}reflect(e){return this.sub(Aw.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(Un(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return t*t+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){const i=Math.sin(t)*e;return this.x=i*Math.sin(r),this.y=Math.cos(t)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(t),this.y=r*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Aw=new j,q2=new Br;class ei{constructor(e=new j(1/0,1/0,1/0),t=new j(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t+=3)this.expandByPoint(fs.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,r=e.count;t<r;t++)this.expandByPoint(fs.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=fs.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0){const s=r.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=s.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,fs):fs.fromBufferAttribute(s,o),fs.applyMatrix4(e.matrixWorld),this.expandByPoint(fs);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),Og.copy(e.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),Og.copy(r.boundingBox)),Og.applyMatrix4(e.matrixWorld),this.union(Og)}const i=e.children;for(let s=0,o=i.length;s<o;s++)this.expandByObject(i[s],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,fs),fs.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter($h),Ng.subVectors(this.max,$h),du.subVectors(e.a,$h),hu.subVectors(e.b,$h),fu.subVectors(e.c,$h),va.subVectors(hu,du),ya.subVectors(fu,hu),Dl.subVectors(du,fu);let t=[0,-va.z,va.y,0,-ya.z,ya.y,0,-Dl.z,Dl.y,va.z,0,-va.x,ya.z,0,-ya.x,Dl.z,0,-Dl.x,-va.y,va.x,0,-ya.y,ya.x,0,-Dl.y,Dl.x,0];return!Cw(t,du,hu,fu,Ng)||(t=[1,0,0,0,1,0,0,0,1],!Cw(t,du,hu,fu,Ng))?!1:(Dg.crossVectors(va,ya),t=[Dg.x,Dg.y,Dg.z],Cw(t,du,hu,fu,Ng))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,fs).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(fs).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(To[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),To[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),To[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),To[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),To[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),To[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),To[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),To[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(To),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const To=[new j,new j,new j,new j,new j,new j,new j,new j],fs=new j,Og=new ei,du=new j,hu=new j,fu=new j,va=new j,ya=new j,Dl=new j,$h=new j,Ng=new j,Dg=new j,Ul=new j;function Cw(n,e,t,r,i){for(let s=0,o=n.length-3;s<=o;s+=3){Ul.fromArray(n,s);const a=i.x*Math.abs(Ul.x)+i.y*Math.abs(Ul.y)+i.z*Math.abs(Ul.z),l=e.dot(Ul),c=t.dot(Ul),d=r.dot(Ul);if(Math.max(-Math.max(l,c,d),Math.min(l,c,d))>a)return!1}return!0}const qY=new ei,Xh=new j,Pw=new j;class zr{constructor(e=new j,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const r=this.center;t!==void 0?r.copy(t):qY.setFromPoints(e).getCenter(r);let i=0;for(let s=0,o=e.length;s<o;s++)i=Math.max(i,r.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Xh.subVectors(e,this.center);const t=Xh.lengthSq();if(t>this.radius*this.radius){const r=Math.sqrt(t),i=(r-this.radius)*.5;this.center.addScaledVector(Xh,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(Pw.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Xh.copy(e.center).add(Pw)),this.expandByPoint(Xh.copy(e.center).sub(Pw))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Ao=new j,Rw=new j,Ug=new j,_a=new j,Iw=new j,Fg=new j,Lw=new j;class jc{constructor(e=new j,t=new j(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Ao)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Ao.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Ao.copy(this.origin).addScaledVector(this.direction,t),Ao.distanceToSquared(e))}distanceSqToSegment(e,t,r,i){Rw.copy(e).add(t).multiplyScalar(.5),Ug.copy(t).sub(e).normalize(),_a.copy(this.origin).sub(Rw);const s=e.distanceTo(t)*.5,o=-this.direction.dot(Ug),a=_a.dot(this.direction),l=-_a.dot(Ug),c=_a.lengthSq(),d=Math.abs(1-o*o);let f,p,m,v;if(d>0)if(f=o*l-a,p=o*a-l,v=s*d,f>=0)if(p>=-v)if(p<=v){const x=1/d;f*=x,p*=x,m=f*(f+o*p+2*a)+p*(o*f+p+2*l)+c}else p=s,f=Math.max(0,-(o*p+a)),m=-f*f+p*(p+2*l)+c;else p=-s,f=Math.max(0,-(o*p+a)),m=-f*f+p*(p+2*l)+c;else p<=-v?(f=Math.max(0,-(-o*s+a)),p=f>0?-s:Math.min(Math.max(-s,-l),s),m=-f*f+p*(p+2*l)+c):p<=v?(f=0,p=Math.min(Math.max(-s,-l),s),m=p*(p+2*l)+c):(f=Math.max(0,-(o*s+a)),p=f>0?s:Math.min(Math.max(-s,-l),s),m=-f*f+p*(p+2*l)+c);else p=o>0?-s:s,f=Math.max(0,-(o*p+a)),m=-f*f+p*(p+2*l)+c;return r&&r.copy(this.origin).addScaledVector(this.direction,f),i&&i.copy(Rw).addScaledVector(Ug,p),m}intersectSphere(e,t){Ao.subVectors(e.center,this.origin);const r=Ao.dot(this.direction),i=Ao.dot(Ao)-r*r,s=e.radius*e.radius;if(i>s)return null;const o=Math.sqrt(s-i),a=r-o,l=r+o;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){const r=this.distanceToPlane(e);return r===null?null:this.at(r,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,i,s,o,a,l;const c=1/this.direction.x,d=1/this.direction.y,f=1/this.direction.z,p=this.origin;return c>=0?(r=(e.min.x-p.x)*c,i=(e.max.x-p.x)*c):(r=(e.max.x-p.x)*c,i=(e.min.x-p.x)*c),d>=0?(s=(e.min.y-p.y)*d,o=(e.max.y-p.y)*d):(s=(e.max.y-p.y)*d,o=(e.min.y-p.y)*d),r>o||s>i||((s>r||isNaN(r))&&(r=s),(o<i||isNaN(i))&&(i=o),f>=0?(a=(e.min.z-p.z)*f,l=(e.max.z-p.z)*f):(a=(e.max.z-p.z)*f,l=(e.min.z-p.z)*f),r>l||a>i)||((a>r||r!==r)&&(r=a),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,t)}intersectsBox(e){return this.intersectBox(e,Ao)!==null}intersectTriangle(e,t,r,i,s){Iw.subVectors(t,e),Fg.subVectors(r,e),Lw.crossVectors(Iw,Fg);let o=this.direction.dot(Lw),a;if(o>0){if(i)return null;a=1}else if(o<0)a=-1,o=-o;else return null;_a.subVectors(this.origin,e);const l=a*this.direction.dot(Fg.crossVectors(_a,Fg));if(l<0)return null;const c=a*this.direction.dot(Iw.cross(_a));if(c<0||l+c>o)return null;const d=-a*_a.dot(Lw);return d<0?null:this.at(d/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Et{constructor(e,t,r,i,s,o,a,l,c,d,f,p,m,v,x,y){Et.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,r,i,s,o,a,l,c,d,f,p,m,v,x,y)}set(e,t,r,i,s,o,a,l,c,d,f,p,m,v,x,y){const g=this.elements;return g[0]=e,g[4]=t,g[8]=r,g[12]=i,g[1]=s,g[5]=o,g[9]=a,g[13]=l,g[2]=c,g[6]=d,g[10]=f,g[14]=p,g[3]=m,g[7]=v,g[11]=x,g[15]=y,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Et().fromArray(this.elements)}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){const t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,r=e.elements,i=1/pu.setFromMatrixColumn(e,0).length(),s=1/pu.setFromMatrixColumn(e,1).length(),o=1/pu.setFromMatrixColumn(e,2).length();return t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t[3]=0,t[4]=r[4]*s,t[5]=r[5]*s,t[6]=r[6]*s,t[7]=0,t[8]=r[8]*o,t[9]=r[9]*o,t[10]=r[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,r=e.x,i=e.y,s=e.z,o=Math.cos(r),a=Math.sin(r),l=Math.cos(i),c=Math.sin(i),d=Math.cos(s),f=Math.sin(s);if(e.order==="XYZ"){const p=o*d,m=o*f,v=a*d,x=a*f;t[0]=l*d,t[4]=-l*f,t[8]=c,t[1]=m+v*c,t[5]=p-x*c,t[9]=-a*l,t[2]=x-p*c,t[6]=v+m*c,t[10]=o*l}else if(e.order==="YXZ"){const p=l*d,m=l*f,v=c*d,x=c*f;t[0]=p+x*a,t[4]=v*a-m,t[8]=o*c,t[1]=o*f,t[5]=o*d,t[9]=-a,t[2]=m*a-v,t[6]=x+p*a,t[10]=o*l}else if(e.order==="ZXY"){const p=l*d,m=l*f,v=c*d,x=c*f;t[0]=p-x*a,t[4]=-o*f,t[8]=v+m*a,t[1]=m+v*a,t[5]=o*d,t[9]=x-p*a,t[2]=-o*c,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const p=o*d,m=o*f,v=a*d,x=a*f;t[0]=l*d,t[4]=v*c-m,t[8]=p*c+x,t[1]=l*f,t[5]=x*c+p,t[9]=m*c-v,t[2]=-c,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const p=o*l,m=o*c,v=a*l,x=a*c;t[0]=l*d,t[4]=x-p*f,t[8]=v*f+m,t[1]=f,t[5]=o*d,t[9]=-a*d,t[2]=-c*d,t[6]=m*f+v,t[10]=p-x*f}else if(e.order==="XZY"){const p=o*l,m=o*c,v=a*l,x=a*c;t[0]=l*d,t[4]=-f,t[8]=c*d,t[1]=p*f+x,t[5]=o*d,t[9]=m*f-v,t[2]=v*f-m,t[6]=a*d,t[10]=x*f+p}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(YY,e,KY)}lookAt(e,t,r){const i=this.elements;return Mi.subVectors(e,t),Mi.lengthSq()===0&&(Mi.z=1),Mi.normalize(),xa.crossVectors(r,Mi),xa.lengthSq()===0&&(Math.abs(r.z)===1?Mi.x+=1e-4:Mi.z+=1e-4,Mi.normalize(),xa.crossVectors(r,Mi)),xa.normalize(),Bg.crossVectors(Mi,xa),i[0]=xa.x,i[4]=Bg.x,i[8]=Mi.x,i[1]=xa.y,i[5]=Bg.y,i[9]=Mi.y,i[2]=xa.z,i[6]=Bg.z,i[10]=Mi.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[4],l=r[8],c=r[12],d=r[1],f=r[5],p=r[9],m=r[13],v=r[2],x=r[6],y=r[10],g=r[14],w=r[3],S=r[7],E=r[11],A=r[15],T=i[0],P=i[4],k=i[8],R=i[12],I=i[1],H=i[5],G=i[9],re=i[13],z=i[2],Z=i[6],J=i[10],te=i[14],L=i[3],U=i[7],V=i[11],Y=i[15];return s[0]=o*T+a*I+l*z+c*L,s[4]=o*P+a*H+l*Z+c*U,s[8]=o*k+a*G+l*J+c*V,s[12]=o*R+a*re+l*te+c*Y,s[1]=d*T+f*I+p*z+m*L,s[5]=d*P+f*H+p*Z+m*U,s[9]=d*k+f*G+p*J+m*V,s[13]=d*R+f*re+p*te+m*Y,s[2]=v*T+x*I+y*z+g*L,s[6]=v*P+x*H+y*Z+g*U,s[10]=v*k+x*G+y*J+g*V,s[14]=v*R+x*re+y*te+g*Y,s[3]=w*T+S*I+E*z+A*L,s[7]=w*P+S*H+E*Z+A*U,s[11]=w*k+S*G+E*J+A*V,s[15]=w*R+S*re+E*te+A*Y,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[4],i=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],d=e[2],f=e[6],p=e[10],m=e[14],v=e[3],x=e[7],y=e[11],g=e[15];return v*(+s*l*f-i*c*f-s*a*p+r*c*p+i*a*m-r*l*m)+x*(+t*l*m-t*c*p+s*o*p-i*o*m+i*c*d-s*l*d)+y*(+t*c*f-t*a*m-s*o*f+r*o*m+s*a*d-r*c*d)+g*(-i*a*d-t*l*f+t*a*p+i*o*f-r*o*p+r*l*d)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=r),this}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],d=e[8],f=e[9],p=e[10],m=e[11],v=e[12],x=e[13],y=e[14],g=e[15],w=f*y*c-x*p*c+x*l*m-a*y*m-f*l*g+a*p*g,S=v*p*c-d*y*c-v*l*m+o*y*m+d*l*g-o*p*g,E=d*x*c-v*f*c+v*a*m-o*x*m-d*a*g+o*f*g,A=v*f*l-d*x*l-v*a*p+o*x*p+d*a*y-o*f*y,T=t*w+r*S+i*E+s*A;if(T===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const P=1/T;return e[0]=w*P,e[1]=(x*p*s-f*y*s-x*i*m+r*y*m+f*i*g-r*p*g)*P,e[2]=(a*y*s-x*l*s+x*i*c-r*y*c-a*i*g+r*l*g)*P,e[3]=(f*l*s-a*p*s-f*i*c+r*p*c+a*i*m-r*l*m)*P,e[4]=S*P,e[5]=(d*y*s-v*p*s+v*i*m-t*y*m-d*i*g+t*p*g)*P,e[6]=(v*l*s-o*y*s-v*i*c+t*y*c+o*i*g-t*l*g)*P,e[7]=(o*p*s-d*l*s+d*i*c-t*p*c-o*i*m+t*l*m)*P,e[8]=E*P,e[9]=(v*f*s-d*x*s-v*r*m+t*x*m+d*r*g-t*f*g)*P,e[10]=(o*x*s-v*a*s+v*r*c-t*x*c-o*r*g+t*a*g)*P,e[11]=(d*a*s-o*f*s-d*r*c+t*f*c+o*r*m-t*a*m)*P,e[12]=A*P,e[13]=(d*x*i-v*f*i+v*r*p-t*x*p-d*r*y+t*f*y)*P,e[14]=(v*a*i-o*x*i-v*r*l+t*x*l+o*r*y-t*a*y)*P,e[15]=(o*f*i-d*a*i+d*r*l-t*f*l-o*r*p+t*a*p)*P,this}scale(e){const t=this.elements,r=e.x,i=e.y,s=e.z;return t[0]*=r,t[4]*=i,t[8]*=s,t[1]*=r,t[5]*=i,t[9]*=s,t[2]*=r,t[6]*=i,t[10]*=s,t[3]*=r,t[7]*=i,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,i))}makeTranslation(e,t,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const r=Math.cos(t),i=Math.sin(t),s=1-r,o=e.x,a=e.y,l=e.z,c=s*o,d=s*a;return this.set(c*o+r,c*a-i*l,c*l+i*a,0,c*a+i*l,d*a+r,d*l-i*o,0,c*l-i*a,d*l+i*o,s*l*l+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,i,s,o){return this.set(1,r,s,0,e,1,o,0,t,i,1,0,0,0,0,1),this}compose(e,t,r){const i=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,c=s+s,d=o+o,f=a+a,p=s*c,m=s*d,v=s*f,x=o*d,y=o*f,g=a*f,w=l*c,S=l*d,E=l*f,A=r.x,T=r.y,P=r.z;return i[0]=(1-(x+g))*A,i[1]=(m+E)*A,i[2]=(v-S)*A,i[3]=0,i[4]=(m-E)*T,i[5]=(1-(p+g))*T,i[6]=(y+w)*T,i[7]=0,i[8]=(v+S)*P,i[9]=(y-w)*P,i[10]=(1-(p+x))*P,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,r){const i=this.elements;let s=pu.set(i[0],i[1],i[2]).length();const o=pu.set(i[4],i[5],i[6]).length(),a=pu.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],ps.copy(this);const c=1/s,d=1/o,f=1/a;return ps.elements[0]*=c,ps.elements[1]*=c,ps.elements[2]*=c,ps.elements[4]*=d,ps.elements[5]*=d,ps.elements[6]*=d,ps.elements[8]*=f,ps.elements[9]*=f,ps.elements[10]*=f,t.setFromRotationMatrix(ps),r.x=s,r.y=o,r.z=a,this}makePerspective(e,t,r,i,s,o,a=Rs){const l=this.elements,c=2*s/(t-e),d=2*s/(r-i),f=(t+e)/(t-e),p=(r+i)/(r-i);let m,v;if(a===Rs)m=-(o+s)/(o-s),v=-2*o*s/(o-s);else if(a===Wd)m=-o/(o-s),v=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=c,l[4]=0,l[8]=f,l[12]=0,l[1]=0,l[5]=d,l[9]=p,l[13]=0,l[2]=0,l[6]=0,l[10]=m,l[14]=v,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,r,i,s,o,a=Rs){const l=this.elements,c=1/(t-e),d=1/(r-i),f=1/(o-s),p=(t+e)*c,m=(r+i)*d;let v,x;if(a===Rs)v=(o+s)*f,x=-2*f;else if(a===Wd)v=s*f,x=-1*f;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-p,l[1]=0,l[5]=2*d,l[9]=0,l[13]=-m,l[2]=0,l[6]=0,l[10]=x,l[14]=-v,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<16;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}const pu=new j,ps=new Et,YY=new j(0,0,0),KY=new j(1,1,1),xa=new j,Bg=new j,Mi=new j,Y2=new Et,K2=new Br;class em{constructor(e=0,t=0,r=0,i=em.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,i=this._order){return this._x=e,this._y=t,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){const i=e.elements,s=i[0],o=i[4],a=i[8],l=i[1],c=i[5],d=i[9],f=i[2],p=i[6],m=i[10];switch(t){case"XYZ":this._y=Math.asin(Un(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-d,m),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(p,c),this._z=0);break;case"YXZ":this._x=Math.asin(-Un(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(a,m),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-f,s),this._z=0);break;case"ZXY":this._x=Math.asin(Un(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(-f,m),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-Un(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(p,m),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(Un(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-d,c),this._y=Math.atan2(-f,s)):(this._x=0,this._y=Math.atan2(a,m));break;case"XZY":this._z=Math.asin(-Un(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(p,c),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-d,m),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return Y2.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Y2,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return K2.setFromEuler(this),this.setFromQuaternion(K2,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}em.DEFAULT_ORDER="XYZ";class Tc{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let ZY=0;const Z2=new j,mu=new Br,Co=new Et,zg=new j,qh=new j,JY=new j,QY=new Br,J2=new j(1,0,0),Q2=new j(0,1,0),eI=new j(0,0,1),eK={type:"added"},tK={type:"removed"};class nn extends ia{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:ZY++}),this.uuid=Di(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=nn.DEFAULT_UP.clone();const e=new j,t=new em,r=new Br,i=new j(1,1,1);function s(){r.setFromEuler(t,!1)}function o(){t.setFromQuaternion(r,void 0,!1)}t._onChange(s),r._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Et},normalMatrix:{value:new Bt}}),this.matrix=new Et,this.matrixWorld=new Et,this.matrixAutoUpdate=nn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=nn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Tc,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return mu.setFromAxisAngle(e,t),this.quaternion.multiply(mu),this}rotateOnWorldAxis(e,t){return mu.setFromAxisAngle(e,t),this.quaternion.premultiply(mu),this}rotateX(e){return this.rotateOnAxis(J2,e)}rotateY(e){return this.rotateOnAxis(Q2,e)}rotateZ(e){return this.rotateOnAxis(eI,e)}translateOnAxis(e,t){return Z2.copy(e).applyQuaternion(this.quaternion),this.position.add(Z2.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(J2,e)}translateY(e){return this.translateOnAxis(Q2,e)}translateZ(e){return this.translateOnAxis(eI,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Co.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?zg.copy(e):zg.set(e,t,r);const i=this.parent;this.updateWorldMatrix(!0,!1),qh.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Co.lookAt(qh,zg,this.up):Co.lookAt(zg,qh,this.up),this.quaternion.setFromRotationMatrix(Co),i&&(Co.extractRotation(i.matrixWorld),mu.setFromRotationMatrix(Co),this.quaternion.premultiply(mu.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(eK)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(tK)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Co.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Co.multiply(e.parent.matrixWorld)),e.applyMatrix4(Co),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,i=this.children.length;r<i;r++){const o=this.children[r].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,r=[]){this[e]===t&&r.push(this);const i=this.children;for(let s=0,o=i.length;s<o;s++)i[s].getObjectsByProperty(e,t,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(qh,e,JY),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(qh,QY,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let r=0,i=t.length;r<i;r++){const s=t[r];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const r=this.parent;if(e===!0&&r!==null&&r.matrixWorldAutoUpdate===!0&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const i=this.children;for(let s=0,o=i.length;s<o;s++){const a=i[s];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map(a=>({boxInitialized:a.boxInitialized,boxMin:a.box.min.toArray(),boxMax:a.box.max.toArray(),sphereInitialized:a.sphereInitialized,sphereRadius:a.sphere.radius,sphereCenter:a.sphere.center.toArray()})),i.maxGeometryCount=this._maxGeometryCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.geometryCount=this._geometryCount,i.matricesTexture=this._matricesTexture.toJSON(e),this.boundingSphere!==null&&(i.boundingSphere={center:i.boundingSphere.center.toArray(),radius:i.boundingSphere.radius}),this.boundingBox!==null&&(i.boundingBox={min:i.boundingBox.min.toArray(),max:i.boundingBox.max.toArray()}));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let c=0,d=l.length;c<d;c++){const f=l[c];s(e.shapes,f)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(s(e.materials,this.material[l]));i.material=a}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];i.animations.push(s(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),c=o(e.textures),d=o(e.images),f=o(e.shapes),p=o(e.skeletons),m=o(e.animations),v=o(e.nodes);a.length>0&&(r.geometries=a),l.length>0&&(r.materials=l),c.length>0&&(r.textures=c),d.length>0&&(r.images=d),f.length>0&&(r.shapes=f),p.length>0&&(r.skeletons=p),m.length>0&&(r.animations=m),v.length>0&&(r.nodes=v)}return r.object=i,r;function o(a){const l=[];for(const c in a){const d=a[c];delete d.metadata,l.push(d)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}nn.DEFAULT_UP=new j(0,1,0);nn.DEFAULT_MATRIX_AUTO_UPDATE=!0;nn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const ms=new j,Po=new j,kw=new j,Ro=new j,gu=new j,vu=new j,tI=new j,Ow=new j,Nw=new j,Dw=new j;let Vg=!1;class di{constructor(e=new j,t=new j,r=new j){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,i){i.subVectors(r,t),ms.subVectors(e,t),i.cross(ms);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,t,r,i,s){ms.subVectors(i,t),Po.subVectors(r,t),kw.subVectors(e,t);const o=ms.dot(ms),a=ms.dot(Po),l=ms.dot(kw),c=Po.dot(Po),d=Po.dot(kw),f=o*c-a*a;if(f===0)return s.set(0,0,0),null;const p=1/f,m=(c*l-a*d)*p,v=(o*d-a*l)*p;return s.set(1-m-v,v,m)}static containsPoint(e,t,r,i){return this.getBarycoord(e,t,r,i,Ro)===null?!1:Ro.x>=0&&Ro.y>=0&&Ro.x+Ro.y<=1}static getUV(e,t,r,i,s,o,a,l){return Vg===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Vg=!0),this.getInterpolation(e,t,r,i,s,o,a,l)}static getInterpolation(e,t,r,i,s,o,a,l){return this.getBarycoord(e,t,r,i,Ro)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,Ro.x),l.addScaledVector(o,Ro.y),l.addScaledVector(a,Ro.z),l)}static isFrontFacing(e,t,r,i){return ms.subVectors(r,t),Po.subVectors(e,t),ms.cross(Po).dot(i)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,i){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,r,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return ms.subVectors(this.c,this.b),Po.subVectors(this.a,this.b),ms.cross(Po).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return di.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return di.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,r,i,s){return Vg===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Vg=!0),di.getInterpolation(e,this.a,this.b,this.c,t,r,i,s)}getInterpolation(e,t,r,i,s){return di.getInterpolation(e,this.a,this.b,this.c,t,r,i,s)}containsPoint(e){return di.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return di.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const r=this.a,i=this.b,s=this.c;let o,a;gu.subVectors(i,r),vu.subVectors(s,r),Ow.subVectors(e,r);const l=gu.dot(Ow),c=vu.dot(Ow);if(l<=0&&c<=0)return t.copy(r);Nw.subVectors(e,i);const d=gu.dot(Nw),f=vu.dot(Nw);if(d>=0&&f<=d)return t.copy(i);const p=l*f-d*c;if(p<=0&&l>=0&&d<=0)return o=l/(l-d),t.copy(r).addScaledVector(gu,o);Dw.subVectors(e,s);const m=gu.dot(Dw),v=vu.dot(Dw);if(v>=0&&m<=v)return t.copy(s);const x=m*c-l*v;if(x<=0&&c>=0&&v<=0)return a=c/(c-v),t.copy(r).addScaledVector(vu,a);const y=d*v-m*f;if(y<=0&&f-d>=0&&m-v>=0)return tI.subVectors(s,i),a=(f-d)/(f-d+(m-v)),t.copy(i).addScaledVector(tI,a);const g=1/(y+x+p);return o=x*g,a=p*g,t.copy(r).addScaledVector(gu,o).addScaledVector(vu,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const ZF={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},wa={h:0,s:0,l:0},jg={h:0,s:0,l:0};function Uw(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class Xe{constructor(e,t,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,r)}set(e,t,r){if(t===void 0&&r===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,t,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=tr){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,rn.toWorkingColorSpace(this,t),this}setRGB(e,t,r,i=rn.workingColorSpace){return this.r=e,this.g=t,this.b=r,rn.toWorkingColorSpace(this,i),this}setHSL(e,t,r,i=rn.workingColorSpace){if(e=fT(e,1),t=Un(t,0,1),r=Un(r,0,1),t===0)this.r=this.g=this.b=r;else{const s=r<=.5?r*(1+t):r+t-r*t,o=2*r-s;this.r=Uw(o,s,e+1/3),this.g=Uw(o,s,e),this.b=Uw(o,s,e-1/3)}return rn.toWorkingColorSpace(this,i),this}setStyle(e,t=tr){function r(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=i[1],a=i[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=tr){const r=ZF[e.toLowerCase()];return r!==void 0?this.setHex(r,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=wd(e.r),this.g=wd(e.g),this.b=wd(e.b),this}copyLinearToSRGB(e){return this.r=Mw(e.r),this.g=Mw(e.g),this.b=Mw(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=tr){return rn.fromWorkingColorSpace(Ir.copy(this),e),Math.round(Un(Ir.r*255,0,255))*65536+Math.round(Un(Ir.g*255,0,255))*256+Math.round(Un(Ir.b*255,0,255))}getHexString(e=tr){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=rn.workingColorSpace){rn.fromWorkingColorSpace(Ir.copy(this),t);const r=Ir.r,i=Ir.g,s=Ir.b,o=Math.max(r,i,s),a=Math.min(r,i,s);let l,c;const d=(a+o)/2;if(a===o)l=0,c=0;else{const f=o-a;switch(c=d<=.5?f/(o+a):f/(2-o-a),o){case r:l=(i-s)/f+(i<s?6:0);break;case i:l=(s-r)/f+2;break;case s:l=(r-i)/f+4;break}l/=6}return e.h=l,e.s=c,e.l=d,e}getRGB(e,t=rn.workingColorSpace){return rn.fromWorkingColorSpace(Ir.copy(this),t),e.r=Ir.r,e.g=Ir.g,e.b=Ir.b,e}getStyle(e=tr){rn.fromWorkingColorSpace(Ir.copy(this),e);const t=Ir.r,r=Ir.g,i=Ir.b;return e!==tr?`color(${e} ${t.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,t,r){return this.getHSL(wa),this.setHSL(wa.h+e,wa.s+t,wa.l+r)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(wa),e.getHSL(jg);const r=Lf(wa.h,jg.h,t),i=Lf(wa.s,jg.s,t),s=Lf(wa.l,jg.l,t);return this.setHSL(r,i,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,r=this.g,i=this.b,s=e.elements;return this.r=s[0]*t+s[3]*r+s[6]*i,this.g=s[1]*t+s[4]*r+s[7]*i,this.b=s[2]*t+s[5]*r+s[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Ir=new Xe;Xe.NAMES=ZF;let nK=0;class jr extends ia{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:nK++}),this.uuid=Di(),this.name="",this.type="Material",this.blending=Ec,this.side=ea,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=Yy,this.blendDst=Ky,this.blendEquation=ka,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Xe(0,0,0),this.blendAlpha=0,this.depthFunc=dp,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=L1,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=ec,this.stencilZFail=ec,this.stencilZPass=ec,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const r=e[t];if(r===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const i=this[t];if(i===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[t]=r}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const r={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==Ec&&(r.blending=this.blending),this.side!==ea&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==Yy&&(r.blendSrc=this.blendSrc),this.blendDst!==Ky&&(r.blendDst=this.blendDst),this.blendEquation!==ka&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==dp&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==L1&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==ec&&(r.stencilFail=this.stencilFail),this.stencilZFail!==ec&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==ec&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(t){const s=i(e.textures),o=i(e.images);s.length>0&&(r.textures=s),o.length>0&&(r.images=o)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let r=null;if(t!==null){const i=t.length;r=new Array(i);for(let s=0;s!==i;++s)r[s]=t[s].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class Sl extends jr{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Xe(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Jp,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Fo=rK();function rK(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),r=new Uint32Array(512),i=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(r[l]=0,r[l|256]=32768,i[l]=24,i[l|256]=24):c<-14?(r[l]=1024>>-c-14,r[l|256]=1024>>-c-14|32768,i[l]=-c-1,i[l|256]=-c-1):c<=15?(r[l]=c+15<<10,r[l|256]=c+15<<10|32768,i[l]=13,i[l|256]=13):c<128?(r[l]=31744,r[l|256]=64512,i[l]=24,i[l|256]=24):(r[l]=31744,r[l|256]=64512,i[l]=13,i[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,d=0;for(;!(c&8388608);)c<<=1,d-=8388608;c&=-8388609,d+=947912704,s[l]=c|d}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:t,baseTable:r,shiftTable:i,mantissaTable:s,exponentTable:o,offsetTable:a}}function li(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=Un(n,-65504,65504),Fo.floatView[0]=n;const e=Fo.uint32View[0],t=e>>23&511;return Fo.baseTable[t]+((e&8388607)>>Fo.shiftTable[t])}function ff(n){const e=n>>10;return Fo.uint32View[0]=Fo.mantissaTable[Fo.offsetTable[e]+(n&1023)]+Fo.exponentTable[e],Fo.floatView[0]}const iK={toHalfFloat:li,fromHalfFloat:ff},Yn=new j,Hg=new me;class an{constructor(e,t,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=r,this.usage=Sp,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=Ps,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return console.warn("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=t.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,r=this.count;t<r;t++)Hg.fromBufferAttribute(this,t),Hg.applyMatrix3(e),this.setXY(t,Hg.x,Hg.y);else if(this.itemSize===3)for(let t=0,r=this.count;t<r;t++)Yn.fromBufferAttribute(this,t),Yn.applyMatrix3(e),this.setXYZ(t,Yn.x,Yn.y,Yn.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)Yn.fromBufferAttribute(this,t),Yn.applyMatrix4(e),this.setXYZ(t,Yn.x,Yn.y,Yn.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Yn.fromBufferAttribute(this,t),Yn.applyNormalMatrix(e),this.setXYZ(t,Yn.x,Yn.y,Yn.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Yn.fromBufferAttribute(this,t),Yn.transformDirection(e),this.setXYZ(t,Yn.x,Yn.y,Yn.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let r=this.array[e*this.itemSize+t];return this.normalized&&(r=hi(r,this.array)),r}setComponent(e,t,r){return this.normalized&&(r=Ut(r,this.array)),this.array[e*this.itemSize+t]=r,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=hi(t,this.array)),t}setX(e,t){return this.normalized&&(t=Ut(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=hi(t,this.array)),t}setY(e,t){return this.normalized&&(t=Ut(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=hi(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Ut(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=hi(t,this.array)),t}setW(e,t){return this.normalized&&(t=Ut(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=Ut(t,this.array),r=Ut(r,this.array)),this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=Ut(t,this.array),r=Ut(r,this.array),i=Ut(i,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e*=this.itemSize,this.normalized&&(t=Ut(t,this.array),r=Ut(r,this.array),i=Ut(i,this.array),s=Ut(s,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Sp&&(e.usage=this.usage),e}}class sK extends an{constructor(e,t,r){super(new Int8Array(e),t,r)}}class oK extends an{constructor(e,t,r){super(new Uint8Array(e),t,r)}}class aK extends an{constructor(e,t,r){super(new Uint8ClampedArray(e),t,r)}}class lK extends an{constructor(e,t,r){super(new Int16Array(e),t,r)}}class gT extends an{constructor(e,t,r){super(new Uint16Array(e),t,r)}}class cK extends an{constructor(e,t,r){super(new Int32Array(e),t,r)}}class vT extends an{constructor(e,t,r){super(new Uint32Array(e),t,r)}}class uK extends an{constructor(e,t,r){super(new Uint16Array(e),t,r),this.isFloat16BufferAttribute=!0}getX(e){let t=ff(this.array[e*this.itemSize]);return this.normalized&&(t=hi(t,this.array)),t}setX(e,t){return this.normalized&&(t=Ut(t,this.array)),this.array[e*this.itemSize]=li(t),this}getY(e){let t=ff(this.array[e*this.itemSize+1]);return this.normalized&&(t=hi(t,this.array)),t}setY(e,t){return this.normalized&&(t=Ut(t,this.array)),this.array[e*this.itemSize+1]=li(t),this}getZ(e){let t=ff(this.array[e*this.itemSize+2]);return this.normalized&&(t=hi(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Ut(t,this.array)),this.array[e*this.itemSize+2]=li(t),this}getW(e){let t=ff(this.array[e*this.itemSize+3]);return this.normalized&&(t=hi(t,this.array)),t}setW(e,t){return this.normalized&&(t=Ut(t,this.array)),this.array[e*this.itemSize+3]=li(t),this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=Ut(t,this.array),r=Ut(r,this.array)),this.array[e+0]=li(t),this.array[e+1]=li(r),this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=Ut(t,this.array),r=Ut(r,this.array),i=Ut(i,this.array)),this.array[e+0]=li(t),this.array[e+1]=li(r),this.array[e+2]=li(i),this}setXYZW(e,t,r,i,s){return e*=this.itemSize,this.normalized&&(t=Ut(t,this.array),r=Ut(r,this.array),i=Ut(i,this.array),s=Ut(s,this.array)),this.array[e+0]=li(t),this.array[e+1]=li(r),this.array[e+2]=li(i),this.array[e+3]=li(s),this}}class rt extends an{constructor(e,t,r){super(new Float32Array(e),t,r)}}class dK extends an{constructor(e,t,r){super(new Float64Array(e),t,r)}}let hK=0;const Qi=new Et,Fw=new nn,yu=new j,Ti=new ei,Yh=new ei,fr=new j;class zt extends ia{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:hK++}),this.uuid=Di(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(qF(e)?vT:gT)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const s=new Bt().getNormalMatrix(e);r.applyNormalMatrix(s),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Qi.makeRotationFromQuaternion(e),this.applyMatrix4(Qi),this}rotateX(e){return Qi.makeRotationX(e),this.applyMatrix4(Qi),this}rotateY(e){return Qi.makeRotationY(e),this.applyMatrix4(Qi),this}rotateZ(e){return Qi.makeRotationZ(e),this.applyMatrix4(Qi),this}translate(e,t,r){return Qi.makeTranslation(e,t,r),this.applyMatrix4(Qi),this}scale(e,t,r){return Qi.makeScale(e,t,r),this.applyMatrix4(Qi),this}lookAt(e){return Fw.lookAt(e),Fw.updateMatrix(),this.applyMatrix4(Fw.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(yu).negate(),this.translate(yu.x,yu.y,yu.z),this}setFromPoints(e){const t=[];for(let r=0,i=e.length;r<i;r++){const s=e[r];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new rt(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ei);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new j(-1/0,-1/0,-1/0),new j(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,i=t.length;r<i;r++){const s=t[r];Ti.setFromBufferAttribute(s),this.morphTargetsRelative?(fr.addVectors(this.boundingBox.min,Ti.min),this.boundingBox.expandByPoint(fr),fr.addVectors(this.boundingBox.max,Ti.max),this.boundingBox.expandByPoint(fr)):(this.boundingBox.expandByPoint(Ti.min),this.boundingBox.expandByPoint(Ti.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new zr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new j,1/0);return}if(e){const r=this.boundingSphere.center;if(Ti.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];Yh.setFromBufferAttribute(a),this.morphTargetsRelative?(fr.addVectors(Ti.min,Yh.min),Ti.expandByPoint(fr),fr.addVectors(Ti.max,Yh.max),Ti.expandByPoint(fr)):(Ti.expandByPoint(Yh.min),Ti.expandByPoint(Yh.max))}Ti.getCenter(r);let i=0;for(let s=0,o=e.count;s<o;s++)fr.fromBufferAttribute(e,s),i=Math.max(i,r.distanceToSquared(fr));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let c=0,d=a.count;c<d;c++)fr.fromBufferAttribute(a,c),l&&(yu.fromBufferAttribute(e,c),fr.add(yu)),i=Math.max(i,r.distanceToSquared(fr))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=e.array,i=t.position.array,s=t.normal.array,o=t.uv.array,a=i.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new an(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,c=[],d=[];for(let I=0;I<a;I++)c[I]=new j,d[I]=new j;const f=new j,p=new j,m=new j,v=new me,x=new me,y=new me,g=new j,w=new j;function S(I,H,G){f.fromArray(i,I*3),p.fromArray(i,H*3),m.fromArray(i,G*3),v.fromArray(o,I*2),x.fromArray(o,H*2),y.fromArray(o,G*2),p.sub(f),m.sub(f),x.sub(v),y.sub(v);const re=1/(x.x*y.y-y.x*x.y);isFinite(re)&&(g.copy(p).multiplyScalar(y.y).addScaledVector(m,-x.y).multiplyScalar(re),w.copy(m).multiplyScalar(x.x).addScaledVector(p,-y.x).multiplyScalar(re),c[I].add(g),c[H].add(g),c[G].add(g),d[I].add(w),d[H].add(w),d[G].add(w))}let E=this.groups;E.length===0&&(E=[{start:0,count:r.length}]);for(let I=0,H=E.length;I<H;++I){const G=E[I],re=G.start,z=G.count;for(let Z=re,J=re+z;Z<J;Z+=3)S(r[Z+0],r[Z+1],r[Z+2])}const A=new j,T=new j,P=new j,k=new j;function R(I){P.fromArray(s,I*3),k.copy(P);const H=c[I];A.copy(H),A.sub(P.multiplyScalar(P.dot(H))).normalize(),T.crossVectors(k,H);const re=T.dot(d[I])<0?-1:1;l[I*4]=A.x,l[I*4+1]=A.y,l[I*4+2]=A.z,l[I*4+3]=re}for(let I=0,H=E.length;I<H;++I){const G=E[I],re=G.start,z=G.count;for(let Z=re,J=re+z;Z<J;Z+=3)R(r[Z+0]),R(r[Z+1]),R(r[Z+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new an(new Float32Array(t.count*3),3),this.setAttribute("normal",r);else for(let p=0,m=r.count;p<m;p++)r.setXYZ(p,0,0,0);const i=new j,s=new j,o=new j,a=new j,l=new j,c=new j,d=new j,f=new j;if(e)for(let p=0,m=e.count;p<m;p+=3){const v=e.getX(p+0),x=e.getX(p+1),y=e.getX(p+2);i.fromBufferAttribute(t,v),s.fromBufferAttribute(t,x),o.fromBufferAttribute(t,y),d.subVectors(o,s),f.subVectors(i,s),d.cross(f),a.fromBufferAttribute(r,v),l.fromBufferAttribute(r,x),c.fromBufferAttribute(r,y),a.add(d),l.add(d),c.add(d),r.setXYZ(v,a.x,a.y,a.z),r.setXYZ(x,l.x,l.y,l.z),r.setXYZ(y,c.x,c.y,c.z)}else for(let p=0,m=t.count;p<m;p+=3)i.fromBufferAttribute(t,p+0),s.fromBufferAttribute(t,p+1),o.fromBufferAttribute(t,p+2),d.subVectors(o,s),f.subVectors(i,s),d.cross(f),r.setXYZ(p+0,d.x,d.y,d.z),r.setXYZ(p+1,d.x,d.y,d.z),r.setXYZ(p+2,d.x,d.y,d.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)fr.fromBufferAttribute(e,t),fr.normalize(),e.setXYZ(t,fr.x,fr.y,fr.z)}toNonIndexed(){function e(a,l){const c=a.array,d=a.itemSize,f=a.normalized,p=new c.constructor(l.length*d);let m=0,v=0;for(let x=0,y=l.length;x<y;x++){a.isInterleavedBufferAttribute?m=l[x]*a.data.stride+a.offset:m=l[x]*d;for(let g=0;g<d;g++)p[v++]=c[m++]}return new an(p,d,f)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new zt,r=this.index.array,i=this.attributes;for(const a in i){const l=i[a],c=e(l,r);t.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let d=0,f=c.length;d<f;d++){const p=c[d],m=e(p,r);l.push(m)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const r=this.attributes;for(const l in r){const c=r[l];e.data.attributes[l]=c.toJSON(e.data)}const i={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],d=[];for(let f=0,p=c.length;f<p;f++){const m=c[f];d.push(m.toJSON(e.data))}d.length>0&&(i[l]=d,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(t));const i=e.attributes;for(const c in i){const d=i[c];this.setAttribute(c,d.clone(t))}const s=e.morphAttributes;for(const c in s){const d=[],f=s[c];for(let p=0,m=f.length;p<m;p++)d.push(f[p].clone(t));this.morphAttributes[c]=d}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,d=o.length;c<d;c++){const f=o[c];this.addGroup(f.start,f.count,f.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const nI=new Et,Fl=new jc,Wg=new zr,rI=new j,_u=new j,xu=new j,wu=new j,Bw=new j,Gg=new j,$g=new me,Xg=new me,qg=new me,iI=new j,sI=new j,oI=new j,Yg=new j,Kg=new j;class sr extends nn{constructor(e=new zt,t=new Sl){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const r=this.geometry,i=r.attributes.position,s=r.morphAttributes.position,o=r.morphTargetsRelative;t.fromBufferAttribute(i,e);const a=this.morphTargetInfluences;if(s&&a){Gg.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const d=a[l],f=s[l];d!==0&&(Bw.fromBufferAttribute(f,e),o?Gg.addScaledVector(Bw,d):Gg.addScaledVector(Bw.sub(t),d))}t.add(Gg)}return t}raycast(e,t){const r=this.geometry,i=this.material,s=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),Wg.copy(r.boundingSphere),Wg.applyMatrix4(s),Fl.copy(e.ray).recast(e.near),!(Wg.containsPoint(Fl.origin)===!1&&(Fl.intersectSphere(Wg,rI)===null||Fl.origin.distanceToSquared(rI)>(e.far-e.near)**2))&&(nI.copy(s).invert(),Fl.copy(e.ray).applyMatrix4(nI),!(r.boundingBox!==null&&Fl.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,t,Fl)))}_computeIntersections(e,t,r){let i;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,c=s.attributes.uv,d=s.attributes.uv1,f=s.attributes.normal,p=s.groups,m=s.drawRange;if(a!==null)if(Array.isArray(o))for(let v=0,x=p.length;v<x;v++){const y=p[v],g=o[y.materialIndex],w=Math.max(y.start,m.start),S=Math.min(a.count,Math.min(y.start+y.count,m.start+m.count));for(let E=w,A=S;E<A;E+=3){const T=a.getX(E),P=a.getX(E+1),k=a.getX(E+2);i=Zg(this,g,e,r,c,d,f,T,P,k),i&&(i.faceIndex=Math.floor(E/3),i.face.materialIndex=y.materialIndex,t.push(i))}}else{const v=Math.max(0,m.start),x=Math.min(a.count,m.start+m.count);for(let y=v,g=x;y<g;y+=3){const w=a.getX(y),S=a.getX(y+1),E=a.getX(y+2);i=Zg(this,o,e,r,c,d,f,w,S,E),i&&(i.faceIndex=Math.floor(y/3),t.push(i))}}else if(l!==void 0)if(Array.isArray(o))for(let v=0,x=p.length;v<x;v++){const y=p[v],g=o[y.materialIndex],w=Math.max(y.start,m.start),S=Math.min(l.count,Math.min(y.start+y.count,m.start+m.count));for(let E=w,A=S;E<A;E+=3){const T=E,P=E+1,k=E+2;i=Zg(this,g,e,r,c,d,f,T,P,k),i&&(i.faceIndex=Math.floor(E/3),i.face.materialIndex=y.materialIndex,t.push(i))}}else{const v=Math.max(0,m.start),x=Math.min(l.count,m.start+m.count);for(let y=v,g=x;y<g;y+=3){const w=y,S=y+1,E=y+2;i=Zg(this,o,e,r,c,d,f,w,S,E),i&&(i.faceIndex=Math.floor(y/3),t.push(i))}}}}function fK(n,e,t,r,i,s,o,a){let l;if(e.side===Qr?l=r.intersectTriangle(o,s,i,!0,a):l=r.intersectTriangle(i,s,o,e.side===ea,a),l===null)return null;Kg.copy(a),Kg.applyMatrix4(n.matrixWorld);const c=t.ray.origin.distanceTo(Kg);return c<t.near||c>t.far?null:{distance:c,point:Kg.clone(),object:n}}function Zg(n,e,t,r,i,s,o,a,l,c){n.getVertexPosition(a,_u),n.getVertexPosition(l,xu),n.getVertexPosition(c,wu);const d=fK(n,e,t,r,_u,xu,wu,Yg);if(d){i&&($g.fromBufferAttribute(i,a),Xg.fromBufferAttribute(i,l),qg.fromBufferAttribute(i,c),d.uv=di.getInterpolation(Yg,_u,xu,wu,$g,Xg,qg,new me)),s&&($g.fromBufferAttribute(s,a),Xg.fromBufferAttribute(s,l),qg.fromBufferAttribute(s,c),d.uv1=di.getInterpolation(Yg,_u,xu,wu,$g,Xg,qg,new me),d.uv2=d.uv1),o&&(iI.fromBufferAttribute(o,a),sI.fromBufferAttribute(o,l),oI.fromBufferAttribute(o,c),d.normal=di.getInterpolation(Yg,_u,xu,wu,iI,sI,oI,new j),d.normal.dot(r.direction)>0&&d.normal.multiplyScalar(-1));const f={a,b:l,c,normal:new j,materialIndex:0};di.getNormal(_u,xu,wu,f.normal),d.face=f}return d}class Hc extends zt{constructor(e=1,t=1,r=1,i=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:s,depthSegments:o};const a=this;i=Math.floor(i),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],d=[],f=[];let p=0,m=0;v("z","y","x",-1,-1,r,t,e,o,s,0),v("z","y","x",1,-1,r,t,-e,o,s,1),v("x","z","y",1,1,e,r,t,i,o,2),v("x","z","y",1,-1,e,r,-t,i,o,3),v("x","y","z",1,-1,e,t,r,i,s,4),v("x","y","z",-1,-1,e,t,-r,i,s,5),this.setIndex(l),this.setAttribute("position",new rt(c,3)),this.setAttribute("normal",new rt(d,3)),this.setAttribute("uv",new rt(f,2));function v(x,y,g,w,S,E,A,T,P,k,R){const I=E/P,H=A/k,G=E/2,re=A/2,z=T/2,Z=P+1,J=k+1;let te=0,L=0;const U=new j;for(let V=0;V<J;V++){const Y=V*H-re;for(let Q=0;Q<Z;Q++){const K=Q*I-G;U[x]=K*w,U[y]=Y*S,U[g]=z,c.push(U.x,U.y,U.z),U[x]=0,U[y]=0,U[g]=T>0?1:-1,d.push(U.x,U.y,U.z),f.push(Q/P),f.push(1-V/k),te+=1}}for(let V=0;V<k;V++)for(let Y=0;Y<P;Y++){const Q=p+Y+Z*V,K=p+Y+Z*(V+1),oe=p+(Y+1)+Z*(V+1),xe=p+(Y+1)+Z*V;l.push(Q,K,xe),l.push(K,oe,xe),L+=6}a.addGroup(m,L,R),m+=L,p+=te}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Hc(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function $d(n){const e={};for(const t in n){e[t]={};for(const r in n[t]){const i=n[t][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][r]=null):e[t][r]=i.clone():Array.isArray(i)?e[t][r]=i.slice():e[t][r]=i}}return e}function $r(n){const e={};for(let t=0;t<n.length;t++){const r=$d(n[t]);for(const i in r)e[i]=r[i]}return e}function pK(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function JF(n){return n.getRenderTarget()===null?n.outputColorSpace:rn.workingColorSpace}const QF={clone:$d,merge:$r};var mK=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,gK=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class mo extends jr{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=mK,this.fragmentShader=gK,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1,clipCullDistance:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=$d(e.uniforms),this.uniformsGroups=pK(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const o=this.uniforms[i].value;o&&o.isTexture?t.uniforms[i]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[i]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[i]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[i]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[i]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[i]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[i]={type:"m4",value:o.toArray()}:t.uniforms[i]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}}class tm extends nn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Et,this.projectionMatrix=new Et,this.projectionMatrixInverse=new Et,this.coordinateSystem=Rs}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class Gn extends tm{constructor(e=50,t=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Gd*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Mc*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Gd*2*Math.atan(Math.tan(Mc*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,r,i,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Mc*.5*this.fov)/this.zoom,r=2*t,i=this.aspect*r,s=-.5*i;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*i/l,t-=o.offsetY*r/c,i*=o.width/l,r*=o.height/c}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,t,t-r,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Su=-90,bu=1;class eB extends nn{constructor(e,t,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new Gn(Su,bu,e,t);i.layers=this.layers,this.add(i);const s=new Gn(Su,bu,e,t);s.layers=this.layers,this.add(s);const o=new Gn(Su,bu,e,t);o.layers=this.layers,this.add(o);const a=new Gn(Su,bu,e,t);a.layers=this.layers,this.add(a);const l=new Gn(Su,bu,e,t);l.layers=this.layers,this.add(l);const c=new Gn(Su,bu,e,t);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[r,i,s,o,a,l]=t;for(const c of t)this.remove(c);if(e===Rs)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===Wd)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of t)this.add(c),c.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:r,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,l,c,d]=this.children,f=e.getRenderTarget(),p=e.getActiveCubeFace(),m=e.getActiveMipmapLevel(),v=e.xr.enabled;e.xr.enabled=!1;const x=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0,i),e.render(t,s),e.setRenderTarget(r,1,i),e.render(t,o),e.setRenderTarget(r,2,i),e.render(t,a),e.setRenderTarget(r,3,i),e.render(t,l),e.setRenderTarget(r,4,i),e.render(t,c),r.texture.generateMipmaps=x,e.setRenderTarget(r,5,i),e.render(t,d),e.setRenderTarget(f,p,m),e.xr.enabled=v,r.texture.needsPMREMUpdate=!0}}class nm extends $n{constructor(e,t,r,i,s,o,a,l,c,d){e=e!==void 0?e:[],t=t!==void 0?t:ta,super(e,t,r,i,s,o,a,l,c,d),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class tB extends Us{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];t.encoding!==void 0&&(kf("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=t.encoding===el?tr:Pi),this.texture=new nm(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Wn}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new Hc(5,5,5),s=new mo({name:"CubemapFromEquirect",uniforms:$d(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:Qr,blending:$o});s.uniforms.tEquirect.value=t;const o=new sr(i,s),a=t.minFilter;return t.minFilter===hl&&(t.minFilter=Wn),new eB(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,r,i){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,r,i);e.setRenderTarget(s)}}const zw=new j,vK=new j,yK=new Bt;class Do{constructor(e=new j(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,i){return this.normal.set(e,t,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){const i=zw.subVectors(r,t).cross(vK.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const r=e.delta(zw),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:t.copy(e.start).addScaledVector(r,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const r=t||yK.getNormalMatrix(e),i=this.coplanarPoint(zw).applyMatrix4(e),s=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Bl=new zr,Jg=new j;class rm{constructor(e=new Do,t=new Do,r=new Do,i=new Do,s=new Do,o=new Do){this.planes=[e,t,r,i,s,o]}set(e,t,r,i,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(r),a[3].copy(i),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,t=Rs){const r=this.planes,i=e.elements,s=i[0],o=i[1],a=i[2],l=i[3],c=i[4],d=i[5],f=i[6],p=i[7],m=i[8],v=i[9],x=i[10],y=i[11],g=i[12],w=i[13],S=i[14],E=i[15];if(r[0].setComponents(l-s,p-c,y-m,E-g).normalize(),r[1].setComponents(l+s,p+c,y+m,E+g).normalize(),r[2].setComponents(l+o,p+d,y+v,E+w).normalize(),r[3].setComponents(l-o,p-d,y-v,E-w).normalize(),r[4].setComponents(l-a,p-f,y-x,E-S).normalize(),t===Rs)r[5].setComponents(l+a,p+f,y+x,E+S).normalize();else if(t===Wd)r[5].setComponents(a,f,x,S).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Bl.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Bl.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Bl)}intersectsSprite(e){return Bl.center.set(0,0,0),Bl.radius=.7071067811865476,Bl.applyMatrix4(e.matrixWorld),this.intersectsSphere(Bl)}intersectsSphere(e){const t=this.planes,r=e.center,i=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let r=0;r<6;r++){const i=t[r];if(Jg.x=i.normal.x>0?e.max.x:e.min.x,Jg.y=i.normal.y>0?e.max.y:e.min.y,Jg.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(Jg)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function nB(){let n=null,e=!1,t=null,r=null;function i(s,o){t(s,o),r=n.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(r=n.requestAnimationFrame(i),e=!0)},stop:function(){n.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function _K(n,e){const t=e.isWebGL2,r=new WeakMap;function i(c,d){const f=c.array,p=c.usage,m=f.byteLength,v=n.createBuffer();n.bindBuffer(d,v),n.bufferData(d,f,p),c.onUploadCallback();let x;if(f instanceof Float32Array)x=n.FLOAT;else if(f instanceof Uint16Array)if(c.isFloat16BufferAttribute)if(t)x=n.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else x=n.UNSIGNED_SHORT;else if(f instanceof Int16Array)x=n.SHORT;else if(f instanceof Uint32Array)x=n.UNSIGNED_INT;else if(f instanceof Int32Array)x=n.INT;else if(f instanceof Int8Array)x=n.BYTE;else if(f instanceof Uint8Array)x=n.UNSIGNED_BYTE;else if(f instanceof Uint8ClampedArray)x=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+f);return{buffer:v,type:x,bytesPerElement:f.BYTES_PER_ELEMENT,version:c.version,size:m}}function s(c,d,f){const p=d.array,m=d._updateRange,v=d.updateRanges;if(n.bindBuffer(f,c),m.count===-1&&v.length===0&&n.bufferSubData(f,0,p),v.length!==0){for(let x=0,y=v.length;x<y;x++){const g=v[x];t?n.bufferSubData(f,g.start*p.BYTES_PER_ELEMENT,p,g.start,g.count):n.bufferSubData(f,g.start*p.BYTES_PER_ELEMENT,p.subarray(g.start,g.start+g.count))}d.clearUpdateRanges()}m.count!==-1&&(t?n.bufferSubData(f,m.offset*p.BYTES_PER_ELEMENT,p,m.offset,m.count):n.bufferSubData(f,m.offset*p.BYTES_PER_ELEMENT,p.subarray(m.offset,m.offset+m.count)),m.count=-1),d.onUploadCallback()}function o(c){return c.isInterleavedBufferAttribute&&(c=c.data),r.get(c)}function a(c){c.isInterleavedBufferAttribute&&(c=c.data);const d=r.get(c);d&&(n.deleteBuffer(d.buffer),r.delete(c))}function l(c,d){if(c.isGLBufferAttribute){const p=r.get(c);(!p||p.version<c.version)&&r.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}c.isInterleavedBufferAttribute&&(c=c.data);const f=r.get(c);if(f===void 0)r.set(c,i(c,d));else if(f.version<c.version){if(f.size!==c.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");s(f.buffer,c,d),f.version=c.version}}return{get:o,remove:a,update:l}}class im extends zt{constructor(e=1,t=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:i};const s=e/2,o=t/2,a=Math.floor(r),l=Math.floor(i),c=a+1,d=l+1,f=e/a,p=t/l,m=[],v=[],x=[],y=[];for(let g=0;g<d;g++){const w=g*p-o;for(let S=0;S<c;S++){const E=S*f-s;v.push(E,-w,0),x.push(0,0,1),y.push(S/a),y.push(1-g/l)}}for(let g=0;g<l;g++)for(let w=0;w<a;w++){const S=w+c*g,E=w+c*(g+1),A=w+1+c*(g+1),T=w+1+c*g;m.push(S,E,T),m.push(E,A,T)}this.setIndex(m),this.setAttribute("position",new rt(v,3)),this.setAttribute("normal",new rt(x,3)),this.setAttribute("uv",new rt(y,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new im(e.width,e.height,e.widthSegments,e.heightSegments)}}var xK=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,wK=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,SK=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,bK=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,EK=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,MK=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,TK=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,AK=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,CK=`#ifdef USE_BATCHING
	attribute float batchId;
	uniform highp sampler2D batchingTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,PK=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( batchId );
#endif`,RK=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,IK=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,LK=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,kK=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,OK=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,NK=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,DK=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,UK=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,FK=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,BK=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,zK=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,VK=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,jK=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,HK=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,WK=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,GK=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,$K=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,XK=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,qK=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,YK=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,KK="gl_FragColor = linearToOutputTexel( gl_FragColor );",ZK=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,JK=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,QK=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,eZ=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,tZ=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,nZ=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,rZ=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,iZ=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,sZ=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,oZ=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,aZ=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,lZ=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,cZ=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,uZ=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,dZ=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,hZ=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,fZ=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,pZ=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,mZ=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,gZ=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,vZ=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,yZ=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,_Z=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,xZ=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,wZ=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,SZ=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,bZ=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,EZ=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,MZ=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,TZ=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,AZ=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,CZ=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,PZ=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,RZ=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,IZ=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,LZ=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,kZ=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,OZ=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,NZ=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,DZ=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,UZ=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,FZ=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,BZ=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,zZ=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,VZ=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,jZ=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,HZ=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,WZ=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,GZ=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,$Z=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,XZ=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,qZ=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,YZ=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,KZ=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,ZZ=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,JZ=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,QZ=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,eJ=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,tJ=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,nJ=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,rJ=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,iJ=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,sJ=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,oJ=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,aJ=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,lJ=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,cJ=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,uJ=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,dJ=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,hJ=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color *= toneMappingExposure;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	return color;
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,fJ=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,pJ=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,mJ=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,gJ=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,vJ=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,yJ=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const _J=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,xJ=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,wJ=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,SJ=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,bJ=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,EJ=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,MJ=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,TJ=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,AJ=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,CJ=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,PJ=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,RJ=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,IJ=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,LJ=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,kJ=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,OJ=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,NJ=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,DJ=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,UJ=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,FJ=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,BJ=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,zJ=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,VJ=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,jJ=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,HJ=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,WJ=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,GJ=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,$J=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,XJ=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,qJ=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,YJ=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,KJ=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,ZJ=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,JJ=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Dt={alphahash_fragment:xK,alphahash_pars_fragment:wK,alphamap_fragment:SK,alphamap_pars_fragment:bK,alphatest_fragment:EK,alphatest_pars_fragment:MK,aomap_fragment:TK,aomap_pars_fragment:AK,batching_pars_vertex:CK,batching_vertex:PK,begin_vertex:RK,beginnormal_vertex:IK,bsdfs:LK,iridescence_fragment:kK,bumpmap_pars_fragment:OK,clipping_planes_fragment:NK,clipping_planes_pars_fragment:DK,clipping_planes_pars_vertex:UK,clipping_planes_vertex:FK,color_fragment:BK,color_pars_fragment:zK,color_pars_vertex:VK,color_vertex:jK,common:HK,cube_uv_reflection_fragment:WK,defaultnormal_vertex:GK,displacementmap_pars_vertex:$K,displacementmap_vertex:XK,emissivemap_fragment:qK,emissivemap_pars_fragment:YK,colorspace_fragment:KK,colorspace_pars_fragment:ZK,envmap_fragment:JK,envmap_common_pars_fragment:QK,envmap_pars_fragment:eZ,envmap_pars_vertex:tZ,envmap_physical_pars_fragment:fZ,envmap_vertex:nZ,fog_vertex:rZ,fog_pars_vertex:iZ,fog_fragment:sZ,fog_pars_fragment:oZ,gradientmap_pars_fragment:aZ,lightmap_fragment:lZ,lightmap_pars_fragment:cZ,lights_lambert_fragment:uZ,lights_lambert_pars_fragment:dZ,lights_pars_begin:hZ,lights_toon_fragment:pZ,lights_toon_pars_fragment:mZ,lights_phong_fragment:gZ,lights_phong_pars_fragment:vZ,lights_physical_fragment:yZ,lights_physical_pars_fragment:_Z,lights_fragment_begin:xZ,lights_fragment_maps:wZ,lights_fragment_end:SZ,logdepthbuf_fragment:bZ,logdepthbuf_pars_fragment:EZ,logdepthbuf_pars_vertex:MZ,logdepthbuf_vertex:TZ,map_fragment:AZ,map_pars_fragment:CZ,map_particle_fragment:PZ,map_particle_pars_fragment:RZ,metalnessmap_fragment:IZ,metalnessmap_pars_fragment:LZ,morphcolor_vertex:kZ,morphnormal_vertex:OZ,morphtarget_pars_vertex:NZ,morphtarget_vertex:DZ,normal_fragment_begin:UZ,normal_fragment_maps:FZ,normal_pars_fragment:BZ,normal_pars_vertex:zZ,normal_vertex:VZ,normalmap_pars_fragment:jZ,clearcoat_normal_fragment_begin:HZ,clearcoat_normal_fragment_maps:WZ,clearcoat_pars_fragment:GZ,iridescence_pars_fragment:$Z,opaque_fragment:XZ,packing:qZ,premultiplied_alpha_fragment:YZ,project_vertex:KZ,dithering_fragment:ZZ,dithering_pars_fragment:JZ,roughnessmap_fragment:QZ,roughnessmap_pars_fragment:eJ,shadowmap_pars_fragment:tJ,shadowmap_pars_vertex:nJ,shadowmap_vertex:rJ,shadowmask_pars_fragment:iJ,skinbase_vertex:sJ,skinning_pars_vertex:oJ,skinning_vertex:aJ,skinnormal_vertex:lJ,specularmap_fragment:cJ,specularmap_pars_fragment:uJ,tonemapping_fragment:dJ,tonemapping_pars_fragment:hJ,transmission_fragment:fJ,transmission_pars_fragment:pJ,uv_pars_fragment:mJ,uv_pars_vertex:gJ,uv_vertex:vJ,worldpos_vertex:yJ,background_vert:_J,background_frag:xJ,backgroundCube_vert:wJ,backgroundCube_frag:SJ,cube_vert:bJ,cube_frag:EJ,depth_vert:MJ,depth_frag:TJ,distanceRGBA_vert:AJ,distanceRGBA_frag:CJ,equirect_vert:PJ,equirect_frag:RJ,linedashed_vert:IJ,linedashed_frag:LJ,meshbasic_vert:kJ,meshbasic_frag:OJ,meshlambert_vert:NJ,meshlambert_frag:DJ,meshmatcap_vert:UJ,meshmatcap_frag:FJ,meshnormal_vert:BJ,meshnormal_frag:zJ,meshphong_vert:VJ,meshphong_frag:jJ,meshphysical_vert:HJ,meshphysical_frag:WJ,meshtoon_vert:GJ,meshtoon_frag:$J,points_vert:XJ,points_frag:qJ,shadow_vert:YJ,shadow_frag:KJ,sprite_vert:ZJ,sprite_frag:JJ},Ue={common:{diffuse:{value:new Xe(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Bt},alphaMap:{value:null},alphaMapTransform:{value:new Bt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Bt}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Bt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Bt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Bt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Bt},normalScale:{value:new me(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Bt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Bt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Bt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Bt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Xe(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Xe(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Bt},alphaTest:{value:0},uvTransform:{value:new Bt}},sprite:{diffuse:{value:new Xe(16777215)},opacity:{value:1},center:{value:new me(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Bt},alphaMap:{value:null},alphaMapTransform:{value:new Bt},alphaTest:{value:0}}},Cs={basic:{uniforms:$r([Ue.common,Ue.specularmap,Ue.envmap,Ue.aomap,Ue.lightmap,Ue.fog]),vertexShader:Dt.meshbasic_vert,fragmentShader:Dt.meshbasic_frag},lambert:{uniforms:$r([Ue.common,Ue.specularmap,Ue.envmap,Ue.aomap,Ue.lightmap,Ue.emissivemap,Ue.bumpmap,Ue.normalmap,Ue.displacementmap,Ue.fog,Ue.lights,{emissive:{value:new Xe(0)}}]),vertexShader:Dt.meshlambert_vert,fragmentShader:Dt.meshlambert_frag},phong:{uniforms:$r([Ue.common,Ue.specularmap,Ue.envmap,Ue.aomap,Ue.lightmap,Ue.emissivemap,Ue.bumpmap,Ue.normalmap,Ue.displacementmap,Ue.fog,Ue.lights,{emissive:{value:new Xe(0)},specular:{value:new Xe(1118481)},shininess:{value:30}}]),vertexShader:Dt.meshphong_vert,fragmentShader:Dt.meshphong_frag},standard:{uniforms:$r([Ue.common,Ue.envmap,Ue.aomap,Ue.lightmap,Ue.emissivemap,Ue.bumpmap,Ue.normalmap,Ue.displacementmap,Ue.roughnessmap,Ue.metalnessmap,Ue.fog,Ue.lights,{emissive:{value:new Xe(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Dt.meshphysical_vert,fragmentShader:Dt.meshphysical_frag},toon:{uniforms:$r([Ue.common,Ue.aomap,Ue.lightmap,Ue.emissivemap,Ue.bumpmap,Ue.normalmap,Ue.displacementmap,Ue.gradientmap,Ue.fog,Ue.lights,{emissive:{value:new Xe(0)}}]),vertexShader:Dt.meshtoon_vert,fragmentShader:Dt.meshtoon_frag},matcap:{uniforms:$r([Ue.common,Ue.bumpmap,Ue.normalmap,Ue.displacementmap,Ue.fog,{matcap:{value:null}}]),vertexShader:Dt.meshmatcap_vert,fragmentShader:Dt.meshmatcap_frag},points:{uniforms:$r([Ue.points,Ue.fog]),vertexShader:Dt.points_vert,fragmentShader:Dt.points_frag},dashed:{uniforms:$r([Ue.common,Ue.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Dt.linedashed_vert,fragmentShader:Dt.linedashed_frag},depth:{uniforms:$r([Ue.common,Ue.displacementmap]),vertexShader:Dt.depth_vert,fragmentShader:Dt.depth_frag},normal:{uniforms:$r([Ue.common,Ue.bumpmap,Ue.normalmap,Ue.displacementmap,{opacity:{value:1}}]),vertexShader:Dt.meshnormal_vert,fragmentShader:Dt.meshnormal_frag},sprite:{uniforms:$r([Ue.sprite,Ue.fog]),vertexShader:Dt.sprite_vert,fragmentShader:Dt.sprite_frag},background:{uniforms:{uvTransform:{value:new Bt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Dt.background_vert,fragmentShader:Dt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:Dt.backgroundCube_vert,fragmentShader:Dt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Dt.cube_vert,fragmentShader:Dt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Dt.equirect_vert,fragmentShader:Dt.equirect_frag},distanceRGBA:{uniforms:$r([Ue.common,Ue.displacementmap,{referencePosition:{value:new j},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Dt.distanceRGBA_vert,fragmentShader:Dt.distanceRGBA_frag},shadow:{uniforms:$r([Ue.lights,Ue.fog,{color:{value:new Xe(0)},opacity:{value:1}}]),vertexShader:Dt.shadow_vert,fragmentShader:Dt.shadow_frag}};Cs.physical={uniforms:$r([Cs.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Bt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Bt},clearcoatNormalScale:{value:new me(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Bt},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Bt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Bt},sheen:{value:0},sheenColor:{value:new Xe(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Bt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Bt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Bt},transmissionSamplerSize:{value:new me},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Bt},attenuationDistance:{value:0},attenuationColor:{value:new Xe(0)},specularColor:{value:new Xe(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Bt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Bt},anisotropyVector:{value:new me},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Bt}}]),vertexShader:Dt.meshphysical_vert,fragmentShader:Dt.meshphysical_frag};const Qg={r:0,b:0,g:0};function QJ(n,e,t,r,i,s,o){const a=new Xe(0);let l=s===!0?0:1,c,d,f=null,p=0,m=null;function v(y,g){let w=!1,S=g.isScene===!0?g.background:null;S&&S.isTexture&&(S=(g.backgroundBlurriness>0?t:e).get(S)),S===null?x(a,l):S&&S.isColor&&(x(S,1),w=!0);const E=n.xr.getEnvironmentBlendMode();E==="additive"?r.buffers.color.setClear(0,0,0,1,o):E==="alpha-blend"&&r.buffers.color.setClear(0,0,0,0,o),(n.autoClear||w)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),S&&(S.isCubeTexture||S.mapping===lh)?(d===void 0&&(d=new sr(new Hc(1,1,1),new mo({name:"BackgroundCubeMaterial",uniforms:$d(Cs.backgroundCube.uniforms),vertexShader:Cs.backgroundCube.vertexShader,fragmentShader:Cs.backgroundCube.fragmentShader,side:Qr,depthTest:!1,depthWrite:!1,fog:!1})),d.geometry.deleteAttribute("normal"),d.geometry.deleteAttribute("uv"),d.onBeforeRender=function(A,T,P){this.matrixWorld.copyPosition(P.matrixWorld)},Object.defineProperty(d.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(d)),d.material.uniforms.envMap.value=S,d.material.uniforms.flipEnvMap.value=S.isCubeTexture&&S.isRenderTargetTexture===!1?-1:1,d.material.uniforms.backgroundBlurriness.value=g.backgroundBlurriness,d.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,d.material.toneMapped=rn.getTransfer(S.colorSpace)!==un,(f!==S||p!==S.version||m!==n.toneMapping)&&(d.material.needsUpdate=!0,f=S,p=S.version,m=n.toneMapping),d.layers.enableAll(),y.unshift(d,d.geometry,d.material,0,0,null)):S&&S.isTexture&&(c===void 0&&(c=new sr(new im(2,2),new mo({name:"BackgroundMaterial",uniforms:$d(Cs.background.uniforms),vertexShader:Cs.background.vertexShader,fragmentShader:Cs.background.fragmentShader,side:ea,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(c)),c.material.uniforms.t2D.value=S,c.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,c.material.toneMapped=rn.getTransfer(S.colorSpace)!==un,S.matrixAutoUpdate===!0&&S.updateMatrix(),c.material.uniforms.uvTransform.value.copy(S.matrix),(f!==S||p!==S.version||m!==n.toneMapping)&&(c.material.needsUpdate=!0,f=S,p=S.version,m=n.toneMapping),c.layers.enableAll(),y.unshift(c,c.geometry,c.material,0,0,null))}function x(y,g){y.getRGB(Qg,JF(n)),r.buffers.color.setClear(Qg.r,Qg.g,Qg.b,g,o)}return{getClearColor:function(){return a},setClearColor:function(y,g=1){a.set(y),l=g,x(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(y){l=y,x(a,l)},render:v}}function eQ(n,e,t,r){const i=n.getParameter(n.MAX_VERTEX_ATTRIBS),s=r.isWebGL2?null:e.get("OES_vertex_array_object"),o=r.isWebGL2||s!==null,a={},l=y(null);let c=l,d=!1;function f(z,Z,J,te,L){let U=!1;if(o){const V=x(te,J,Z);c!==V&&(c=V,m(c.object)),U=g(z,te,J,L),U&&w(z,te,J,L)}else{const V=Z.wireframe===!0;(c.geometry!==te.id||c.program!==J.id||c.wireframe!==V)&&(c.geometry=te.id,c.program=J.id,c.wireframe=V,U=!0)}L!==null&&t.update(L,n.ELEMENT_ARRAY_BUFFER),(U||d)&&(d=!1,k(z,Z,J,te),L!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.get(L).buffer))}function p(){return r.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}function m(z){return r.isWebGL2?n.bindVertexArray(z):s.bindVertexArrayOES(z)}function v(z){return r.isWebGL2?n.deleteVertexArray(z):s.deleteVertexArrayOES(z)}function x(z,Z,J){const te=J.wireframe===!0;let L=a[z.id];L===void 0&&(L={},a[z.id]=L);let U=L[Z.id];U===void 0&&(U={},L[Z.id]=U);let V=U[te];return V===void 0&&(V=y(p()),U[te]=V),V}function y(z){const Z=[],J=[],te=[];for(let L=0;L<i;L++)Z[L]=0,J[L]=0,te[L]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Z,enabledAttributes:J,attributeDivisors:te,object:z,attributes:{},index:null}}function g(z,Z,J,te){const L=c.attributes,U=Z.attributes;let V=0;const Y=J.getAttributes();for(const Q in Y)if(Y[Q].location>=0){const oe=L[Q];let xe=U[Q];if(xe===void 0&&(Q==="instanceMatrix"&&z.instanceMatrix&&(xe=z.instanceMatrix),Q==="instanceColor"&&z.instanceColor&&(xe=z.instanceColor)),oe===void 0||oe.attribute!==xe||xe&&oe.data!==xe.data)return!0;V++}return c.attributesNum!==V||c.index!==te}function w(z,Z,J,te){const L={},U=Z.attributes;let V=0;const Y=J.getAttributes();for(const Q in Y)if(Y[Q].location>=0){let oe=U[Q];oe===void 0&&(Q==="instanceMatrix"&&z.instanceMatrix&&(oe=z.instanceMatrix),Q==="instanceColor"&&z.instanceColor&&(oe=z.instanceColor));const xe={};xe.attribute=oe,oe&&oe.data&&(xe.data=oe.data),L[Q]=xe,V++}c.attributes=L,c.attributesNum=V,c.index=te}function S(){const z=c.newAttributes;for(let Z=0,J=z.length;Z<J;Z++)z[Z]=0}function E(z){A(z,0)}function A(z,Z){const J=c.newAttributes,te=c.enabledAttributes,L=c.attributeDivisors;J[z]=1,te[z]===0&&(n.enableVertexAttribArray(z),te[z]=1),L[z]!==Z&&((r.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](z,Z),L[z]=Z)}function T(){const z=c.newAttributes,Z=c.enabledAttributes;for(let J=0,te=Z.length;J<te;J++)Z[J]!==z[J]&&(n.disableVertexAttribArray(J),Z[J]=0)}function P(z,Z,J,te,L,U,V){V===!0?n.vertexAttribIPointer(z,Z,J,L,U):n.vertexAttribPointer(z,Z,J,te,L,U)}function k(z,Z,J,te){if(r.isWebGL2===!1&&(z.isInstancedMesh||te.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;S();const L=te.attributes,U=J.getAttributes(),V=Z.defaultAttributeValues;for(const Y in U){const Q=U[Y];if(Q.location>=0){let K=L[Y];if(K===void 0&&(Y==="instanceMatrix"&&z.instanceMatrix&&(K=z.instanceMatrix),Y==="instanceColor"&&z.instanceColor&&(K=z.instanceColor)),K!==void 0){const oe=K.normalized,xe=K.itemSize,Ae=t.get(K);if(Ae===void 0)continue;const we=Ae.buffer,lt=Ae.type,ct=Ae.bytesPerElement,He=r.isWebGL2===!0&&(lt===n.INT||lt===n.UNSIGNED_INT||K.gpuType===rT);if(K.isInterleavedBufferAttribute){const Ye=K.data,$=Ye.stride,Se=K.offset;if(Ye.isInstancedInterleavedBuffer){for(let fe=0;fe<Q.locationSize;fe++)A(Q.location+fe,Ye.meshPerAttribute);z.isInstancedMesh!==!0&&te._maxInstanceCount===void 0&&(te._maxInstanceCount=Ye.meshPerAttribute*Ye.count)}else for(let fe=0;fe<Q.locationSize;fe++)E(Q.location+fe);n.bindBuffer(n.ARRAY_BUFFER,we);for(let fe=0;fe<Q.locationSize;fe++)P(Q.location+fe,xe/Q.locationSize,lt,oe,$*ct,(Se+xe/Q.locationSize*fe)*ct,He)}else{if(K.isInstancedBufferAttribute){for(let Ye=0;Ye<Q.locationSize;Ye++)A(Q.location+Ye,K.meshPerAttribute);z.isInstancedMesh!==!0&&te._maxInstanceCount===void 0&&(te._maxInstanceCount=K.meshPerAttribute*K.count)}else for(let Ye=0;Ye<Q.locationSize;Ye++)E(Q.location+Ye);n.bindBuffer(n.ARRAY_BUFFER,we);for(let Ye=0;Ye<Q.locationSize;Ye++)P(Q.location+Ye,xe/Q.locationSize,lt,oe,xe*ct,xe/Q.locationSize*Ye*ct,He)}}else if(V!==void 0){const oe=V[Y];if(oe!==void 0)switch(oe.length){case 2:n.vertexAttrib2fv(Q.location,oe);break;case 3:n.vertexAttrib3fv(Q.location,oe);break;case 4:n.vertexAttrib4fv(Q.location,oe);break;default:n.vertexAttrib1fv(Q.location,oe)}}}}T()}function R(){G();for(const z in a){const Z=a[z];for(const J in Z){const te=Z[J];for(const L in te)v(te[L].object),delete te[L];delete Z[J]}delete a[z]}}function I(z){if(a[z.id]===void 0)return;const Z=a[z.id];for(const J in Z){const te=Z[J];for(const L in te)v(te[L].object),delete te[L];delete Z[J]}delete a[z.id]}function H(z){for(const Z in a){const J=a[Z];if(J[z.id]===void 0)continue;const te=J[z.id];for(const L in te)v(te[L].object),delete te[L];delete J[z.id]}}function G(){re(),d=!0,c!==l&&(c=l,m(c.object))}function re(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:f,reset:G,resetDefaultState:re,dispose:R,releaseStatesOfGeometry:I,releaseStatesOfProgram:H,initAttributes:S,enableAttribute:E,disableUnusedAttributes:T}}function tQ(n,e,t,r){const i=r.isWebGL2;let s;function o(d){s=d}function a(d,f){n.drawArrays(s,d,f),t.update(f,s,1)}function l(d,f,p){if(p===0)return;let m,v;if(i)m=n,v="drawArraysInstanced";else if(m=e.get("ANGLE_instanced_arrays"),v="drawArraysInstancedANGLE",m===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}m[v](s,d,f,p),t.update(f,s,p)}function c(d,f,p){if(p===0)return;const m=e.get("WEBGL_multi_draw");if(m===null)for(let v=0;v<p;v++)this.render(d[v],f[v]);else{m.multiDrawArraysWEBGL(s,d,0,f,0,p);let v=0;for(let x=0;x<p;x++)v+=f[x];t.update(v,s,1)}}this.setMode=o,this.render=a,this.renderInstances=l,this.renderMultiDraw=c}function nQ(n,e,t){let r;function i(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const P=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(P.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function s(P){if(P==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";P="mediump"}return P==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&n.constructor.name==="WebGL2RenderingContext";let a=t.precision!==void 0?t.precision:"highp";const l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const c=o||e.has("WEBGL_draw_buffers"),d=t.logarithmicDepthBuffer===!0,f=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),p=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),m=n.getParameter(n.MAX_TEXTURE_SIZE),v=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),x=n.getParameter(n.MAX_VERTEX_ATTRIBS),y=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),g=n.getParameter(n.MAX_VARYING_VECTORS),w=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),S=p>0,E=o||e.has("OES_texture_float"),A=S&&E,T=o?n.getParameter(n.MAX_SAMPLES):0;return{isWebGL2:o,drawBuffers:c,getMaxAnisotropy:i,getMaxPrecision:s,precision:a,logarithmicDepthBuffer:d,maxTextures:f,maxVertexTextures:p,maxTextureSize:m,maxCubemapSize:v,maxAttributes:x,maxVertexUniforms:y,maxVaryings:g,maxFragmentUniforms:w,vertexTextures:S,floatFragmentTextures:E,floatVertexTextures:A,maxSamples:T}}function rQ(n){const e=this;let t=null,r=0,i=!1,s=!1;const o=new Do,a=new Bt,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(f,p){const m=f.length!==0||p||r!==0||i;return i=p,r=f.length,m},this.beginShadows=function(){s=!0,d(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(f,p){t=d(f,p,0)},this.setState=function(f,p,m){const v=f.clippingPlanes,x=f.clipIntersection,y=f.clipShadows,g=n.get(f);if(!i||v===null||v.length===0||s&&!y)s?d(null):c();else{const w=s?0:r,S=w*4;let E=g.clippingState||null;l.value=E,E=d(v,p,S,m);for(let A=0;A!==S;++A)E[A]=t[A];g.clippingState=E,this.numIntersection=x?this.numPlanes:0,this.numPlanes+=w}};function c(){l.value!==t&&(l.value=t,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function d(f,p,m,v){const x=f!==null?f.length:0;let y=null;if(x!==0){if(y=l.value,v!==!0||y===null){const g=m+x*4,w=p.matrixWorldInverse;a.getNormalMatrix(w),(y===null||y.length<g)&&(y=new Float32Array(g));for(let S=0,E=m;S!==x;++S,E+=4)o.copy(f[S]).applyMatrix4(w,a),o.normal.toArray(y,E),y[E+3]=o.constant}l.value=y,l.needsUpdate=!0}return e.numPlanes=x,e.numIntersection=0,y}}function iQ(n){let e=new WeakMap;function t(o,a){return a===hp?o.mapping=ta:a===fp&&(o.mapping=dl),o}function r(o){if(o&&o.isTexture){const a=o.mapping;if(a===hp||a===fp)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const c=new tB(l.height/2);return c.fromEquirectangularTexture(n,o),e.set(o,c),o.addEventListener("dispose",i),t(c.texture,o.mapping)}else return null}}return o}function i(o){const a=o.target;a.removeEventListener("dispose",i);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:r,dispose:s}}class tl extends tm{constructor(e=-1,t=1,r=1,i=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=i,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,r,i,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=r-e,o=r+e,a=i+t,l=i-t;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,d=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=d*this.view.offsetY,l=a-d*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const ad=4,aI=[.125,.215,.35,.446,.526,.582],rc=20,Vw=new tl,lI=new Xe;let jw=null,Hw=0,Ww=0;const tc=(1+Math.sqrt(5))/2,Eu=1/tc,cI=[new j(1,1,1),new j(-1,1,1),new j(1,1,-1),new j(-1,1,-1),new j(0,tc,Eu),new j(0,tc,-Eu),new j(Eu,0,tc),new j(-Eu,0,tc),new j(tc,Eu,0),new j(-tc,Eu,0)];class N1{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,i=100){jw=this._renderer.getRenderTarget(),Hw=this._renderer.getActiveCubeFace(),Ww=this._renderer.getActiveMipmapLevel(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,r,i,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=hI(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=dI(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(jw,Hw,Ww),e.scissorTest=!1,ev(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===ta||e.mapping===dl?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),jw=this._renderer.getRenderTarget(),Hw=this._renderer.getActiveCubeFace(),Ww=this._renderer.getActiveMipmapLevel();const r=t||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,r={magFilter:Wn,minFilter:Wn,generateMipmaps:!1,type:Hd,format:Zr,colorSpace:po,depthBuffer:!1},i=uI(e,t,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=uI(e,t,r);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=sQ(s)),this._blurMaterial=oQ(s,e,t)}return i}_compileMaterial(e){const t=new sr(this._lodPlanes[0],e);this._renderer.compile(t,Vw)}_sceneToCubeUV(e,t,r,i){const a=new Gn(90,1,t,r),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],d=this._renderer,f=d.autoClear,p=d.toneMapping;d.getClearColor(lI),d.toneMapping=lo,d.autoClear=!1;const m=new Sl({name:"PMREM.Background",side:Qr,depthWrite:!1,depthTest:!1}),v=new sr(new Hc,m);let x=!1;const y=e.background;y?y.isColor&&(m.color.copy(y),e.background=null,x=!0):(m.color.copy(lI),x=!0);for(let g=0;g<6;g++){const w=g%3;w===0?(a.up.set(0,l[g],0),a.lookAt(c[g],0,0)):w===1?(a.up.set(0,0,l[g]),a.lookAt(0,c[g],0)):(a.up.set(0,l[g],0),a.lookAt(0,0,c[g]));const S=this._cubeSize;ev(i,w*S,g>2?S:0,S,S),d.setRenderTarget(i),x&&d.render(v,a),d.render(e,a)}v.geometry.dispose(),v.material.dispose(),d.toneMapping=p,d.autoClear=f,e.background=y}_textureToCubeUV(e,t){const r=this._renderer,i=e.mapping===ta||e.mapping===dl;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=hI()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=dI());const s=i?this._cubemapMaterial:this._equirectMaterial,o=new sr(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;ev(t,0,0,3*l,2*l),r.setRenderTarget(t),r.render(o,Vw)}_applyPMREM(e){const t=this._renderer,r=t.autoClear;t.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const s=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),o=cI[(i-1)%cI.length];this._blur(e,i-1,i,s,o)}t.autoClear=r}_blur(e,t,r,i,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,r,i,"latitudinal",s),this._halfBlur(o,e,r,r,i,"longitudinal",s)}_halfBlur(e,t,r,i,s,o,a){const l=this._renderer,c=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const d=3,f=new sr(this._lodPlanes[i],c),p=c.uniforms,m=this._sizeLods[r]-1,v=isFinite(s)?Math.PI/(2*m):2*Math.PI/(2*rc-1),x=s/v,y=isFinite(s)?1+Math.floor(d*x):rc;y>rc&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${y} samples when the maximum is set to ${rc}`);const g=[];let w=0;for(let P=0;P<rc;++P){const k=P/x,R=Math.exp(-k*k/2);g.push(R),P===0?w+=R:P<y&&(w+=2*R)}for(let P=0;P<g.length;P++)g[P]=g[P]/w;p.envMap.value=e.texture,p.samples.value=y,p.weights.value=g,p.latitudinal.value=o==="latitudinal",a&&(p.poleAxis.value=a);const{_lodMax:S}=this;p.dTheta.value=v,p.mipInt.value=S-r;const E=this._sizeLods[i],A=3*E*(i>S-ad?i-S+ad:0),T=4*(this._cubeSize-E);ev(t,A,T,3*E,2*E),l.setRenderTarget(t),l.render(f,Vw)}}function sQ(n){const e=[],t=[],r=[];let i=n;const s=n-ad+1+aI.length;for(let o=0;o<s;o++){const a=Math.pow(2,i);t.push(a);let l=1/a;o>n-ad?l=aI[o-n+ad-1]:o===0&&(l=0),r.push(l);const c=1/(a-2),d=-c,f=1+c,p=[d,d,f,d,f,f,d,d,f,f,d,f],m=6,v=6,x=3,y=2,g=1,w=new Float32Array(x*v*m),S=new Float32Array(y*v*m),E=new Float32Array(g*v*m);for(let T=0;T<m;T++){const P=T%3*2/3-1,k=T>2?0:-1,R=[P,k,0,P+2/3,k,0,P+2/3,k+1,0,P,k,0,P+2/3,k+1,0,P,k+1,0];w.set(R,x*v*T),S.set(p,y*v*T);const I=[T,T,T,T,T,T];E.set(I,g*v*T)}const A=new zt;A.setAttribute("position",new an(w,x)),A.setAttribute("uv",new an(S,y)),A.setAttribute("faceIndex",new an(E,g)),e.push(A),i>ad&&i--}return{lodPlanes:e,sizeLods:t,sigmas:r}}function uI(n,e,t){const r=new Us(n,e,t);return r.texture.mapping=lh,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function ev(n,e,t,r,i){n.viewport.set(e,t,r,i),n.scissor.set(e,t,r,i)}function oQ(n,e,t){const r=new Float32Array(rc),i=new j(0,1,0);return new mo({name:"SphericalGaussianBlur",defines:{n:rc,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:yT(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:$o,depthTest:!1,depthWrite:!1})}function dI(){return new mo({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:yT(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:$o,depthTest:!1,depthWrite:!1})}function hI(){return new mo({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:yT(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:$o,depthTest:!1,depthWrite:!1})}function yT(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function aQ(n){let e=new WeakMap,t=null;function r(a){if(a&&a.isTexture){const l=a.mapping,c=l===hp||l===fp,d=l===ta||l===dl;if(c||d)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let f=e.get(a);return t===null&&(t=new N1(n)),f=c?t.fromEquirectangular(a,f):t.fromCubemap(a,f),e.set(a,f),f.texture}else{if(e.has(a))return e.get(a).texture;{const f=a.image;if(c&&f&&f.height>0||d&&f&&i(f)){t===null&&(t=new N1(n));const p=c?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,p),a.addEventListener("dispose",s),p.texture}else return null}}}return a}function i(a){let l=0;const c=6;for(let d=0;d<c;d++)a[d]!==void 0&&l++;return l===c}function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:r,dispose:o}}function lQ(n){const e={};function t(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=n.getExtension(r)}return e[r]=i,i}return{has:function(r){return t(r)!==null},init:function(r){r.isWebGL2?(t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance")):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(r){const i=t(r);return i===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function cQ(n,e,t,r){const i={},s=new WeakMap;function o(f){const p=f.target;p.index!==null&&e.remove(p.index);for(const v in p.attributes)e.remove(p.attributes[v]);for(const v in p.morphAttributes){const x=p.morphAttributes[v];for(let y=0,g=x.length;y<g;y++)e.remove(x[y])}p.removeEventListener("dispose",o),delete i[p.id];const m=s.get(p);m&&(e.remove(m),s.delete(p)),r.releaseStatesOfGeometry(p),p.isInstancedBufferGeometry===!0&&delete p._maxInstanceCount,t.memory.geometries--}function a(f,p){return i[p.id]===!0||(p.addEventListener("dispose",o),i[p.id]=!0,t.memory.geometries++),p}function l(f){const p=f.attributes;for(const v in p)e.update(p[v],n.ARRAY_BUFFER);const m=f.morphAttributes;for(const v in m){const x=m[v];for(let y=0,g=x.length;y<g;y++)e.update(x[y],n.ARRAY_BUFFER)}}function c(f){const p=[],m=f.index,v=f.attributes.position;let x=0;if(m!==null){const w=m.array;x=m.version;for(let S=0,E=w.length;S<E;S+=3){const A=w[S+0],T=w[S+1],P=w[S+2];p.push(A,T,T,P,P,A)}}else if(v!==void 0){const w=v.array;x=v.version;for(let S=0,E=w.length/3-1;S<E;S+=3){const A=S+0,T=S+1,P=S+2;p.push(A,T,T,P,P,A)}}else return;const y=new(qF(p)?vT:gT)(p,1);y.version=x;const g=s.get(f);g&&e.remove(g),s.set(f,y)}function d(f){const p=s.get(f);if(p){const m=f.index;m!==null&&p.version<m.version&&c(f)}else c(f);return s.get(f)}return{get:a,update:l,getWireframeAttribute:d}}function uQ(n,e,t,r){const i=r.isWebGL2;let s;function o(m){s=m}let a,l;function c(m){a=m.type,l=m.bytesPerElement}function d(m,v){n.drawElements(s,v,a,m*l),t.update(v,s,1)}function f(m,v,x){if(x===0)return;let y,g;if(i)y=n,g="drawElementsInstanced";else if(y=e.get("ANGLE_instanced_arrays"),g="drawElementsInstancedANGLE",y===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}y[g](s,v,a,m*l,x),t.update(v,s,x)}function p(m,v,x){if(x===0)return;const y=e.get("WEBGL_multi_draw");if(y===null)for(let g=0;g<x;g++)this.render(m[g]/l,v[g]);else{y.multiDrawElementsWEBGL(s,v,0,a,m,0,x);let g=0;for(let w=0;w<x;w++)g+=v[w];t.update(g,s,1)}}this.setMode=o,this.setIndex=c,this.render=d,this.renderInstances=f,this.renderMultiDraw=p}function dQ(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function r(s,o,a){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=a*(s/3);break;case n.LINES:t.lines+=a*(s/2);break;case n.LINE_STRIP:t.lines+=a*(s-1);break;case n.LINE_LOOP:t.lines+=a*s;break;case n.POINTS:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function i(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:r}}function hQ(n,e){return n[0]-e[0]}function fQ(n,e){return Math.abs(e[1])-Math.abs(n[1])}function pQ(n,e,t){const r={},i=new Float32Array(8),s=new WeakMap,o=new sn,a=[];for(let c=0;c<8;c++)a[c]=[c,0];function l(c,d,f){const p=c.morphTargetInfluences;if(e.isWebGL2===!0){const v=d.morphAttributes.position||d.morphAttributes.normal||d.morphAttributes.color,x=v!==void 0?v.length:0;let y=s.get(d);if(y===void 0||y.count!==x){let Z=function(){re.dispose(),s.delete(d),d.removeEventListener("dispose",Z)};var m=Z;y!==void 0&&y.texture.dispose();const S=d.morphAttributes.position!==void 0,E=d.morphAttributes.normal!==void 0,A=d.morphAttributes.color!==void 0,T=d.morphAttributes.position||[],P=d.morphAttributes.normal||[],k=d.morphAttributes.color||[];let R=0;S===!0&&(R=1),E===!0&&(R=2),A===!0&&(R=3);let I=d.attributes.position.count*R,H=1;I>e.maxTextureSize&&(H=Math.ceil(I/e.maxTextureSize),I=e.maxTextureSize);const G=new Float32Array(I*H*4*x),re=new e_(G,I,H,x);re.type=Ps,re.needsUpdate=!0;const z=R*4;for(let J=0;J<x;J++){const te=T[J],L=P[J],U=k[J],V=I*H*4*J;for(let Y=0;Y<te.count;Y++){const Q=Y*z;S===!0&&(o.fromBufferAttribute(te,Y),G[V+Q+0]=o.x,G[V+Q+1]=o.y,G[V+Q+2]=o.z,G[V+Q+3]=0),E===!0&&(o.fromBufferAttribute(L,Y),G[V+Q+4]=o.x,G[V+Q+5]=o.y,G[V+Q+6]=o.z,G[V+Q+7]=0),A===!0&&(o.fromBufferAttribute(U,Y),G[V+Q+8]=o.x,G[V+Q+9]=o.y,G[V+Q+10]=o.z,G[V+Q+11]=U.itemSize===4?o.w:1)}}y={count:x,texture:re,size:new me(I,H)},s.set(d,y),d.addEventListener("dispose",Z)}let g=0;for(let S=0;S<p.length;S++)g+=p[S];const w=d.morphTargetsRelative?1:1-g;f.getUniforms().setValue(n,"morphTargetBaseInfluence",w),f.getUniforms().setValue(n,"morphTargetInfluences",p),f.getUniforms().setValue(n,"morphTargetsTexture",y.texture,t),f.getUniforms().setValue(n,"morphTargetsTextureSize",y.size)}else{const v=p===void 0?0:p.length;let x=r[d.id];if(x===void 0||x.length!==v){x=[];for(let E=0;E<v;E++)x[E]=[E,0];r[d.id]=x}for(let E=0;E<v;E++){const A=x[E];A[0]=E,A[1]=p[E]}x.sort(fQ);for(let E=0;E<8;E++)E<v&&x[E][1]?(a[E][0]=x[E][0],a[E][1]=x[E][1]):(a[E][0]=Number.MAX_SAFE_INTEGER,a[E][1]=0);a.sort(hQ);const y=d.morphAttributes.position,g=d.morphAttributes.normal;let w=0;for(let E=0;E<8;E++){const A=a[E],T=A[0],P=A[1];T!==Number.MAX_SAFE_INTEGER&&P?(y&&d.getAttribute("morphTarget"+E)!==y[T]&&d.setAttribute("morphTarget"+E,y[T]),g&&d.getAttribute("morphNormal"+E)!==g[T]&&d.setAttribute("morphNormal"+E,g[T]),i[E]=P,w+=P):(y&&d.hasAttribute("morphTarget"+E)===!0&&d.deleteAttribute("morphTarget"+E),g&&d.hasAttribute("morphNormal"+E)===!0&&d.deleteAttribute("morphNormal"+E),i[E]=0)}const S=d.morphTargetsRelative?1:1-w;f.getUniforms().setValue(n,"morphTargetBaseInfluence",S),f.getUniforms().setValue(n,"morphTargetInfluences",i)}}return{update:l}}function mQ(n,e,t,r){let i=new WeakMap;function s(l){const c=r.render.frame,d=l.geometry,f=e.get(l,d);if(i.get(f)!==c&&(e.update(f),i.set(f,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),i.get(l)!==c&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),i.set(l,c))),l.isSkinnedMesh){const p=l.skeleton;i.get(p)!==c&&(p.update(),i.set(p,c))}return f}function o(){i=new WeakMap}function a(l){const c=l.target;c.removeEventListener("dispose",a),t.remove(c.instanceMatrix),c.instanceColor!==null&&t.remove(c.instanceColor)}return{update:s,dispose:o}}class _T extends $n{constructor(e,t,r,i,s,o,a,l,c,d){if(d=d!==void 0?d:Qa,d!==Qa&&d!==Nc)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&d===Qa&&(r=Vo),r===void 0&&d===Nc&&(r=Ja),super(null,i,s,o,a,l,d,r,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:jn,this.minFilter=l!==void 0?l:jn,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}const rB=new $n,iB=new _T(1,1);iB.compareFunction=hT;const sB=new e_,oB=new mT,aB=new nm,fI=[],pI=[],mI=new Float32Array(16),gI=new Float32Array(9),vI=new Float32Array(4);function ch(n,e,t){const r=n[0];if(r<=0||r>0)return n;const i=e*t;let s=fI[i];if(s===void 0&&(s=new Float32Array(i),fI[i]=s),e!==0){r.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function or(n,e){if(n.length!==e.length)return!1;for(let t=0,r=n.length;t<r;t++)if(n[t]!==e[t])return!1;return!0}function ar(n,e){for(let t=0,r=e.length;t<r;t++)n[t]=e[t]}function t_(n,e){let t=pI[e];t===void 0&&(t=new Int32Array(e),pI[e]=t);for(let r=0;r!==e;++r)t[r]=n.allocateTextureUnit();return t}function gQ(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function vQ(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(or(t,e))return;n.uniform2fv(this.addr,e),ar(t,e)}}function yQ(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(or(t,e))return;n.uniform3fv(this.addr,e),ar(t,e)}}function _Q(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(or(t,e))return;n.uniform4fv(this.addr,e),ar(t,e)}}function xQ(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(or(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),ar(t,e)}else{if(or(t,r))return;vI.set(r),n.uniformMatrix2fv(this.addr,!1,vI),ar(t,r)}}function wQ(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(or(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),ar(t,e)}else{if(or(t,r))return;gI.set(r),n.uniformMatrix3fv(this.addr,!1,gI),ar(t,r)}}function SQ(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(or(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),ar(t,e)}else{if(or(t,r))return;mI.set(r),n.uniformMatrix4fv(this.addr,!1,mI),ar(t,r)}}function bQ(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function EQ(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(or(t,e))return;n.uniform2iv(this.addr,e),ar(t,e)}}function MQ(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(or(t,e))return;n.uniform3iv(this.addr,e),ar(t,e)}}function TQ(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(or(t,e))return;n.uniform4iv(this.addr,e),ar(t,e)}}function AQ(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function CQ(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(or(t,e))return;n.uniform2uiv(this.addr,e),ar(t,e)}}function PQ(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(or(t,e))return;n.uniform3uiv(this.addr,e),ar(t,e)}}function RQ(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(or(t,e))return;n.uniform4uiv(this.addr,e),ar(t,e)}}function IQ(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i);const s=this.type===n.SAMPLER_2D_SHADOW?iB:rB;t.setTexture2D(e||s,i)}function LQ(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture3D(e||oB,i)}function kQ(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTextureCube(e||aB,i)}function OQ(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2DArray(e||sB,i)}function NQ(n){switch(n){case 5126:return gQ;case 35664:return vQ;case 35665:return yQ;case 35666:return _Q;case 35674:return xQ;case 35675:return wQ;case 35676:return SQ;case 5124:case 35670:return bQ;case 35667:case 35671:return EQ;case 35668:case 35672:return MQ;case 35669:case 35673:return TQ;case 5125:return AQ;case 36294:return CQ;case 36295:return PQ;case 36296:return RQ;case 35678:case 36198:case 36298:case 36306:case 35682:return IQ;case 35679:case 36299:case 36307:return LQ;case 35680:case 36300:case 36308:case 36293:return kQ;case 36289:case 36303:case 36311:case 36292:return OQ}}function DQ(n,e){n.uniform1fv(this.addr,e)}function UQ(n,e){const t=ch(e,this.size,2);n.uniform2fv(this.addr,t)}function FQ(n,e){const t=ch(e,this.size,3);n.uniform3fv(this.addr,t)}function BQ(n,e){const t=ch(e,this.size,4);n.uniform4fv(this.addr,t)}function zQ(n,e){const t=ch(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function VQ(n,e){const t=ch(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function jQ(n,e){const t=ch(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function HQ(n,e){n.uniform1iv(this.addr,e)}function WQ(n,e){n.uniform2iv(this.addr,e)}function GQ(n,e){n.uniform3iv(this.addr,e)}function $Q(n,e){n.uniform4iv(this.addr,e)}function XQ(n,e){n.uniform1uiv(this.addr,e)}function qQ(n,e){n.uniform2uiv(this.addr,e)}function YQ(n,e){n.uniform3uiv(this.addr,e)}function KQ(n,e){n.uniform4uiv(this.addr,e)}function ZQ(n,e,t){const r=this.cache,i=e.length,s=t_(t,i);or(r,s)||(n.uniform1iv(this.addr,s),ar(r,s));for(let o=0;o!==i;++o)t.setTexture2D(e[o]||rB,s[o])}function JQ(n,e,t){const r=this.cache,i=e.length,s=t_(t,i);or(r,s)||(n.uniform1iv(this.addr,s),ar(r,s));for(let o=0;o!==i;++o)t.setTexture3D(e[o]||oB,s[o])}function QQ(n,e,t){const r=this.cache,i=e.length,s=t_(t,i);or(r,s)||(n.uniform1iv(this.addr,s),ar(r,s));for(let o=0;o!==i;++o)t.setTextureCube(e[o]||aB,s[o])}function eee(n,e,t){const r=this.cache,i=e.length,s=t_(t,i);or(r,s)||(n.uniform1iv(this.addr,s),ar(r,s));for(let o=0;o!==i;++o)t.setTexture2DArray(e[o]||sB,s[o])}function tee(n){switch(n){case 5126:return DQ;case 35664:return UQ;case 35665:return FQ;case 35666:return BQ;case 35674:return zQ;case 35675:return VQ;case 35676:return jQ;case 5124:case 35670:return HQ;case 35667:case 35671:return WQ;case 35668:case 35672:return GQ;case 35669:case 35673:return $Q;case 5125:return XQ;case 36294:return qQ;case 36295:return YQ;case 36296:return KQ;case 35678:case 36198:case 36298:case 36306:case 35682:return ZQ;case 35679:case 36299:case 36307:return JQ;case 35680:case 36300:case 36308:case 36293:return QQ;case 36289:case 36303:case 36311:case 36292:return eee}}class nee{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.type=t.type,this.setValue=NQ(t.type)}}class ree{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=tee(t.type)}}class iee{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,r){const i=this.seq;for(let s=0,o=i.length;s!==o;++s){const a=i[s];a.setValue(e,t[a.id],r)}}}const Gw=/(\w+)(\])?(\[|\.)?/g;function yI(n,e){n.seq.push(e),n.map[e.id]=e}function see(n,e,t){const r=n.name,i=r.length;for(Gw.lastIndex=0;;){const s=Gw.exec(r),o=Gw.lastIndex;let a=s[1];const l=s[2]==="]",c=s[3];if(l&&(a=a|0),c===void 0||c==="["&&o+2===i){yI(t,c===void 0?new nee(a,n,e):new ree(a,n,e));break}else{let f=t.map[a];f===void 0&&(f=new iee(a),yI(t,f)),t=f}}}class ay{constructor(e,t){this.seq=[],this.map={};const r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){const s=e.getActiveUniform(t,i),o=e.getUniformLocation(t,s.name);see(s,o,this)}}setValue(e,t,r,i){const s=this.map[t];s!==void 0&&s.setValue(e,r,i)}setOptional(e,t,r){const i=t[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,t,r,i){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=r[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,i)}}static seqWithValue(e,t){const r=[];for(let i=0,s=e.length;i!==s;++i){const o=e[i];o.id in t&&r.push(o)}return r}}function _I(n,e,t){const r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),r}const oee=37297;let aee=0;function lee(n,e){const t=n.split(`
`),r=[],i=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=i;o<s;o++){const a=o+1;r.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return r.join(`
`)}function cee(n){const e=rn.getPrimaries(rn.workingColorSpace),t=rn.getPrimaries(n);let r;switch(e===t?r="":e===wp&&t===xp?r="LinearDisplayP3ToLinearSRGB":e===xp&&t===wp&&(r="LinearSRGBToLinearDisplayP3"),n){case po:case Qp:return[r,"LinearTransferOETF"];case tr:case Q0:return[r,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",n),[r,"LinearTransferOETF"]}}function xI(n,e,t){const r=n.getShaderParameter(e,n.COMPILE_STATUS),i=n.getShaderInfoLog(e).trim();if(r&&i==="")return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+i+`

`+lee(n.getShaderSource(e),o)}else return i}function uee(n,e){const t=cee(e);return`vec4 ${n}( vec4 value ) { return ${t[0]}( ${t[1]}( value ) ); }`}function dee(n,e){let t;switch(e){case wF:t="Linear";break;case SF:t="Reinhard";break;case bF:t="OptimizedCineon";break;case tT:t="ACESFilmic";break;case MF:t="AgX";break;case EF:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function hee(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.normalMapTangentSpace||n.clearcoatNormalMap||n.flatShading||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(ld).join(`
`)}function fee(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":""].filter(ld).join(`
`)}function pee(n){const e=[];for(const t in n){const r=n[t];r!==!1&&e.push("#define "+t+" "+r)}return e.join(`
`)}function mee(n,e){const t={},r=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const s=n.getActiveAttrib(e,i),o=s.name;let a=1;s.type===n.FLOAT_MAT2&&(a=2),s.type===n.FLOAT_MAT3&&(a=3),s.type===n.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function ld(n){return n!==""}function wI(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function SI(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const gee=/^[ \t]*#include +<([\w\d./]+)>/gm;function D1(n){return n.replace(gee,yee)}const vee=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function yee(n,e){let t=Dt[e];if(t===void 0){const r=vee.get(e);if(r!==void 0)t=Dt[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return D1(t)}const _ee=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function bI(n){return n.replace(_ee,xee)}function xee(n,e,t,r){let i="";for(let s=parseInt(e);s<parseInt(t);s++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function EI(n){let e="precision "+n.precision+` float;
precision `+n.precision+" int;";return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function wee(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===Y0?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===Rf?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===ws&&(e="SHADOWMAP_TYPE_VSM"),e}function See(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case ta:case dl:e="ENVMAP_TYPE_CUBE";break;case lh:e="ENVMAP_TYPE_CUBE_UV";break}return e}function bee(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case dl:e="ENVMAP_MODE_REFRACTION";break}return e}function Eee(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case Jp:e="ENVMAP_BLENDING_MULTIPLY";break;case _F:e="ENVMAP_BLENDING_MIX";break;case xF:e="ENVMAP_BLENDING_ADD";break}return e}function Mee(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:r,maxMip:t}}function Tee(n,e,t,r){const i=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=wee(t),c=See(t),d=bee(t),f=Eee(t),p=Mee(t),m=t.isWebGL2?"":hee(t),v=fee(t),x=pee(s),y=i.createProgram();let g,w,S=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(g=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,x].filter(ld).join(`
`),g.length>0&&(g+=`
`),w=[m,"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,x].filter(ld).join(`
`),w.length>0&&(w+=`
`)):(g=[EI(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,x,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+d:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(ld).join(`
`),w=[m,EI(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,x,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+d:"",t.envMap?"#define "+f:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==lo?"#define TONE_MAPPING":"",t.toneMapping!==lo?Dt.tonemapping_pars_fragment:"",t.toneMapping!==lo?dee("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Dt.colorspace_pars_fragment,uee("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(ld).join(`
`)),o=D1(o),o=wI(o,t),o=SI(o,t),a=D1(a),a=wI(a,t),a=SI(a,t),o=bI(o),a=bI(a),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(S=`#version 300 es
`,g=[v,"precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+g,w=["precision mediump sampler2DArray;","#define varying in",t.glslVersion===k1?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===k1?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+w);const E=S+g+o,A=S+w+a,T=_I(i,i.VERTEX_SHADER,E),P=_I(i,i.FRAGMENT_SHADER,A);i.attachShader(y,T),i.attachShader(y,P),t.index0AttributeName!==void 0?i.bindAttribLocation(y,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(y,0,"position"),i.linkProgram(y);function k(G){if(n.debug.checkShaderErrors){const re=i.getProgramInfoLog(y).trim(),z=i.getShaderInfoLog(T).trim(),Z=i.getShaderInfoLog(P).trim();let J=!0,te=!0;if(i.getProgramParameter(y,i.LINK_STATUS)===!1)if(J=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(i,y,T,P);else{const L=xI(i,T,"vertex"),U=xI(i,P,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(y,i.VALIDATE_STATUS)+`

Program Info Log: `+re+`
`+L+`
`+U)}else re!==""?console.warn("THREE.WebGLProgram: Program Info Log:",re):(z===""||Z==="")&&(te=!1);te&&(G.diagnostics={runnable:J,programLog:re,vertexShader:{log:z,prefix:g},fragmentShader:{log:Z,prefix:w}})}i.deleteShader(T),i.deleteShader(P),R=new ay(i,y),I=mee(i,y)}let R;this.getUniforms=function(){return R===void 0&&k(this),R};let I;this.getAttributes=function(){return I===void 0&&k(this),I};let H=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return H===!1&&(H=i.getProgramParameter(y,oee)),H},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(y),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=aee++,this.cacheKey=e,this.usedTimes=1,this.program=y,this.vertexShader=T,this.fragmentShader=P,this}let Aee=0;class Cee{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(t),s=this._getShaderStage(r),o=this._getShaderCacheForMaterial(e);return o.has(i)===!1&&(o.add(i),i.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const r of t)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let r=t.get(e);return r===void 0&&(r=new Set,t.set(e,r)),r}_getShaderStage(e){const t=this.shaderCache;let r=t.get(e);return r===void 0&&(r=new Pee(e),t.set(e,r)),r}}class Pee{constructor(e){this.id=Aee++,this.code=e,this.usedTimes=0}}function Ree(n,e,t,r,i,s,o){const a=new Tc,l=new Cee,c=[],d=i.isWebGL2,f=i.logarithmicDepthBuffer,p=i.vertexTextures;let m=i.precision;const v={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function x(R){return R===0?"uv":`uv${R}`}function y(R,I,H,G,re){const z=G.fog,Z=re.geometry,J=R.isMeshStandardMaterial?G.environment:null,te=(R.isMeshStandardMaterial?t:e).get(R.envMap||J),L=te&&te.mapping===lh?te.image.height:null,U=v[R.type];R.precision!==null&&(m=i.getMaxPrecision(R.precision),m!==R.precision&&console.warn("THREE.WebGLProgram.getParameters:",R.precision,"not supported, using",m,"instead."));const V=Z.morphAttributes.position||Z.morphAttributes.normal||Z.morphAttributes.color,Y=V!==void 0?V.length:0;let Q=0;Z.morphAttributes.position!==void 0&&(Q=1),Z.morphAttributes.normal!==void 0&&(Q=2),Z.morphAttributes.color!==void 0&&(Q=3);let K,oe,xe,Ae;if(U){const Xt=Cs[U];K=Xt.vertexShader,oe=Xt.fragmentShader}else K=R.vertexShader,oe=R.fragmentShader,l.update(R),xe=l.getVertexShaderID(R),Ae=l.getFragmentShaderID(R);const we=n.getRenderTarget(),lt=re.isInstancedMesh===!0,ct=re.isBatchedMesh===!0,He=!!R.map,Ye=!!R.matcap,$=!!te,Se=!!R.aoMap,fe=!!R.lightMap,Ce=!!R.bumpMap,pe=!!R.normalMap,et=!!R.displacementMap,De=!!R.emissiveMap,F=!!R.metalnessMap,O=!!R.roughnessMap,ie=R.anisotropy>0,Me=R.clearcoat>0,_e=R.iridescence>0,ve=R.sheen>0,Qe=R.transmission>0,Re=ie&&!!R.anisotropyMap,Fe=Me&&!!R.clearcoatMap,ut=Me&&!!R.clearcoatNormalMap,bt=Me&&!!R.clearcoatRoughnessMap,be=_e&&!!R.iridescenceMap,Wt=_e&&!!R.iridescenceThicknessMap,Ct=ve&&!!R.sheenColorMap,vt=ve&&!!R.sheenRoughnessMap,tt=!!R.specularMap,We=!!R.specularColorMap,X=!!R.specularIntensityMap,ye=Qe&&!!R.transmissionMap,Ve=Qe&&!!R.thicknessMap,Be=!!R.gradientMap,Te=!!R.alphaMap,q=R.alphaTest>0,Ie=!!R.alphaHash,Oe=!!R.extensions,pt=!!Z.attributes.uv1,Ee=!!Z.attributes.uv2,qe=!!Z.attributes.uv3;let it=lo;return R.toneMapped&&(we===null||we.isXRRenderTarget===!0)&&(it=n.toneMapping),{isWebGL2:d,shaderID:U,shaderType:R.type,shaderName:R.name,vertexShader:K,fragmentShader:oe,defines:R.defines,customVertexShaderID:xe,customFragmentShaderID:Ae,isRawShaderMaterial:R.isRawShaderMaterial===!0,glslVersion:R.glslVersion,precision:m,batching:ct,instancing:lt,instancingColor:lt&&re.instanceColor!==null,supportsVertexTextures:p,outputColorSpace:we===null?n.outputColorSpace:we.isXRRenderTarget===!0?we.texture.colorSpace:po,map:He,matcap:Ye,envMap:$,envMapMode:$&&te.mapping,envMapCubeUVHeight:L,aoMap:Se,lightMap:fe,bumpMap:Ce,normalMap:pe,displacementMap:p&&et,emissiveMap:De,normalMapObjectSpace:pe&&R.normalMapType===zF,normalMapTangentSpace:pe&&R.normalMapType===wl,metalnessMap:F,roughnessMap:O,anisotropy:ie,anisotropyMap:Re,clearcoat:Me,clearcoatMap:Fe,clearcoatNormalMap:ut,clearcoatRoughnessMap:bt,iridescence:_e,iridescenceMap:be,iridescenceThicknessMap:Wt,sheen:ve,sheenColorMap:Ct,sheenRoughnessMap:vt,specularMap:tt,specularColorMap:We,specularIntensityMap:X,transmission:Qe,transmissionMap:ye,thicknessMap:Ve,gradientMap:Be,opaque:R.transparent===!1&&R.blending===Ec,alphaMap:Te,alphaTest:q,alphaHash:Ie,combine:R.combine,mapUv:He&&x(R.map.channel),aoMapUv:Se&&x(R.aoMap.channel),lightMapUv:fe&&x(R.lightMap.channel),bumpMapUv:Ce&&x(R.bumpMap.channel),normalMapUv:pe&&x(R.normalMap.channel),displacementMapUv:et&&x(R.displacementMap.channel),emissiveMapUv:De&&x(R.emissiveMap.channel),metalnessMapUv:F&&x(R.metalnessMap.channel),roughnessMapUv:O&&x(R.roughnessMap.channel),anisotropyMapUv:Re&&x(R.anisotropyMap.channel),clearcoatMapUv:Fe&&x(R.clearcoatMap.channel),clearcoatNormalMapUv:ut&&x(R.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:bt&&x(R.clearcoatRoughnessMap.channel),iridescenceMapUv:be&&x(R.iridescenceMap.channel),iridescenceThicknessMapUv:Wt&&x(R.iridescenceThicknessMap.channel),sheenColorMapUv:Ct&&x(R.sheenColorMap.channel),sheenRoughnessMapUv:vt&&x(R.sheenRoughnessMap.channel),specularMapUv:tt&&x(R.specularMap.channel),specularColorMapUv:We&&x(R.specularColorMap.channel),specularIntensityMapUv:X&&x(R.specularIntensityMap.channel),transmissionMapUv:ye&&x(R.transmissionMap.channel),thicknessMapUv:Ve&&x(R.thicknessMap.channel),alphaMapUv:Te&&x(R.alphaMap.channel),vertexTangents:!!Z.attributes.tangent&&(pe||ie),vertexColors:R.vertexColors,vertexAlphas:R.vertexColors===!0&&!!Z.attributes.color&&Z.attributes.color.itemSize===4,vertexUv1s:pt,vertexUv2s:Ee,vertexUv3s:qe,pointsUvs:re.isPoints===!0&&!!Z.attributes.uv&&(He||Te),fog:!!z,useFog:R.fog===!0,fogExp2:z&&z.isFogExp2,flatShading:R.flatShading===!0,sizeAttenuation:R.sizeAttenuation===!0,logarithmicDepthBuffer:f,skinning:re.isSkinnedMesh===!0,morphTargets:Z.morphAttributes.position!==void 0,morphNormals:Z.morphAttributes.normal!==void 0,morphColors:Z.morphAttributes.color!==void 0,morphTargetsCount:Y,morphTextureStride:Q,numDirLights:I.directional.length,numPointLights:I.point.length,numSpotLights:I.spot.length,numSpotLightMaps:I.spotLightMap.length,numRectAreaLights:I.rectArea.length,numHemiLights:I.hemi.length,numDirLightShadows:I.directionalShadowMap.length,numPointLightShadows:I.pointShadowMap.length,numSpotLightShadows:I.spotShadowMap.length,numSpotLightShadowsWithMaps:I.numSpotLightShadowsWithMaps,numLightProbes:I.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:R.dithering,shadowMapEnabled:n.shadowMap.enabled&&H.length>0,shadowMapType:n.shadowMap.type,toneMapping:it,useLegacyLights:n._useLegacyLights,decodeVideoTexture:He&&R.map.isVideoTexture===!0&&rn.getTransfer(R.map.colorSpace)===un,premultipliedAlpha:R.premultipliedAlpha,doubleSided:R.side===to,flipSided:R.side===Qr,useDepthPacking:R.depthPacking>=0,depthPacking:R.depthPacking||0,index0AttributeName:R.index0AttributeName,extensionDerivatives:Oe&&R.extensions.derivatives===!0,extensionFragDepth:Oe&&R.extensions.fragDepth===!0,extensionDrawBuffers:Oe&&R.extensions.drawBuffers===!0,extensionShaderTextureLOD:Oe&&R.extensions.shaderTextureLOD===!0,extensionClipCullDistance:Oe&&R.extensions.clipCullDistance&&r.has("WEBGL_clip_cull_distance"),rendererExtensionFragDepth:d||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:d||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:d||r.has("EXT_shader_texture_lod"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:R.customProgramCacheKey()}}function g(R){const I=[];if(R.shaderID?I.push(R.shaderID):(I.push(R.customVertexShaderID),I.push(R.customFragmentShaderID)),R.defines!==void 0)for(const H in R.defines)I.push(H),I.push(R.defines[H]);return R.isRawShaderMaterial===!1&&(w(I,R),S(I,R),I.push(n.outputColorSpace)),I.push(R.customProgramCacheKey),I.join()}function w(R,I){R.push(I.precision),R.push(I.outputColorSpace),R.push(I.envMapMode),R.push(I.envMapCubeUVHeight),R.push(I.mapUv),R.push(I.alphaMapUv),R.push(I.lightMapUv),R.push(I.aoMapUv),R.push(I.bumpMapUv),R.push(I.normalMapUv),R.push(I.displacementMapUv),R.push(I.emissiveMapUv),R.push(I.metalnessMapUv),R.push(I.roughnessMapUv),R.push(I.anisotropyMapUv),R.push(I.clearcoatMapUv),R.push(I.clearcoatNormalMapUv),R.push(I.clearcoatRoughnessMapUv),R.push(I.iridescenceMapUv),R.push(I.iridescenceThicknessMapUv),R.push(I.sheenColorMapUv),R.push(I.sheenRoughnessMapUv),R.push(I.specularMapUv),R.push(I.specularColorMapUv),R.push(I.specularIntensityMapUv),R.push(I.transmissionMapUv),R.push(I.thicknessMapUv),R.push(I.combine),R.push(I.fogExp2),R.push(I.sizeAttenuation),R.push(I.morphTargetsCount),R.push(I.morphAttributeCount),R.push(I.numDirLights),R.push(I.numPointLights),R.push(I.numSpotLights),R.push(I.numSpotLightMaps),R.push(I.numHemiLights),R.push(I.numRectAreaLights),R.push(I.numDirLightShadows),R.push(I.numPointLightShadows),R.push(I.numSpotLightShadows),R.push(I.numSpotLightShadowsWithMaps),R.push(I.numLightProbes),R.push(I.shadowMapType),R.push(I.toneMapping),R.push(I.numClippingPlanes),R.push(I.numClipIntersection),R.push(I.depthPacking)}function S(R,I){a.disableAll(),I.isWebGL2&&a.enable(0),I.supportsVertexTextures&&a.enable(1),I.instancing&&a.enable(2),I.instancingColor&&a.enable(3),I.matcap&&a.enable(4),I.envMap&&a.enable(5),I.normalMapObjectSpace&&a.enable(6),I.normalMapTangentSpace&&a.enable(7),I.clearcoat&&a.enable(8),I.iridescence&&a.enable(9),I.alphaTest&&a.enable(10),I.vertexColors&&a.enable(11),I.vertexAlphas&&a.enable(12),I.vertexUv1s&&a.enable(13),I.vertexUv2s&&a.enable(14),I.vertexUv3s&&a.enable(15),I.vertexTangents&&a.enable(16),I.anisotropy&&a.enable(17),I.alphaHash&&a.enable(18),I.batching&&a.enable(19),R.push(a.mask),a.disableAll(),I.fog&&a.enable(0),I.useFog&&a.enable(1),I.flatShading&&a.enable(2),I.logarithmicDepthBuffer&&a.enable(3),I.skinning&&a.enable(4),I.morphTargets&&a.enable(5),I.morphNormals&&a.enable(6),I.morphColors&&a.enable(7),I.premultipliedAlpha&&a.enable(8),I.shadowMapEnabled&&a.enable(9),I.useLegacyLights&&a.enable(10),I.doubleSided&&a.enable(11),I.flipSided&&a.enable(12),I.useDepthPacking&&a.enable(13),I.dithering&&a.enable(14),I.transmission&&a.enable(15),I.sheen&&a.enable(16),I.opaque&&a.enable(17),I.pointsUvs&&a.enable(18),I.decodeVideoTexture&&a.enable(19),R.push(a.mask)}function E(R){const I=v[R.type];let H;if(I){const G=Cs[I];H=QF.clone(G.uniforms)}else H=R.uniforms;return H}function A(R,I){let H;for(let G=0,re=c.length;G<re;G++){const z=c[G];if(z.cacheKey===I){H=z,++H.usedTimes;break}}return H===void 0&&(H=new Tee(n,I,R,s),c.push(H)),H}function T(R){if(--R.usedTimes===0){const I=c.indexOf(R);c[I]=c[c.length-1],c.pop(),R.destroy()}}function P(R){l.remove(R)}function k(){l.dispose()}return{getParameters:y,getProgramCacheKey:g,getUniforms:E,acquireProgram:A,releaseProgram:T,releaseShaderCache:P,programs:c,dispose:k}}function Iee(){let n=new WeakMap;function e(s){let o=n.get(s);return o===void 0&&(o={},n.set(s,o)),o}function t(s){n.delete(s)}function r(s,o,a){n.get(s)[o]=a}function i(){n=new WeakMap}return{get:e,remove:t,update:r,dispose:i}}function Lee(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function MI(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function TI(){const n=[];let e=0;const t=[],r=[],i=[];function s(){e=0,t.length=0,r.length=0,i.length=0}function o(f,p,m,v,x,y){let g=n[e];return g===void 0?(g={id:f.id,object:f,geometry:p,material:m,groupOrder:v,renderOrder:f.renderOrder,z:x,group:y},n[e]=g):(g.id=f.id,g.object=f,g.geometry=p,g.material=m,g.groupOrder=v,g.renderOrder=f.renderOrder,g.z=x,g.group=y),e++,g}function a(f,p,m,v,x,y){const g=o(f,p,m,v,x,y);m.transmission>0?r.push(g):m.transparent===!0?i.push(g):t.push(g)}function l(f,p,m,v,x,y){const g=o(f,p,m,v,x,y);m.transmission>0?r.unshift(g):m.transparent===!0?i.unshift(g):t.unshift(g)}function c(f,p){t.length>1&&t.sort(f||Lee),r.length>1&&r.sort(p||MI),i.length>1&&i.sort(p||MI)}function d(){for(let f=e,p=n.length;f<p;f++){const m=n[f];if(m.id===null)break;m.id=null,m.object=null,m.geometry=null,m.material=null,m.group=null}}return{opaque:t,transmissive:r,transparent:i,init:s,push:a,unshift:l,finish:d,sort:c}}function kee(){let n=new WeakMap;function e(r,i){const s=n.get(r);let o;return s===void 0?(o=new TI,n.set(r,[o])):i>=s.length?(o=new TI,s.push(o)):o=s[i],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function Oee(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new j,color:new Xe};break;case"SpotLight":t={position:new j,direction:new j,color:new Xe,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new j,color:new Xe,distance:0,decay:0};break;case"HemisphereLight":t={direction:new j,skyColor:new Xe,groundColor:new Xe};break;case"RectAreaLight":t={color:new Xe,position:new j,halfWidth:new j,halfHeight:new j};break}return n[e.id]=t,t}}}function Nee(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new me};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new me};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new me,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let Dee=0;function Uee(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function Fee(n,e){const t=new Oee,r=Nee(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let d=0;d<9;d++)i.probe.push(new j);const s=new j,o=new Et,a=new Et;function l(d,f){let p=0,m=0,v=0;for(let G=0;G<9;G++)i.probe[G].set(0,0,0);let x=0,y=0,g=0,w=0,S=0,E=0,A=0,T=0,P=0,k=0,R=0;d.sort(Uee);const I=f===!0?Math.PI:1;for(let G=0,re=d.length;G<re;G++){const z=d[G],Z=z.color,J=z.intensity,te=z.distance,L=z.shadow&&z.shadow.map?z.shadow.map.texture:null;if(z.isAmbientLight)p+=Z.r*J*I,m+=Z.g*J*I,v+=Z.b*J*I;else if(z.isLightProbe){for(let U=0;U<9;U++)i.probe[U].addScaledVector(z.sh.coefficients[U],J);R++}else if(z.isDirectionalLight){const U=t.get(z);if(U.color.copy(z.color).multiplyScalar(z.intensity*I),z.castShadow){const V=z.shadow,Y=r.get(z);Y.shadowBias=V.bias,Y.shadowNormalBias=V.normalBias,Y.shadowRadius=V.radius,Y.shadowMapSize=V.mapSize,i.directionalShadow[x]=Y,i.directionalShadowMap[x]=L,i.directionalShadowMatrix[x]=z.shadow.matrix,E++}i.directional[x]=U,x++}else if(z.isSpotLight){const U=t.get(z);U.position.setFromMatrixPosition(z.matrixWorld),U.color.copy(Z).multiplyScalar(J*I),U.distance=te,U.coneCos=Math.cos(z.angle),U.penumbraCos=Math.cos(z.angle*(1-z.penumbra)),U.decay=z.decay,i.spot[g]=U;const V=z.shadow;if(z.map&&(i.spotLightMap[P]=z.map,P++,V.updateMatrices(z),z.castShadow&&k++),i.spotLightMatrix[g]=V.matrix,z.castShadow){const Y=r.get(z);Y.shadowBias=V.bias,Y.shadowNormalBias=V.normalBias,Y.shadowRadius=V.radius,Y.shadowMapSize=V.mapSize,i.spotShadow[g]=Y,i.spotShadowMap[g]=L,T++}g++}else if(z.isRectAreaLight){const U=t.get(z);U.color.copy(Z).multiplyScalar(J),U.halfWidth.set(z.width*.5,0,0),U.halfHeight.set(0,z.height*.5,0),i.rectArea[w]=U,w++}else if(z.isPointLight){const U=t.get(z);if(U.color.copy(z.color).multiplyScalar(z.intensity*I),U.distance=z.distance,U.decay=z.decay,z.castShadow){const V=z.shadow,Y=r.get(z);Y.shadowBias=V.bias,Y.shadowNormalBias=V.normalBias,Y.shadowRadius=V.radius,Y.shadowMapSize=V.mapSize,Y.shadowCameraNear=V.camera.near,Y.shadowCameraFar=V.camera.far,i.pointShadow[y]=Y,i.pointShadowMap[y]=L,i.pointShadowMatrix[y]=z.shadow.matrix,A++}i.point[y]=U,y++}else if(z.isHemisphereLight){const U=t.get(z);U.skyColor.copy(z.color).multiplyScalar(J*I),U.groundColor.copy(z.groundColor).multiplyScalar(J*I),i.hemi[S]=U,S++}}w>0&&(e.isWebGL2?n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Ue.LTC_FLOAT_1,i.rectAreaLTC2=Ue.LTC_FLOAT_2):(i.rectAreaLTC1=Ue.LTC_HALF_1,i.rectAreaLTC2=Ue.LTC_HALF_2):n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Ue.LTC_FLOAT_1,i.rectAreaLTC2=Ue.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(i.rectAreaLTC1=Ue.LTC_HALF_1,i.rectAreaLTC2=Ue.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=p,i.ambient[1]=m,i.ambient[2]=v;const H=i.hash;(H.directionalLength!==x||H.pointLength!==y||H.spotLength!==g||H.rectAreaLength!==w||H.hemiLength!==S||H.numDirectionalShadows!==E||H.numPointShadows!==A||H.numSpotShadows!==T||H.numSpotMaps!==P||H.numLightProbes!==R)&&(i.directional.length=x,i.spot.length=g,i.rectArea.length=w,i.point.length=y,i.hemi.length=S,i.directionalShadow.length=E,i.directionalShadowMap.length=E,i.pointShadow.length=A,i.pointShadowMap.length=A,i.spotShadow.length=T,i.spotShadowMap.length=T,i.directionalShadowMatrix.length=E,i.pointShadowMatrix.length=A,i.spotLightMatrix.length=T+P-k,i.spotLightMap.length=P,i.numSpotLightShadowsWithMaps=k,i.numLightProbes=R,H.directionalLength=x,H.pointLength=y,H.spotLength=g,H.rectAreaLength=w,H.hemiLength=S,H.numDirectionalShadows=E,H.numPointShadows=A,H.numSpotShadows=T,H.numSpotMaps=P,H.numLightProbes=R,i.version=Dee++)}function c(d,f){let p=0,m=0,v=0,x=0,y=0;const g=f.matrixWorldInverse;for(let w=0,S=d.length;w<S;w++){const E=d[w];if(E.isDirectionalLight){const A=i.directional[p];A.direction.setFromMatrixPosition(E.matrixWorld),s.setFromMatrixPosition(E.target.matrixWorld),A.direction.sub(s),A.direction.transformDirection(g),p++}else if(E.isSpotLight){const A=i.spot[v];A.position.setFromMatrixPosition(E.matrixWorld),A.position.applyMatrix4(g),A.direction.setFromMatrixPosition(E.matrixWorld),s.setFromMatrixPosition(E.target.matrixWorld),A.direction.sub(s),A.direction.transformDirection(g),v++}else if(E.isRectAreaLight){const A=i.rectArea[x];A.position.setFromMatrixPosition(E.matrixWorld),A.position.applyMatrix4(g),a.identity(),o.copy(E.matrixWorld),o.premultiply(g),a.extractRotation(o),A.halfWidth.set(E.width*.5,0,0),A.halfHeight.set(0,E.height*.5,0),A.halfWidth.applyMatrix4(a),A.halfHeight.applyMatrix4(a),x++}else if(E.isPointLight){const A=i.point[m];A.position.setFromMatrixPosition(E.matrixWorld),A.position.applyMatrix4(g),m++}else if(E.isHemisphereLight){const A=i.hemi[y];A.direction.setFromMatrixPosition(E.matrixWorld),A.direction.transformDirection(g),y++}}}return{setup:l,setupView:c,state:i}}function AI(n,e){const t=new Fee(n,e),r=[],i=[];function s(){r.length=0,i.length=0}function o(f){r.push(f)}function a(f){i.push(f)}function l(f){t.setup(r,f)}function c(f){t.setupView(r,f)}return{init:s,state:{lightsArray:r,shadowsArray:i,lights:t},setupLights:l,setupLightsView:c,pushLight:o,pushShadow:a}}function Bee(n,e){let t=new WeakMap;function r(s,o=0){const a=t.get(s);let l;return a===void 0?(l=new AI(n,e),t.set(s,[l])):o>=a.length?(l=new AI(n,e),a.push(l)):l=a[o],l}function i(){t=new WeakMap}return{get:r,dispose:i}}class xT extends jr{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=FF,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class wT extends jr{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const zee=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,Vee=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function jee(n,e,t){let r=new rm;const i=new me,s=new me,o=new sn,a=new xT({depthPacking:BF}),l=new wT,c={},d=t.maxTextureSize,f={[ea]:Qr,[Qr]:ea,[to]:to},p=new mo({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new me},radius:{value:4}},vertexShader:zee,fragmentShader:Vee}),m=p.clone();m.defines.HORIZONTAL_PASS=1;const v=new zt;v.setAttribute("position",new an(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const x=new sr(v,p),y=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Y0;let g=this.type;this.render=function(T,P,k){if(y.enabled===!1||y.autoUpdate===!1&&y.needsUpdate===!1||T.length===0)return;const R=n.getRenderTarget(),I=n.getActiveCubeFace(),H=n.getActiveMipmapLevel(),G=n.state;G.setBlending($o),G.buffers.color.setClear(1,1,1,1),G.buffers.depth.setTest(!0),G.setScissorTest(!1);const re=g!==ws&&this.type===ws,z=g===ws&&this.type!==ws;for(let Z=0,J=T.length;Z<J;Z++){const te=T[Z],L=te.shadow;if(L===void 0){console.warn("THREE.WebGLShadowMap:",te,"has no shadow.");continue}if(L.autoUpdate===!1&&L.needsUpdate===!1)continue;i.copy(L.mapSize);const U=L.getFrameExtents();if(i.multiply(U),s.copy(L.mapSize),(i.x>d||i.y>d)&&(i.x>d&&(s.x=Math.floor(d/U.x),i.x=s.x*U.x,L.mapSize.x=s.x),i.y>d&&(s.y=Math.floor(d/U.y),i.y=s.y*U.y,L.mapSize.y=s.y)),L.map===null||re===!0||z===!0){const Y=this.type!==ws?{minFilter:jn,magFilter:jn}:{};L.map!==null&&L.map.dispose(),L.map=new Us(i.x,i.y,Y),L.map.texture.name=te.name+".shadowMap",L.camera.updateProjectionMatrix()}n.setRenderTarget(L.map),n.clear();const V=L.getViewportCount();for(let Y=0;Y<V;Y++){const Q=L.getViewport(Y);o.set(s.x*Q.x,s.y*Q.y,s.x*Q.z,s.y*Q.w),G.viewport(o),L.updateMatrices(te,Y),r=L.getFrustum(),E(P,k,L.camera,te,this.type)}L.isPointLightShadow!==!0&&this.type===ws&&w(L,k),L.needsUpdate=!1}g=this.type,y.needsUpdate=!1,n.setRenderTarget(R,I,H)};function w(T,P){const k=e.update(x);p.defines.VSM_SAMPLES!==T.blurSamples&&(p.defines.VSM_SAMPLES=T.blurSamples,m.defines.VSM_SAMPLES=T.blurSamples,p.needsUpdate=!0,m.needsUpdate=!0),T.mapPass===null&&(T.mapPass=new Us(i.x,i.y)),p.uniforms.shadow_pass.value=T.map.texture,p.uniforms.resolution.value=T.mapSize,p.uniforms.radius.value=T.radius,n.setRenderTarget(T.mapPass),n.clear(),n.renderBufferDirect(P,null,k,p,x,null),m.uniforms.shadow_pass.value=T.mapPass.texture,m.uniforms.resolution.value=T.mapSize,m.uniforms.radius.value=T.radius,n.setRenderTarget(T.map),n.clear(),n.renderBufferDirect(P,null,k,m,x,null)}function S(T,P,k,R){let I=null;const H=k.isPointLight===!0?T.customDistanceMaterial:T.customDepthMaterial;if(H!==void 0)I=H;else if(I=k.isPointLight===!0?l:a,n.localClippingEnabled&&P.clipShadows===!0&&Array.isArray(P.clippingPlanes)&&P.clippingPlanes.length!==0||P.displacementMap&&P.displacementScale!==0||P.alphaMap&&P.alphaTest>0||P.map&&P.alphaTest>0){const G=I.uuid,re=P.uuid;let z=c[G];z===void 0&&(z={},c[G]=z);let Z=z[re];Z===void 0&&(Z=I.clone(),z[re]=Z,P.addEventListener("dispose",A)),I=Z}if(I.visible=P.visible,I.wireframe=P.wireframe,R===ws?I.side=P.shadowSide!==null?P.shadowSide:P.side:I.side=P.shadowSide!==null?P.shadowSide:f[P.side],I.alphaMap=P.alphaMap,I.alphaTest=P.alphaTest,I.map=P.map,I.clipShadows=P.clipShadows,I.clippingPlanes=P.clippingPlanes,I.clipIntersection=P.clipIntersection,I.displacementMap=P.displacementMap,I.displacementScale=P.displacementScale,I.displacementBias=P.displacementBias,I.wireframeLinewidth=P.wireframeLinewidth,I.linewidth=P.linewidth,k.isPointLight===!0&&I.isMeshDistanceMaterial===!0){const G=n.properties.get(I);G.light=k}return I}function E(T,P,k,R,I){if(T.visible===!1)return;if(T.layers.test(P.layers)&&(T.isMesh||T.isLine||T.isPoints)&&(T.castShadow||T.receiveShadow&&I===ws)&&(!T.frustumCulled||r.intersectsObject(T))){T.modelViewMatrix.multiplyMatrices(k.matrixWorldInverse,T.matrixWorld);const re=e.update(T),z=T.material;if(Array.isArray(z)){const Z=re.groups;for(let J=0,te=Z.length;J<te;J++){const L=Z[J],U=z[L.materialIndex];if(U&&U.visible){const V=S(T,U,R,I);T.onBeforeShadow(n,T,P,k,re,V,L),n.renderBufferDirect(k,null,re,V,T,L),T.onAfterShadow(n,T,P,k,re,V,L)}}}else if(z.visible){const Z=S(T,z,R,I);T.onBeforeShadow(n,T,P,k,re,Z,null),n.renderBufferDirect(k,null,re,Z,T,null),T.onAfterShadow(n,T,P,k,re,Z,null)}}const G=T.children;for(let re=0,z=G.length;re<z;re++)E(G[re],P,k,R,I)}function A(T){T.target.removeEventListener("dispose",A);for(const k in c){const R=c[k],I=T.target.uuid;I in R&&(R[I].dispose(),delete R[I])}}}function Hee(n,e,t){const r=t.isWebGL2;function i(){let q=!1;const Ie=new sn;let Oe=null;const pt=new sn(0,0,0,0);return{setMask:function(Ee){Oe!==Ee&&!q&&(n.colorMask(Ee,Ee,Ee,Ee),Oe=Ee)},setLocked:function(Ee){q=Ee},setClear:function(Ee,qe,it,Vt,Xt){Xt===!0&&(Ee*=Vt,qe*=Vt,it*=Vt),Ie.set(Ee,qe,it,Vt),pt.equals(Ie)===!1&&(n.clearColor(Ee,qe,it,Vt),pt.copy(Ie))},reset:function(){q=!1,Oe=null,pt.set(-1,0,0,0)}}}function s(){let q=!1,Ie=null,Oe=null,pt=null;return{setTest:function(Ee){Ee?ct(n.DEPTH_TEST):He(n.DEPTH_TEST)},setMask:function(Ee){Ie!==Ee&&!q&&(n.depthMask(Ee),Ie=Ee)},setFunc:function(Ee){if(Oe!==Ee){switch(Ee){case hF:n.depthFunc(n.NEVER);break;case fF:n.depthFunc(n.ALWAYS);break;case pF:n.depthFunc(n.LESS);break;case dp:n.depthFunc(n.LEQUAL);break;case mF:n.depthFunc(n.EQUAL);break;case gF:n.depthFunc(n.GEQUAL);break;case vF:n.depthFunc(n.GREATER);break;case yF:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}Oe=Ee}},setLocked:function(Ee){q=Ee},setClear:function(Ee){pt!==Ee&&(n.clearDepth(Ee),pt=Ee)},reset:function(){q=!1,Ie=null,Oe=null,pt=null}}}function o(){let q=!1,Ie=null,Oe=null,pt=null,Ee=null,qe=null,it=null,Vt=null,Xt=null;return{setTest:function(Ot){q||(Ot?ct(n.STENCIL_TEST):He(n.STENCIL_TEST))},setMask:function(Ot){Ie!==Ot&&!q&&(n.stencilMask(Ot),Ie=Ot)},setFunc:function(Ot,hn,_n){(Oe!==Ot||pt!==hn||Ee!==_n)&&(n.stencilFunc(Ot,hn,_n),Oe=Ot,pt=hn,Ee=_n)},setOp:function(Ot,hn,_n){(qe!==Ot||it!==hn||Vt!==_n)&&(n.stencilOp(Ot,hn,_n),qe=Ot,it=hn,Vt=_n)},setLocked:function(Ot){q=Ot},setClear:function(Ot){Xt!==Ot&&(n.clearStencil(Ot),Xt=Ot)},reset:function(){q=!1,Ie=null,Oe=null,pt=null,Ee=null,qe=null,it=null,Vt=null,Xt=null}}}const a=new i,l=new s,c=new o,d=new WeakMap,f=new WeakMap;let p={},m={},v=new WeakMap,x=[],y=null,g=!1,w=null,S=null,E=null,A=null,T=null,P=null,k=null,R=new Xe(0,0,0),I=0,H=!1,G=null,re=null,z=null,Z=null,J=null;const te=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let L=!1,U=0;const V=n.getParameter(n.VERSION);V.indexOf("WebGL")!==-1?(U=parseFloat(/^WebGL (\d)/.exec(V)[1]),L=U>=1):V.indexOf("OpenGL ES")!==-1&&(U=parseFloat(/^OpenGL ES (\d)/.exec(V)[1]),L=U>=2);let Y=null,Q={};const K=n.getParameter(n.SCISSOR_BOX),oe=n.getParameter(n.VIEWPORT),xe=new sn().fromArray(K),Ae=new sn().fromArray(oe);function we(q,Ie,Oe,pt){const Ee=new Uint8Array(4),qe=n.createTexture();n.bindTexture(q,qe),n.texParameteri(q,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(q,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let it=0;it<Oe;it++)r&&(q===n.TEXTURE_3D||q===n.TEXTURE_2D_ARRAY)?n.texImage3D(Ie,0,n.RGBA,1,1,pt,0,n.RGBA,n.UNSIGNED_BYTE,Ee):n.texImage2D(Ie+it,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,Ee);return qe}const lt={};lt[n.TEXTURE_2D]=we(n.TEXTURE_2D,n.TEXTURE_2D,1),lt[n.TEXTURE_CUBE_MAP]=we(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),r&&(lt[n.TEXTURE_2D_ARRAY]=we(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),lt[n.TEXTURE_3D]=we(n.TEXTURE_3D,n.TEXTURE_3D,1,1)),a.setClear(0,0,0,1),l.setClear(1),c.setClear(0),ct(n.DEPTH_TEST),l.setFunc(dp),De(!1),F(e1),ct(n.CULL_FACE),pe($o);function ct(q){p[q]!==!0&&(n.enable(q),p[q]=!0)}function He(q){p[q]!==!1&&(n.disable(q),p[q]=!1)}function Ye(q,Ie){return m[q]!==Ie?(n.bindFramebuffer(q,Ie),m[q]=Ie,r&&(q===n.DRAW_FRAMEBUFFER&&(m[n.FRAMEBUFFER]=Ie),q===n.FRAMEBUFFER&&(m[n.DRAW_FRAMEBUFFER]=Ie)),!0):!1}function $(q,Ie){let Oe=x,pt=!1;if(q)if(Oe=v.get(Ie),Oe===void 0&&(Oe=[],v.set(Ie,Oe)),q.isWebGLMultipleRenderTargets){const Ee=q.texture;if(Oe.length!==Ee.length||Oe[0]!==n.COLOR_ATTACHMENT0){for(let qe=0,it=Ee.length;qe<it;qe++)Oe[qe]=n.COLOR_ATTACHMENT0+qe;Oe.length=Ee.length,pt=!0}}else Oe[0]!==n.COLOR_ATTACHMENT0&&(Oe[0]=n.COLOR_ATTACHMENT0,pt=!0);else Oe[0]!==n.BACK&&(Oe[0]=n.BACK,pt=!0);pt&&(t.isWebGL2?n.drawBuffers(Oe):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Oe))}function Se(q){return y!==q?(n.useProgram(q),y=q,!0):!1}const fe={[ka]:n.FUNC_ADD,[ZU]:n.FUNC_SUBTRACT,[JU]:n.FUNC_REVERSE_SUBTRACT};if(r)fe[i1]=n.MIN,fe[s1]=n.MAX;else{const q=e.get("EXT_blend_minmax");q!==null&&(fe[i1]=q.MIN_EXT,fe[s1]=q.MAX_EXT)}const Ce={[QU]:n.ZERO,[eF]:n.ONE,[tF]:n.SRC_COLOR,[Yy]:n.SRC_ALPHA,[aF]:n.SRC_ALPHA_SATURATE,[sF]:n.DST_COLOR,[rF]:n.DST_ALPHA,[nF]:n.ONE_MINUS_SRC_COLOR,[Ky]:n.ONE_MINUS_SRC_ALPHA,[oF]:n.ONE_MINUS_DST_COLOR,[iF]:n.ONE_MINUS_DST_ALPHA,[lF]:n.CONSTANT_COLOR,[cF]:n.ONE_MINUS_CONSTANT_COLOR,[uF]:n.CONSTANT_ALPHA,[dF]:n.ONE_MINUS_CONSTANT_ALPHA};function pe(q,Ie,Oe,pt,Ee,qe,it,Vt,Xt,Ot){if(q===$o){g===!0&&(He(n.BLEND),g=!1);return}if(g===!1&&(ct(n.BLEND),g=!0),q!==KU){if(q!==w||Ot!==H){if((S!==ka||T!==ka)&&(n.blendEquation(n.FUNC_ADD),S=ka,T=ka),Ot)switch(q){case Ec:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case t1:n.blendFunc(n.ONE,n.ONE);break;case n1:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case r1:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",q);break}else switch(q){case Ec:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case t1:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case n1:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case r1:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",q);break}E=null,A=null,P=null,k=null,R.set(0,0,0),I=0,w=q,H=Ot}return}Ee=Ee||Ie,qe=qe||Oe,it=it||pt,(Ie!==S||Ee!==T)&&(n.blendEquationSeparate(fe[Ie],fe[Ee]),S=Ie,T=Ee),(Oe!==E||pt!==A||qe!==P||it!==k)&&(n.blendFuncSeparate(Ce[Oe],Ce[pt],Ce[qe],Ce[it]),E=Oe,A=pt,P=qe,k=it),(Vt.equals(R)===!1||Xt!==I)&&(n.blendColor(Vt.r,Vt.g,Vt.b,Xt),R.copy(Vt),I=Xt),w=q,H=!1}function et(q,Ie){q.side===to?He(n.CULL_FACE):ct(n.CULL_FACE);let Oe=q.side===Qr;Ie&&(Oe=!Oe),De(Oe),q.blending===Ec&&q.transparent===!1?pe($o):pe(q.blending,q.blendEquation,q.blendSrc,q.blendDst,q.blendEquationAlpha,q.blendSrcAlpha,q.blendDstAlpha,q.blendColor,q.blendAlpha,q.premultipliedAlpha),l.setFunc(q.depthFunc),l.setTest(q.depthTest),l.setMask(q.depthWrite),a.setMask(q.colorWrite);const pt=q.stencilWrite;c.setTest(pt),pt&&(c.setMask(q.stencilWriteMask),c.setFunc(q.stencilFunc,q.stencilRef,q.stencilFuncMask),c.setOp(q.stencilFail,q.stencilZFail,q.stencilZPass)),ie(q.polygonOffset,q.polygonOffsetFactor,q.polygonOffsetUnits),q.alphaToCoverage===!0?ct(n.SAMPLE_ALPHA_TO_COVERAGE):He(n.SAMPLE_ALPHA_TO_COVERAGE)}function De(q){G!==q&&(q?n.frontFace(n.CW):n.frontFace(n.CCW),G=q)}function F(q){q!==XU?(ct(n.CULL_FACE),q!==re&&(q===e1?n.cullFace(n.BACK):q===qU?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):He(n.CULL_FACE),re=q}function O(q){q!==z&&(L&&n.lineWidth(q),z=q)}function ie(q,Ie,Oe){q?(ct(n.POLYGON_OFFSET_FILL),(Z!==Ie||J!==Oe)&&(n.polygonOffset(Ie,Oe),Z=Ie,J=Oe)):He(n.POLYGON_OFFSET_FILL)}function Me(q){q?ct(n.SCISSOR_TEST):He(n.SCISSOR_TEST)}function _e(q){q===void 0&&(q=n.TEXTURE0+te-1),Y!==q&&(n.activeTexture(q),Y=q)}function ve(q,Ie,Oe){Oe===void 0&&(Y===null?Oe=n.TEXTURE0+te-1:Oe=Y);let pt=Q[Oe];pt===void 0&&(pt={type:void 0,texture:void 0},Q[Oe]=pt),(pt.type!==q||pt.texture!==Ie)&&(Y!==Oe&&(n.activeTexture(Oe),Y=Oe),n.bindTexture(q,Ie||lt[q]),pt.type=q,pt.texture=Ie)}function Qe(){const q=Q[Y];q!==void 0&&q.type!==void 0&&(n.bindTexture(q.type,null),q.type=void 0,q.texture=void 0)}function Re(){try{n.compressedTexImage2D.apply(n,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function Fe(){try{n.compressedTexImage3D.apply(n,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function ut(){try{n.texSubImage2D.apply(n,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function bt(){try{n.texSubImage3D.apply(n,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function be(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function Wt(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function Ct(){try{n.texStorage2D.apply(n,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function vt(){try{n.texStorage3D.apply(n,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function tt(){try{n.texImage2D.apply(n,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function We(){try{n.texImage3D.apply(n,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function X(q){xe.equals(q)===!1&&(n.scissor(q.x,q.y,q.z,q.w),xe.copy(q))}function ye(q){Ae.equals(q)===!1&&(n.viewport(q.x,q.y,q.z,q.w),Ae.copy(q))}function Ve(q,Ie){let Oe=f.get(Ie);Oe===void 0&&(Oe=new WeakMap,f.set(Ie,Oe));let pt=Oe.get(q);pt===void 0&&(pt=n.getUniformBlockIndex(Ie,q.name),Oe.set(q,pt))}function Be(q,Ie){const pt=f.get(Ie).get(q);d.get(Ie)!==pt&&(n.uniformBlockBinding(Ie,pt,q.__bindingPointIndex),d.set(Ie,pt))}function Te(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),r===!0&&(n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),p={},Y=null,Q={},m={},v=new WeakMap,x=[],y=null,g=!1,w=null,S=null,E=null,A=null,T=null,P=null,k=null,R=new Xe(0,0,0),I=0,H=!1,G=null,re=null,z=null,Z=null,J=null,xe.set(0,0,n.canvas.width,n.canvas.height),Ae.set(0,0,n.canvas.width,n.canvas.height),a.reset(),l.reset(),c.reset()}return{buffers:{color:a,depth:l,stencil:c},enable:ct,disable:He,bindFramebuffer:Ye,drawBuffers:$,useProgram:Se,setBlending:pe,setMaterial:et,setFlipSided:De,setCullFace:F,setLineWidth:O,setPolygonOffset:ie,setScissorTest:Me,activeTexture:_e,bindTexture:ve,unbindTexture:Qe,compressedTexImage2D:Re,compressedTexImage3D:Fe,texImage2D:tt,texImage3D:We,updateUBOMapping:Ve,uniformBlockBinding:Be,texStorage2D:Ct,texStorage3D:vt,texSubImage2D:ut,texSubImage3D:bt,compressedTexSubImage2D:be,compressedTexSubImage3D:Wt,scissor:X,viewport:ye,reset:Te}}function Wee(n,e,t,r,i,s,o){const a=i.isWebGL2,l=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,c=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),d=new WeakMap;let f;const p=new WeakMap;let m=!1;try{m=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function v(F,O){return m?new OffscreenCanvas(F,O):bp("canvas")}function x(F,O,ie,Me){let _e=1;if((F.width>Me||F.height>Me)&&(_e=Me/Math.max(F.width,F.height)),_e<1||O===!0)if(typeof HTMLImageElement<"u"&&F instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&F instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&F instanceof ImageBitmap){const ve=O?Qy:Math.floor,Qe=ve(_e*F.width),Re=ve(_e*F.height);f===void 0&&(f=v(Qe,Re));const Fe=ie?v(Qe,Re):f;return Fe.width=Qe,Fe.height=Re,Fe.getContext("2d").drawImage(F,0,0,Qe,Re),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+F.width+"x"+F.height+") to ("+Qe+"x"+Re+")."),Fe}else return"data"in F&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+F.width+"x"+F.height+")."),F;return F}function y(F){return O1(F.width)&&O1(F.height)}function g(F){return a?!1:F.wrapS!==Ur||F.wrapT!==Ur||F.minFilter!==jn&&F.minFilter!==Wn}function w(F,O){return F.generateMipmaps&&O&&F.minFilter!==jn&&F.minFilter!==Wn}function S(F){n.generateMipmap(F)}function E(F,O,ie,Me,_e=!1){if(a===!1)return O;if(F!==null){if(n[F]!==void 0)return n[F];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+F+"'")}let ve=O;if(O===n.RED&&(ie===n.FLOAT&&(ve=n.R32F),ie===n.HALF_FLOAT&&(ve=n.R16F),ie===n.UNSIGNED_BYTE&&(ve=n.R8)),O===n.RED_INTEGER&&(ie===n.UNSIGNED_BYTE&&(ve=n.R8UI),ie===n.UNSIGNED_SHORT&&(ve=n.R16UI),ie===n.UNSIGNED_INT&&(ve=n.R32UI),ie===n.BYTE&&(ve=n.R8I),ie===n.SHORT&&(ve=n.R16I),ie===n.INT&&(ve=n.R32I)),O===n.RG&&(ie===n.FLOAT&&(ve=n.RG32F),ie===n.HALF_FLOAT&&(ve=n.RG16F),ie===n.UNSIGNED_BYTE&&(ve=n.RG8)),O===n.RGBA){const Qe=_e?_p:rn.getTransfer(Me);ie===n.FLOAT&&(ve=n.RGBA32F),ie===n.HALF_FLOAT&&(ve=n.RGBA16F),ie===n.UNSIGNED_BYTE&&(ve=Qe===un?n.SRGB8_ALPHA8:n.RGBA8),ie===n.UNSIGNED_SHORT_4_4_4_4&&(ve=n.RGBA4),ie===n.UNSIGNED_SHORT_5_5_5_1&&(ve=n.RGB5_A1)}return(ve===n.R16F||ve===n.R32F||ve===n.RG16F||ve===n.RG32F||ve===n.RGBA16F||ve===n.RGBA32F)&&e.get("EXT_color_buffer_float"),ve}function A(F,O,ie){return w(F,ie)===!0||F.isFramebufferTexture&&F.minFilter!==jn&&F.minFilter!==Wn?Math.log2(Math.max(O.width,O.height))+1:F.mipmaps!==void 0&&F.mipmaps.length>0?F.mipmaps.length:F.isCompressedTexture&&Array.isArray(F.image)?O.mipmaps.length:1}function T(F){return F===jn||F===Zy||F===If?n.NEAREST:n.LINEAR}function P(F){const O=F.target;O.removeEventListener("dispose",P),R(O),O.isVideoTexture&&d.delete(O)}function k(F){const O=F.target;O.removeEventListener("dispose",k),H(O)}function R(F){const O=r.get(F);if(O.__webglInit===void 0)return;const ie=F.source,Me=p.get(ie);if(Me){const _e=Me[O.__cacheKey];_e.usedTimes--,_e.usedTimes===0&&I(F),Object.keys(Me).length===0&&p.delete(ie)}r.remove(F)}function I(F){const O=r.get(F);n.deleteTexture(O.__webglTexture);const ie=F.source,Me=p.get(ie);delete Me[O.__cacheKey],o.memory.textures--}function H(F){const O=F.texture,ie=r.get(F),Me=r.get(O);if(Me.__webglTexture!==void 0&&(n.deleteTexture(Me.__webglTexture),o.memory.textures--),F.depthTexture&&F.depthTexture.dispose(),F.isWebGLCubeRenderTarget)for(let _e=0;_e<6;_e++){if(Array.isArray(ie.__webglFramebuffer[_e]))for(let ve=0;ve<ie.__webglFramebuffer[_e].length;ve++)n.deleteFramebuffer(ie.__webglFramebuffer[_e][ve]);else n.deleteFramebuffer(ie.__webglFramebuffer[_e]);ie.__webglDepthbuffer&&n.deleteRenderbuffer(ie.__webglDepthbuffer[_e])}else{if(Array.isArray(ie.__webglFramebuffer))for(let _e=0;_e<ie.__webglFramebuffer.length;_e++)n.deleteFramebuffer(ie.__webglFramebuffer[_e]);else n.deleteFramebuffer(ie.__webglFramebuffer);if(ie.__webglDepthbuffer&&n.deleteRenderbuffer(ie.__webglDepthbuffer),ie.__webglMultisampledFramebuffer&&n.deleteFramebuffer(ie.__webglMultisampledFramebuffer),ie.__webglColorRenderbuffer)for(let _e=0;_e<ie.__webglColorRenderbuffer.length;_e++)ie.__webglColorRenderbuffer[_e]&&n.deleteRenderbuffer(ie.__webglColorRenderbuffer[_e]);ie.__webglDepthRenderbuffer&&n.deleteRenderbuffer(ie.__webglDepthRenderbuffer)}if(F.isWebGLMultipleRenderTargets)for(let _e=0,ve=O.length;_e<ve;_e++){const Qe=r.get(O[_e]);Qe.__webglTexture&&(n.deleteTexture(Qe.__webglTexture),o.memory.textures--),r.remove(O[_e])}r.remove(O),r.remove(F)}let G=0;function re(){G=0}function z(){const F=G;return F>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+F+" texture units while this GPU supports only "+i.maxTextures),G+=1,F}function Z(F){const O=[];return O.push(F.wrapS),O.push(F.wrapT),O.push(F.wrapR||0),O.push(F.magFilter),O.push(F.minFilter),O.push(F.anisotropy),O.push(F.internalFormat),O.push(F.format),O.push(F.type),O.push(F.generateMipmaps),O.push(F.premultiplyAlpha),O.push(F.flipY),O.push(F.unpackAlignment),O.push(F.colorSpace),O.join()}function J(F,O){const ie=r.get(F);if(F.isVideoTexture&&et(F),F.isRenderTargetTexture===!1&&F.version>0&&ie.__version!==F.version){const Me=F.image;if(Me===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Me.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{xe(ie,F,O);return}}t.bindTexture(n.TEXTURE_2D,ie.__webglTexture,n.TEXTURE0+O)}function te(F,O){const ie=r.get(F);if(F.version>0&&ie.__version!==F.version){xe(ie,F,O);return}t.bindTexture(n.TEXTURE_2D_ARRAY,ie.__webglTexture,n.TEXTURE0+O)}function L(F,O){const ie=r.get(F);if(F.version>0&&ie.__version!==F.version){xe(ie,F,O);return}t.bindTexture(n.TEXTURE_3D,ie.__webglTexture,n.TEXTURE0+O)}function U(F,O){const ie=r.get(F);if(F.version>0&&ie.__version!==F.version){Ae(ie,F,O);return}t.bindTexture(n.TEXTURE_CUBE_MAP,ie.__webglTexture,n.TEXTURE0+O)}const V={[pp]:n.REPEAT,[Ur]:n.CLAMP_TO_EDGE,[mp]:n.MIRRORED_REPEAT},Y={[jn]:n.NEAREST,[Zy]:n.NEAREST_MIPMAP_NEAREST,[If]:n.NEAREST_MIPMAP_LINEAR,[Wn]:n.LINEAR,[nT]:n.LINEAR_MIPMAP_NEAREST,[hl]:n.LINEAR_MIPMAP_LINEAR},Q={[VF]:n.NEVER,[XF]:n.ALWAYS,[jF]:n.LESS,[hT]:n.LEQUAL,[HF]:n.EQUAL,[$F]:n.GEQUAL,[WF]:n.GREATER,[GF]:n.NOTEQUAL};function K(F,O,ie){if(ie?(n.texParameteri(F,n.TEXTURE_WRAP_S,V[O.wrapS]),n.texParameteri(F,n.TEXTURE_WRAP_T,V[O.wrapT]),(F===n.TEXTURE_3D||F===n.TEXTURE_2D_ARRAY)&&n.texParameteri(F,n.TEXTURE_WRAP_R,V[O.wrapR]),n.texParameteri(F,n.TEXTURE_MAG_FILTER,Y[O.magFilter]),n.texParameteri(F,n.TEXTURE_MIN_FILTER,Y[O.minFilter])):(n.texParameteri(F,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(F,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),(F===n.TEXTURE_3D||F===n.TEXTURE_2D_ARRAY)&&n.texParameteri(F,n.TEXTURE_WRAP_R,n.CLAMP_TO_EDGE),(O.wrapS!==Ur||O.wrapT!==Ur)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(F,n.TEXTURE_MAG_FILTER,T(O.magFilter)),n.texParameteri(F,n.TEXTURE_MIN_FILTER,T(O.minFilter)),O.minFilter!==jn&&O.minFilter!==Wn&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),O.compareFunction&&(n.texParameteri(F,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(F,n.TEXTURE_COMPARE_FUNC,Q[O.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){const Me=e.get("EXT_texture_filter_anisotropic");if(O.magFilter===jn||O.minFilter!==If&&O.minFilter!==hl||O.type===Ps&&e.has("OES_texture_float_linear")===!1||a===!1&&O.type===Hd&&e.has("OES_texture_half_float_linear")===!1)return;(O.anisotropy>1||r.get(O).__currentAnisotropy)&&(n.texParameterf(F,Me.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(O.anisotropy,i.getMaxAnisotropy())),r.get(O).__currentAnisotropy=O.anisotropy)}}function oe(F,O){let ie=!1;F.__webglInit===void 0&&(F.__webglInit=!0,O.addEventListener("dispose",P));const Me=O.source;let _e=p.get(Me);_e===void 0&&(_e={},p.set(Me,_e));const ve=Z(O);if(ve!==F.__cacheKey){_e[ve]===void 0&&(_e[ve]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,ie=!0),_e[ve].usedTimes++;const Qe=_e[F.__cacheKey];Qe!==void 0&&(_e[F.__cacheKey].usedTimes--,Qe.usedTimes===0&&I(O)),F.__cacheKey=ve,F.__webglTexture=_e[ve].texture}return ie}function xe(F,O,ie){let Me=n.TEXTURE_2D;(O.isDataArrayTexture||O.isCompressedArrayTexture)&&(Me=n.TEXTURE_2D_ARRAY),O.isData3DTexture&&(Me=n.TEXTURE_3D);const _e=oe(F,O),ve=O.source;t.bindTexture(Me,F.__webglTexture,n.TEXTURE0+ie);const Qe=r.get(ve);if(ve.version!==Qe.__version||_e===!0){t.activeTexture(n.TEXTURE0+ie);const Re=rn.getPrimaries(rn.workingColorSpace),Fe=O.colorSpace===Pi?null:rn.getPrimaries(O.colorSpace),ut=O.colorSpace===Pi||Re===Fe?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,O.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,O.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,O.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,ut);const bt=g(O)&&y(O.image)===!1;let be=x(O.image,bt,!1,i.maxTextureSize);be=De(O,be);const Wt=y(be)||a,Ct=s.convert(O.format,O.colorSpace);let vt=s.convert(O.type),tt=E(O.internalFormat,Ct,vt,O.colorSpace,O.isVideoTexture);K(Me,O,Wt);let We;const X=O.mipmaps,ye=a&&O.isVideoTexture!==!0&&tt!==cT,Ve=Qe.__version===void 0||_e===!0,Be=A(O,be,Wt);if(O.isDepthTexture)tt=n.DEPTH_COMPONENT,a?O.type===Ps?tt=n.DEPTH_COMPONENT32F:O.type===Vo?tt=n.DEPTH_COMPONENT24:O.type===Ja?tt=n.DEPTH24_STENCIL8:tt=n.DEPTH_COMPONENT16:O.type===Ps&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),O.format===Qa&&tt===n.DEPTH_COMPONENT&&O.type!==Z0&&O.type!==Vo&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),O.type=Vo,vt=s.convert(O.type)),O.format===Nc&&tt===n.DEPTH_COMPONENT&&(tt=n.DEPTH_STENCIL,O.type!==Ja&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),O.type=Ja,vt=s.convert(O.type))),Ve&&(ye?t.texStorage2D(n.TEXTURE_2D,1,tt,be.width,be.height):t.texImage2D(n.TEXTURE_2D,0,tt,be.width,be.height,0,Ct,vt,null));else if(O.isDataTexture)if(X.length>0&&Wt){ye&&Ve&&t.texStorage2D(n.TEXTURE_2D,Be,tt,X[0].width,X[0].height);for(let Te=0,q=X.length;Te<q;Te++)We=X[Te],ye?t.texSubImage2D(n.TEXTURE_2D,Te,0,0,We.width,We.height,Ct,vt,We.data):t.texImage2D(n.TEXTURE_2D,Te,tt,We.width,We.height,0,Ct,vt,We.data);O.generateMipmaps=!1}else ye?(Ve&&t.texStorage2D(n.TEXTURE_2D,Be,tt,be.width,be.height),t.texSubImage2D(n.TEXTURE_2D,0,0,0,be.width,be.height,Ct,vt,be.data)):t.texImage2D(n.TEXTURE_2D,0,tt,be.width,be.height,0,Ct,vt,be.data);else if(O.isCompressedTexture)if(O.isCompressedArrayTexture){ye&&Ve&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Be,tt,X[0].width,X[0].height,be.depth);for(let Te=0,q=X.length;Te<q;Te++)We=X[Te],O.format!==Zr?Ct!==null?ye?t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Te,0,0,0,We.width,We.height,be.depth,Ct,We.data,0,0):t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,Te,tt,We.width,We.height,be.depth,0,We.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ye?t.texSubImage3D(n.TEXTURE_2D_ARRAY,Te,0,0,0,We.width,We.height,be.depth,Ct,vt,We.data):t.texImage3D(n.TEXTURE_2D_ARRAY,Te,tt,We.width,We.height,be.depth,0,Ct,vt,We.data)}else{ye&&Ve&&t.texStorage2D(n.TEXTURE_2D,Be,tt,X[0].width,X[0].height);for(let Te=0,q=X.length;Te<q;Te++)We=X[Te],O.format!==Zr?Ct!==null?ye?t.compressedTexSubImage2D(n.TEXTURE_2D,Te,0,0,We.width,We.height,Ct,We.data):t.compressedTexImage2D(n.TEXTURE_2D,Te,tt,We.width,We.height,0,We.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ye?t.texSubImage2D(n.TEXTURE_2D,Te,0,0,We.width,We.height,Ct,vt,We.data):t.texImage2D(n.TEXTURE_2D,Te,tt,We.width,We.height,0,Ct,vt,We.data)}else if(O.isDataArrayTexture)ye?(Ve&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Be,tt,be.width,be.height,be.depth),t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,be.width,be.height,be.depth,Ct,vt,be.data)):t.texImage3D(n.TEXTURE_2D_ARRAY,0,tt,be.width,be.height,be.depth,0,Ct,vt,be.data);else if(O.isData3DTexture)ye?(Ve&&t.texStorage3D(n.TEXTURE_3D,Be,tt,be.width,be.height,be.depth),t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,be.width,be.height,be.depth,Ct,vt,be.data)):t.texImage3D(n.TEXTURE_3D,0,tt,be.width,be.height,be.depth,0,Ct,vt,be.data);else if(O.isFramebufferTexture){if(Ve)if(ye)t.texStorage2D(n.TEXTURE_2D,Be,tt,be.width,be.height);else{let Te=be.width,q=be.height;for(let Ie=0;Ie<Be;Ie++)t.texImage2D(n.TEXTURE_2D,Ie,tt,Te,q,0,Ct,vt,null),Te>>=1,q>>=1}}else if(X.length>0&&Wt){ye&&Ve&&t.texStorage2D(n.TEXTURE_2D,Be,tt,X[0].width,X[0].height);for(let Te=0,q=X.length;Te<q;Te++)We=X[Te],ye?t.texSubImage2D(n.TEXTURE_2D,Te,0,0,Ct,vt,We):t.texImage2D(n.TEXTURE_2D,Te,tt,Ct,vt,We);O.generateMipmaps=!1}else ye?(Ve&&t.texStorage2D(n.TEXTURE_2D,Be,tt,be.width,be.height),t.texSubImage2D(n.TEXTURE_2D,0,0,0,Ct,vt,be)):t.texImage2D(n.TEXTURE_2D,0,tt,Ct,vt,be);w(O,Wt)&&S(Me),Qe.__version=ve.version,O.onUpdate&&O.onUpdate(O)}F.__version=O.version}function Ae(F,O,ie){if(O.image.length!==6)return;const Me=oe(F,O),_e=O.source;t.bindTexture(n.TEXTURE_CUBE_MAP,F.__webglTexture,n.TEXTURE0+ie);const ve=r.get(_e);if(_e.version!==ve.__version||Me===!0){t.activeTexture(n.TEXTURE0+ie);const Qe=rn.getPrimaries(rn.workingColorSpace),Re=O.colorSpace===Pi?null:rn.getPrimaries(O.colorSpace),Fe=O.colorSpace===Pi||Qe===Re?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,O.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,O.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,O.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Fe);const ut=O.isCompressedTexture||O.image[0].isCompressedTexture,bt=O.image[0]&&O.image[0].isDataTexture,be=[];for(let Te=0;Te<6;Te++)!ut&&!bt?be[Te]=x(O.image[Te],!1,!0,i.maxCubemapSize):be[Te]=bt?O.image[Te].image:O.image[Te],be[Te]=De(O,be[Te]);const Wt=be[0],Ct=y(Wt)||a,vt=s.convert(O.format,O.colorSpace),tt=s.convert(O.type),We=E(O.internalFormat,vt,tt,O.colorSpace),X=a&&O.isVideoTexture!==!0,ye=ve.__version===void 0||Me===!0;let Ve=A(O,Wt,Ct);K(n.TEXTURE_CUBE_MAP,O,Ct);let Be;if(ut){X&&ye&&t.texStorage2D(n.TEXTURE_CUBE_MAP,Ve,We,Wt.width,Wt.height);for(let Te=0;Te<6;Te++){Be=be[Te].mipmaps;for(let q=0;q<Be.length;q++){const Ie=Be[q];O.format!==Zr?vt!==null?X?t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,q,0,0,Ie.width,Ie.height,vt,Ie.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,q,We,Ie.width,Ie.height,0,Ie.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):X?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,q,0,0,Ie.width,Ie.height,vt,tt,Ie.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,q,We,Ie.width,Ie.height,0,vt,tt,Ie.data)}}}else{Be=O.mipmaps,X&&ye&&(Be.length>0&&Ve++,t.texStorage2D(n.TEXTURE_CUBE_MAP,Ve,We,be[0].width,be[0].height));for(let Te=0;Te<6;Te++)if(bt){X?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,0,0,0,be[Te].width,be[Te].height,vt,tt,be[Te].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,0,We,be[Te].width,be[Te].height,0,vt,tt,be[Te].data);for(let q=0;q<Be.length;q++){const Oe=Be[q].image[Te].image;X?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,q+1,0,0,Oe.width,Oe.height,vt,tt,Oe.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,q+1,We,Oe.width,Oe.height,0,vt,tt,Oe.data)}}else{X?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,0,0,0,vt,tt,be[Te]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,0,We,vt,tt,be[Te]);for(let q=0;q<Be.length;q++){const Ie=Be[q];X?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,q+1,0,0,vt,tt,Ie.image[Te]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,q+1,We,vt,tt,Ie.image[Te])}}}w(O,Ct)&&S(n.TEXTURE_CUBE_MAP),ve.__version=_e.version,O.onUpdate&&O.onUpdate(O)}F.__version=O.version}function we(F,O,ie,Me,_e,ve){const Qe=s.convert(ie.format,ie.colorSpace),Re=s.convert(ie.type),Fe=E(ie.internalFormat,Qe,Re,ie.colorSpace);if(!r.get(O).__hasExternalTextures){const bt=Math.max(1,O.width>>ve),be=Math.max(1,O.height>>ve);_e===n.TEXTURE_3D||_e===n.TEXTURE_2D_ARRAY?t.texImage3D(_e,ve,Fe,bt,be,O.depth,0,Qe,Re,null):t.texImage2D(_e,ve,Fe,bt,be,0,Qe,Re,null)}t.bindFramebuffer(n.FRAMEBUFFER,F),pe(O)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,Me,_e,r.get(ie).__webglTexture,0,Ce(O)):(_e===n.TEXTURE_2D||_e>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&_e<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,Me,_e,r.get(ie).__webglTexture,ve),t.bindFramebuffer(n.FRAMEBUFFER,null)}function lt(F,O,ie){if(n.bindRenderbuffer(n.RENDERBUFFER,F),O.depthBuffer&&!O.stencilBuffer){let Me=a===!0?n.DEPTH_COMPONENT24:n.DEPTH_COMPONENT16;if(ie||pe(O)){const _e=O.depthTexture;_e&&_e.isDepthTexture&&(_e.type===Ps?Me=n.DEPTH_COMPONENT32F:_e.type===Vo&&(Me=n.DEPTH_COMPONENT24));const ve=Ce(O);pe(O)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,ve,Me,O.width,O.height):n.renderbufferStorageMultisample(n.RENDERBUFFER,ve,Me,O.width,O.height)}else n.renderbufferStorage(n.RENDERBUFFER,Me,O.width,O.height);n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,F)}else if(O.depthBuffer&&O.stencilBuffer){const Me=Ce(O);ie&&pe(O)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Me,n.DEPTH24_STENCIL8,O.width,O.height):pe(O)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Me,n.DEPTH24_STENCIL8,O.width,O.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,O.width,O.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,F)}else{const Me=O.isWebGLMultipleRenderTargets===!0?O.texture:[O.texture];for(let _e=0;_e<Me.length;_e++){const ve=Me[_e],Qe=s.convert(ve.format,ve.colorSpace),Re=s.convert(ve.type),Fe=E(ve.internalFormat,Qe,Re,ve.colorSpace),ut=Ce(O);ie&&pe(O)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,ut,Fe,O.width,O.height):pe(O)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,ut,Fe,O.width,O.height):n.renderbufferStorage(n.RENDERBUFFER,Fe,O.width,O.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function ct(F,O){if(O&&O.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,F),!(O.depthTexture&&O.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(O.depthTexture).__webglTexture||O.depthTexture.image.width!==O.width||O.depthTexture.image.height!==O.height)&&(O.depthTexture.image.width=O.width,O.depthTexture.image.height=O.height,O.depthTexture.needsUpdate=!0),J(O.depthTexture,0);const Me=r.get(O.depthTexture).__webglTexture,_e=Ce(O);if(O.depthTexture.format===Qa)pe(O)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Me,0,_e):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Me,0);else if(O.depthTexture.format===Nc)pe(O)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Me,0,_e):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Me,0);else throw new Error("Unknown depthTexture format")}function He(F){const O=r.get(F),ie=F.isWebGLCubeRenderTarget===!0;if(F.depthTexture&&!O.__autoAllocateDepthBuffer){if(ie)throw new Error("target.depthTexture not supported in Cube render targets");ct(O.__webglFramebuffer,F)}else if(ie){O.__webglDepthbuffer=[];for(let Me=0;Me<6;Me++)t.bindFramebuffer(n.FRAMEBUFFER,O.__webglFramebuffer[Me]),O.__webglDepthbuffer[Me]=n.createRenderbuffer(),lt(O.__webglDepthbuffer[Me],F,!1)}else t.bindFramebuffer(n.FRAMEBUFFER,O.__webglFramebuffer),O.__webglDepthbuffer=n.createRenderbuffer(),lt(O.__webglDepthbuffer,F,!1);t.bindFramebuffer(n.FRAMEBUFFER,null)}function Ye(F,O,ie){const Me=r.get(F);O!==void 0&&we(Me.__webglFramebuffer,F,F.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),ie!==void 0&&He(F)}function $(F){const O=F.texture,ie=r.get(F),Me=r.get(O);F.addEventListener("dispose",k),F.isWebGLMultipleRenderTargets!==!0&&(Me.__webglTexture===void 0&&(Me.__webglTexture=n.createTexture()),Me.__version=O.version,o.memory.textures++);const _e=F.isWebGLCubeRenderTarget===!0,ve=F.isWebGLMultipleRenderTargets===!0,Qe=y(F)||a;if(_e){ie.__webglFramebuffer=[];for(let Re=0;Re<6;Re++)if(a&&O.mipmaps&&O.mipmaps.length>0){ie.__webglFramebuffer[Re]=[];for(let Fe=0;Fe<O.mipmaps.length;Fe++)ie.__webglFramebuffer[Re][Fe]=n.createFramebuffer()}else ie.__webglFramebuffer[Re]=n.createFramebuffer()}else{if(a&&O.mipmaps&&O.mipmaps.length>0){ie.__webglFramebuffer=[];for(let Re=0;Re<O.mipmaps.length;Re++)ie.__webglFramebuffer[Re]=n.createFramebuffer()}else ie.__webglFramebuffer=n.createFramebuffer();if(ve)if(i.drawBuffers){const Re=F.texture;for(let Fe=0,ut=Re.length;Fe<ut;Fe++){const bt=r.get(Re[Fe]);bt.__webglTexture===void 0&&(bt.__webglTexture=n.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&F.samples>0&&pe(F)===!1){const Re=ve?O:[O];ie.__webglMultisampledFramebuffer=n.createFramebuffer(),ie.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,ie.__webglMultisampledFramebuffer);for(let Fe=0;Fe<Re.length;Fe++){const ut=Re[Fe];ie.__webglColorRenderbuffer[Fe]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,ie.__webglColorRenderbuffer[Fe]);const bt=s.convert(ut.format,ut.colorSpace),be=s.convert(ut.type),Wt=E(ut.internalFormat,bt,be,ut.colorSpace,F.isXRRenderTarget===!0),Ct=Ce(F);n.renderbufferStorageMultisample(n.RENDERBUFFER,Ct,Wt,F.width,F.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Fe,n.RENDERBUFFER,ie.__webglColorRenderbuffer[Fe])}n.bindRenderbuffer(n.RENDERBUFFER,null),F.depthBuffer&&(ie.__webglDepthRenderbuffer=n.createRenderbuffer(),lt(ie.__webglDepthRenderbuffer,F,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(_e){t.bindTexture(n.TEXTURE_CUBE_MAP,Me.__webglTexture),K(n.TEXTURE_CUBE_MAP,O,Qe);for(let Re=0;Re<6;Re++)if(a&&O.mipmaps&&O.mipmaps.length>0)for(let Fe=0;Fe<O.mipmaps.length;Fe++)we(ie.__webglFramebuffer[Re][Fe],F,O,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Re,Fe);else we(ie.__webglFramebuffer[Re],F,O,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Re,0);w(O,Qe)&&S(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(ve){const Re=F.texture;for(let Fe=0,ut=Re.length;Fe<ut;Fe++){const bt=Re[Fe],be=r.get(bt);t.bindTexture(n.TEXTURE_2D,be.__webglTexture),K(n.TEXTURE_2D,bt,Qe),we(ie.__webglFramebuffer,F,bt,n.COLOR_ATTACHMENT0+Fe,n.TEXTURE_2D,0),w(bt,Qe)&&S(n.TEXTURE_2D)}t.unbindTexture()}else{let Re=n.TEXTURE_2D;if((F.isWebGL3DRenderTarget||F.isWebGLArrayRenderTarget)&&(a?Re=F.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(Re,Me.__webglTexture),K(Re,O,Qe),a&&O.mipmaps&&O.mipmaps.length>0)for(let Fe=0;Fe<O.mipmaps.length;Fe++)we(ie.__webglFramebuffer[Fe],F,O,n.COLOR_ATTACHMENT0,Re,Fe);else we(ie.__webglFramebuffer,F,O,n.COLOR_ATTACHMENT0,Re,0);w(O,Qe)&&S(Re),t.unbindTexture()}F.depthBuffer&&He(F)}function Se(F){const O=y(F)||a,ie=F.isWebGLMultipleRenderTargets===!0?F.texture:[F.texture];for(let Me=0,_e=ie.length;Me<_e;Me++){const ve=ie[Me];if(w(ve,O)){const Qe=F.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:n.TEXTURE_2D,Re=r.get(ve).__webglTexture;t.bindTexture(Qe,Re),S(Qe),t.unbindTexture()}}}function fe(F){if(a&&F.samples>0&&pe(F)===!1){const O=F.isWebGLMultipleRenderTargets?F.texture:[F.texture],ie=F.width,Me=F.height;let _e=n.COLOR_BUFFER_BIT;const ve=[],Qe=F.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Re=r.get(F),Fe=F.isWebGLMultipleRenderTargets===!0;if(Fe)for(let ut=0;ut<O.length;ut++)t.bindFramebuffer(n.FRAMEBUFFER,Re.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+ut,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,Re.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+ut,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,Re.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Re.__webglFramebuffer);for(let ut=0;ut<O.length;ut++){ve.push(n.COLOR_ATTACHMENT0+ut),F.depthBuffer&&ve.push(Qe);const bt=Re.__ignoreDepthValues!==void 0?Re.__ignoreDepthValues:!1;if(bt===!1&&(F.depthBuffer&&(_e|=n.DEPTH_BUFFER_BIT),F.stencilBuffer&&(_e|=n.STENCIL_BUFFER_BIT)),Fe&&n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,Re.__webglColorRenderbuffer[ut]),bt===!0&&(n.invalidateFramebuffer(n.READ_FRAMEBUFFER,[Qe]),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[Qe])),Fe){const be=r.get(O[ut]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,be,0)}n.blitFramebuffer(0,0,ie,Me,0,0,ie,Me,_e,n.NEAREST),c&&n.invalidateFramebuffer(n.READ_FRAMEBUFFER,ve)}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),Fe)for(let ut=0;ut<O.length;ut++){t.bindFramebuffer(n.FRAMEBUFFER,Re.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+ut,n.RENDERBUFFER,Re.__webglColorRenderbuffer[ut]);const bt=r.get(O[ut]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,Re.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+ut,n.TEXTURE_2D,bt,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Re.__webglMultisampledFramebuffer)}}function Ce(F){return Math.min(i.maxSamples,F.samples)}function pe(F){const O=r.get(F);return a&&F.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&O.__useRenderToTexture!==!1}function et(F){const O=o.render.frame;d.get(F)!==O&&(d.set(F,O),F.update())}function De(F,O){const ie=F.colorSpace,Me=F.format,_e=F.type;return F.isCompressedTexture===!0||F.isVideoTexture===!0||F.format===Jy||ie!==po&&ie!==Pi&&(rn.getTransfer(ie)===un?a===!1?e.has("EXT_sRGB")===!0&&Me===Zr?(F.format=Jy,F.minFilter=Wn,F.generateMipmaps=!1):O=pT.sRGBToLinear(O):(Me!==Zr||_e!==co)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",ie)),O}this.allocateTextureUnit=z,this.resetTextureUnits=re,this.setTexture2D=J,this.setTexture2DArray=te,this.setTexture3D=L,this.setTextureCube=U,this.rebindTextures=Ye,this.setupRenderTarget=$,this.updateRenderTargetMipmap=Se,this.updateMultisampleRenderTarget=fe,this.setupDepthRenderbuffer=He,this.setupFrameBufferTexture=we,this.useMultisampledRTT=pe}function lB(n,e,t){const r=t.isWebGL2;function i(s,o=Pi){let a;const l=rn.getTransfer(o);if(s===co)return n.UNSIGNED_BYTE;if(s===iT)return n.UNSIGNED_SHORT_4_4_4_4;if(s===sT)return n.UNSIGNED_SHORT_5_5_5_1;if(s===AF)return n.BYTE;if(s===CF)return n.SHORT;if(s===Z0)return n.UNSIGNED_SHORT;if(s===rT)return n.INT;if(s===Vo)return n.UNSIGNED_INT;if(s===Ps)return n.FLOAT;if(s===Hd)return r?n.HALF_FLOAT:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(s===PF)return n.ALPHA;if(s===Zr)return n.RGBA;if(s===RF)return n.LUMINANCE;if(s===IF)return n.LUMINANCE_ALPHA;if(s===Qa)return n.DEPTH_COMPONENT;if(s===Nc)return n.DEPTH_STENCIL;if(s===Jy)return a=e.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(s===LF)return n.RED;if(s===oT)return n.RED_INTEGER;if(s===kF)return n.RG;if(s===aT)return n.RG_INTEGER;if(s===lT)return n.RGBA_INTEGER;if(s===ty||s===ny||s===ry||s===iy)if(l===un)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(s===ty)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===ny)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===ry)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===iy)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(s===ty)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===ny)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===ry)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===iy)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===a1||s===l1||s===c1||s===u1)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(s===a1)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===l1)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===c1)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===u1)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===cT)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===d1||s===h1)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(s===d1)return l===un?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(s===h1)return l===un?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===f1||s===p1||s===m1||s===g1||s===v1||s===y1||s===_1||s===x1||s===w1||s===S1||s===b1||s===E1||s===M1||s===T1)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(s===f1)return l===un?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===p1)return l===un?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===m1)return l===un?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===g1)return l===un?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===v1)return l===un?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===y1)return l===un?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===_1)return l===un?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===x1)return l===un?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===w1)return l===un?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===S1)return l===un?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===b1)return l===un?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===E1)return l===un?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===M1)return l===un?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===T1)return l===un?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===sy||s===A1||s===C1)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(s===sy)return l===un?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(s===A1)return a.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(s===C1)return a.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(s===OF||s===P1||s===R1||s===I1)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(s===sy)return a.COMPRESSED_RED_RGTC1_EXT;if(s===P1)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(s===R1)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(s===I1)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return s===Ja?r?n.UNSIGNED_INT_24_8:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null):n[s]!==void 0?n[s]:null}return{convert:i}}class cB extends Gn{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class cd extends nn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const Gee={type:"move"};class $w{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new cd,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new cd,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new j,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new j),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new cd,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new j,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new j),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const r of e.hand.values())this._getHandJoint(t,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,r){let i=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(c&&e.hand){o=!0;for(const x of e.hand.values()){const y=t.getJointPose(x,r),g=this._getHandJoint(c,x);y!==null&&(g.matrix.fromArray(y.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.matrixWorldNeedsUpdate=!0,g.jointRadius=y.radius),g.visible=y!==null}const d=c.joints["index-finger-tip"],f=c.joints["thumb-tip"],p=d.position.distanceTo(f.position),m=.02,v=.005;c.inputState.pinching&&p>m+v?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&p<=m-v&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,r),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(i=t.getPose(e.targetRaySpace,r),i===null&&s!==null&&(i=s),i!==null&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(Gee)))}return a!==null&&(a.visible=i!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const r=new cd;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[t.jointName]=r,e.add(r)}return e.joints[t.jointName]}}class $ee extends ia{constructor(e,t){super();const r=this;let i=null,s=1,o=null,a="local-floor",l=1,c=null,d=null,f=null,p=null,m=null,v=null;const x=t.getContextAttributes();let y=null,g=null;const w=[],S=[],E=new me;let A=null;const T=new Gn;T.layers.enable(1),T.viewport=new sn;const P=new Gn;P.layers.enable(2),P.viewport=new sn;const k=[T,P],R=new cB;R.layers.enable(1),R.layers.enable(2);let I=null,H=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(K){let oe=w[K];return oe===void 0&&(oe=new $w,w[K]=oe),oe.getTargetRaySpace()},this.getControllerGrip=function(K){let oe=w[K];return oe===void 0&&(oe=new $w,w[K]=oe),oe.getGripSpace()},this.getHand=function(K){let oe=w[K];return oe===void 0&&(oe=new $w,w[K]=oe),oe.getHandSpace()};function G(K){const oe=S.indexOf(K.inputSource);if(oe===-1)return;const xe=w[oe];xe!==void 0&&(xe.update(K.inputSource,K.frame,c||o),xe.dispatchEvent({type:K.type,data:K.inputSource}))}function re(){i.removeEventListener("select",G),i.removeEventListener("selectstart",G),i.removeEventListener("selectend",G),i.removeEventListener("squeeze",G),i.removeEventListener("squeezestart",G),i.removeEventListener("squeezeend",G),i.removeEventListener("end",re),i.removeEventListener("inputsourceschange",z);for(let K=0;K<w.length;K++){const oe=S[K];oe!==null&&(S[K]=null,w[K].disconnect(oe))}I=null,H=null,e.setRenderTarget(y),m=null,p=null,f=null,i=null,g=null,Q.stop(),r.isPresenting=!1,e.setPixelRatio(A),e.setSize(E.width,E.height,!1),r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(K){s=K,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(K){a=K,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(K){c=K},this.getBaseLayer=function(){return p!==null?p:m},this.getBinding=function(){return f},this.getFrame=function(){return v},this.getSession=function(){return i},this.setSession=async function(K){if(i=K,i!==null){if(y=e.getRenderTarget(),i.addEventListener("select",G),i.addEventListener("selectstart",G),i.addEventListener("selectend",G),i.addEventListener("squeeze",G),i.addEventListener("squeezestart",G),i.addEventListener("squeezeend",G),i.addEventListener("end",re),i.addEventListener("inputsourceschange",z),x.xrCompatible!==!0&&await t.makeXRCompatible(),A=e.getPixelRatio(),e.getSize(E),i.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const oe={antialias:i.renderState.layers===void 0?x.antialias:!0,alpha:!0,depth:x.depth,stencil:x.stencil,framebufferScaleFactor:s};m=new XRWebGLLayer(i,t,oe),i.updateRenderState({baseLayer:m}),e.setPixelRatio(1),e.setSize(m.framebufferWidth,m.framebufferHeight,!1),g=new Us(m.framebufferWidth,m.framebufferHeight,{format:Zr,type:co,colorSpace:e.outputColorSpace,stencilBuffer:x.stencil})}else{let oe=null,xe=null,Ae=null;x.depth&&(Ae=x.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,oe=x.stencil?Nc:Qa,xe=x.stencil?Ja:Vo);const we={colorFormat:t.RGBA8,depthFormat:Ae,scaleFactor:s};f=new XRWebGLBinding(i,t),p=f.createProjectionLayer(we),i.updateRenderState({layers:[p]}),e.setPixelRatio(1),e.setSize(p.textureWidth,p.textureHeight,!1),g=new Us(p.textureWidth,p.textureHeight,{format:Zr,type:co,depthTexture:new _T(p.textureWidth,p.textureHeight,xe,void 0,void 0,void 0,void 0,void 0,void 0,oe),stencilBuffer:x.stencil,colorSpace:e.outputColorSpace,samples:x.antialias?4:0});const lt=e.properties.get(g);lt.__ignoreDepthValues=p.ignoreDepthValues}g.isXRRenderTarget=!0,this.setFoveation(l),c=null,o=await i.requestReferenceSpace(a),Q.setContext(i),Q.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode};function z(K){for(let oe=0;oe<K.removed.length;oe++){const xe=K.removed[oe],Ae=S.indexOf(xe);Ae>=0&&(S[Ae]=null,w[Ae].disconnect(xe))}for(let oe=0;oe<K.added.length;oe++){const xe=K.added[oe];let Ae=S.indexOf(xe);if(Ae===-1){for(let lt=0;lt<w.length;lt++)if(lt>=S.length){S.push(xe),Ae=lt;break}else if(S[lt]===null){S[lt]=xe,Ae=lt;break}if(Ae===-1)break}const we=w[Ae];we&&we.connect(xe)}}const Z=new j,J=new j;function te(K,oe,xe){Z.setFromMatrixPosition(oe.matrixWorld),J.setFromMatrixPosition(xe.matrixWorld);const Ae=Z.distanceTo(J),we=oe.projectionMatrix.elements,lt=xe.projectionMatrix.elements,ct=we[14]/(we[10]-1),He=we[14]/(we[10]+1),Ye=(we[9]+1)/we[5],$=(we[9]-1)/we[5],Se=(we[8]-1)/we[0],fe=(lt[8]+1)/lt[0],Ce=ct*Se,pe=ct*fe,et=Ae/(-Se+fe),De=et*-Se;oe.matrixWorld.decompose(K.position,K.quaternion,K.scale),K.translateX(De),K.translateZ(et),K.matrixWorld.compose(K.position,K.quaternion,K.scale),K.matrixWorldInverse.copy(K.matrixWorld).invert();const F=ct+et,O=He+et,ie=Ce-De,Me=pe+(Ae-De),_e=Ye*He/O*F,ve=$*He/O*F;K.projectionMatrix.makePerspective(ie,Me,_e,ve,F,O),K.projectionMatrixInverse.copy(K.projectionMatrix).invert()}function L(K,oe){oe===null?K.matrixWorld.copy(K.matrix):K.matrixWorld.multiplyMatrices(oe.matrixWorld,K.matrix),K.matrixWorldInverse.copy(K.matrixWorld).invert()}this.updateCamera=function(K){if(i===null)return;R.near=P.near=T.near=K.near,R.far=P.far=T.far=K.far,(I!==R.near||H!==R.far)&&(i.updateRenderState({depthNear:R.near,depthFar:R.far}),I=R.near,H=R.far);const oe=K.parent,xe=R.cameras;L(R,oe);for(let Ae=0;Ae<xe.length;Ae++)L(xe[Ae],oe);xe.length===2?te(R,T,P):R.projectionMatrix.copy(T.projectionMatrix),U(K,R,oe)};function U(K,oe,xe){xe===null?K.matrix.copy(oe.matrixWorld):(K.matrix.copy(xe.matrixWorld),K.matrix.invert(),K.matrix.multiply(oe.matrixWorld)),K.matrix.decompose(K.position,K.quaternion,K.scale),K.updateMatrixWorld(!0),K.projectionMatrix.copy(oe.projectionMatrix),K.projectionMatrixInverse.copy(oe.projectionMatrixInverse),K.isPerspectiveCamera&&(K.fov=Gd*2*Math.atan(1/K.projectionMatrix.elements[5]),K.zoom=1)}this.getCamera=function(){return R},this.getFoveation=function(){if(!(p===null&&m===null))return l},this.setFoveation=function(K){l=K,p!==null&&(p.fixedFoveation=K),m!==null&&m.fixedFoveation!==void 0&&(m.fixedFoveation=K)};let V=null;function Y(K,oe){if(d=oe.getViewerPose(c||o),v=oe,d!==null){const xe=d.views;m!==null&&(e.setRenderTargetFramebuffer(g,m.framebuffer),e.setRenderTarget(g));let Ae=!1;xe.length!==R.cameras.length&&(R.cameras.length=0,Ae=!0);for(let we=0;we<xe.length;we++){const lt=xe[we];let ct=null;if(m!==null)ct=m.getViewport(lt);else{const Ye=f.getViewSubImage(p,lt);ct=Ye.viewport,we===0&&(e.setRenderTargetTextures(g,Ye.colorTexture,p.ignoreDepthValues?void 0:Ye.depthStencilTexture),e.setRenderTarget(g))}let He=k[we];He===void 0&&(He=new Gn,He.layers.enable(we),He.viewport=new sn,k[we]=He),He.matrix.fromArray(lt.transform.matrix),He.matrix.decompose(He.position,He.quaternion,He.scale),He.projectionMatrix.fromArray(lt.projectionMatrix),He.projectionMatrixInverse.copy(He.projectionMatrix).invert(),He.viewport.set(ct.x,ct.y,ct.width,ct.height),we===0&&(R.matrix.copy(He.matrix),R.matrix.decompose(R.position,R.quaternion,R.scale)),Ae===!0&&R.cameras.push(He)}}for(let xe=0;xe<w.length;xe++){const Ae=S[xe],we=w[xe];Ae!==null&&we!==void 0&&we.update(Ae,oe,c||o)}V&&V(K,oe),oe.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:oe}),v=null}const Q=new nB;Q.setAnimationLoop(Y),this.setAnimationLoop=function(K){V=K},this.dispose=function(){}}}function Xee(n,e){function t(y,g){y.matrixAutoUpdate===!0&&y.updateMatrix(),g.value.copy(y.matrix)}function r(y,g){g.color.getRGB(y.fogColor.value,JF(n)),g.isFog?(y.fogNear.value=g.near,y.fogFar.value=g.far):g.isFogExp2&&(y.fogDensity.value=g.density)}function i(y,g,w,S,E){g.isMeshBasicMaterial||g.isMeshLambertMaterial?s(y,g):g.isMeshToonMaterial?(s(y,g),f(y,g)):g.isMeshPhongMaterial?(s(y,g),d(y,g)):g.isMeshStandardMaterial?(s(y,g),p(y,g),g.isMeshPhysicalMaterial&&m(y,g,E)):g.isMeshMatcapMaterial?(s(y,g),v(y,g)):g.isMeshDepthMaterial?s(y,g):g.isMeshDistanceMaterial?(s(y,g),x(y,g)):g.isMeshNormalMaterial?s(y,g):g.isLineBasicMaterial?(o(y,g),g.isLineDashedMaterial&&a(y,g)):g.isPointsMaterial?l(y,g,w,S):g.isSpriteMaterial?c(y,g):g.isShadowMaterial?(y.color.value.copy(g.color),y.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}function s(y,g){y.opacity.value=g.opacity,g.color&&y.diffuse.value.copy(g.color),g.emissive&&y.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(y.map.value=g.map,t(g.map,y.mapTransform)),g.alphaMap&&(y.alphaMap.value=g.alphaMap,t(g.alphaMap,y.alphaMapTransform)),g.bumpMap&&(y.bumpMap.value=g.bumpMap,t(g.bumpMap,y.bumpMapTransform),y.bumpScale.value=g.bumpScale,g.side===Qr&&(y.bumpScale.value*=-1)),g.normalMap&&(y.normalMap.value=g.normalMap,t(g.normalMap,y.normalMapTransform),y.normalScale.value.copy(g.normalScale),g.side===Qr&&y.normalScale.value.negate()),g.displacementMap&&(y.displacementMap.value=g.displacementMap,t(g.displacementMap,y.displacementMapTransform),y.displacementScale.value=g.displacementScale,y.displacementBias.value=g.displacementBias),g.emissiveMap&&(y.emissiveMap.value=g.emissiveMap,t(g.emissiveMap,y.emissiveMapTransform)),g.specularMap&&(y.specularMap.value=g.specularMap,t(g.specularMap,y.specularMapTransform)),g.alphaTest>0&&(y.alphaTest.value=g.alphaTest);const w=e.get(g).envMap;if(w&&(y.envMap.value=w,y.flipEnvMap.value=w.isCubeTexture&&w.isRenderTargetTexture===!1?-1:1,y.reflectivity.value=g.reflectivity,y.ior.value=g.ior,y.refractionRatio.value=g.refractionRatio),g.lightMap){y.lightMap.value=g.lightMap;const S=n._useLegacyLights===!0?Math.PI:1;y.lightMapIntensity.value=g.lightMapIntensity*S,t(g.lightMap,y.lightMapTransform)}g.aoMap&&(y.aoMap.value=g.aoMap,y.aoMapIntensity.value=g.aoMapIntensity,t(g.aoMap,y.aoMapTransform))}function o(y,g){y.diffuse.value.copy(g.color),y.opacity.value=g.opacity,g.map&&(y.map.value=g.map,t(g.map,y.mapTransform))}function a(y,g){y.dashSize.value=g.dashSize,y.totalSize.value=g.dashSize+g.gapSize,y.scale.value=g.scale}function l(y,g,w,S){y.diffuse.value.copy(g.color),y.opacity.value=g.opacity,y.size.value=g.size*w,y.scale.value=S*.5,g.map&&(y.map.value=g.map,t(g.map,y.uvTransform)),g.alphaMap&&(y.alphaMap.value=g.alphaMap,t(g.alphaMap,y.alphaMapTransform)),g.alphaTest>0&&(y.alphaTest.value=g.alphaTest)}function c(y,g){y.diffuse.value.copy(g.color),y.opacity.value=g.opacity,y.rotation.value=g.rotation,g.map&&(y.map.value=g.map,t(g.map,y.mapTransform)),g.alphaMap&&(y.alphaMap.value=g.alphaMap,t(g.alphaMap,y.alphaMapTransform)),g.alphaTest>0&&(y.alphaTest.value=g.alphaTest)}function d(y,g){y.specular.value.copy(g.specular),y.shininess.value=Math.max(g.shininess,1e-4)}function f(y,g){g.gradientMap&&(y.gradientMap.value=g.gradientMap)}function p(y,g){y.metalness.value=g.metalness,g.metalnessMap&&(y.metalnessMap.value=g.metalnessMap,t(g.metalnessMap,y.metalnessMapTransform)),y.roughness.value=g.roughness,g.roughnessMap&&(y.roughnessMap.value=g.roughnessMap,t(g.roughnessMap,y.roughnessMapTransform)),e.get(g).envMap&&(y.envMapIntensity.value=g.envMapIntensity)}function m(y,g,w){y.ior.value=g.ior,g.sheen>0&&(y.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),y.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(y.sheenColorMap.value=g.sheenColorMap,t(g.sheenColorMap,y.sheenColorMapTransform)),g.sheenRoughnessMap&&(y.sheenRoughnessMap.value=g.sheenRoughnessMap,t(g.sheenRoughnessMap,y.sheenRoughnessMapTransform))),g.clearcoat>0&&(y.clearcoat.value=g.clearcoat,y.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(y.clearcoatMap.value=g.clearcoatMap,t(g.clearcoatMap,y.clearcoatMapTransform)),g.clearcoatRoughnessMap&&(y.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap,t(g.clearcoatRoughnessMap,y.clearcoatRoughnessMapTransform)),g.clearcoatNormalMap&&(y.clearcoatNormalMap.value=g.clearcoatNormalMap,t(g.clearcoatNormalMap,y.clearcoatNormalMapTransform),y.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),g.side===Qr&&y.clearcoatNormalScale.value.negate())),g.iridescence>0&&(y.iridescence.value=g.iridescence,y.iridescenceIOR.value=g.iridescenceIOR,y.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],y.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(y.iridescenceMap.value=g.iridescenceMap,t(g.iridescenceMap,y.iridescenceMapTransform)),g.iridescenceThicknessMap&&(y.iridescenceThicknessMap.value=g.iridescenceThicknessMap,t(g.iridescenceThicknessMap,y.iridescenceThicknessMapTransform))),g.transmission>0&&(y.transmission.value=g.transmission,y.transmissionSamplerMap.value=w.texture,y.transmissionSamplerSize.value.set(w.width,w.height),g.transmissionMap&&(y.transmissionMap.value=g.transmissionMap,t(g.transmissionMap,y.transmissionMapTransform)),y.thickness.value=g.thickness,g.thicknessMap&&(y.thicknessMap.value=g.thicknessMap,t(g.thicknessMap,y.thicknessMapTransform)),y.attenuationDistance.value=g.attenuationDistance,y.attenuationColor.value.copy(g.attenuationColor)),g.anisotropy>0&&(y.anisotropyVector.value.set(g.anisotropy*Math.cos(g.anisotropyRotation),g.anisotropy*Math.sin(g.anisotropyRotation)),g.anisotropyMap&&(y.anisotropyMap.value=g.anisotropyMap,t(g.anisotropyMap,y.anisotropyMapTransform))),y.specularIntensity.value=g.specularIntensity,y.specularColor.value.copy(g.specularColor),g.specularColorMap&&(y.specularColorMap.value=g.specularColorMap,t(g.specularColorMap,y.specularColorMapTransform)),g.specularIntensityMap&&(y.specularIntensityMap.value=g.specularIntensityMap,t(g.specularIntensityMap,y.specularIntensityMapTransform))}function v(y,g){g.matcap&&(y.matcap.value=g.matcap)}function x(y,g){const w=e.get(g).light;y.referencePosition.value.setFromMatrixPosition(w.matrixWorld),y.nearDistance.value=w.shadow.camera.near,y.farDistance.value=w.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function qee(n,e,t,r){let i={},s={},o=[];const a=t.isWebGL2?n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(w,S){const E=S.program;r.uniformBlockBinding(w,E)}function c(w,S){let E=i[w.id];E===void 0&&(v(w),E=d(w),i[w.id]=E,w.addEventListener("dispose",y));const A=S.program;r.updateUBOMapping(w,A);const T=e.render.frame;s[w.id]!==T&&(p(w),s[w.id]=T)}function d(w){const S=f();w.__bindingPointIndex=S;const E=n.createBuffer(),A=w.__size,T=w.usage;return n.bindBuffer(n.UNIFORM_BUFFER,E),n.bufferData(n.UNIFORM_BUFFER,A,T),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,S,E),E}function f(){for(let w=0;w<a;w++)if(o.indexOf(w)===-1)return o.push(w),w;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function p(w){const S=i[w.id],E=w.uniforms,A=w.__cache;n.bindBuffer(n.UNIFORM_BUFFER,S);for(let T=0,P=E.length;T<P;T++){const k=Array.isArray(E[T])?E[T]:[E[T]];for(let R=0,I=k.length;R<I;R++){const H=k[R];if(m(H,T,R,A)===!0){const G=H.__offset,re=Array.isArray(H.value)?H.value:[H.value];let z=0;for(let Z=0;Z<re.length;Z++){const J=re[Z],te=x(J);typeof J=="number"||typeof J=="boolean"?(H.__data[0]=J,n.bufferSubData(n.UNIFORM_BUFFER,G+z,H.__data)):J.isMatrix3?(H.__data[0]=J.elements[0],H.__data[1]=J.elements[1],H.__data[2]=J.elements[2],H.__data[3]=0,H.__data[4]=J.elements[3],H.__data[5]=J.elements[4],H.__data[6]=J.elements[5],H.__data[7]=0,H.__data[8]=J.elements[6],H.__data[9]=J.elements[7],H.__data[10]=J.elements[8],H.__data[11]=0):(J.toArray(H.__data,z),z+=te.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,G,H.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function m(w,S,E,A){const T=w.value,P=S+"_"+E;if(A[P]===void 0)return typeof T=="number"||typeof T=="boolean"?A[P]=T:A[P]=T.clone(),!0;{const k=A[P];if(typeof T=="number"||typeof T=="boolean"){if(k!==T)return A[P]=T,!0}else if(k.equals(T)===!1)return k.copy(T),!0}return!1}function v(w){const S=w.uniforms;let E=0;const A=16;for(let P=0,k=S.length;P<k;P++){const R=Array.isArray(S[P])?S[P]:[S[P]];for(let I=0,H=R.length;I<H;I++){const G=R[I],re=Array.isArray(G.value)?G.value:[G.value];for(let z=0,Z=re.length;z<Z;z++){const J=re[z],te=x(J),L=E%A;L!==0&&A-L<te.boundary&&(E+=A-L),G.__data=new Float32Array(te.storage/Float32Array.BYTES_PER_ELEMENT),G.__offset=E,E+=te.storage}}}const T=E%A;return T>0&&(E+=A-T),w.__size=E,w.__cache={},this}function x(w){const S={boundary:0,storage:0};return typeof w=="number"||typeof w=="boolean"?(S.boundary=4,S.storage=4):w.isVector2?(S.boundary=8,S.storage=8):w.isVector3||w.isColor?(S.boundary=16,S.storage=12):w.isVector4?(S.boundary=16,S.storage=16):w.isMatrix3?(S.boundary=48,S.storage=48):w.isMatrix4?(S.boundary=64,S.storage=64):w.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",w),S}function y(w){const S=w.target;S.removeEventListener("dispose",y);const E=o.indexOf(S.__bindingPointIndex);o.splice(E,1),n.deleteBuffer(i[S.id]),delete i[S.id],delete s[S.id]}function g(){for(const w in i)n.deleteBuffer(i[w]);o=[],i={},s={}}return{bind:l,update:c,dispose:g}}class ST{constructor(e={}){const{canvas:t=YF(),context:r=null,depth:i=!0,stencil:s=!0,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:d="default",failIfMajorPerformanceCaveat:f=!1}=e;this.isWebGLRenderer=!0;let p;r!==null?p=r.getContextAttributes().alpha:p=o;const m=new Uint32Array(4),v=new Int32Array(4);let x=null,y=null;const g=[],w=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=tr,this._useLegacyLights=!1,this.toneMapping=lo,this.toneMappingExposure=1;const S=this;let E=!1,A=0,T=0,P=null,k=-1,R=null;const I=new sn,H=new sn;let G=null;const re=new Xe(0);let z=0,Z=t.width,J=t.height,te=1,L=null,U=null;const V=new sn(0,0,Z,J),Y=new sn(0,0,Z,J);let Q=!1;const K=new rm;let oe=!1,xe=!1,Ae=null;const we=new Et,lt=new me,ct=new j,He={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Ye(){return P===null?te:1}let $=r;function Se(B,se){for(let ce=0;ce<B.length;ce++){const ue=B[ce],le=t.getContext(ue,se);if(le!==null)return le}return null}try{const B={alpha:!0,depth:i,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:d,failIfMajorPerformanceCaveat:f};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${q0}`),t.addEventListener("webglcontextlost",Te,!1),t.addEventListener("webglcontextrestored",q,!1),t.addEventListener("webglcontextcreationerror",Ie,!1),$===null){const se=["webgl2","webgl","experimental-webgl"];if(S.isWebGL1Renderer===!0&&se.shift(),$=Se(se,B),$===null)throw Se(se)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&$ instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),$.getShaderPrecisionFormat===void 0&&($.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(B){throw console.error("THREE.WebGLRenderer: "+B.message),B}let fe,Ce,pe,et,De,F,O,ie,Me,_e,ve,Qe,Re,Fe,ut,bt,be,Wt,Ct,vt,tt,We,X,ye;function Ve(){fe=new lQ($),Ce=new nQ($,fe,e),fe.init(Ce),We=new lB($,fe,Ce),pe=new Hee($,fe,Ce),et=new dQ($),De=new Iee,F=new Wee($,fe,pe,De,Ce,We,et),O=new iQ(S),ie=new aQ(S),Me=new _K($,Ce),X=new eQ($,fe,Me,Ce),_e=new cQ($,Me,et,X),ve=new mQ($,_e,Me,et),Ct=new pQ($,Ce,F),bt=new rQ(De),Qe=new Ree(S,O,ie,fe,Ce,X,bt),Re=new Xee(S,De),Fe=new kee,ut=new Bee(fe,Ce),Wt=new QJ(S,O,ie,pe,ve,p,l),be=new jee(S,ve,Ce),ye=new qee($,et,Ce,pe),vt=new tQ($,fe,et,Ce),tt=new uQ($,fe,et,Ce),et.programs=Qe.programs,S.capabilities=Ce,S.extensions=fe,S.properties=De,S.renderLists=Fe,S.shadowMap=be,S.state=pe,S.info=et}Ve();const Be=new $ee(S,$);this.xr=Be,this.getContext=function(){return $},this.getContextAttributes=function(){return $.getContextAttributes()},this.forceContextLoss=function(){const B=fe.get("WEBGL_lose_context");B&&B.loseContext()},this.forceContextRestore=function(){const B=fe.get("WEBGL_lose_context");B&&B.restoreContext()},this.getPixelRatio=function(){return te},this.setPixelRatio=function(B){B!==void 0&&(te=B,this.setSize(Z,J,!1))},this.getSize=function(B){return B.set(Z,J)},this.setSize=function(B,se,ce=!0){if(Be.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}Z=B,J=se,t.width=Math.floor(B*te),t.height=Math.floor(se*te),ce===!0&&(t.style.width=B+"px",t.style.height=se+"px"),this.setViewport(0,0,B,se)},this.getDrawingBufferSize=function(B){return B.set(Z*te,J*te).floor()},this.setDrawingBufferSize=function(B,se,ce){Z=B,J=se,te=ce,t.width=Math.floor(B*ce),t.height=Math.floor(se*ce),this.setViewport(0,0,B,se)},this.getCurrentViewport=function(B){return B.copy(I)},this.getViewport=function(B){return B.copy(V)},this.setViewport=function(B,se,ce,ue){B.isVector4?V.set(B.x,B.y,B.z,B.w):V.set(B,se,ce,ue),pe.viewport(I.copy(V).multiplyScalar(te).floor())},this.getScissor=function(B){return B.copy(Y)},this.setScissor=function(B,se,ce,ue){B.isVector4?Y.set(B.x,B.y,B.z,B.w):Y.set(B,se,ce,ue),pe.scissor(H.copy(Y).multiplyScalar(te).floor())},this.getScissorTest=function(){return Q},this.setScissorTest=function(B){pe.setScissorTest(Q=B)},this.setOpaqueSort=function(B){L=B},this.setTransparentSort=function(B){U=B},this.getClearColor=function(B){return B.copy(Wt.getClearColor())},this.setClearColor=function(){Wt.setClearColor.apply(Wt,arguments)},this.getClearAlpha=function(){return Wt.getClearAlpha()},this.setClearAlpha=function(){Wt.setClearAlpha.apply(Wt,arguments)},this.clear=function(B=!0,se=!0,ce=!0){let ue=0;if(B){let le=!1;if(P!==null){const $e=P.texture.format;le=$e===lT||$e===aT||$e===oT}if(le){const $e=P.texture.type,dt=$e===co||$e===Vo||$e===Z0||$e===Ja||$e===iT||$e===sT,yt=Wt.getClearColor(),xt=Wt.getClearAlpha(),Tt=yt.r,Mt=yt.g,At=yt.b;dt?(m[0]=Tt,m[1]=Mt,m[2]=At,m[3]=xt,$.clearBufferuiv($.COLOR,0,m)):(v[0]=Tt,v[1]=Mt,v[2]=At,v[3]=xt,$.clearBufferiv($.COLOR,0,v))}else ue|=$.COLOR_BUFFER_BIT}se&&(ue|=$.DEPTH_BUFFER_BIT),ce&&(ue|=$.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),$.clear(ue)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Te,!1),t.removeEventListener("webglcontextrestored",q,!1),t.removeEventListener("webglcontextcreationerror",Ie,!1),Fe.dispose(),ut.dispose(),De.dispose(),O.dispose(),ie.dispose(),ve.dispose(),X.dispose(),ye.dispose(),Qe.dispose(),Be.dispose(),Be.removeEventListener("sessionstart",Xt),Be.removeEventListener("sessionend",Ot),Ae&&(Ae.dispose(),Ae=null),hn.stop()};function Te(B){B.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),E=!0}function q(){console.log("THREE.WebGLRenderer: Context Restored."),E=!1;const B=et.autoReset,se=be.enabled,ce=be.autoUpdate,ue=be.needsUpdate,le=be.type;Ve(),et.autoReset=B,be.enabled=se,be.autoUpdate=ce,be.needsUpdate=ue,be.type=le}function Ie(B){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",B.statusMessage)}function Oe(B){const se=B.target;se.removeEventListener("dispose",Oe),pt(se)}function pt(B){Ee(B),De.remove(B)}function Ee(B){const se=De.get(B).programs;se!==void 0&&(se.forEach(function(ce){Qe.releaseProgram(ce)}),B.isShaderMaterial&&Qe.releaseShaderCache(B))}this.renderBufferDirect=function(B,se,ce,ue,le,$e){se===null&&(se=He);const dt=le.isMesh&&le.matrixWorld.determinant()<0,yt=E_(B,se,ce,ue,le);pe.setMaterial(ue,dt);let xt=ce.index,Tt=1;if(ue.wireframe===!0){if(xt=_e.getWireframeAttribute(ce),xt===void 0)return;Tt=2}const Mt=ce.drawRange,At=ce.attributes.position;let Sn=Mt.start*Tt,gr=(Mt.start+Mt.count)*Tt;$e!==null&&(Sn=Math.max(Sn,$e.start*Tt),gr=Math.min(gr,($e.start+$e.count)*Tt)),xt!==null?(Sn=Math.max(Sn,0),gr=Math.min(gr,xt.count)):At!=null&&(Sn=Math.max(Sn,0),gr=Math.min(gr,At.count));const fn=gr-Sn;if(fn<0||fn===1/0)return;X.setup(le,ue,yt,ce,xt);let lr,wt=vt;if(xt!==null&&(lr=Me.get(xt),wt=tt,wt.setIndex(lr)),le.isMesh)ue.wireframe===!0?(pe.setLineWidth(ue.wireframeLinewidth*Ye()),wt.setMode($.LINES)):wt.setMode($.TRIANGLES);else if(le.isLine){let Ze=ue.linewidth;Ze===void 0&&(Ze=1),pe.setLineWidth(Ze*Ye()),le.isLineSegments?wt.setMode($.LINES):le.isLineLoop?wt.setMode($.LINE_LOOP):wt.setMode($.LINE_STRIP)}else le.isPoints?wt.setMode($.POINTS):le.isSprite&&wt.setMode($.TRIANGLES);if(le.isBatchedMesh)wt.renderMultiDraw(le._multiDrawStarts,le._multiDrawCounts,le._multiDrawCount);else if(le.isInstancedMesh)wt.renderInstances(Sn,fn,le.count);else if(ce.isInstancedBufferGeometry){const Ze=ce._maxInstanceCount!==void 0?ce._maxInstanceCount:1/0,ji=Math.min(ce.instanceCount,Ze);wt.renderInstances(Sn,fn,ji)}else wt.render(Sn,fn)};function qe(B,se,ce){B.transparent===!0&&B.side===to&&B.forceSinglePass===!1?(B.side=Qr,B.needsUpdate=!0,qc(B,se,ce),B.side=ea,B.needsUpdate=!0,qc(B,se,ce),B.side=to):qc(B,se,ce)}this.compile=function(B,se,ce=null){ce===null&&(ce=B),y=ut.get(ce),y.init(),w.push(y),ce.traverseVisible(function(le){le.isLight&&le.layers.test(se.layers)&&(y.pushLight(le),le.castShadow&&y.pushShadow(le))}),B!==ce&&B.traverseVisible(function(le){le.isLight&&le.layers.test(se.layers)&&(y.pushLight(le),le.castShadow&&y.pushShadow(le))}),y.setupLights(S._useLegacyLights);const ue=new Set;return B.traverse(function(le){const $e=le.material;if($e)if(Array.isArray($e))for(let dt=0;dt<$e.length;dt++){const yt=$e[dt];qe(yt,ce,le),ue.add(yt)}else qe($e,ce,le),ue.add($e)}),w.pop(),y=null,ue},this.compileAsync=function(B,se,ce=null){const ue=this.compile(B,se,ce);return new Promise(le=>{function $e(){if(ue.forEach(function(dt){De.get(dt).currentProgram.isReady()&&ue.delete(dt)}),ue.size===0){le(B);return}setTimeout($e,10)}fe.get("KHR_parallel_shader_compile")!==null?$e():setTimeout($e,10)})};let it=null;function Vt(B){it&&it(B)}function Xt(){hn.stop()}function Ot(){hn.start()}const hn=new nB;hn.setAnimationLoop(Vt),typeof self<"u"&&hn.setContext(self),this.setAnimationLoop=function(B){it=B,Be.setAnimationLoop(B),B===null?hn.stop():hn.start()},Be.addEventListener("sessionstart",Xt),Be.addEventListener("sessionend",Ot),this.render=function(B,se){if(se!==void 0&&se.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(E===!0)return;B.matrixWorldAutoUpdate===!0&&B.updateMatrixWorld(),se.parent===null&&se.matrixWorldAutoUpdate===!0&&se.updateMatrixWorld(),Be.enabled===!0&&Be.isPresenting===!0&&(Be.cameraAutoUpdate===!0&&Be.updateCamera(se),se=Be.getCamera()),B.isScene===!0&&B.onBeforeRender(S,B,se,P),y=ut.get(B,w.length),y.init(),w.push(y),we.multiplyMatrices(se.projectionMatrix,se.matrixWorldInverse),K.setFromProjectionMatrix(we),xe=this.localClippingEnabled,oe=bt.init(this.clippingPlanes,xe),x=Fe.get(B,g.length),x.init(),g.push(x),_n(B,se,0,S.sortObjects),x.finish(),S.sortObjects===!0&&x.sort(L,U),this.info.render.frame++,oe===!0&&bt.beginShadows();const ce=y.state.shadowsArray;if(be.render(ce,B,se),oe===!0&&bt.endShadows(),this.info.autoReset===!0&&this.info.reset(),Wt.render(x,B),y.setupLights(S._useLegacyLights),se.isArrayCamera){const ue=se.cameras;for(let le=0,$e=ue.length;le<$e;le++){const dt=ue[le];ii(x,B,dt,dt.viewport)}}else ii(x,B,se);P!==null&&(F.updateMultisampleRenderTarget(P),F.updateRenderTargetMipmap(P)),B.isScene===!0&&B.onAfterRender(S,B,se),X.resetDefaultState(),k=-1,R=null,w.pop(),w.length>0?y=w[w.length-1]:y=null,g.pop(),g.length>0?x=g[g.length-1]:x=null};function _n(B,se,ce,ue){if(B.visible===!1)return;if(B.layers.test(se.layers)){if(B.isGroup)ce=B.renderOrder;else if(B.isLOD)B.autoUpdate===!0&&B.update(se);else if(B.isLight)y.pushLight(B),B.castShadow&&y.pushShadow(B);else if(B.isSprite){if(!B.frustumCulled||K.intersectsSprite(B)){ue&&ct.setFromMatrixPosition(B.matrixWorld).applyMatrix4(we);const dt=ve.update(B),yt=B.material;yt.visible&&x.push(B,dt,yt,ce,ct.z,null)}}else if((B.isMesh||B.isLine||B.isPoints)&&(!B.frustumCulled||K.intersectsObject(B))){const dt=ve.update(B),yt=B.material;if(ue&&(B.boundingSphere!==void 0?(B.boundingSphere===null&&B.computeBoundingSphere(),ct.copy(B.boundingSphere.center)):(dt.boundingSphere===null&&dt.computeBoundingSphere(),ct.copy(dt.boundingSphere.center)),ct.applyMatrix4(B.matrixWorld).applyMatrix4(we)),Array.isArray(yt)){const xt=dt.groups;for(let Tt=0,Mt=xt.length;Tt<Mt;Tt++){const At=xt[Tt],Sn=yt[At.materialIndex];Sn&&Sn.visible&&x.push(B,dt,Sn,ce,ct.z,At)}}else yt.visible&&x.push(B,dt,yt,ce,ct.z,null)}}const $e=B.children;for(let dt=0,yt=$e.length;dt<yt;dt++)_n($e[dt],se,ce,ue)}function ii(B,se,ce,ue){const le=B.opaque,$e=B.transmissive,dt=B.transparent;y.setupLightsView(ce),oe===!0&&bt.setGlobalState(S.clippingPlanes,ce),$e.length>0&&mh(le,$e,se,ce),ue&&pe.viewport(I.copy(ue)),le.length>0&&Xc(le,se,ce),$e.length>0&&Xc($e,se,ce),dt.length>0&&Xc(dt,se,ce),pe.buffers.depth.setTest(!0),pe.buffers.depth.setMask(!0),pe.buffers.color.setMask(!0),pe.setPolygonOffset(!1)}function mh(B,se,ce,ue){if((ce.isScene===!0?ce.overrideMaterial:null)!==null)return;const $e=Ce.isWebGL2;Ae===null&&(Ae=new Us(1,1,{generateMipmaps:!0,type:fe.has("EXT_color_buffer_half_float")?Hd:co,minFilter:hl,samples:$e?4:0})),S.getDrawingBufferSize(lt),$e?Ae.setSize(lt.x,lt.y):Ae.setSize(Qy(lt.x),Qy(lt.y));const dt=S.getRenderTarget();S.setRenderTarget(Ae),S.getClearColor(re),z=S.getClearAlpha(),z<1&&S.setClearColor(16777215,.5),S.clear();const yt=S.toneMapping;S.toneMapping=lo,Xc(B,ce,ue),F.updateMultisampleRenderTarget(Ae),F.updateRenderTargetMipmap(Ae);let xt=!1;for(let Tt=0,Mt=se.length;Tt<Mt;Tt++){const At=se[Tt],Sn=At.object,gr=At.geometry,fn=At.material,lr=At.group;if(fn.side===to&&Sn.layers.test(ue.layers)){const wt=fn.side;fn.side=Qr,fn.needsUpdate=!0,sa(Sn,ce,ue,gr,fn,lr),fn.side=wt,fn.needsUpdate=!0,xt=!0}}xt===!0&&(F.updateMultisampleRenderTarget(Ae),F.updateRenderTargetMipmap(Ae)),S.setRenderTarget(dt),S.setClearColor(re,z),S.toneMapping=yt}function Xc(B,se,ce){const ue=se.isScene===!0?se.overrideMaterial:null;for(let le=0,$e=B.length;le<$e;le++){const dt=B[le],yt=dt.object,xt=dt.geometry,Tt=ue===null?dt.material:ue,Mt=dt.group;yt.layers.test(ce.layers)&&sa(yt,se,ce,xt,Tt,Mt)}}function sa(B,se,ce,ue,le,$e){B.onBeforeRender(S,se,ce,ue,le,$e),B.modelViewMatrix.multiplyMatrices(ce.matrixWorldInverse,B.matrixWorld),B.normalMatrix.getNormalMatrix(B.modelViewMatrix),le.onBeforeRender(S,se,ce,ue,B,$e),le.transparent===!0&&le.side===to&&le.forceSinglePass===!1?(le.side=Qr,le.needsUpdate=!0,S.renderBufferDirect(ce,se,ue,le,B,$e),le.side=ea,le.needsUpdate=!0,S.renderBufferDirect(ce,se,ue,le,B,$e),le.side=to):S.renderBufferDirect(ce,se,ue,le,B,$e),B.onAfterRender(S,se,ce,ue,le,$e)}function qc(B,se,ce){se.isScene!==!0&&(se=He);const ue=De.get(B),le=y.state.lights,$e=y.state.shadowsArray,dt=le.state.version,yt=Qe.getParameters(B,le.state,$e,se,ce),xt=Qe.getProgramCacheKey(yt);let Tt=ue.programs;ue.environment=B.isMeshStandardMaterial?se.environment:null,ue.fog=se.fog,ue.envMap=(B.isMeshStandardMaterial?ie:O).get(B.envMap||ue.environment),Tt===void 0&&(B.addEventListener("dispose",Oe),Tt=new Map,ue.programs=Tt);let Mt=Tt.get(xt);if(Mt!==void 0){if(ue.currentProgram===Mt&&ue.lightsStateVersion===dt)return hm(B,yt),Mt}else yt.uniforms=Qe.getUniforms(B),B.onBuild(ce,yt,S),B.onBeforeCompile(yt,S),Mt=Qe.acquireProgram(yt,xt),Tt.set(xt,Mt),ue.uniforms=yt.uniforms;const At=ue.uniforms;return(!B.isShaderMaterial&&!B.isRawShaderMaterial||B.clipping===!0)&&(At.clippingPlanes=bt.uniform),hm(B,yt),ue.needsLights=T_(B),ue.lightsStateVersion=dt,ue.needsLights&&(At.ambientLightColor.value=le.state.ambient,At.lightProbe.value=le.state.probe,At.directionalLights.value=le.state.directional,At.directionalLightShadows.value=le.state.directionalShadow,At.spotLights.value=le.state.spot,At.spotLightShadows.value=le.state.spotShadow,At.rectAreaLights.value=le.state.rectArea,At.ltc_1.value=le.state.rectAreaLTC1,At.ltc_2.value=le.state.rectAreaLTC2,At.pointLights.value=le.state.point,At.pointLightShadows.value=le.state.pointShadow,At.hemisphereLights.value=le.state.hemi,At.directionalShadowMap.value=le.state.directionalShadowMap,At.directionalShadowMatrix.value=le.state.directionalShadowMatrix,At.spotShadowMap.value=le.state.spotShadowMap,At.spotLightMatrix.value=le.state.spotLightMatrix,At.spotLightMap.value=le.state.spotLightMap,At.pointShadowMap.value=le.state.pointShadowMap,At.pointShadowMatrix.value=le.state.pointShadowMatrix),ue.currentProgram=Mt,ue.uniformsList=null,Mt}function dm(B){if(B.uniformsList===null){const se=B.currentProgram.getUniforms();B.uniformsList=ay.seqWithValue(se.seq,B.uniforms)}return B.uniformsList}function hm(B,se){const ce=De.get(B);ce.outputColorSpace=se.outputColorSpace,ce.batching=se.batching,ce.instancing=se.instancing,ce.instancingColor=se.instancingColor,ce.skinning=se.skinning,ce.morphTargets=se.morphTargets,ce.morphNormals=se.morphNormals,ce.morphColors=se.morphColors,ce.morphTargetsCount=se.morphTargetsCount,ce.numClippingPlanes=se.numClippingPlanes,ce.numIntersection=se.numClipIntersection,ce.vertexAlphas=se.vertexAlphas,ce.vertexTangents=se.vertexTangents,ce.toneMapping=se.toneMapping}function E_(B,se,ce,ue,le){se.isScene!==!0&&(se=He),F.resetTextureUnits();const $e=se.fog,dt=ue.isMeshStandardMaterial?se.environment:null,yt=P===null?S.outputColorSpace:P.isXRRenderTarget===!0?P.texture.colorSpace:po,xt=(ue.isMeshStandardMaterial?ie:O).get(ue.envMap||dt),Tt=ue.vertexColors===!0&&!!ce.attributes.color&&ce.attributes.color.itemSize===4,Mt=!!ce.attributes.tangent&&(!!ue.normalMap||ue.anisotropy>0),At=!!ce.morphAttributes.position,Sn=!!ce.morphAttributes.normal,gr=!!ce.morphAttributes.color;let fn=lo;ue.toneMapped&&(P===null||P.isXRRenderTarget===!0)&&(fn=S.toneMapping);const lr=ce.morphAttributes.position||ce.morphAttributes.normal||ce.morphAttributes.color,wt=lr!==void 0?lr.length:0,Ze=De.get(ue),ji=y.state.lights;if(oe===!0&&(xe===!0||B!==R)){const vr=B===R&&ue.id===k;bt.setState(ue,B,vr)}let jt=!1;ue.version===Ze.__version?(Ze.needsLights&&Ze.lightsStateVersion!==ji.state.version||Ze.outputColorSpace!==yt||le.isBatchedMesh&&Ze.batching===!1||!le.isBatchedMesh&&Ze.batching===!0||le.isInstancedMesh&&Ze.instancing===!1||!le.isInstancedMesh&&Ze.instancing===!0||le.isSkinnedMesh&&Ze.skinning===!1||!le.isSkinnedMesh&&Ze.skinning===!0||le.isInstancedMesh&&Ze.instancingColor===!0&&le.instanceColor===null||le.isInstancedMesh&&Ze.instancingColor===!1&&le.instanceColor!==null||Ze.envMap!==xt||ue.fog===!0&&Ze.fog!==$e||Ze.numClippingPlanes!==void 0&&(Ze.numClippingPlanes!==bt.numPlanes||Ze.numIntersection!==bt.numIntersection)||Ze.vertexAlphas!==Tt||Ze.vertexTangents!==Mt||Ze.morphTargets!==At||Ze.morphNormals!==Sn||Ze.morphColors!==gr||Ze.toneMapping!==fn||Ce.isWebGL2===!0&&Ze.morphTargetsCount!==wt)&&(jt=!0):(jt=!0,Ze.__version=ue.version);let Rn=Ze.currentProgram;jt===!0&&(Rn=qc(ue,se,le));let zs=!1,Hi=!1,cr=!1;const Fn=Rn.getUniforms(),Vs=Ze.uniforms;if(pe.useProgram(Rn.program)&&(zs=!0,Hi=!0,cr=!0),ue.id!==k&&(k=ue.id,Hi=!0),zs||R!==B){Fn.setValue($,"projectionMatrix",B.projectionMatrix),Fn.setValue($,"viewMatrix",B.matrixWorldInverse);const vr=Fn.map.cameraPosition;vr!==void 0&&vr.setValue($,ct.setFromMatrixPosition(B.matrixWorld)),Ce.logarithmicDepthBuffer&&Fn.setValue($,"logDepthBufFC",2/(Math.log(B.far+1)/Math.LN2)),(ue.isMeshPhongMaterial||ue.isMeshToonMaterial||ue.isMeshLambertMaterial||ue.isMeshBasicMaterial||ue.isMeshStandardMaterial||ue.isShaderMaterial)&&Fn.setValue($,"isOrthographic",B.isOrthographicCamera===!0),R!==B&&(R=B,Hi=!0,cr=!0)}if(le.isSkinnedMesh){Fn.setOptional($,le,"bindMatrix"),Fn.setOptional($,le,"bindMatrixInverse");const vr=le.skeleton;vr&&(Ce.floatVertexTextures?(vr.boneTexture===null&&vr.computeBoneTexture(),Fn.setValue($,"boneTexture",vr.boneTexture,F)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}le.isBatchedMesh&&(Fn.setOptional($,le,"batchingTexture"),Fn.setValue($,"batchingTexture",le._matricesTexture,F));const Yc=ce.morphAttributes;if((Yc.position!==void 0||Yc.normal!==void 0||Yc.color!==void 0&&Ce.isWebGL2===!0)&&Ct.update(le,ce,Rn),(Hi||Ze.receiveShadow!==le.receiveShadow)&&(Ze.receiveShadow=le.receiveShadow,Fn.setValue($,"receiveShadow",le.receiveShadow)),ue.isMeshGouraudMaterial&&ue.envMap!==null&&(Vs.envMap.value=xt,Vs.flipEnvMap.value=xt.isCubeTexture&&xt.isRenderTargetTexture===!1?-1:1),Hi&&(Fn.setValue($,"toneMappingExposure",S.toneMappingExposure),Ze.needsLights&&M_(Vs,cr),$e&&ue.fog===!0&&Re.refreshFogUniforms(Vs,$e),Re.refreshMaterialUniforms(Vs,ue,te,J,Ae),ay.upload($,dm(Ze),Vs,F)),ue.isShaderMaterial&&ue.uniformsNeedUpdate===!0&&(ay.upload($,dm(Ze),Vs,F),ue.uniformsNeedUpdate=!1),ue.isSpriteMaterial&&Fn.setValue($,"center",le.center),Fn.setValue($,"modelViewMatrix",le.modelViewMatrix),Fn.setValue($,"normalMatrix",le.normalMatrix),Fn.setValue($,"modelMatrix",le.matrixWorld),ue.isShaderMaterial||ue.isRawShaderMaterial){const vr=ue.uniformsGroups;for(let Kc=0,xi=vr.length;Kc<xi;Kc++)if(Ce.isWebGL2){const fm=vr[Kc];ye.update(fm,Rn),ye.bind(fm,Rn)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Rn}function M_(B,se){B.ambientLightColor.needsUpdate=se,B.lightProbe.needsUpdate=se,B.directionalLights.needsUpdate=se,B.directionalLightShadows.needsUpdate=se,B.pointLights.needsUpdate=se,B.pointLightShadows.needsUpdate=se,B.spotLights.needsUpdate=se,B.spotLightShadows.needsUpdate=se,B.rectAreaLights.needsUpdate=se,B.hemisphereLights.needsUpdate=se}function T_(B){return B.isMeshLambertMaterial||B.isMeshToonMaterial||B.isMeshPhongMaterial||B.isMeshStandardMaterial||B.isShadowMaterial||B.isShaderMaterial&&B.lights===!0}this.getActiveCubeFace=function(){return A},this.getActiveMipmapLevel=function(){return T},this.getRenderTarget=function(){return P},this.setRenderTargetTextures=function(B,se,ce){De.get(B.texture).__webglTexture=se,De.get(B.depthTexture).__webglTexture=ce;const ue=De.get(B);ue.__hasExternalTextures=!0,ue.__hasExternalTextures&&(ue.__autoAllocateDepthBuffer=ce===void 0,ue.__autoAllocateDepthBuffer||fe.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),ue.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(B,se){const ce=De.get(B);ce.__webglFramebuffer=se,ce.__useDefaultFramebuffer=se===void 0},this.setRenderTarget=function(B,se=0,ce=0){P=B,A=se,T=ce;let ue=!0,le=null,$e=!1,dt=!1;if(B){const xt=De.get(B);xt.__useDefaultFramebuffer!==void 0?(pe.bindFramebuffer($.FRAMEBUFFER,null),ue=!1):xt.__webglFramebuffer===void 0?F.setupRenderTarget(B):xt.__hasExternalTextures&&F.rebindTextures(B,De.get(B.texture).__webglTexture,De.get(B.depthTexture).__webglTexture);const Tt=B.texture;(Tt.isData3DTexture||Tt.isDataArrayTexture||Tt.isCompressedArrayTexture)&&(dt=!0);const Mt=De.get(B).__webglFramebuffer;B.isWebGLCubeRenderTarget?(Array.isArray(Mt[se])?le=Mt[se][ce]:le=Mt[se],$e=!0):Ce.isWebGL2&&B.samples>0&&F.useMultisampledRTT(B)===!1?le=De.get(B).__webglMultisampledFramebuffer:Array.isArray(Mt)?le=Mt[ce]:le=Mt,I.copy(B.viewport),H.copy(B.scissor),G=B.scissorTest}else I.copy(V).multiplyScalar(te).floor(),H.copy(Y).multiplyScalar(te).floor(),G=Q;if(pe.bindFramebuffer($.FRAMEBUFFER,le)&&Ce.drawBuffers&&ue&&pe.drawBuffers(B,le),pe.viewport(I),pe.scissor(H),pe.setScissorTest(G),$e){const xt=De.get(B.texture);$.framebufferTexture2D($.FRAMEBUFFER,$.COLOR_ATTACHMENT0,$.TEXTURE_CUBE_MAP_POSITIVE_X+se,xt.__webglTexture,ce)}else if(dt){const xt=De.get(B.texture),Tt=se||0;$.framebufferTextureLayer($.FRAMEBUFFER,$.COLOR_ATTACHMENT0,xt.__webglTexture,ce||0,Tt)}k=-1},this.readRenderTargetPixels=function(B,se,ce,ue,le,$e,dt){if(!(B&&B.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let yt=De.get(B).__webglFramebuffer;if(B.isWebGLCubeRenderTarget&&dt!==void 0&&(yt=yt[dt]),yt){pe.bindFramebuffer($.FRAMEBUFFER,yt);try{const xt=B.texture,Tt=xt.format,Mt=xt.type;if(Tt!==Zr&&We.convert(Tt)!==$.getParameter($.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const At=Mt===Hd&&(fe.has("EXT_color_buffer_half_float")||Ce.isWebGL2&&fe.has("EXT_color_buffer_float"));if(Mt!==co&&We.convert(Mt)!==$.getParameter($.IMPLEMENTATION_COLOR_READ_TYPE)&&!(Mt===Ps&&(Ce.isWebGL2||fe.has("OES_texture_float")||fe.has("WEBGL_color_buffer_float")))&&!At){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}se>=0&&se<=B.width-ue&&ce>=0&&ce<=B.height-le&&$.readPixels(se,ce,ue,le,We.convert(Tt),We.convert(Mt),$e)}finally{const xt=P!==null?De.get(P).__webglFramebuffer:null;pe.bindFramebuffer($.FRAMEBUFFER,xt)}}},this.copyFramebufferToTexture=function(B,se,ce=0){const ue=Math.pow(2,-ce),le=Math.floor(se.image.width*ue),$e=Math.floor(se.image.height*ue);F.setTexture2D(se,0),$.copyTexSubImage2D($.TEXTURE_2D,ce,0,0,B.x,B.y,le,$e),pe.unbindTexture()},this.copyTextureToTexture=function(B,se,ce,ue=0){const le=se.image.width,$e=se.image.height,dt=We.convert(ce.format),yt=We.convert(ce.type);F.setTexture2D(ce,0),$.pixelStorei($.UNPACK_FLIP_Y_WEBGL,ce.flipY),$.pixelStorei($.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ce.premultiplyAlpha),$.pixelStorei($.UNPACK_ALIGNMENT,ce.unpackAlignment),se.isDataTexture?$.texSubImage2D($.TEXTURE_2D,ue,B.x,B.y,le,$e,dt,yt,se.image.data):se.isCompressedTexture?$.compressedTexSubImage2D($.TEXTURE_2D,ue,B.x,B.y,se.mipmaps[0].width,se.mipmaps[0].height,dt,se.mipmaps[0].data):$.texSubImage2D($.TEXTURE_2D,ue,B.x,B.y,dt,yt,se.image),ue===0&&ce.generateMipmaps&&$.generateMipmap($.TEXTURE_2D),pe.unbindTexture()},this.copyTextureToTexture3D=function(B,se,ce,ue,le=0){if(S.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const $e=B.max.x-B.min.x+1,dt=B.max.y-B.min.y+1,yt=B.max.z-B.min.z+1,xt=We.convert(ue.format),Tt=We.convert(ue.type);let Mt;if(ue.isData3DTexture)F.setTexture3D(ue,0),Mt=$.TEXTURE_3D;else if(ue.isDataArrayTexture||ue.isCompressedArrayTexture)F.setTexture2DArray(ue,0),Mt=$.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}$.pixelStorei($.UNPACK_FLIP_Y_WEBGL,ue.flipY),$.pixelStorei($.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ue.premultiplyAlpha),$.pixelStorei($.UNPACK_ALIGNMENT,ue.unpackAlignment);const At=$.getParameter($.UNPACK_ROW_LENGTH),Sn=$.getParameter($.UNPACK_IMAGE_HEIGHT),gr=$.getParameter($.UNPACK_SKIP_PIXELS),fn=$.getParameter($.UNPACK_SKIP_ROWS),lr=$.getParameter($.UNPACK_SKIP_IMAGES),wt=ce.isCompressedTexture?ce.mipmaps[le]:ce.image;$.pixelStorei($.UNPACK_ROW_LENGTH,wt.width),$.pixelStorei($.UNPACK_IMAGE_HEIGHT,wt.height),$.pixelStorei($.UNPACK_SKIP_PIXELS,B.min.x),$.pixelStorei($.UNPACK_SKIP_ROWS,B.min.y),$.pixelStorei($.UNPACK_SKIP_IMAGES,B.min.z),ce.isDataTexture||ce.isData3DTexture?$.texSubImage3D(Mt,le,se.x,se.y,se.z,$e,dt,yt,xt,Tt,wt.data):ce.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),$.compressedTexSubImage3D(Mt,le,se.x,se.y,se.z,$e,dt,yt,xt,wt.data)):$.texSubImage3D(Mt,le,se.x,se.y,se.z,$e,dt,yt,xt,Tt,wt),$.pixelStorei($.UNPACK_ROW_LENGTH,At),$.pixelStorei($.UNPACK_IMAGE_HEIGHT,Sn),$.pixelStorei($.UNPACK_SKIP_PIXELS,gr),$.pixelStorei($.UNPACK_SKIP_ROWS,fn),$.pixelStorei($.UNPACK_SKIP_IMAGES,lr),le===0&&ue.generateMipmaps&&$.generateMipmap(Mt),pe.unbindTexture()},this.initTexture=function(B){B.isCubeTexture?F.setTextureCube(B,0):B.isData3DTexture?F.setTexture3D(B,0):B.isDataArrayTexture||B.isCompressedArrayTexture?F.setTexture2DArray(B,0):F.setTexture2D(B,0),pe.unbindTexture()},this.resetState=function(){A=0,T=0,P=null,pe.reset(),X.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Rs}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===Q0?"display-p3":"srgb",t.unpackColorSpace=rn.workingColorSpace===Qp?"display-p3":"srgb"}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===tr?el:dT}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===el?tr:po}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class uB extends ST{}uB.prototype.isWebGL1Renderer=!0;class n_{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new Xe(e),this.density=t}clone(){return new n_(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class r_{constructor(e,t=1,r=1e3){this.isFog=!0,this.name="",this.color=new Xe(e),this.near=t,this.far=r}clone(){return new r_(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class bT extends nn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t}}class i_{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=Sp,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=Di()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return console.warn("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let i=0,s=this.stride;i<s;i++)this.array[e+i]=t.array[r+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Di()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Di()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Gr=new j;class Dc{constructor(e,t,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)Gr.fromBufferAttribute(this,t),Gr.applyMatrix4(e),this.setXYZ(t,Gr.x,Gr.y,Gr.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Gr.fromBufferAttribute(this,t),Gr.applyNormalMatrix(e),this.setXYZ(t,Gr.x,Gr.y,Gr.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Gr.fromBufferAttribute(this,t),Gr.transformDirection(e),this.setXYZ(t,Gr.x,Gr.y,Gr.z);return this}setX(e,t){return this.normalized&&(t=Ut(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Ut(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Ut(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Ut(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=hi(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=hi(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=hi(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=hi(t,this.array)),t}setXY(e,t,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Ut(t,this.array),r=Ut(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Ut(t,this.array),r=Ut(r,this.array),i=Ut(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=Ut(t,this.array),r=Ut(r,this.array),i=Ut(i,this.array),s=Ut(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return new an(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Dc(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class ET extends jr{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Xe(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Mu;const Kh=new j,Tu=new j,Au=new j,Cu=new me,Zh=new me,dB=new Et,tv=new j,Jh=new j,nv=new j,CI=new me,Xw=new me,PI=new me;class hB extends nn{constructor(e=new ET){if(super(),this.isSprite=!0,this.type="Sprite",Mu===void 0){Mu=new zt;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new i_(t,5);Mu.setIndex([0,1,2,0,2,3]),Mu.setAttribute("position",new Dc(r,3,0,!1)),Mu.setAttribute("uv",new Dc(r,2,3,!1))}this.geometry=Mu,this.material=e,this.center=new me(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Tu.setFromMatrixScale(this.matrixWorld),dB.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Au.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Tu.multiplyScalar(-Au.z);const r=this.material.rotation;let i,s;r!==0&&(s=Math.cos(r),i=Math.sin(r));const o=this.center;rv(tv.set(-.5,-.5,0),Au,o,Tu,i,s),rv(Jh.set(.5,-.5,0),Au,o,Tu,i,s),rv(nv.set(.5,.5,0),Au,o,Tu,i,s),CI.set(0,0),Xw.set(1,0),PI.set(1,1);let a=e.ray.intersectTriangle(tv,Jh,nv,!1,Kh);if(a===null&&(rv(Jh.set(-.5,.5,0),Au,o,Tu,i,s),Xw.set(0,1),a=e.ray.intersectTriangle(tv,nv,Jh,!1,Kh),a===null))return;const l=e.ray.origin.distanceTo(Kh);l<e.near||l>e.far||t.push({distance:l,point:Kh.clone(),uv:di.getInterpolation(Kh,tv,Jh,nv,CI,Xw,PI,new me),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function rv(n,e,t,r,i,s){Cu.subVectors(n,t).addScalar(.5).multiply(r),i!==void 0?(Zh.x=s*Cu.x-i*Cu.y,Zh.y=i*Cu.x+s*Cu.y):Zh.copy(Cu),n.copy(e),n.x+=Zh.x,n.y+=Zh.y,n.applyMatrix4(dB)}const iv=new j,RI=new j;class fB extends nn{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let r=0,i=t.length;r<i;r++){const s=t[r];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,r=0){t=Math.abs(t);const i=this.levels;let s;for(s=0;s<i.length&&!(t<i[s].distance);s++);return i.splice(s,0,{distance:t,hysteresis:r,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let r,i;for(r=1,i=t.length;r<i;r++){let s=t[r].distance;if(t[r].object.visible&&(s-=s*t[r].hysteresis),e<s)break}return t[r-1].object}return null}raycast(e,t){if(this.levels.length>0){iv.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(iv);this.getObjectForDistance(i).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){iv.setFromMatrixPosition(e.matrixWorld),RI.setFromMatrixPosition(this.matrixWorld);const r=iv.distanceTo(RI)/e.zoom;t[0].object.visible=!0;let i,s;for(i=1,s=t.length;i<s;i++){let o=t[i].distance;if(t[i].object.visible&&(o-=o*t[i].hysteresis),r>=o)t[i-1].object.visible=!1,t[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<s;i++)t[i].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const r=this.levels;for(let i=0,s=r.length;i<s;i++){const o=r[i];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const II=new j,LI=new sn,kI=new sn,Yee=new j,OI=new Et,sv=new j,qw=new zr,NI=new Et,Yw=new jc;class pB extends sr{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=o1,this.bindMatrix=new Et,this.bindMatrixInverse=new Et,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new ei),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let r=0;r<t.count;r++)this.getVertexPosition(r,sv),this.boundingBox.expandByPoint(sv)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new zr),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let r=0;r<t.count;r++)this.getVertexPosition(r,sv),this.boundingSphere.expandByPoint(sv)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const r=this.material,i=this.matrixWorld;r!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),qw.copy(this.boundingSphere),qw.applyMatrix4(i),e.ray.intersectsSphere(qw)!==!1&&(NI.copy(i).invert(),Yw.copy(e.ray).applyMatrix4(NI),!(this.boundingBox!==null&&Yw.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,Yw)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new sn,t=this.geometry.attributes.skinWeight;for(let r=0,i=t.count;r<i;r++){e.fromBufferAttribute(t,r);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===o1?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===TF?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const r=this.skeleton,i=this.geometry;LI.fromBufferAttribute(i.attributes.skinIndex,e),kI.fromBufferAttribute(i.attributes.skinWeight,e),II.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=kI.getComponent(s);if(o!==0){const a=LI.getComponent(s);OI.multiplyMatrices(r.bones[a].matrixWorld,r.boneInverses[a]),t.addScaledVector(Yee.copy(II).applyMatrix4(OI),o)}}return t.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,t){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,t)}}class MT extends nn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Ac extends $n{constructor(e=null,t=1,r=1,i,s,o,a,l,c=jn,d=jn,f,p){super(null,o,a,l,c,d,i,s,f,p),this.isDataTexture=!0,this.image={data:e,width:t,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const DI=new Et,Kee=new Et;class s_{constructor(e=[],t=[]){this.uuid=Di(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new Et)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const r=new Et;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,t=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:Kee;DI.multiplyMatrices(a,t[s]),DI.toArray(r,s*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new s_(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const r=new Ac(t,e,e,Zr,Ps);return r.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=r,this}getBoneByName(e){for(let t=0,r=this.bones.length;t<r;t++){const i=this.bones[t];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){const s=e.bones[r];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new MT),this.bones.push(o),this.boneInverses.push(new Et().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,r=this.boneInverses;for(let i=0,s=t.length;i<s;i++){const o=t[i];e.bones.push(o.uuid);const a=r[i];e.boneInverses.push(a.toArray())}return e}}class Xd extends an{constructor(e,t,r,i=1){super(e,t,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Pu=new Et,UI=new Et,ov=[],FI=new ei,Zee=new Et,Qh=new sr,ef=new zr;class mB extends sr{constructor(e,t,r){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Xd(new Float32Array(r*16),16),this.instanceColor=null,this.count=r,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<r;i++)this.setMatrixAt(i,Zee)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new ei),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,Pu),FI.copy(e.boundingBox).applyMatrix4(Pu),this.boundingBox.union(FI)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new zr),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,Pu),ef.copy(e.boundingSphere).applyMatrix4(Pu),this.boundingSphere.union(ef)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const r=this.matrixWorld,i=this.count;if(Qh.geometry=this.geometry,Qh.material=this.material,Qh.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),ef.copy(this.boundingSphere),ef.applyMatrix4(r),e.ray.intersectsSphere(ef)!==!1))for(let s=0;s<i;s++){this.getMatrixAt(s,Pu),UI.multiplyMatrices(r,Pu),Qh.matrixWorld=UI,Qh.raycast(e,ov);for(let o=0,a=ov.length;o<a;o++){const l=ov[o];l.instanceId=s,l.object=this,t.push(l)}ov.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Xd(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}function Jee(n,e){return n.z-e.z}function Qee(n,e){return e.z-n.z}class ete{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t){const r=this.pool,i=this.list;this.index>=r.length&&r.push({start:-1,count:-1,z:-1});const s=r[this.index];i.push(s),this.index++,s.start=e.start,s.count=e.count,s.z=t}reset(){this.list.length=0,this.index=0}}const Ru="batchId",Sa=new Et,BI=new Et,tte=new Et,zI=new Et,Kw=new rm,av=new ei,zl=new zr,tf=new j,Zw=new ete,Lr=new sr,lv=[];function nte(n,e,t=0){const r=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const i=n.count;for(let s=0;s<i;s++)for(let o=0;o<r;o++)e.setComponent(s+t,o,n.getComponent(s,o))}else e.array.set(n.array,t*r);e.needsUpdate=!0}class gB extends sr{get maxGeometryCount(){return this._maxGeometryCount}constructor(e,t,r=t*2,i){super(new zt,i),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawRanges=[],this._reservedRanges=[],this._visibility=[],this._active=[],this._bounds=[],this._maxGeometryCount=e,this._maxVertexCount=t,this._maxIndexCount=r,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._visibilityChanged=!0,this._matricesTexture=null,this._initMatricesTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxGeometryCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),r=new Ac(t,e,e,Zr,Ps);this._matricesTexture=r}_initializeGeometry(e){const t=this.geometry,r=this._maxVertexCount,i=this._maxGeometryCount,s=this._maxIndexCount;if(this._geometryInitialized===!1){for(const a in e.attributes){const l=e.getAttribute(a),{array:c,itemSize:d,normalized:f}=l,p=new c.constructor(r*d),m=new l.constructor(p,d,f);m.setUsage(l.usage),t.setAttribute(a,m)}if(e.getIndex()!==null){const a=r>65536?new Uint32Array(s):new Uint16Array(s);t.setIndex(new an(a,1))}const o=i>65536?new Uint32Array(r):new Uint16Array(r);t.setAttribute(Ru,new an(o,1)),this._geometryInitialized=!0}}_validateGeometry(e){if(e.getAttribute(Ru))throw new Error(`BatchedMesh: Geometry cannot use attribute "${Ru}"`);const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const r in t.attributes){if(r===Ru)continue;if(!e.hasAttribute(r))throw new Error(`BatchedMesh: Added geometry missing "${r}". All geometries must have consistent attributes.`);const i=e.getAttribute(r),s=t.getAttribute(r);if(i.itemSize!==s.itemSize||i.normalized!==s.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ei);const e=this._geometryCount,t=this.boundingBox,r=this._active;t.makeEmpty();for(let i=0;i<e;i++)r[i]!==!1&&(this.getMatrixAt(i,Sa),this.getBoundingBoxAt(i,av).applyMatrix4(Sa),t.union(av))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new zr);const e=this._geometryCount,t=this.boundingSphere,r=this._active;t.makeEmpty();for(let i=0;i<e;i++)r[i]!==!1&&(this.getMatrixAt(i,Sa),this.getBoundingSphereAt(i,zl).applyMatrix4(Sa),t.union(zl))}addGeometry(e,t=-1,r=-1){if(this._initializeGeometry(e),this._validateGeometry(e),this._geometryCount>=this._maxGeometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");const i={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let s=null;const o=this._reservedRanges,a=this._drawRanges,l=this._bounds;this._geometryCount!==0&&(s=o[o.length-1]),t===-1?i.vertexCount=e.getAttribute("position").count:i.vertexCount=t,s===null?i.vertexStart=0:i.vertexStart=s.vertexStart+s.vertexCount;const c=e.getIndex(),d=c!==null;if(d&&(r===-1?i.indexCount=c.count:i.indexCount=r,s===null?i.indexStart=0:i.indexStart=s.indexStart+s.indexCount),i.indexStart!==-1&&i.indexStart+i.indexCount>this._maxIndexCount||i.vertexStart+i.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const f=this._visibility,p=this._active,m=this._matricesTexture,v=this._matricesTexture.image.data;f.push(!0),p.push(!0);const x=this._geometryCount;this._geometryCount++,tte.toArray(v,x*16),m.needsUpdate=!0,o.push(i),a.push({start:d?i.indexStart:i.vertexStart,count:-1}),l.push({boxInitialized:!1,box:new ei,sphereInitialized:!1,sphere:new zr});const y=this.geometry.getAttribute(Ru);for(let g=0;g<i.vertexCount;g++)y.setX(i.vertexStart+g,x);return y.needsUpdate=!0,this.setGeometryAt(x,e),x}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const r=this.geometry,i=r.getIndex()!==null,s=r.getIndex(),o=t.getIndex(),a=this._reservedRanges[e];if(i&&o.count>a.indexCount||t.attributes.position.count>a.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const l=a.vertexStart,c=a.vertexCount;for(const m in r.attributes){if(m===Ru)continue;const v=t.getAttribute(m),x=r.getAttribute(m);nte(v,x,l);const y=v.itemSize;for(let g=v.count,w=c;g<w;g++){const S=l+g;for(let E=0;E<y;E++)x.setComponent(S,E,0)}x.needsUpdate=!0}if(i){const m=a.indexStart;for(let v=0;v<o.count;v++)s.setX(m+v,l+o.getX(v));for(let v=o.count,x=a.indexCount;v<x;v++)s.setX(m+v,l);s.needsUpdate=!0}const d=this._bounds[e];t.boundingBox!==null?(d.box.copy(t.boundingBox),d.boxInitialized=!0):d.boxInitialized=!1,t.boundingSphere!==null?(d.sphere.copy(t.boundingSphere),d.sphereInitialized=!0):d.sphereInitialized=!1;const f=this._drawRanges[e],p=t.getAttribute("position");return f.count=i?o.count:p.count,this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._active;return e>=t.length||t[e]===!1?this:(t[e]=!1,this._visibilityChanged=!0,this)}getBoundingBoxAt(e,t){if(this._active[e]===!1)return this;const i=this._bounds[e],s=i.box,o=this.geometry;if(i.boxInitialized===!1){s.makeEmpty();const a=o.index,l=o.attributes.position,c=this._drawRanges[e];for(let d=c.start,f=c.start+c.count;d<f;d++){let p=d;a&&(p=a.getX(p)),s.expandByPoint(tf.fromBufferAttribute(l,p))}i.boxInitialized=!0}return t.copy(s),t}getBoundingSphereAt(e,t){if(this._active[e]===!1)return this;const i=this._bounds[e],s=i.sphere,o=this.geometry;if(i.sphereInitialized===!1){s.makeEmpty(),this.getBoundingBoxAt(e,av),av.getCenter(s.center);const a=o.index,l=o.attributes.position,c=this._drawRanges[e];let d=0;for(let f=c.start,p=c.start+c.count;f<p;f++){let m=f;a&&(m=a.getX(m)),tf.fromBufferAttribute(l,m),d=Math.max(d,s.center.distanceToSquared(tf))}s.radius=Math.sqrt(d),i.sphereInitialized=!0}return t.copy(s),t}setMatrixAt(e,t){const r=this._active,i=this._matricesTexture,s=this._matricesTexture.image.data,o=this._geometryCount;return e>=o||r[e]===!1?this:(t.toArray(s,e*16),i.needsUpdate=!0,this)}getMatrixAt(e,t){const r=this._active,i=this._matricesTexture.image.data,s=this._geometryCount;return e>=s||r[e]===!1?null:t.fromArray(i,e*16)}setVisibleAt(e,t){const r=this._visibility,i=this._active,s=this._geometryCount;return e>=s||i[e]===!1||r[e]===t?this:(r[e]=t,this._visibilityChanged=!0,this)}getVisibleAt(e){const t=this._visibility,r=this._active,i=this._geometryCount;return e>=i||r[e]===!1?!1:t[e]}raycast(e,t){const r=this._visibility,i=this._active,s=this._drawRanges,o=this._geometryCount,a=this.matrixWorld,l=this.geometry;Lr.material=this.material,Lr.geometry.index=l.index,Lr.geometry.attributes=l.attributes,Lr.geometry.boundingBox===null&&(Lr.geometry.boundingBox=new ei),Lr.geometry.boundingSphere===null&&(Lr.geometry.boundingSphere=new zr);for(let c=0;c<o;c++){if(!r[c]||!i[c])continue;const d=s[c];Lr.geometry.setDrawRange(d.start,d.count),this.getMatrixAt(c,Lr.matrixWorld).premultiply(a),this.getBoundingBoxAt(c,Lr.geometry.boundingBox),this.getBoundingSphereAt(c,Lr.geometry.boundingSphere),Lr.raycast(e,lv);for(let f=0,p=lv.length;f<p;f++){const m=lv[f];m.object=this,m.batchId=c,t.push(m)}lv.length=0}Lr.material=null,Lr.geometry.index=null,Lr.geometry.attributes={},Lr.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._drawRanges=e._drawRanges.map(t=>({...t})),this._reservedRanges=e._reservedRanges.map(t=>({...t})),this._visibility=e._visibility.slice(),this._active=e._active.slice(),this._bounds=e._bounds.map(t=>({boxInitialized:t.boxInitialized,box:t.box.clone(),sphereInitialized:t.sphereInitialized,sphere:t.sphere.clone()})),this._maxGeometryCount=e._maxGeometryCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.slice(),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this}onBeforeRender(e,t,r,i,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=i.getIndex(),a=o===null?1:o.array.BYTES_PER_ELEMENT,l=this._visibility,c=this._multiDrawStarts,d=this._multiDrawCounts,f=this._drawRanges,p=this.perObjectFrustumCulled;p&&(zI.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse).multiply(this.matrixWorld),Kw.setFromProjectionMatrix(zI,e.isWebGPURenderer?Wd:Rs));let m=0;if(this.sortObjects){BI.copy(this.matrixWorld).invert(),tf.setFromMatrixPosition(r.matrixWorld).applyMatrix4(BI);for(let y=0,g=l.length;y<g;y++)if(l[y]){this.getMatrixAt(y,Sa),this.getBoundingSphereAt(y,zl).applyMatrix4(Sa);let w=!1;if(p&&(w=!Kw.intersectsSphere(zl)),!w){const S=tf.distanceTo(zl.center);Zw.push(f[y],S)}}const v=Zw.list,x=this.customSort;x===null?v.sort(s.transparent?Qee:Jee):x.call(this,v,r);for(let y=0,g=v.length;y<g;y++){const w=v[y];c[m]=w.start*a,d[m]=w.count,m++}Zw.reset()}else for(let v=0,x=l.length;v<x;v++)if(l[v]){let y=!1;if(p&&(this.getMatrixAt(v,Sa),this.getBoundingSphereAt(v,zl).applyMatrix4(Sa),y=!Kw.intersectsSphere(zl)),!y){const g=f[v];c[m]=g.start*a,d[m]=g.count,m++}}this._multiDrawCount=m,this._visibilityChanged=!1}onBeforeShadow(e,t,r,i,s,o){this.onBeforeRender(e,null,i,s,o)}}class ri extends jr{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Xe(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const VI=new j,jI=new j,HI=new Et,Jw=new jc,cv=new zr;class fl extends nn{constructor(e=new zt,t=new ri){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[0];for(let i=1,s=t.count;i<s;i++)VI.fromBufferAttribute(t,i-1),jI.fromBufferAttribute(t,i),r[i]=r[i-1],r[i]+=VI.distanceTo(jI);e.setAttribute("lineDistance",new rt(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Line.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),cv.copy(r.boundingSphere),cv.applyMatrix4(i),cv.radius+=s,e.ray.intersectsSphere(cv)===!1)return;HI.copy(i).invert(),Jw.copy(e.ray).applyMatrix4(HI);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=new j,d=new j,f=new j,p=new j,m=this.isLineSegments?2:1,v=r.index,y=r.attributes.position;if(v!==null){const g=Math.max(0,o.start),w=Math.min(v.count,o.start+o.count);for(let S=g,E=w-1;S<E;S+=m){const A=v.getX(S),T=v.getX(S+1);if(c.fromBufferAttribute(y,A),d.fromBufferAttribute(y,T),Jw.distanceSqToSegment(c,d,p,f)>l)continue;p.applyMatrix4(this.matrixWorld);const k=e.ray.origin.distanceTo(p);k<e.near||k>e.far||t.push({distance:k,point:f.clone().applyMatrix4(this.matrixWorld),index:S,face:null,faceIndex:null,object:this})}}else{const g=Math.max(0,o.start),w=Math.min(y.count,o.start+o.count);for(let S=g,E=w-1;S<E;S+=m){if(c.fromBufferAttribute(y,S),d.fromBufferAttribute(y,S+1),Jw.distanceSqToSegment(c,d,p,f)>l)continue;p.applyMatrix4(this.matrixWorld);const T=e.ray.origin.distanceTo(p);T<e.near||T>e.far||t.push({distance:T,point:f.clone().applyMatrix4(this.matrixWorld),index:S,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}const WI=new j,GI=new j;class yo extends fl{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[];for(let i=0,s=t.count;i<s;i+=2)WI.fromBufferAttribute(t,i),GI.fromBufferAttribute(t,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+WI.distanceTo(GI);e.setAttribute("lineDistance",new rt(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class vB extends fl{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class TT extends jr{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Xe(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const $I=new Et,U1=new jc,uv=new zr,dv=new j;class yB extends nn{constructor(e=new zt,t=new TT){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Points.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),uv.copy(r.boundingSphere),uv.applyMatrix4(i),uv.radius+=s,e.ray.intersectsSphere(uv)===!1)return;$I.copy(i).invert(),U1.copy(e.ray).applyMatrix4($I);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=r.index,f=r.attributes.position;if(c!==null){const p=Math.max(0,o.start),m=Math.min(c.count,o.start+o.count);for(let v=p,x=m;v<x;v++){const y=c.getX(v);dv.fromBufferAttribute(f,y),XI(dv,y,l,i,e,t,this)}}else{const p=Math.max(0,o.start),m=Math.min(f.count,o.start+o.count);for(let v=p,x=m;v<x;v++)dv.fromBufferAttribute(f,v),XI(dv,v,l,i,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function XI(n,e,t,r,i,s,o){const a=U1.distanceSqToPoint(n);if(a<t){const l=new j;U1.closestPointToPoint(n,l),l.applyMatrix4(r);const c=i.ray.origin.distanceTo(l);if(c<i.near||c>i.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}class rte extends $n{constructor(e,t,r,i,s,o,a,l,c){super(e,t,r,i,s,o,a,l,c),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:Wn,this.magFilter=s!==void 0?s:Wn,this.generateMipmaps=!1;const d=this;function f(){d.needsUpdate=!0,e.requestVideoFrameCallback(f)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(f)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class ite extends $n{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=jn,this.minFilter=jn,this.generateMipmaps=!1,this.needsUpdate=!0}}class o_ extends $n{constructor(e,t,r,i,s,o,a,l,c,d,f,p){super(null,o,a,l,c,d,i,s,f,p),this.isCompressedTexture=!0,this.image={width:t,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class ste extends o_{constructor(e,t,r,i,s,o){super(e,t,r,s,o),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=Ur}}class ote extends o_{constructor(e,t,r){super(void 0,e[0].width,e[0].height,t,r,ta),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class ate extends $n{constructor(e,t,r,i,s,o,a,l,c){super(e,t,r,i,s,o,a,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Fs{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const r=this.getUtoTmapping(e);return this.getPoint(r,t)}getPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return t}getSpacedPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let r,i=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)r=this.getPoint(o/e),s+=r.distanceTo(i),t.push(s),i=r;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const r=this.getLengths();let i=0;const s=r.length;let o;t?o=t:o=e*r[s-1];let a=0,l=s-1,c;for(;a<=l;)if(i=Math.floor(a+(l-a)/2),c=r[i]-o,c<0)a=i+1;else if(c>0)l=i-1;else{l=i;break}if(i=l,r[i]===o)return i/(s-1);const d=r[i],p=r[i+1]-d,m=(o-d)/p;return(i+m)/(s-1)}getTangent(e,t){let i=e-1e-4,s=e+1e-4;i<0&&(i=0),s>1&&(s=1);const o=this.getPoint(i),a=this.getPoint(s),l=t||(o.isVector2?new me:new j);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const r=this.getUtoTmapping(e);return this.getTangent(r,t)}computeFrenetFrames(e,t){const r=new j,i=[],s=[],o=[],a=new j,l=new Et;for(let m=0;m<=e;m++){const v=m/e;i[m]=this.getTangentAt(v,new j)}s[0]=new j,o[0]=new j;let c=Number.MAX_VALUE;const d=Math.abs(i[0].x),f=Math.abs(i[0].y),p=Math.abs(i[0].z);d<=c&&(c=d,r.set(1,0,0)),f<=c&&(c=f,r.set(0,1,0)),p<=c&&r.set(0,0,1),a.crossVectors(i[0],r).normalize(),s[0].crossVectors(i[0],a),o[0].crossVectors(i[0],s[0]);for(let m=1;m<=e;m++){if(s[m]=s[m-1].clone(),o[m]=o[m-1].clone(),a.crossVectors(i[m-1],i[m]),a.length()>Number.EPSILON){a.normalize();const v=Math.acos(Un(i[m-1].dot(i[m]),-1,1));s[m].applyMatrix4(l.makeRotationAxis(a,v))}o[m].crossVectors(i[m],s[m])}if(t===!0){let m=Math.acos(Un(s[0].dot(s[e]),-1,1));m/=e,i[0].dot(a.crossVectors(s[0],s[e]))>0&&(m=-m);for(let v=1;v<=e;v++)s[v].applyMatrix4(l.makeRotationAxis(i[v],m*v)),o[v].crossVectors(i[v],s[v])}return{tangents:i,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class a_ extends Fs{constructor(e=0,t=0,r=1,i=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=i,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t){const r=t||new me,i=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=i;for(;s>i;)s-=i;s<Number.EPSILON&&(o?s=0:s=i),this.aClockwise===!0&&!o&&(s===i?s=-i:s=s-i);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const d=Math.cos(this.aRotation),f=Math.sin(this.aRotation),p=l-this.aX,m=c-this.aY;l=p*d-m*f+this.aX,c=p*f+m*d+this.aY}return r.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class _B extends a_{constructor(e,t,r,i,s,o){super(e,t,r,r,i,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function AT(){let n=0,e=0,t=0,r=0;function i(s,o,a,l){n=s,e=a,t=-3*s+3*o-2*a-l,r=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){i(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,d,f){let p=(o-s)/c-(a-s)/(c+d)+(a-o)/d,m=(a-o)/d-(l-o)/(d+f)+(l-a)/f;p*=d,m*=d,i(o,a,p,m)},calc:function(s){const o=s*s,a=o*s;return n+e*s+t*o+r*a}}}const hv=new j,Qw=new AT,eS=new AT,tS=new AT;class xB extends Fs{constructor(e=[],t=!1,r="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=r,this.tension=i}getPoint(e,t=new j){const r=t,i=this.points,s=i.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let c,d;this.closed||a>0?c=i[(a-1)%s]:(hv.subVectors(i[0],i[1]).add(i[0]),c=hv);const f=i[a%s],p=i[(a+1)%s];if(this.closed||a+2<s?d=i[(a+2)%s]:(hv.subVectors(i[s-1],i[s-2]).add(i[s-1]),d=hv),this.curveType==="centripetal"||this.curveType==="chordal"){const m=this.curveType==="chordal"?.5:.25;let v=Math.pow(c.distanceToSquared(f),m),x=Math.pow(f.distanceToSquared(p),m),y=Math.pow(p.distanceToSquared(d),m);x<1e-4&&(x=1),v<1e-4&&(v=x),y<1e-4&&(y=x),Qw.initNonuniformCatmullRom(c.x,f.x,p.x,d.x,v,x,y),eS.initNonuniformCatmullRom(c.y,f.y,p.y,d.y,v,x,y),tS.initNonuniformCatmullRom(c.z,f.z,p.z,d.z,v,x,y)}else this.curveType==="catmullrom"&&(Qw.initCatmullRom(c.x,f.x,p.x,d.x,this.tension),eS.initCatmullRom(c.y,f.y,p.y,d.y,this.tension),tS.initCatmullRom(c.z,f.z,p.z,d.z,this.tension));return r.set(Qw.calc(l),eS.calc(l),tS.calc(l)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new j().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function qI(n,e,t,r,i){const s=(r-e)*.5,o=(i-t)*.5,a=n*n,l=n*a;return(2*t-2*r+s+o)*l+(-3*t+3*r-2*s-o)*a+s*n+t}function lte(n,e){const t=1-n;return t*t*e}function cte(n,e){return 2*(1-n)*n*e}function ute(n,e){return n*n*e}function Of(n,e,t,r){return lte(n,e)+cte(n,t)+ute(n,r)}function dte(n,e){const t=1-n;return t*t*t*e}function hte(n,e){const t=1-n;return 3*t*t*n*e}function fte(n,e){return 3*(1-n)*n*n*e}function pte(n,e){return n*n*n*e}function Nf(n,e,t,r,i){return dte(n,e)+hte(n,t)+fte(n,r)+pte(n,i)}class CT extends Fs{constructor(e=new me,t=new me,r=new me,i=new me){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new me){const r=t,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(Nf(e,i.x,s.x,o.x,a.x),Nf(e,i.y,s.y,o.y,a.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class wB extends Fs{constructor(e=new j,t=new j,r=new j,i=new j){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new j){const r=t,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(Nf(e,i.x,s.x,o.x,a.x),Nf(e,i.y,s.y,o.y,a.y),Nf(e,i.z,s.z,o.z,a.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class PT extends Fs{constructor(e=new me,t=new me){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new me){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new me){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class SB extends Fs{constructor(e=new j,t=new j){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new j){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new j){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class RT extends Fs{constructor(e=new me,t=new me,r=new me){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new me){const r=t,i=this.v0,s=this.v1,o=this.v2;return r.set(Of(e,i.x,s.x,o.x),Of(e,i.y,s.y,o.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class IT extends Fs{constructor(e=new j,t=new j,r=new j){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new j){const r=t,i=this.v0,s=this.v1,o=this.v2;return r.set(Of(e,i.x,s.x,o.x),Of(e,i.y,s.y,o.y),Of(e,i.z,s.z,o.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class LT extends Fs{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new me){const r=t,i=this.points,s=(i.length-1)*e,o=Math.floor(s),a=s-o,l=i[o===0?o:o-1],c=i[o],d=i[o>i.length-2?i.length-1:o+1],f=i[o>i.length-3?i.length-1:o+2];return r.set(qI(a,l.x,c.x,d.x,f.x),qI(a,l.y,c.y,d.y,f.y)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new me().fromArray(i))}return this}}var e0=Object.freeze({__proto__:null,ArcCurve:_B,CatmullRomCurve3:xB,CubicBezierCurve:CT,CubicBezierCurve3:wB,EllipseCurve:a_,LineCurve:PT,LineCurve3:SB,QuadraticBezierCurve:RT,QuadraticBezierCurve3:IT,SplineCurve:LT});class bB extends Fs{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const r=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new e0[r](t,e))}return this}getPoint(e,t){const r=e*this.getLength(),i=this.getCurveLengths();let s=0;for(;s<i.length;){if(i[s]>=r){const o=i[s]-r,a=this.curves[s],l=a.getLength(),c=l===0?0:1-o/l;return a.getPointAt(c,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let r=0,i=this.curves.length;r<i;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let r;for(let i=0,s=this.curves;i<s.length;i++){const o=s[i],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let c=0;c<l.length;c++){const d=l[c];r&&r.equals(d)||(t.push(d),r=d)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,r=this.curves.length;t<r;t++){const i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(new e0[i.type]().fromJSON(i))}return this}}class Ep extends bB{constructor(e){super(),this.type="Path",this.currentPoint=new me,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const r=new PT(this.currentPoint.clone(),new me(e,t));return this.curves.push(r),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,r,i){const s=new RT(this.currentPoint.clone(),new me(e,t),new me(r,i));return this.curves.push(s),this.currentPoint.set(r,i),this}bezierCurveTo(e,t,r,i,s,o){const a=new CT(this.currentPoint.clone(),new me(e,t),new me(r,i),new me(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),r=new LT(t);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,r,i,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,r,i,s,o),this}absarc(e,t,r,i,s,o){return this.absellipse(e,t,r,r,i,s,o),this}ellipse(e,t,r,i,s,o,a,l){const c=this.currentPoint.x,d=this.currentPoint.y;return this.absellipse(e+c,t+d,r,i,s,o,a,l),this}absellipse(e,t,r,i,s,o,a,l){const c=new a_(e,t,r,i,s,o,a,l);if(this.curves.length>0){const f=c.getPoint(0);f.equals(this.currentPoint)||this.lineTo(f.x,f.y)}this.curves.push(c);const d=c.getPoint(1);return this.currentPoint.copy(d),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class sm extends zt{constructor(e=[new me(0,-.5),new me(.5,0),new me(0,.5)],t=12,r=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:i},t=Math.floor(t),i=Un(i,0,Math.PI*2);const s=[],o=[],a=[],l=[],c=[],d=1/t,f=new j,p=new me,m=new j,v=new j,x=new j;let y=0,g=0;for(let w=0;w<=e.length-1;w++)switch(w){case 0:y=e[w+1].x-e[w].x,g=e[w+1].y-e[w].y,m.x=g*1,m.y=-y,m.z=g*0,x.copy(m),m.normalize(),l.push(m.x,m.y,m.z);break;case e.length-1:l.push(x.x,x.y,x.z);break;default:y=e[w+1].x-e[w].x,g=e[w+1].y-e[w].y,m.x=g*1,m.y=-y,m.z=g*0,v.copy(m),m.x+=x.x,m.y+=x.y,m.z+=x.z,m.normalize(),l.push(m.x,m.y,m.z),x.copy(v)}for(let w=0;w<=t;w++){const S=r+w*d*i,E=Math.sin(S),A=Math.cos(S);for(let T=0;T<=e.length-1;T++){f.x=e[T].x*E,f.y=e[T].y,f.z=e[T].x*A,o.push(f.x,f.y,f.z),p.x=w/t,p.y=T/(e.length-1),a.push(p.x,p.y);const P=l[3*T+0]*E,k=l[3*T+1],R=l[3*T+0]*A;c.push(P,k,R)}}for(let w=0;w<t;w++)for(let S=0;S<e.length-1;S++){const E=S+w*e.length,A=E,T=E+e.length,P=E+e.length+1,k=E+1;s.push(A,T,k),s.push(P,k,T)}this.setIndex(s),this.setAttribute("position",new rt(o,3)),this.setAttribute("uv",new rt(a,2)),this.setAttribute("normal",new rt(c,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new sm(e.points,e.segments,e.phiStart,e.phiLength)}}class l_ extends sm{constructor(e=1,t=1,r=4,i=8){const s=new Ep;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(r),i),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:r,radialSegments:i}}static fromJSON(e){return new l_(e.radius,e.length,e.capSegments,e.radialSegments)}}class c_ extends zt{constructor(e=1,t=32,r=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:i},t=Math.max(3,t);const s=[],o=[],a=[],l=[],c=new j,d=new me;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let f=0,p=3;f<=t;f++,p+=3){const m=r+f/t*i;c.x=e*Math.cos(m),c.y=e*Math.sin(m),o.push(c.x,c.y,c.z),a.push(0,0,1),d.x=(o[p]/e+1)/2,d.y=(o[p+1]/e+1)/2,l.push(d.x,d.y)}for(let f=1;f<=t;f++)s.push(f,f+1,0);this.setIndex(s),this.setAttribute("position",new rt(o,3)),this.setAttribute("normal",new rt(a,3)),this.setAttribute("uv",new rt(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new c_(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class uh extends zt{constructor(e=1,t=1,r=1,i=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:i,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const c=this;i=Math.floor(i),s=Math.floor(s);const d=[],f=[],p=[],m=[];let v=0;const x=[],y=r/2;let g=0;w(),o===!1&&(e>0&&S(!0),t>0&&S(!1)),this.setIndex(d),this.setAttribute("position",new rt(f,3)),this.setAttribute("normal",new rt(p,3)),this.setAttribute("uv",new rt(m,2));function w(){const E=new j,A=new j;let T=0;const P=(t-e)/r;for(let k=0;k<=s;k++){const R=[],I=k/s,H=I*(t-e)+e;for(let G=0;G<=i;G++){const re=G/i,z=re*l+a,Z=Math.sin(z),J=Math.cos(z);A.x=H*Z,A.y=-I*r+y,A.z=H*J,f.push(A.x,A.y,A.z),E.set(Z,P,J).normalize(),p.push(E.x,E.y,E.z),m.push(re,1-I),R.push(v++)}x.push(R)}for(let k=0;k<i;k++)for(let R=0;R<s;R++){const I=x[R][k],H=x[R+1][k],G=x[R+1][k+1],re=x[R][k+1];d.push(I,H,re),d.push(H,G,re),T+=6}c.addGroup(g,T,0),g+=T}function S(E){const A=v,T=new me,P=new j;let k=0;const R=E===!0?e:t,I=E===!0?1:-1;for(let G=1;G<=i;G++)f.push(0,y*I,0),p.push(0,I,0),m.push(.5,.5),v++;const H=v;for(let G=0;G<=i;G++){const z=G/i*l+a,Z=Math.cos(z),J=Math.sin(z);P.x=R*J,P.y=y*I,P.z=R*Z,f.push(P.x,P.y,P.z),p.push(0,I,0),T.x=Z*.5+.5,T.y=J*.5*I+.5,m.push(T.x,T.y),v++}for(let G=0;G<i;G++){const re=A+G,z=H+G;E===!0?d.push(z,z+1,re):d.push(z+1,z,re),k+=3}c.addGroup(g,k,E===!0?1:2),g+=k}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new uh(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class u_ extends uh{constructor(e=1,t=1,r=32,i=1,s=!1,o=0,a=Math.PI*2){super(0,e,t,r,i,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:i,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new u_(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class bl extends zt{constructor(e=[],t=[],r=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:i};const s=[],o=[];a(i),c(r),d(),this.setAttribute("position",new rt(s,3)),this.setAttribute("normal",new rt(s.slice(),3)),this.setAttribute("uv",new rt(o,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function a(w){const S=new j,E=new j,A=new j;for(let T=0;T<t.length;T+=3)m(t[T+0],S),m(t[T+1],E),m(t[T+2],A),l(S,E,A,w)}function l(w,S,E,A){const T=A+1,P=[];for(let k=0;k<=T;k++){P[k]=[];const R=w.clone().lerp(E,k/T),I=S.clone().lerp(E,k/T),H=T-k;for(let G=0;G<=H;G++)G===0&&k===T?P[k][G]=R:P[k][G]=R.clone().lerp(I,G/H)}for(let k=0;k<T;k++)for(let R=0;R<2*(T-k)-1;R++){const I=Math.floor(R/2);R%2===0?(p(P[k][I+1]),p(P[k+1][I]),p(P[k][I])):(p(P[k][I+1]),p(P[k+1][I+1]),p(P[k+1][I]))}}function c(w){const S=new j;for(let E=0;E<s.length;E+=3)S.x=s[E+0],S.y=s[E+1],S.z=s[E+2],S.normalize().multiplyScalar(w),s[E+0]=S.x,s[E+1]=S.y,s[E+2]=S.z}function d(){const w=new j;for(let S=0;S<s.length;S+=3){w.x=s[S+0],w.y=s[S+1],w.z=s[S+2];const E=y(w)/2/Math.PI+.5,A=g(w)/Math.PI+.5;o.push(E,1-A)}v(),f()}function f(){for(let w=0;w<o.length;w+=6){const S=o[w+0],E=o[w+2],A=o[w+4],T=Math.max(S,E,A),P=Math.min(S,E,A);T>.9&&P<.1&&(S<.2&&(o[w+0]+=1),E<.2&&(o[w+2]+=1),A<.2&&(o[w+4]+=1))}}function p(w){s.push(w.x,w.y,w.z)}function m(w,S){const E=w*3;S.x=e[E+0],S.y=e[E+1],S.z=e[E+2]}function v(){const w=new j,S=new j,E=new j,A=new j,T=new me,P=new me,k=new me;for(let R=0,I=0;R<s.length;R+=9,I+=6){w.set(s[R+0],s[R+1],s[R+2]),S.set(s[R+3],s[R+4],s[R+5]),E.set(s[R+6],s[R+7],s[R+8]),T.set(o[I+0],o[I+1]),P.set(o[I+2],o[I+3]),k.set(o[I+4],o[I+5]),A.copy(w).add(S).add(E).divideScalar(3);const H=y(A);x(T,I+0,w,H),x(P,I+2,S,H),x(k,I+4,E,H)}}function x(w,S,E,A){A<0&&w.x===1&&(o[S]=w.x-1),E.x===0&&E.z===0&&(o[S]=A/2/Math.PI+.5)}function y(w){return Math.atan2(w.z,-w.x)}function g(w){return Math.atan2(-w.y,Math.sqrt(w.x*w.x+w.z*w.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new bl(e.vertices,e.indices,e.radius,e.details)}}class d_ extends bl{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=1/r,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new d_(e.radius,e.detail)}}const fv=new j,pv=new j,nS=new j,mv=new di;class EB extends zt{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const i=Math.pow(10,4),s=Math.cos(Mc*t),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,c=[0,0,0],d=["a","b","c"],f=new Array(3),p={},m=[];for(let v=0;v<l;v+=3){o?(c[0]=o.getX(v),c[1]=o.getX(v+1),c[2]=o.getX(v+2)):(c[0]=v,c[1]=v+1,c[2]=v+2);const{a:x,b:y,c:g}=mv;if(x.fromBufferAttribute(a,c[0]),y.fromBufferAttribute(a,c[1]),g.fromBufferAttribute(a,c[2]),mv.getNormal(nS),f[0]=`${Math.round(x.x*i)},${Math.round(x.y*i)},${Math.round(x.z*i)}`,f[1]=`${Math.round(y.x*i)},${Math.round(y.y*i)},${Math.round(y.z*i)}`,f[2]=`${Math.round(g.x*i)},${Math.round(g.y*i)},${Math.round(g.z*i)}`,!(f[0]===f[1]||f[1]===f[2]||f[2]===f[0]))for(let w=0;w<3;w++){const S=(w+1)%3,E=f[w],A=f[S],T=mv[d[w]],P=mv[d[S]],k=`${E}_${A}`,R=`${A}_${E}`;R in p&&p[R]?(nS.dot(p[R].normal)<=s&&(m.push(T.x,T.y,T.z),m.push(P.x,P.y,P.z)),p[R]=null):k in p||(p[k]={index0:c[w],index1:c[S],normal:nS.clone()})}}for(const v in p)if(p[v]){const{index0:x,index1:y}=p[v];fv.fromBufferAttribute(a,x),pv.fromBufferAttribute(a,y),m.push(fv.x,fv.y,fv.z),m.push(pv.x,pv.y,pv.z)}this.setAttribute("position",new rt(m,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Cc extends Ep{constructor(e){super(e),this.uuid=Di(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let r=0,i=this.holes.length;r<i;r++)t[r]=this.holes[r].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,r=this.holes.length;t<r;t++){const i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(new Ep().fromJSON(i))}return this}}const mte={triangulate:function(n,e,t=2){const r=e&&e.length,i=r?e[0]*t:n.length;let s=MB(n,0,i,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,c,d,f,p,m;if(r&&(s=xte(n,e,s,t)),n.length>80*t){a=c=n[0],l=d=n[1];for(let v=t;v<i;v+=t)f=n[v],p=n[v+1],f<a&&(a=f),p<l&&(l=p),f>c&&(c=f),p>d&&(d=p);m=Math.max(c-a,d-l),m=m!==0?32767/m:0}return Mp(s,o,t,a,l,m,0),o}};function MB(n,e,t,r,i){let s,o;if(i===Ite(n,e,t,r)>0)for(s=e;s<t;s+=r)o=YI(s,n[s],n[s+1],o);else for(s=t-r;s>=e;s-=r)o=YI(s,n[s],n[s+1],o);return o&&h_(o,o.next)&&(Ap(o),o=o.next),o}function Uc(n,e){if(!n)return n;e||(e=n);let t=n,r;do if(r=!1,!t.steiner&&(h_(t,t.next)||An(t.prev,t,t.next)===0)){if(Ap(t),t=e=t.prev,t===t.next)break;r=!0}else t=t.next;while(r||t!==e);return e}function Mp(n,e,t,r,i,s,o){if(!n)return;!o&&s&&Mte(n,r,i,s);let a=n,l,c;for(;n.prev!==n.next;){if(l=n.prev,c=n.next,s?vte(n,r,i,s):gte(n)){e.push(l.i/t|0),e.push(n.i/t|0),e.push(c.i/t|0),Ap(n),n=c.next,a=c.next;continue}if(n=c,n===a){o?o===1?(n=yte(Uc(n),e,t),Mp(n,e,t,r,i,s,2)):o===2&&_te(n,e,t,r,i,s):Mp(Uc(n),e,t,r,i,s,1);break}}}function gte(n){const e=n.prev,t=n,r=n.next;if(An(e,t,r)>=0)return!1;const i=e.x,s=t.x,o=r.x,a=e.y,l=t.y,c=r.y,d=i<s?i<o?i:o:s<o?s:o,f=a<l?a<c?a:c:l<c?l:c,p=i>s?i>o?i:o:s>o?s:o,m=a>l?a>c?a:c:l>c?l:c;let v=r.next;for(;v!==e;){if(v.x>=d&&v.x<=p&&v.y>=f&&v.y<=m&&ud(i,a,s,l,o,c,v.x,v.y)&&An(v.prev,v,v.next)>=0)return!1;v=v.next}return!0}function vte(n,e,t,r){const i=n.prev,s=n,o=n.next;if(An(i,s,o)>=0)return!1;const a=i.x,l=s.x,c=o.x,d=i.y,f=s.y,p=o.y,m=a<l?a<c?a:c:l<c?l:c,v=d<f?d<p?d:p:f<p?f:p,x=a>l?a>c?a:c:l>c?l:c,y=d>f?d>p?d:p:f>p?f:p,g=F1(m,v,e,t,r),w=F1(x,y,e,t,r);let S=n.prevZ,E=n.nextZ;for(;S&&S.z>=g&&E&&E.z<=w;){if(S.x>=m&&S.x<=x&&S.y>=v&&S.y<=y&&S!==i&&S!==o&&ud(a,d,l,f,c,p,S.x,S.y)&&An(S.prev,S,S.next)>=0||(S=S.prevZ,E.x>=m&&E.x<=x&&E.y>=v&&E.y<=y&&E!==i&&E!==o&&ud(a,d,l,f,c,p,E.x,E.y)&&An(E.prev,E,E.next)>=0))return!1;E=E.nextZ}for(;S&&S.z>=g;){if(S.x>=m&&S.x<=x&&S.y>=v&&S.y<=y&&S!==i&&S!==o&&ud(a,d,l,f,c,p,S.x,S.y)&&An(S.prev,S,S.next)>=0)return!1;S=S.prevZ}for(;E&&E.z<=w;){if(E.x>=m&&E.x<=x&&E.y>=v&&E.y<=y&&E!==i&&E!==o&&ud(a,d,l,f,c,p,E.x,E.y)&&An(E.prev,E,E.next)>=0)return!1;E=E.nextZ}return!0}function yte(n,e,t){let r=n;do{const i=r.prev,s=r.next.next;!h_(i,s)&&TB(i,r,r.next,s)&&Tp(i,s)&&Tp(s,i)&&(e.push(i.i/t|0),e.push(r.i/t|0),e.push(s.i/t|0),Ap(r),Ap(r.next),r=n=s),r=r.next}while(r!==n);return Uc(r)}function _te(n,e,t,r,i,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&Cte(o,a)){let l=AB(o,a);o=Uc(o,o.next),l=Uc(l,l.next),Mp(o,e,t,r,i,s,0),Mp(l,e,t,r,i,s,0);return}a=a.next}o=o.next}while(o!==n)}function xte(n,e,t,r){const i=[];let s,o,a,l,c;for(s=0,o=e.length;s<o;s++)a=e[s]*r,l=s<o-1?e[s+1]*r:n.length,c=MB(n,a,l,r,!1),c===c.next&&(c.steiner=!0),i.push(Ate(c));for(i.sort(wte),s=0;s<i.length;s++)t=Ste(i[s],t);return t}function wte(n,e){return n.x-e.x}function Ste(n,e){const t=bte(n,e);if(!t)return e;const r=AB(t,n);return Uc(r,r.next),Uc(t,t.next)}function bte(n,e){let t=e,r=-1/0,i;const s=n.x,o=n.y;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const p=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(p<=s&&p>r&&(r=p,i=t.x<t.next.x?t:t.next,p===s))return i}t=t.next}while(t!==e);if(!i)return null;const a=i,l=i.x,c=i.y;let d=1/0,f;t=i;do s>=t.x&&t.x>=l&&s!==t.x&&ud(o<c?s:r,o,l,c,o<c?r:s,o,t.x,t.y)&&(f=Math.abs(o-t.y)/(s-t.x),Tp(t,n)&&(f<d||f===d&&(t.x>i.x||t.x===i.x&&Ete(i,t)))&&(i=t,d=f)),t=t.next;while(t!==a);return i}function Ete(n,e){return An(n.prev,n,e.prev)<0&&An(e.next,n,n.next)<0}function Mte(n,e,t,r){let i=n;do i.z===0&&(i.z=F1(i.x,i.y,e,t,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==n);i.prevZ.nextZ=null,i.prevZ=null,Tte(i)}function Tte(n){let e,t,r,i,s,o,a,l,c=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,r=t,a=0,e=0;e<c&&(a++,r=r.nextZ,!!r);e++);for(l=c;a>0||l>0&&r;)a!==0&&(l===0||!r||t.z<=r.z)?(i=t,t=t.nextZ,a--):(i=r,r=r.nextZ,l--),s?s.nextZ=i:n=i,i.prevZ=s,s=i;t=r}s.nextZ=null,c*=2}while(o>1);return n}function F1(n,e,t,r,i){return n=(n-t)*i|0,e=(e-r)*i|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function Ate(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function ud(n,e,t,r,i,s,o,a){return(i-o)*(e-a)>=(n-o)*(s-a)&&(n-o)*(r-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(i-o)*(r-a)}function Cte(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!Pte(n,e)&&(Tp(n,e)&&Tp(e,n)&&Rte(n,e)&&(An(n.prev,n,e.prev)||An(n,e.prev,e))||h_(n,e)&&An(n.prev,n,n.next)>0&&An(e.prev,e,e.next)>0)}function An(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function h_(n,e){return n.x===e.x&&n.y===e.y}function TB(n,e,t,r){const i=vv(An(n,e,t)),s=vv(An(n,e,r)),o=vv(An(t,r,n)),a=vv(An(t,r,e));return!!(i!==s&&o!==a||i===0&&gv(n,t,e)||s===0&&gv(n,r,e)||o===0&&gv(t,n,r)||a===0&&gv(t,e,r))}function gv(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function vv(n){return n>0?1:n<0?-1:0}function Pte(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&TB(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function Tp(n,e){return An(n.prev,n,n.next)<0?An(n,e,n.next)>=0&&An(n,n.prev,e)>=0:An(n,e,n.prev)<0||An(n,n.next,e)<0}function Rte(n,e){let t=n,r=!1;const i=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&i<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next;while(t!==n);return r}function AB(n,e){const t=new B1(n.i,n.x,n.y),r=new B1(e.i,e.x,e.y),i=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=i,i.prev=t,r.next=t,t.prev=r,s.next=r,r.prev=s,r}function YI(n,e,t,r){const i=new B1(n,e,t);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Ap(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function B1(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Ite(n,e,t,r){let i=0;for(let s=e,o=t-r;s<t;s+=r)i+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return i}class uo{static area(e){const t=e.length;let r=0;for(let i=t-1,s=0;s<t;i=s++)r+=e[i].x*e[s].y-e[s].x*e[i].y;return r*.5}static isClockWise(e){return uo.area(e)<0}static triangulateShape(e,t){const r=[],i=[],s=[];KI(e),ZI(r,e);let o=e.length;t.forEach(KI);for(let l=0;l<t.length;l++)i.push(o),o+=t[l].length,ZI(r,t[l]);const a=mte.triangulate(r,i);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function KI(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function ZI(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class f_ extends zt{constructor(e=new Cc([new me(.5,.5),new me(-.5,.5),new me(-.5,-.5),new me(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const r=this,i=[],s=[];for(let a=0,l=e.length;a<l;a++){const c=e[a];o(c)}this.setAttribute("position",new rt(i,3)),this.setAttribute("uv",new rt(s,2)),this.computeVertexNormals();function o(a){const l=[],c=t.curveSegments!==void 0?t.curveSegments:12,d=t.steps!==void 0?t.steps:1,f=t.depth!==void 0?t.depth:1;let p=t.bevelEnabled!==void 0?t.bevelEnabled:!0,m=t.bevelThickness!==void 0?t.bevelThickness:.2,v=t.bevelSize!==void 0?t.bevelSize:m-.1,x=t.bevelOffset!==void 0?t.bevelOffset:0,y=t.bevelSegments!==void 0?t.bevelSegments:3;const g=t.extrudePath,w=t.UVGenerator!==void 0?t.UVGenerator:Lte;let S,E=!1,A,T,P,k;g&&(S=g.getSpacedPoints(d),E=!0,p=!1,A=g.computeFrenetFrames(d,!1),T=new j,P=new j,k=new j),p||(y=0,m=0,v=0,x=0);const R=a.extractPoints(c);let I=R.shape;const H=R.holes;if(!uo.isClockWise(I)){I=I.reverse();for(let $=0,Se=H.length;$<Se;$++){const fe=H[$];uo.isClockWise(fe)&&(H[$]=fe.reverse())}}const re=uo.triangulateShape(I,H),z=I;for(let $=0,Se=H.length;$<Se;$++){const fe=H[$];I=I.concat(fe)}function Z($,Se,fe){return Se||console.error("THREE.ExtrudeGeometry: vec does not exist"),$.clone().addScaledVector(Se,fe)}const J=I.length,te=re.length;function L($,Se,fe){let Ce,pe,et;const De=$.x-Se.x,F=$.y-Se.y,O=fe.x-$.x,ie=fe.y-$.y,Me=De*De+F*F,_e=De*ie-F*O;if(Math.abs(_e)>Number.EPSILON){const ve=Math.sqrt(Me),Qe=Math.sqrt(O*O+ie*ie),Re=Se.x-F/ve,Fe=Se.y+De/ve,ut=fe.x-ie/Qe,bt=fe.y+O/Qe,be=((ut-Re)*ie-(bt-Fe)*O)/(De*ie-F*O);Ce=Re+De*be-$.x,pe=Fe+F*be-$.y;const Wt=Ce*Ce+pe*pe;if(Wt<=2)return new me(Ce,pe);et=Math.sqrt(Wt/2)}else{let ve=!1;De>Number.EPSILON?O>Number.EPSILON&&(ve=!0):De<-Number.EPSILON?O<-Number.EPSILON&&(ve=!0):Math.sign(F)===Math.sign(ie)&&(ve=!0),ve?(Ce=-F,pe=De,et=Math.sqrt(Me)):(Ce=De,pe=F,et=Math.sqrt(Me/2))}return new me(Ce/et,pe/et)}const U=[];for(let $=0,Se=z.length,fe=Se-1,Ce=$+1;$<Se;$++,fe++,Ce++)fe===Se&&(fe=0),Ce===Se&&(Ce=0),U[$]=L(z[$],z[fe],z[Ce]);const V=[];let Y,Q=U.concat();for(let $=0,Se=H.length;$<Se;$++){const fe=H[$];Y=[];for(let Ce=0,pe=fe.length,et=pe-1,De=Ce+1;Ce<pe;Ce++,et++,De++)et===pe&&(et=0),De===pe&&(De=0),Y[Ce]=L(fe[Ce],fe[et],fe[De]);V.push(Y),Q=Q.concat(Y)}for(let $=0;$<y;$++){const Se=$/y,fe=m*Math.cos(Se*Math.PI/2),Ce=v*Math.sin(Se*Math.PI/2)+x;for(let pe=0,et=z.length;pe<et;pe++){const De=Z(z[pe],U[pe],Ce);we(De.x,De.y,-fe)}for(let pe=0,et=H.length;pe<et;pe++){const De=H[pe];Y=V[pe];for(let F=0,O=De.length;F<O;F++){const ie=Z(De[F],Y[F],Ce);we(ie.x,ie.y,-fe)}}}const K=v+x;for(let $=0;$<J;$++){const Se=p?Z(I[$],Q[$],K):I[$];E?(P.copy(A.normals[0]).multiplyScalar(Se.x),T.copy(A.binormals[0]).multiplyScalar(Se.y),k.copy(S[0]).add(P).add(T),we(k.x,k.y,k.z)):we(Se.x,Se.y,0)}for(let $=1;$<=d;$++)for(let Se=0;Se<J;Se++){const fe=p?Z(I[Se],Q[Se],K):I[Se];E?(P.copy(A.normals[$]).multiplyScalar(fe.x),T.copy(A.binormals[$]).multiplyScalar(fe.y),k.copy(S[$]).add(P).add(T),we(k.x,k.y,k.z)):we(fe.x,fe.y,f/d*$)}for(let $=y-1;$>=0;$--){const Se=$/y,fe=m*Math.cos(Se*Math.PI/2),Ce=v*Math.sin(Se*Math.PI/2)+x;for(let pe=0,et=z.length;pe<et;pe++){const De=Z(z[pe],U[pe],Ce);we(De.x,De.y,f+fe)}for(let pe=0,et=H.length;pe<et;pe++){const De=H[pe];Y=V[pe];for(let F=0,O=De.length;F<O;F++){const ie=Z(De[F],Y[F],Ce);E?we(ie.x,ie.y+S[d-1].y,S[d-1].x+fe):we(ie.x,ie.y,f+fe)}}}oe(),xe();function oe(){const $=i.length/3;if(p){let Se=0,fe=J*Se;for(let Ce=0;Ce<te;Ce++){const pe=re[Ce];lt(pe[2]+fe,pe[1]+fe,pe[0]+fe)}Se=d+y*2,fe=J*Se;for(let Ce=0;Ce<te;Ce++){const pe=re[Ce];lt(pe[0]+fe,pe[1]+fe,pe[2]+fe)}}else{for(let Se=0;Se<te;Se++){const fe=re[Se];lt(fe[2],fe[1],fe[0])}for(let Se=0;Se<te;Se++){const fe=re[Se];lt(fe[0]+J*d,fe[1]+J*d,fe[2]+J*d)}}r.addGroup($,i.length/3-$,0)}function xe(){const $=i.length/3;let Se=0;Ae(z,Se),Se+=z.length;for(let fe=0,Ce=H.length;fe<Ce;fe++){const pe=H[fe];Ae(pe,Se),Se+=pe.length}r.addGroup($,i.length/3-$,1)}function Ae($,Se){let fe=$.length;for(;--fe>=0;){const Ce=fe;let pe=fe-1;pe<0&&(pe=$.length-1);for(let et=0,De=d+y*2;et<De;et++){const F=J*et,O=J*(et+1),ie=Se+Ce+F,Me=Se+pe+F,_e=Se+pe+O,ve=Se+Ce+O;ct(ie,Me,_e,ve)}}}function we($,Se,fe){l.push($),l.push(Se),l.push(fe)}function lt($,Se,fe){He($),He(Se),He(fe);const Ce=i.length/3,pe=w.generateTopUV(r,i,Ce-3,Ce-2,Ce-1);Ye(pe[0]),Ye(pe[1]),Ye(pe[2])}function ct($,Se,fe,Ce){He($),He(Se),He(Ce),He(Se),He(fe),He(Ce);const pe=i.length/3,et=w.generateSideWallUV(r,i,pe-6,pe-3,pe-2,pe-1);Ye(et[0]),Ye(et[1]),Ye(et[3]),Ye(et[1]),Ye(et[2]),Ye(et[3])}function He($){i.push(l[$*3+0]),i.push(l[$*3+1]),i.push(l[$*3+2])}function Ye($){s.push($.x),s.push($.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,r=this.parameters.options;return kte(t,r,e)}static fromJSON(e,t){const r=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=t[e.shapes[s]];r.push(a)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new e0[i.type]().fromJSON(i)),new f_(r,e.options)}}const Lte={generateTopUV:function(n,e,t,r,i){const s=e[t*3],o=e[t*3+1],a=e[r*3],l=e[r*3+1],c=e[i*3],d=e[i*3+1];return[new me(s,o),new me(a,l),new me(c,d)]},generateSideWallUV:function(n,e,t,r,i,s){const o=e[t*3],a=e[t*3+1],l=e[t*3+2],c=e[r*3],d=e[r*3+1],f=e[r*3+2],p=e[i*3],m=e[i*3+1],v=e[i*3+2],x=e[s*3],y=e[s*3+1],g=e[s*3+2];return Math.abs(a-d)<Math.abs(o-c)?[new me(o,1-l),new me(c,1-f),new me(p,1-v),new me(x,1-g)]:[new me(a,1-l),new me(d,1-f),new me(m,1-v),new me(y,1-g)]}};function kte(n,e,t){if(t.shapes=[],Array.isArray(n))for(let r=0,i=n.length;r<i;r++){const s=n[r];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class p_ extends bl{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new p_(e.radius,e.detail)}}class om extends bl{constructor(e=1,t=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,i,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new om(e.radius,e.detail)}}class m_ extends zt{constructor(e=.5,t=1,r=32,i=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:i,thetaStart:s,thetaLength:o},r=Math.max(3,r),i=Math.max(1,i);const a=[],l=[],c=[],d=[];let f=e;const p=(t-e)/i,m=new j,v=new me;for(let x=0;x<=i;x++){for(let y=0;y<=r;y++){const g=s+y/r*o;m.x=f*Math.cos(g),m.y=f*Math.sin(g),l.push(m.x,m.y,m.z),c.push(0,0,1),v.x=(m.x/t+1)/2,v.y=(m.y/t+1)/2,d.push(v.x,v.y)}f+=p}for(let x=0;x<i;x++){const y=x*(r+1);for(let g=0;g<r;g++){const w=g+y,S=w,E=w+r+1,A=w+r+2,T=w+1;a.push(S,E,T),a.push(E,A,T)}}this.setIndex(a),this.setAttribute("position",new rt(l,3)),this.setAttribute("normal",new rt(c,3)),this.setAttribute("uv",new rt(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new m_(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class g_ extends zt{constructor(e=new Cc([new me(0,.5),new me(-.5,-.5),new me(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const r=[],i=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let d=0;d<e.length;d++)c(e[d]),this.addGroup(a,l,d),a+=l,l=0;this.setIndex(r),this.setAttribute("position",new rt(i,3)),this.setAttribute("normal",new rt(s,3)),this.setAttribute("uv",new rt(o,2));function c(d){const f=i.length/3,p=d.extractPoints(t);let m=p.shape;const v=p.holes;uo.isClockWise(m)===!1&&(m=m.reverse());for(let y=0,g=v.length;y<g;y++){const w=v[y];uo.isClockWise(w)===!0&&(v[y]=w.reverse())}const x=uo.triangulateShape(m,v);for(let y=0,g=v.length;y<g;y++){const w=v[y];m=m.concat(w)}for(let y=0,g=m.length;y<g;y++){const w=m[y];i.push(w.x,w.y,0),s.push(0,0,1),o.push(w.x,w.y)}for(let y=0,g=x.length;y<g;y++){const w=x[y],S=w[0]+f,E=w[1]+f,A=w[2]+f;r.push(S,E,A),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return Ote(t,e)}static fromJSON(e,t){const r=[];for(let i=0,s=e.shapes.length;i<s;i++){const o=t[e.shapes[i]];r.push(o)}return new g_(r,e.curveSegments)}}function Ote(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const i=n[t];e.shapes.push(i.uuid)}else e.shapes.push(n.uuid);return e}class am extends zt{constructor(e=1,t=32,r=16,i=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:i,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),r=Math.max(2,Math.floor(r));const l=Math.min(o+a,Math.PI);let c=0;const d=[],f=new j,p=new j,m=[],v=[],x=[],y=[];for(let g=0;g<=r;g++){const w=[],S=g/r;let E=0;g===0&&o===0?E=.5/t:g===r&&l===Math.PI&&(E=-.5/t);for(let A=0;A<=t;A++){const T=A/t;f.x=-e*Math.cos(i+T*s)*Math.sin(o+S*a),f.y=e*Math.cos(o+S*a),f.z=e*Math.sin(i+T*s)*Math.sin(o+S*a),v.push(f.x,f.y,f.z),p.copy(f).normalize(),x.push(p.x,p.y,p.z),y.push(T+E,1-S),w.push(c++)}d.push(w)}for(let g=0;g<r;g++)for(let w=0;w<t;w++){const S=d[g][w+1],E=d[g][w],A=d[g+1][w],T=d[g+1][w+1];(g!==0||o>0)&&m.push(S,E,T),(g!==r-1||l<Math.PI)&&m.push(E,A,T)}this.setIndex(m),this.setAttribute("position",new rt(v,3)),this.setAttribute("normal",new rt(x,3)),this.setAttribute("uv",new rt(y,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new am(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class v_ extends bl{constructor(e=1,t=0){const r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(r,i,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new v_(e.radius,e.detail)}}class y_ extends zt{constructor(e=1,t=.4,r=12,i=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:i,arc:s},r=Math.floor(r),i=Math.floor(i);const o=[],a=[],l=[],c=[],d=new j,f=new j,p=new j;for(let m=0;m<=r;m++)for(let v=0;v<=i;v++){const x=v/i*s,y=m/r*Math.PI*2;f.x=(e+t*Math.cos(y))*Math.cos(x),f.y=(e+t*Math.cos(y))*Math.sin(x),f.z=t*Math.sin(y),a.push(f.x,f.y,f.z),d.x=e*Math.cos(x),d.y=e*Math.sin(x),p.subVectors(f,d).normalize(),l.push(p.x,p.y,p.z),c.push(v/i),c.push(m/r)}for(let m=1;m<=r;m++)for(let v=1;v<=i;v++){const x=(i+1)*m+v-1,y=(i+1)*(m-1)+v-1,g=(i+1)*(m-1)+v,w=(i+1)*m+v;o.push(x,y,w),o.push(y,g,w)}this.setIndex(o),this.setAttribute("position",new rt(a,3)),this.setAttribute("normal",new rt(l,3)),this.setAttribute("uv",new rt(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new y_(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class __ extends zt{constructor(e=1,t=.4,r=64,i=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:i,p:s,q:o},r=Math.floor(r),i=Math.floor(i);const a=[],l=[],c=[],d=[],f=new j,p=new j,m=new j,v=new j,x=new j,y=new j,g=new j;for(let S=0;S<=r;++S){const E=S/r*s*Math.PI*2;w(E,s,o,e,m),w(E+.01,s,o,e,v),y.subVectors(v,m),g.addVectors(v,m),x.crossVectors(y,g),g.crossVectors(x,y),x.normalize(),g.normalize();for(let A=0;A<=i;++A){const T=A/i*Math.PI*2,P=-t*Math.cos(T),k=t*Math.sin(T);f.x=m.x+(P*g.x+k*x.x),f.y=m.y+(P*g.y+k*x.y),f.z=m.z+(P*g.z+k*x.z),l.push(f.x,f.y,f.z),p.subVectors(f,m).normalize(),c.push(p.x,p.y,p.z),d.push(S/r),d.push(A/i)}}for(let S=1;S<=r;S++)for(let E=1;E<=i;E++){const A=(i+1)*(S-1)+(E-1),T=(i+1)*S+(E-1),P=(i+1)*S+E,k=(i+1)*(S-1)+E;a.push(A,T,k),a.push(T,P,k)}this.setIndex(a),this.setAttribute("position",new rt(l,3)),this.setAttribute("normal",new rt(c,3)),this.setAttribute("uv",new rt(d,2));function w(S,E,A,T,P){const k=Math.cos(S),R=Math.sin(S),I=A/E*S,H=Math.cos(I);P.x=T*(2+H)*.5*k,P.y=T*(2+H)*R*.5,P.z=T*Math.sin(I)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new __(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class x_ extends zt{constructor(e=new IT(new j(-1,-1,0),new j(-1,1,0),new j(1,1,0)),t=64,r=1,i=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:i,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new j,l=new j,c=new me;let d=new j;const f=[],p=[],m=[],v=[];x(),this.setIndex(v),this.setAttribute("position",new rt(f,3)),this.setAttribute("normal",new rt(p,3)),this.setAttribute("uv",new rt(m,2));function x(){for(let S=0;S<t;S++)y(S);y(s===!1?t:0),w(),g()}function y(S){d=e.getPointAt(S/t,d);const E=o.normals[S],A=o.binormals[S];for(let T=0;T<=i;T++){const P=T/i*Math.PI*2,k=Math.sin(P),R=-Math.cos(P);l.x=R*E.x+k*A.x,l.y=R*E.y+k*A.y,l.z=R*E.z+k*A.z,l.normalize(),p.push(l.x,l.y,l.z),a.x=d.x+r*l.x,a.y=d.y+r*l.y,a.z=d.z+r*l.z,f.push(a.x,a.y,a.z)}}function g(){for(let S=1;S<=t;S++)for(let E=1;E<=i;E++){const A=(i+1)*(S-1)+(E-1),T=(i+1)*S+(E-1),P=(i+1)*S+E,k=(i+1)*(S-1)+E;v.push(A,T,k),v.push(T,P,k)}}function w(){for(let S=0;S<=t;S++)for(let E=0;E<=i;E++)c.x=S/t,c.y=E/i,m.push(c.x,c.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new x_(new e0[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class CB extends zt{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],r=new Set,i=new j,s=new j;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let c=0,d=l.length;c<d;++c){const f=l[c],p=f.start,m=f.count;for(let v=p,x=p+m;v<x;v+=3)for(let y=0;y<3;y++){const g=a.getX(v+y),w=a.getX(v+(y+1)%3);i.fromBufferAttribute(o,g),s.fromBufferAttribute(o,w),JI(i,s,r)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let c=0;c<3;c++){const d=3*a+c,f=3*a+(c+1)%3;i.fromBufferAttribute(o,d),s.fromBufferAttribute(o,f),JI(i,s,r)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new rt(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function JI(n,e,t){const r=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(r)===!0||t.has(i)===!0?!1:(t.add(r),t.add(i),!0)}var QI=Object.freeze({__proto__:null,BoxGeometry:Hc,CapsuleGeometry:l_,CircleGeometry:c_,ConeGeometry:u_,CylinderGeometry:uh,DodecahedronGeometry:d_,EdgesGeometry:EB,ExtrudeGeometry:f_,IcosahedronGeometry:p_,LatheGeometry:sm,OctahedronGeometry:om,PlaneGeometry:im,PolyhedronGeometry:bl,RingGeometry:m_,ShapeGeometry:g_,SphereGeometry:am,TetrahedronGeometry:v_,TorusGeometry:y_,TorusKnotGeometry:__,TubeGeometry:x_,WireframeGeometry:CB});class PB extends jr{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Xe(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class RB extends mo{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class kT extends jr{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Xe(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Xe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=wl,this.normalScale=new me(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class OT extends kT{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new me(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Un(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Xe(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Xe(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Xe(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class IB extends jr{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Xe(16777215),this.specular=new Xe(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Xe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=wl,this.normalScale=new me(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Jp,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class LB extends jr{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Xe(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Xe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=wl,this.normalScale=new me(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class kB extends jr{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=wl,this.normalScale=new me(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class OB extends jr{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Xe(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Xe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=wl,this.normalScale=new me(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Jp,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class NB extends jr{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Xe(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=wl,this.normalScale=new me(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class DB extends ri{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function fc(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function UB(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function FB(n){function e(i,s){return n[i]-n[s]}const t=n.length,r=new Array(t);for(let i=0;i!==t;++i)r[i]=i;return r.sort(e),r}function z1(n,e,t){const r=n.length,i=new n.constructor(r);for(let s=0,o=0;o!==r;++s){const a=t[s]*e;for(let l=0;l!==e;++l)i[o++]=n[a+l]}return i}function NT(n,e,t,r){let i=1,s=n[0];for(;s!==void 0&&s[r]===void 0;)s=n[i++];if(s===void 0)return;let o=s[r];if(o!==void 0)if(Array.isArray(o))do o=s[r],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=n[i++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[r],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[i++];while(s!==void 0);else do o=s[r],o!==void 0&&(e.push(s.time),t.push(o)),s=n[i++];while(s!==void 0)}function Nte(n,e,t,r,i=30){const s=n.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const c=s.tracks[l],d=c.getValueSize(),f=[],p=[];for(let m=0;m<c.times.length;++m){const v=c.times[m]*i;if(!(v<t||v>=r)){f.push(c.times[m]);for(let x=0;x<d;++x)p.push(c.values[m*d+x])}}f.length!==0&&(c.times=fc(f,c.times.constructor),c.values=fc(p,c.values.constructor),o.push(c))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function Dte(n,e=0,t=n,r=30){r<=0&&(r=30);const i=t.tracks.length,s=e/r;for(let o=0;o<i;++o){const a=t.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const c=n.tracks.find(function(g){return g.name===a.name&&g.ValueTypeName===l});if(c===void 0)continue;let d=0;const f=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(d=f/3);let p=0;const m=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(p=m/3);const v=a.times.length-1;let x;if(s<=a.times[0]){const g=d,w=f-d;x=a.values.slice(g,w)}else if(s>=a.times[v]){const g=v*f+d,w=g+f-d;x=a.values.slice(g,w)}else{const g=a.createInterpolant(),w=d,S=f-d;g.evaluate(s),x=g.resultBuffer.slice(w,S)}l==="quaternion"&&new Br().fromArray(x).normalize().conjugate().toArray(x);const y=c.times.length;for(let g=0;g<y;++g){const w=g*m+p;if(l==="quaternion")Br.multiplyQuaternionsFlat(c.values,w,x,0,c.values,w);else{const S=m-p*2;for(let E=0;E<S;++E)c.values[w+E]-=x[E]}}}return n.blendMode=uT,n}const Ute={convertArray:fc,isTypedArray:UB,getKeyframeOrder:FB,sortedArray:z1,flattenJSON:NT,subclip:Nte,makeClipAdditive:Dte};class lm{constructor(e,t,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let r=this._cachedIndex,i=t[r],s=t[r-1];e:{t:{let o;n:{r:if(!(e<i)){for(let a=r+2;;){if(i===void 0){if(e<s)break r;return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===a)break;if(s=i,i=t[++r],e<i)break t}o=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(r=2,s=a);for(let l=r-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===l)break;if(i=s,s=t[--r-1],e>=s)break t}o=r,r=0;break n}break e}for(;r<o;){const a=r+o>>>1;e<t[a]?o=a:r=a+1}if(i=t[r],s=t[r-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,s,i)}return this.interpolate_(r,s,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i;for(let o=0;o!==i;++o)t[o]=r[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class BB extends lm{constructor(e,t,r,i){super(e,t,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:uc,endingEnd:uc}}intervalChanged_(e,t,r){const i=this.parameterPositions;let s=e-2,o=e+1,a=i[s],l=i[o];if(a===void 0)switch(this.getSettings_().endingStart){case dc:s=e,a=2*t-r;break;case yp:s=i.length-2,a=t+i[s]-i[s+1];break;default:s=e,a=r}if(l===void 0)switch(this.getSettings_().endingEnd){case dc:o=e,l=2*r-t;break;case yp:o=1,l=r+i[1]-i[0];break;default:o=e-1,l=t}const c=(r-t)*.5,d=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(l-r),this._offsetPrev=s*d,this._offsetNext=o*d}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,d=this._offsetPrev,f=this._offsetNext,p=this._weightPrev,m=this._weightNext,v=(r-t)/(i-t),x=v*v,y=x*v,g=-p*y+2*p*x-p*v,w=(1+p)*y+(-1.5-2*p)*x+(-.5+p)*v+1,S=(-1-m)*y+(1.5+m)*x+.5*v,E=m*y-m*x;for(let A=0;A!==a;++A)s[A]=g*o[d+A]+w*o[c+A]+S*o[l+A]+E*o[f+A];return s}}class DT extends lm{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,d=(r-t)/(i-t),f=1-d;for(let p=0;p!==a;++p)s[p]=o[c+p]*f+o[l+p]*d;return s}}class zB extends lm{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class Bs{constructor(e,t,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=fc(t,this.TimeBufferType),this.values=fc(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:fc(e.times,Array),values:fc(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new zB(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new DT(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new BB(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case gp:t=this.InterpolantFactoryMethodDiscrete;break;case vp:t=this.InterpolantFactoryMethodLinear;break;case oy:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return gp;case this.InterpolantFactoryMethodLinear:return vp;case this.InterpolantFactoryMethodSmooth:return oy}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]*=e}return this}trim(e,t){const r=this.times,i=r.length;let s=0,o=i-1;for(;s!==i&&r[s]<e;)++s;for(;o!==-1&&r[o]>t;)--o;if(++o,s!==0||o!==i){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=r.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,s=r.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=r[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(i!==void 0&&UB(i))for(let a=0,l=i.length;a!==l;++a){const c=i[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),r=this.getValueSize(),i=this.getInterpolation()===oy,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=e[a],d=e[a+1];if(c!==d&&(a!==1||c!==e[0]))if(i)l=!0;else{const f=a*r,p=f-r,m=f+r;for(let v=0;v!==r;++v){const x=t[f+v];if(x!==t[p+v]||x!==t[m+v]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const f=a*r,p=o*r;for(let m=0;m!==r;++m)t[p+m]=t[f+m]}++o}}if(s>0){e[o]=e[s];for(let a=s*r,l=o*r,c=0;c!==r;++c)t[l+c]=t[a+c];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*r)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),r=this.constructor,i=new r(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}Bs.prototype.TimeBufferType=Float32Array;Bs.prototype.ValueBufferType=Float32Array;Bs.prototype.DefaultInterpolation=vp;class Wc extends Bs{}Wc.prototype.ValueTypeName="bool";Wc.prototype.ValueBufferType=Array;Wc.prototype.DefaultInterpolation=gp;Wc.prototype.InterpolantFactoryMethodLinear=void 0;Wc.prototype.InterpolantFactoryMethodSmooth=void 0;class UT extends Bs{}UT.prototype.ValueTypeName="color";class Cp extends Bs{}Cp.prototype.ValueTypeName="number";class VB extends lm{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(r-t)/(i-t);let c=e*a;for(let d=c+a;c!==d;c+=4)Br.slerpFlat(s,0,o,c-a,o,c,l);return s}}class dh extends Bs{InterpolantFactoryMethodLinear(e){return new VB(this.times,this.values,this.getValueSize(),e)}}dh.prototype.ValueTypeName="quaternion";dh.prototype.DefaultInterpolation=vp;dh.prototype.InterpolantFactoryMethodSmooth=void 0;class Gc extends Bs{}Gc.prototype.ValueTypeName="string";Gc.prototype.ValueBufferType=Array;Gc.prototype.DefaultInterpolation=gp;Gc.prototype.InterpolantFactoryMethodLinear=void 0;Gc.prototype.InterpolantFactoryMethodSmooth=void 0;class Pp extends Bs{}Pp.prototype.ValueTypeName="vector";class Rp{constructor(e,t=-1,r,i=J0){this.name=e,this.tracks=r,this.duration=t,this.blendMode=i,this.uuid=Di(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],r=e.tracks,i=1/(e.fps||1);for(let o=0,a=r.length;o!==a;++o)t.push(Bte(r[o]).scale(i));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=r.length;s!==o;++s)t.push(Bs.toJSON(r[s]));return i}static CreateFromMorphTargetSequence(e,t,r,i){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],c=[];l.push((a+s-1)%s,a,(a+1)%s),c.push(0,1,0);const d=FB(l);l=z1(l,1,d),c=z1(c,1,d),!i&&l[0]===0&&(l.push(s),c.push(c[0])),o.push(new Cp(".morphTargetInfluences["+t[a].name+"]",l,c).scale(1/r))}return new this(e,-1,o)}static findByName(e,t){let r=e;if(!Array.isArray(e)){const i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===t)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,t,r){const i={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const c=e[a],d=c.name.match(s);if(d&&d.length>1){const f=d[1];let p=i[f];p||(i[f]=p=[]),p.push(c)}}const o=[];for(const a in i)o.push(this.CreateFromMorphTargetSequence(a,i[a],t,r));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(f,p,m,v,x){if(m.length!==0){const y=[],g=[];NT(m,y,g,v),y.length!==0&&x.push(new f(p,y,g))}},i=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let f=0;f<c.length;f++){const p=c[f].keys;if(!(!p||p.length===0))if(p[0].morphTargets){const m={};let v;for(v=0;v<p.length;v++)if(p[v].morphTargets)for(let x=0;x<p[v].morphTargets.length;x++)m[p[v].morphTargets[x]]=-1;for(const x in m){const y=[],g=[];for(let w=0;w!==p[v].morphTargets.length;++w){const S=p[v];y.push(S.time),g.push(S.morphTarget===x?1:0)}i.push(new Cp(".morphTargetInfluence["+x+"]",y,g))}l=m.length*o}else{const m=".bones["+t[f].name+"]";r(Pp,m+".position",p,"pos",i),r(dh,m+".quaternion",p,"rot",i),r(Pp,m+".scale",p,"scl",i)}}return i.length===0?null:new this(s,l,i,a)}resetDuration(){const e=this.tracks;let t=0;for(let r=0,i=e.length;r!==i;++r){const s=this.tracks[r];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Fte(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Cp;case"vector":case"vector2":case"vector3":case"vector4":return Pp;case"color":return UT;case"quaternion":return dh;case"bool":case"boolean":return Wc;case"string":return Gc}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function Bte(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=Fte(n.type);if(n.times===void 0){const t=[],r=[];NT(n.keys,t,r,"value"),n.times=t,n.values=r}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const jo={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class FT{constructor(e,t,r){const i=this;let s=!1,o=0,a=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(d){a++,s===!1&&i.onStart!==void 0&&i.onStart(d,o,a),s=!0},this.itemEnd=function(d){o++,i.onProgress!==void 0&&i.onProgress(d,o,a),o===a&&(s=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(d){i.onError!==void 0&&i.onError(d)},this.resolveURL=function(d){return l?l(d):d},this.setURLModifier=function(d){return l=d,this},this.addHandler=function(d,f){return c.push(d,f),this},this.removeHandler=function(d){const f=c.indexOf(d);return f!==-1&&c.splice(f,2),this},this.getHandler=function(d){for(let f=0,p=c.length;f<p;f+=2){const m=c[f],v=c[f+1];if(m.global&&(m.lastIndex=0),m.test(d))return v}return null}}}const jB=new FT;class _i{constructor(e){this.manager=e!==void 0?e:jB,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const r=this;return new Promise(function(i,s){r.load(e,i,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}_i.DEFAULT_MATERIAL_NAME="__DEFAULT";const Io={};class zte extends Error{constructor(e,t){super(e),this.response=t}}class na extends _i{constructor(e){super(e)}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=jo.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(Io[e]!==void 0){Io[e].push({onLoad:t,onProgress:r,onError:i});return}Io[e]=[],Io[e].push({onLoad:t,onProgress:r,onError:i});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const d=Io[e],f=c.body.getReader(),p=c.headers.get("Content-Length")||c.headers.get("X-File-Size"),m=p?parseInt(p):0,v=m!==0;let x=0;const y=new ReadableStream({start(g){w();function w(){f.read().then(({done:S,value:E})=>{if(S)g.close();else{x+=E.byteLength;const A=new ProgressEvent("progress",{lengthComputable:v,loaded:x,total:m});for(let T=0,P=d.length;T<P;T++){const k=d[T];k.onProgress&&k.onProgress(A)}g.enqueue(E),w()}})}}});return new Response(y)}else throw new zte(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(d=>new DOMParser().parseFromString(d,a));case"json":return c.json();default:if(a===void 0)return c.text();{const f=/charset="?([^;"\s]*)"?/i.exec(a),p=f&&f[1]?f[1].toLowerCase():void 0,m=new TextDecoder(p);return c.arrayBuffer().then(v=>m.decode(v))}}}).then(c=>{jo.add(e,c);const d=Io[e];delete Io[e];for(let f=0,p=d.length;f<p;f++){const m=d[f];m.onLoad&&m.onLoad(c)}}).catch(c=>{const d=Io[e];if(d===void 0)throw this.manager.itemError(e),c;delete Io[e];for(let f=0,p=d.length;f<p;f++){const m=d[f];m.onError&&m.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class Vte extends _i{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new na(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t=[];for(let r=0;r<e.length;r++){const i=Rp.parse(e[r]);t.push(i)}return t}}class jte extends _i{constructor(e){super(e)}load(e,t,r,i){const s=this,o=[],a=new o_,l=new na(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let c=0;function d(f){l.load(e[f],function(p){const m=s.parse(p,!0);o[f]={width:m.width,height:m.height,format:m.format,mipmaps:m.mipmaps},c+=1,c===6&&(m.mipmapCount===1&&(a.minFilter=Wn),a.image=o,a.format=m.format,a.needsUpdate=!0,t&&t(a))},r,i)}if(Array.isArray(e))for(let f=0,p=e.length;f<p;++f)d(f);else l.load(e,function(f){const p=s.parse(f,!0);if(p.isCubemap){const m=p.mipmaps.length/p.mipmapCount;for(let v=0;v<m;v++){o[v]={mipmaps:[]};for(let x=0;x<p.mipmapCount;x++)o[v].mipmaps.push(p.mipmaps[v*p.mipmapCount+x]),o[v].format=p.format,o[v].width=p.width,o[v].height=p.height}a.image=o}else a.image.width=p.width,a.image.height=p.height,a.mipmaps=p.mipmaps;p.mipmapCount===1&&(a.minFilter=Wn),a.format=p.format,a.needsUpdate=!0,t&&t(a)},r,i);return a}}class Ip extends _i{constructor(e){super(e)}load(e,t,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=jo.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=bp("img");function l(){d(),jo.add(e,this),t&&t(this),s.manager.itemEnd(e)}function c(f){d(),i&&i(f),s.manager.itemError(e),s.manager.itemEnd(e)}function d(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class Hte extends _i{constructor(e){super(e)}load(e,t,r,i){const s=new nm;s.colorSpace=tr;const o=new Ip(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(c){o.load(e[c],function(d){s.images[c]=d,a++,a===6&&(s.needsUpdate=!0,t&&t(s))},void 0,i)}for(let c=0;c<e.length;++c)l(c);return s}}class Wte extends _i{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new Ac,a=new na(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){let c;try{c=s.parse(l)}catch(d){if(i!==void 0)i(d);else{console.error(d);return}}c.image!==void 0?o.image=c.image:c.data!==void 0&&(o.image.width=c.width,o.image.height=c.height,o.image.data=c.data),o.wrapS=c.wrapS!==void 0?c.wrapS:Ur,o.wrapT=c.wrapT!==void 0?c.wrapT:Ur,o.magFilter=c.magFilter!==void 0?c.magFilter:Wn,o.minFilter=c.minFilter!==void 0?c.minFilter:Wn,o.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.colorSpace!==void 0?o.colorSpace=c.colorSpace:c.encoding!==void 0&&(o.encoding=c.encoding),c.flipY!==void 0&&(o.flipY=c.flipY),c.format!==void 0&&(o.format=c.format),c.type!==void 0&&(o.type=c.type),c.mipmaps!==void 0&&(o.mipmaps=c.mipmaps,o.minFilter=hl),c.mipmapCount===1&&(o.minFilter=Wn),c.generateMipmaps!==void 0&&(o.generateMipmaps=c.generateMipmaps),o.needsUpdate=!0,t&&t(o,c)},r,i),o}}class Gte extends _i{constructor(e){super(e)}load(e,t,r,i){const s=new $n,o=new Ip(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},r,i),s}}class El extends nn{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Xe(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class HB extends El{constructor(e,t,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(nn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Xe(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const rS=new Et,eL=new j,tL=new j;class BT{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new me(512,512),this.map=null,this.mapPass=null,this.matrix=new Et,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new rm,this._frameExtents=new me(1,1),this._viewportCount=1,this._viewports=[new sn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,r=this.matrix;eL.setFromMatrixPosition(e.matrixWorld),t.position.copy(eL),tL.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(tL),t.updateMatrixWorld(),rS.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(rS),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(rS)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class $te extends BT{constructor(){super(new Gn(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,r=Gd*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(r!==t.fov||i!==t.aspect||s!==t.far)&&(t.fov=r,t.aspect=i,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class WB extends El{constructor(e,t,r=0,i=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(nn.DEFAULT_UP),this.updateMatrix(),this.target=new nn,this.distance=r,this.angle=i,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new $te}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const nL=new Et,nf=new j,iS=new j;class Xte extends BT{constructor(){super(new Gn(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new me(4,2),this._viewportCount=6,this._viewports=[new sn(2,1,1,1),new sn(0,1,1,1),new sn(3,1,1,1),new sn(1,1,1,1),new sn(3,0,1,1),new sn(1,0,1,1)],this._cubeDirections=[new j(1,0,0),new j(-1,0,0),new j(0,0,1),new j(0,0,-1),new j(0,1,0),new j(0,-1,0)],this._cubeUps=[new j(0,1,0),new j(0,1,0),new j(0,1,0),new j(0,1,0),new j(0,0,1),new j(0,0,-1)]}updateMatrices(e,t=0){const r=this.camera,i=this.matrix,s=e.distance||r.far;s!==r.far&&(r.far=s,r.updateProjectionMatrix()),nf.setFromMatrixPosition(e.matrixWorld),r.position.copy(nf),iS.copy(r.position),iS.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(iS),r.updateMatrixWorld(),i.makeTranslation(-nf.x,-nf.y,-nf.z),nL.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(nL)}}class GB extends El{constructor(e,t,r=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new Xte}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class qte extends BT{constructor(){super(new tl(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class $B extends El{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(nn.DEFAULT_UP),this.updateMatrix(),this.target=new nn,this.shadow=new qte}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class XB extends El{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class qB extends El{constructor(e,t,r=10,i=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=r,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class YB{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new j)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*i),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*r),t.addScaledVector(o[4],1.092548*(r*i)),t.addScaledVector(o[5],1.092548*(i*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(r*s)),t.addScaledVector(o[8],.546274*(r*r-i*i)),t}getIrradianceAt(e,t){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*i),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*r),t.addScaledVector(o[4],2*.429043*r*i),t.addScaledVector(o[5],2*.429043*i*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*r*s),t.addScaledVector(o[8],.429043*(r*r-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].fromArray(e,t+i*3);return this}toArray(e=[],t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].toArray(e,t+i*3);return e}static getBasisAt(e,t){const r=e.x,i=e.y,s=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*s,t[3]=.488603*r,t[4]=1.092548*r*i,t[5]=1.092548*i*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*r*s,t[8]=.546274*(r*r-i*i)}}class KB extends El{constructor(e=new YB,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class w_ extends _i{constructor(e){super(e),this.textures={}}load(e,t,r,i){const s=this,o=new na(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t=this.textures;function r(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const i=w_.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new Xe().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(i.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(i.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(i.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(i.depthFunc=e.depthFunc),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(i.blendSrc=e.blendSrc),e.blendDst!==void 0&&(i.blendDst=e.blendDst),e.blendEquation!==void 0&&(i.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(i.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(i.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(i.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&i.blendColor!==void 0&&i.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(i.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==void 0&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(i.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(i.uniforms[s]={},o.type){case"t":i.uniforms[s].value=r(o.value);break;case"c":i.uniforms[s].value=new Xe().setHex(o.value);break;case"v2":i.uniforms[s].value=new me().fromArray(o.value);break;case"v3":i.uniforms[s].value=new j().fromArray(o.value);break;case"v4":i.uniforms[s].value=new sn().fromArray(o.value);break;case"m3":i.uniforms[s].value=new Bt().fromArray(o.value);break;case"m4":i.uniforms[s].value=new Et().fromArray(o.value);break;default:i.uniforms[s].value=o.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(i.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)i.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(i.lights=e.lights),e.clipping!==void 0&&(i.clipping=e.clipping),e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=r(e.map)),e.matcap!==void 0&&(i.matcap=r(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=r(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=r(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=r(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),i.normalScale=new me().fromArray(s)}return e.displacementMap!==void 0&&(i.displacementMap=r(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=r(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=r(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=r(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=r(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=r(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=r(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=r(e.envMap)),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=r(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=r(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=r(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=r(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=r(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new me().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=r(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=r(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=r(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=r(e.thicknessMap)),e.anisotropyMap!==void 0&&(i.anisotropyMap=r(e.anisotropyMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=r(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=r(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:PB,SpriteMaterial:ET,RawShaderMaterial:RB,ShaderMaterial:mo,PointsMaterial:TT,MeshPhysicalMaterial:OT,MeshStandardMaterial:kT,MeshPhongMaterial:IB,MeshToonMaterial:LB,MeshNormalMaterial:kB,MeshLambertMaterial:OB,MeshDepthMaterial:xT,MeshDistanceMaterial:wT,MeshBasicMaterial:Sl,MeshMatcapMaterial:NB,LineDashedMaterial:DB,LineBasicMaterial:ri,Material:jr};return new t[e]}}class V1{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let r=0,i=e.length;r<i;r++)t+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class ZB extends zt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class JB extends _i{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new na(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t={},r={};function i(m,v){if(t[v]!==void 0)return t[v];const y=m.interleavedBuffers[v],g=s(m,y.buffer),w=od(y.type,g),S=new i_(w,y.stride);return S.uuid=y.uuid,t[v]=S,S}function s(m,v){if(r[v]!==void 0)return r[v];const y=m.arrayBuffers[v],g=new Uint32Array(y).buffer;return r[v]=g,g}const o=e.isInstancedBufferGeometry?new ZB:new zt,a=e.data.index;if(a!==void 0){const m=od(a.type,a.array);o.setIndex(new an(m,1))}const l=e.data.attributes;for(const m in l){const v=l[m];let x;if(v.isInterleavedBufferAttribute){const y=i(e.data,v.data);x=new Dc(y,v.itemSize,v.offset,v.normalized)}else{const y=od(v.type,v.array),g=v.isInstancedBufferAttribute?Xd:an;x=new g(y,v.itemSize,v.normalized)}v.name!==void 0&&(x.name=v.name),v.usage!==void 0&&x.setUsage(v.usage),o.setAttribute(m,x)}const c=e.data.morphAttributes;if(c)for(const m in c){const v=c[m],x=[];for(let y=0,g=v.length;y<g;y++){const w=v[y];let S;if(w.isInterleavedBufferAttribute){const E=i(e.data,w.data);S=new Dc(E,w.itemSize,w.offset,w.normalized)}else{const E=od(w.type,w.array);S=new an(E,w.itemSize,w.normalized)}w.name!==void 0&&(S.name=w.name),x.push(S)}o.morphAttributes[m]=x}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const f=e.data.groups||e.data.drawcalls||e.data.offsets;if(f!==void 0)for(let m=0,v=f.length;m!==v;++m){const x=f[m];o.addGroup(x.start,x.count,x.materialIndex)}const p=e.data.boundingSphere;if(p!==void 0){const m=new j;p.center!==void 0&&m.fromArray(p.center),o.boundingSphere=new zr(m,p.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class Yte extends _i{constructor(e){super(e)}load(e,t,r,i){const s=this,o=this.path===""?V1.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new na(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let c=null;try{c=JSON.parse(l)}catch(f){i!==void 0&&i(f),console.error("THREE:ObjectLoader: Can't parse "+e+".",f.message);return}const d=c.metadata;if(d===void 0||d.type===void 0||d.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(c,t)},r,i)}async loadAsync(e,t){const r=this,i=this.path===""?V1.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const s=new na(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await r.parseAsync(a)}parse(e,t){const r=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,i),o=this.parseImages(e.images,function(){t!==void 0&&t(c)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),c=this.parseObject(e.object,s,l,a,r),d=this.parseSkeletons(e.skeletons,c);if(this.bindSkeletons(c,d),t!==void 0){let f=!1;for(const p in o)if(o[p].data instanceof HTMLImageElement){f=!0;break}f===!1&&t(c)}return c}async parseAsync(e){const t=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,i,a,o,t),c=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,c),l}parseShapes(e){const t={};if(e!==void 0)for(let r=0,i=e.length;r<i;r++){const s=new Cc().fromJSON(e[r]);t[s.uuid]=s}return t}parseSkeletons(e,t){const r={},i={};if(t.traverse(function(s){s.isBone&&(i[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new s_().fromJSON(e[s],i);r[a.uuid]=a}return r}parseGeometries(e,t){const r={};if(e!==void 0){const i=new JB;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=i.parse(l);break;default:l.type in QI?a=QI[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),r[l.uuid]=a}}return r}parseMaterials(e,t){const r={},i={};if(e!==void 0){const s=new w_;s.setTextures(t);for(let o=0,a=e.length;o<a;o++){const l=e[o];r[l.uuid]===void 0&&(r[l.uuid]=s.parse(l)),i[l.uuid]=r[l.uuid]}}return i}parseAnimations(e){const t={};if(e!==void 0)for(let r=0;r<e.length;r++){const i=e[r],s=Rp.parse(i);t[s.uuid]=s}return t}parseImages(e,t){const r=this,i={};let s;function o(l){return r.manager.itemStart(l),s.load(l,function(){r.manager.itemEnd(l)},void 0,function(){r.manager.itemError(l),r.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const c=l,d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:r.resourcePath+c;return o(d)}else return l.data?{data:od(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new FT(t);s=new Ip(l),s.setCrossOrigin(this.crossOrigin);for(let c=0,d=e.length;c<d;c++){const f=e[c],p=f.url;if(Array.isArray(p)){const m=[];for(let v=0,x=p.length;v<x;v++){const y=p[v],g=a(y);g!==null&&(g instanceof HTMLImageElement?m.push(g):m.push(new Ac(g.data,g.width,g.height)))}i[f.uuid]=new hc(m)}else{const m=a(f.url);i[f.uuid]=new hc(m)}}}return i}async parseImagesAsync(e){const t=this,r={};let i;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return await i.loadAsync(l)}else return o.data?{data:od(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){i=new Ip(this.manager),i.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],c=l.url;if(Array.isArray(c)){const d=[];for(let f=0,p=c.length;f<p;f++){const m=c[f],v=await s(m);v!==null&&(v instanceof HTMLImageElement?d.push(v):d.push(new Ac(v.data,v.width,v.height)))}r[l.uuid]=new hc(d)}else{const d=await s(l.url);r[l.uuid]=new hc(d)}}}return r}parseTextures(e,t){function r(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const i={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=t[a.image],c=l.data;let d;Array.isArray(c)?(d=new nm,c.length===6&&(d.needsUpdate=!0)):(c&&c.data?d=new Ac:d=new $n,c&&(d.needsUpdate=!0)),d.source=l,d.uuid=a.uuid,a.name!==void 0&&(d.name=a.name),a.mapping!==void 0&&(d.mapping=r(a.mapping,Kte)),a.channel!==void 0&&(d.channel=a.channel),a.offset!==void 0&&d.offset.fromArray(a.offset),a.repeat!==void 0&&d.repeat.fromArray(a.repeat),a.center!==void 0&&d.center.fromArray(a.center),a.rotation!==void 0&&(d.rotation=a.rotation),a.wrap!==void 0&&(d.wrapS=r(a.wrap[0],rL),d.wrapT=r(a.wrap[1],rL)),a.format!==void 0&&(d.format=a.format),a.internalFormat!==void 0&&(d.internalFormat=a.internalFormat),a.type!==void 0&&(d.type=a.type),a.colorSpace!==void 0&&(d.colorSpace=a.colorSpace),a.encoding!==void 0&&(d.encoding=a.encoding),a.minFilter!==void 0&&(d.minFilter=r(a.minFilter,iL)),a.magFilter!==void 0&&(d.magFilter=r(a.magFilter,iL)),a.anisotropy!==void 0&&(d.anisotropy=a.anisotropy),a.flipY!==void 0&&(d.flipY=a.flipY),a.generateMipmaps!==void 0&&(d.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(d.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(d.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(d.compareFunction=a.compareFunction),a.userData!==void 0&&(d.userData=a.userData),i[a.uuid]=d}return i}parseObject(e,t,r,i,s){let o;function a(p){return t[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",p),t[p]}function l(p){if(p!==void 0){if(Array.isArray(p)){const m=[];for(let v=0,x=p.length;v<x;v++){const y=p[v];r[y]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",y),m.push(r[y])}return m}return r[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",p),r[p]}}function c(p){return i[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",p),i[p]}let d,f;switch(e.type){case"Scene":o=new bT,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new Xe(e.background):o.background=c(e.background)),e.environment!==void 0&&(o.environment=c(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new r_(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new n_(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":o=new Gn(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new tl(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new XB(e.color,e.intensity);break;case"DirectionalLight":o=new $B(e.color,e.intensity);break;case"PointLight":o=new GB(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new qB(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new WB(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new HB(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new KB().fromJSON(e);break;case"SkinnedMesh":d=a(e.geometry),f=l(e.material),o=new pB(d,f),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":d=a(e.geometry),f=l(e.material),o=new sr(d,f);break;case"InstancedMesh":d=a(e.geometry),f=l(e.material);const p=e.count,m=e.instanceMatrix,v=e.instanceColor;o=new mB(d,f,p),o.instanceMatrix=new Xd(new Float32Array(m.array),16),v!==void 0&&(o.instanceColor=new Xd(new Float32Array(v.array),v.itemSize));break;case"BatchedMesh":d=a(e.geometry),f=l(e.material),o=new gB(e.maxGeometryCount,e.maxVertexCount,e.maxIndexCount,f),o.geometry=d,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._visibility=e.visibility,o._active=e.active,o._bounds=e.bounds.map(x=>{const y=new ei;y.min.fromArray(x.boxMin),y.max.fromArray(x.boxMax);const g=new zr;return g.radius=x.sphereRadius,g.center.fromArray(x.sphereCenter),{boxInitialized:x.boxInitialized,box:y,sphereInitialized:x.sphereInitialized,sphere:g}}),o._maxGeometryCount=e.maxGeometryCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._geometryCount=e.geometryCount,o._matricesTexture=c(e.matricesTexture.uuid);break;case"LOD":o=new fB;break;case"Line":o=new fl(a(e.geometry),l(e.material));break;case"LineLoop":o=new vB(a(e.geometry),l(e.material));break;case"LineSegments":o=new yo(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new yB(a(e.geometry),l(e.material));break;case"Sprite":o=new hB(l(e.material));break;case"Group":o=new cd;break;case"Bone":o=new MT;break;default:o=new nn}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const p=e.children;for(let m=0;m<p.length;m++)o.add(this.parseObject(p[m],t,r,i,s))}if(e.animations!==void 0){const p=e.animations;for(let m=0;m<p.length;m++){const v=p[m];o.animations.push(s[v])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const p=e.levels;for(let m=0;m<p.length;m++){const v=p[m],x=o.getObjectByProperty("uuid",v.object);x!==void 0&&o.addLevel(x,v.distance,v.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(r){if(r.isSkinnedMesh===!0&&r.skeleton!==void 0){const i=t[r.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",r.skeleton):r.bind(i,r.bindMatrix)}})}}const Kte={UVMapping:K0,CubeReflectionMapping:ta,CubeRefractionMapping:dl,EquirectangularReflectionMapping:hp,EquirectangularRefractionMapping:fp,CubeUVReflectionMapping:lh},rL={RepeatWrapping:pp,ClampToEdgeWrapping:Ur,MirroredRepeatWrapping:mp},iL={NearestFilter:jn,NearestMipmapNearestFilter:Zy,NearestMipmapLinearFilter:If,LinearFilter:Wn,LinearMipmapNearestFilter:nT,LinearMipmapLinearFilter:hl};class Zte extends _i{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=jo.get(e);if(o!==void 0){if(s.manager.itemStart(e),o.then){o.then(c=>{t&&t(c),s.manager.itemEnd(e)}).catch(c=>{i&&i(c)});return}return setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o}const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader;const l=fetch(e,a).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(c){return jo.add(e,c),t&&t(c),s.manager.itemEnd(e),c}).catch(function(c){i&&i(c),jo.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});jo.add(e,l),s.manager.itemStart(e)}}let yv;class zT{static getContext(){return yv===void 0&&(yv=new(window.AudioContext||window.webkitAudioContext)),yv}static setContext(e){yv=e}}class Jte extends _i{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new na(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const c=l.slice(0);zT.getContext().decodeAudioData(c,function(f){t(f)}).catch(a)}catch(c){a(c)}},r,i);function a(l){i?i(l):console.error(l),s.manager.itemError(e)}}}const sL=new Et,oL=new Et,Vl=new Et;class Qte{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Gn,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Gn,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Vl.copy(e.projectionMatrix);const i=t.eyeSep/2,s=i*t.near/t.focus,o=t.near*Math.tan(Mc*t.fov*.5)/t.zoom;let a,l;oL.elements[12]=-i,sL.elements[12]=i,a=-o*t.aspect+s,l=o*t.aspect+s,Vl.elements[0]=2*t.near/(l-a),Vl.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(Vl),a=-o*t.aspect-s,l=o*t.aspect-s,Vl.elements[0]=2*t.near/(l-a),Vl.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(Vl)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(oL),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(sL)}}class VT{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=aL(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=aL();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function aL(){return(typeof performance>"u"?Date:performance).now()}const jl=new j,lL=new Br,ene=new j,Hl=new j;class tne extends nn{constructor(){super(),this.type="AudioListener",this.context=zT.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new VT}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(jl,lL,ene),Hl.set(0,0,-1).applyQuaternion(lL),t.positionX){const i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(jl.x,i),t.positionY.linearRampToValueAtTime(jl.y,i),t.positionZ.linearRampToValueAtTime(jl.z,i),t.forwardX.linearRampToValueAtTime(Hl.x,i),t.forwardY.linearRampToValueAtTime(Hl.y,i),t.forwardZ.linearRampToValueAtTime(Hl.z,i),t.upX.linearRampToValueAtTime(r.x,i),t.upY.linearRampToValueAtTime(r.y,i),t.upZ.linearRampToValueAtTime(r.z,i)}else t.setPosition(jl.x,jl.y,jl.z),t.setOrientation(Hl.x,Hl.y,Hl.z,r.x,r.y,r.z)}}class QB extends nn{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const Wl=new j,cL=new Br,nne=new j,Gl=new j;class rne extends QB{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=r,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Wl,cL,nne),Gl.set(0,0,1).applyQuaternion(cL);const t=this.panner;if(t.positionX){const r=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Wl.x,r),t.positionY.linearRampToValueAtTime(Wl.y,r),t.positionZ.linearRampToValueAtTime(Wl.z,r),t.orientationX.linearRampToValueAtTime(Gl.x,r),t.orientationY.linearRampToValueAtTime(Gl.y,r),t.orientationZ.linearRampToValueAtTime(Gl.z,r)}else t.setPosition(Wl.x,Wl.y,Wl.z),t.setOrientation(Gl.x,Gl.y,Gl.z)}}class ine{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let r=0;r<t.length;r++)e+=t[r];return e/t.length}}class ez{constructor(e,t,r){this.binding=e,this.valueSize=r;let i,s,o;switch(t){case"quaternion":i=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const r=this.buffer,i=this.valueSize,s=e*i+i;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==i;++a)r[s+a]=r[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(r,s,0,a,i)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,r=this.buffer,i=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(r,i,l,1-s,t)}o>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*t,1,t);for(let l=t,c=t+t;l!==c;++l)if(r[l]!==r[l+t]){a.setValue(r,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(t,i);for(let s=r,o=i;s!==o;++s)t[s]=t[i+s%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let r=e;r<t;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[t+r]=this.buffer[e+r]}_select(e,t,r,i,s){if(i>=.5)for(let o=0;o!==s;++o)e[t+o]=e[r+o]}_slerp(e,t,r,i){Br.slerpFlat(e,t,e,t,e,r,i)}_slerpAdditive(e,t,r,i,s){const o=this._workIndex*s;Br.multiplyQuaternionsFlat(e,o,e,t,e,r),Br.slerpFlat(e,t,e,t,e,o,i)}_lerp(e,t,r,i,s){const o=1-i;for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]*o+e[r+a]*i}}_lerpAdditive(e,t,r,i,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[r+o]*i}}}const jT="\\[\\]\\.:\\/",sne=new RegExp("["+jT+"]","g"),HT="[^"+jT+"]",one="[^"+jT.replace("\\.","")+"]",ane=/((?:WC+[\/:])*)/.source.replace("WC",HT),lne=/(WCOD+)?/.source.replace("WCOD",one),cne=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",HT),une=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",HT),dne=new RegExp("^"+ane+lne+cne+une+"$"),hne=["material","materials","bones","map"];class fne{constructor(e,t,r){const i=r||qt.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,t)}setValue(e,t){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,s=r.length;i!==s;++i)r[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}}class qt{constructor(e,t,r){this.path=t,this.parsedPath=r||qt.parseTrackName(t),this.node=qt.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,r){return e&&e.isAnimationObjectGroup?new qt.Composite(e,t,r):new qt(e,t,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(sne,"")}static parseTrackName(e){const t=dne.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const s=r.nodeName.substring(i+1);hne.indexOf(s)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=s)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(t);if(r!==void 0)return r}if(e.children){const r=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const l=r(a.children);if(l)return l}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)e[t++]=r[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,r=t.objectName,i=t.propertyName;let s=t.propertyIndex;if(e||(e=qt.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let c=t.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let d=0;d<e.length;d++)if(e[d].name===c){c=d;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const o=e[i];if(o===void 0){const c=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+i+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}qt.Composite=fne;qt.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};qt.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};qt.prototype.GetterByBindingType=[qt.prototype._getValue_direct,qt.prototype._getValue_array,qt.prototype._getValue_arrayElement,qt.prototype._getValue_toArray];qt.prototype.SetterByBindingTypeAndVersioning=[[qt.prototype._setValue_direct,qt.prototype._setValue_direct_setNeedsUpdate,qt.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[qt.prototype._setValue_array,qt.prototype._setValue_array_setNeedsUpdate,qt.prototype._setValue_array_setMatrixWorldNeedsUpdate],[qt.prototype._setValue_arrayElement,qt.prototype._setValue_arrayElement_setNeedsUpdate,qt.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[qt.prototype._setValue_fromArray,qt.prototype._setValue_fromArray_setNeedsUpdate,qt.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class pne{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Di(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let r=0,i=arguments.length;r!==i;++r)e[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,r=this._paths,i=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,c=this.nCachedObjects_;for(let d=0,f=arguments.length;d!==f;++d){const p=arguments[d],m=p.uuid;let v=t[m];if(v===void 0){v=l++,t[m]=v,e.push(p);for(let x=0,y=o;x!==y;++x)s[x].push(new qt(p,r[x],i[x]))}else if(v<c){a=e[v];const x=--c,y=e[x];t[y.uuid]=v,e[v]=y,t[m]=x,e[x]=p;for(let g=0,w=o;g!==w;++g){const S=s[g],E=S[x];let A=S[v];S[v]=E,A===void 0&&(A=new qt(p,r[g],i[g])),S[x]=A}}else e[v]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c}remove(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],c=l.uuid,d=t[c];if(d!==void 0&&d>=s){const f=s++,p=e[f];t[p.uuid]=d,e[d]=p,t[c]=f,e[f]=l;for(let m=0,v=i;m!==v;++m){const x=r[m],y=x[f],g=x[d];x[d]=y,x[f]=g}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const c=arguments[a],d=c.uuid,f=t[d];if(f!==void 0)if(delete t[d],f<s){const p=--s,m=e[p],v=--o,x=e[v];t[m.uuid]=f,e[f]=m,t[x.uuid]=p,e[p]=x,e.pop();for(let y=0,g=i;y!==g;++y){const w=r[y],S=w[p],E=w[v];w[f]=S,w[p]=E,w.pop()}}else{const p=--o,m=e[p];p>0&&(t[m.uuid]=f),e[f]=m,e.pop();for(let v=0,x=i;v!==x;++v){const y=r[v];y[f]=y[p],y.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const r=this._bindingsIndicesByPath;let i=r[e];const s=this._bindings;if(i!==void 0)return s[i];const o=this._paths,a=this._parsedPaths,l=this._objects,c=l.length,d=this.nCachedObjects_,f=new Array(c);i=s.length,r[e]=i,o.push(e),a.push(t),s.push(f);for(let p=d,m=l.length;p!==m;++p){const v=l[p];f[p]=new qt(v,e,t)}return f}unsubscribe_(e){const t=this._bindingsIndicesByPath,r=t[e];if(r!==void 0){const i=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],c=e[a];t[c]=r,o[r]=l,o.pop(),s[r]=s[a],s.pop(),i[r]=i[a],i.pop()}}}class tz{constructor(e,t,r=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=r,this.blendMode=i;const s=t.tracks,o=s.length,a=new Array(o),l={endingStart:uc,endingEnd:uc};for(let c=0;c!==o;++c){const d=s[c].createInterpolant(null);a[c]=d,d.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=DF,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,r){if(e.fadeOut(t),this.fadeIn(t),r){const i=this._clip.duration,s=e._clip.duration,o=s/i,a=i/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,r){return e.crossFadeFrom(this,t,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,r){const i=this._mixer,s=i.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=s,l[1]=s+r,c[0]=e/o,c[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,r,i){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*r;l<0||r===0?t=0:(this._startTime=null,t=r*l)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case uT:for(let d=0,f=l.length;d!==f;++d)l[d].evaluate(o),c[d].accumulateAdditive(a);break;case J0:default:for(let d=0,f=l.length;d!==f;++d)l[d].evaluate(o),c[d].accumulate(i,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const r=this._weightInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,r=this.loop;let i=this.time+e,s=this._loopCount;const o=r===UF;if(e===0)return s===-1?i:o&&(s&1)===1?t-i:i;if(r===NF){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),i>=t||i<0){const a=Math.floor(i/t);i-=t*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=i;if(o&&(s&1)===1)return t-i}return i}_setEndings(e,t,r){const i=this._interpolantSettings;r?(i.endingStart=dc,i.endingEnd=dc):(e?i.endingStart=this.zeroSlopeAtStart?dc:uc:i.endingStart=yp,t?i.endingEnd=this.zeroSlopeAtEnd?dc:uc:i.endingEnd=yp)}_scheduleFading(e,t,r){const i=this._mixer,s=i.time;let o=this._weightInterpolant;o===null&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=t,a[1]=s+e,l[1]=r,this}}const mne=new Float32Array(1);class gne extends ia{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const r=e._localRoot||this._root,i=e._clip.tracks,s=i.length,o=e._propertyBindings,a=e._interpolants,l=r.uuid,c=this._bindingsByRootAndName;let d=c[l];d===void 0&&(d={},c[l]=d);for(let f=0;f!==s;++f){const p=i[f],m=p.name;let v=d[m];if(v!==void 0)++v.referenceCount,o[f]=v;else{if(v=o[f],v!==void 0){v._cacheIndex===null&&(++v.referenceCount,this._addInactiveBinding(v,l,m));continue}const x=t&&t._propertyBindings[f].binding.parsedPath;v=new ez(qt.create(r,m,x),p.ValueTypeName,p.getValueSize()),++v.referenceCount,this._addInactiveBinding(v,l,m),o[f]=v}a[f].resultBuffer=v.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,i=e._clip.uuid,s=this._actionsByClip[i];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,i,r)}const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,r){const i=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=i.length,i.push(e),o.actionByRoot[r]=e}_removeInactiveAction(e){const t=this._actions,r=t[t.length-1],i=e._cacheIndex;r._cacheIndex=i,t[i]=r,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,c=l[l.length-1],d=e._byClipCacheIndex;c._byClipCacheIndex=d,l[d]=c,l.pop(),e._byClipCacheIndex=null;const f=a.actionByRoot,p=(e._localRoot||this._root).uuid;delete f[p],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,r=e._cacheIndex,i=this._nActiveActions++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_takeBackAction(e){const t=this._actions,r=e._cacheIndex,i=--this._nActiveActions,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_addInactiveBinding(e,t,r){const i=this._bindingsByRootAndName,s=this._bindings;let o=i[t];o===void 0&&(o={},i[t]=o),o[r]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,r=e.binding,i=r.rootNode.uuid,s=r.path,o=this._bindingsByRootAndName,a=o[i],l=t[t.length-1],c=e._cacheIndex;l._cacheIndex=c,t[c]=l,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[i]}_lendBinding(e){const t=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_takeBackBinding(e){const t=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let r=e[t];return r===void 0&&(r=new DT(new Float32Array(2),new Float32Array(2),1,mne),r.__cacheIndex=t,e[t]=r),r}_takeBackControlInterpolant(e){const t=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,s=t[i];e.__cacheIndex=i,t[i]=e,s.__cacheIndex=r,t[r]=s}clipAction(e,t,r){const i=t||this._root,s=i.uuid;let o=typeof e=="string"?Rp.findByName(i,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let c=null;if(r===void 0&&(o!==null?r=o.blendMode:r=J0),l!==void 0){const f=l.actionByRoot[s];if(f!==void 0&&f.blendMode===r)return f;c=l.knownActions[0],o===null&&(o=c._clip)}if(o===null)return null;const d=new tz(this,o,t,r);return this._bindAction(d,c),this._addInactiveAction(d,a,s),d}existingAction(e,t){const r=t||this._root,i=r.uuid,s=typeof e=="string"?Rp.findByName(r,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[i]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let r=t-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const t=this._actions,r=this._nActiveActions,i=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let c=0;c!==r;++c)t[c]._update(i,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)a[c].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,r=e.uuid,i=this._actionsByClip,s=i[r];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const c=o[a];this._deactivateAction(c);const d=c._cacheIndex,f=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,f._cacheIndex=d,t[d]=f,t.pop(),this._removeInactiveBindingsForAction(c)}delete i[r]}}uncacheRoot(e){const t=e.uuid,r=this._actionsByClip;for(const o in r){const a=r[o].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const i=this._bindingsByRootAndName,s=i[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const r=this.existingAction(e,t);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class WT{constructor(e){this.value=e}clone(){return new WT(this.value.clone===void 0?this.value:this.value.clone())}}let vne=0;class yne extends ia{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:vne++}),this.name="",this.usage=Sp,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let r=0,i=t.length;r<i;r++){const s=Array.isArray(t[r])?t[r]:[t[r]];for(let o=0;o<s.length;o++)this.uniforms.push(s[o].clone())}return this}clone(){return new this.constructor().copy(this)}}class _ne extends i_{constructor(e,t,r=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class xne{constructor(e,t,r,i,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=r,this.elementSize=i,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class nz{constructor(e,t,r=0,i=1/0){this.ray=new jc(e,t),this.near=r,this.far=i,this.camera=null,this.layers=new Tc,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,r=[]){return j1(e,this,r,t),r.sort(uL),r}intersectObjects(e,t=!0,r=[]){for(let i=0,s=e.length;i<s;i++)j1(e[i],this,r,t);return r.sort(uL),r}}function uL(n,e){return n.distance-e.distance}function j1(n,e,t,r){if(n.layers.test(e.layers)&&n.raycast(e,t),r===!0){const i=n.children;for(let s=0,o=i.length;s<o;s++)j1(i[s],e,t,!0)}}class H1{constructor(e=1,t=0,r=0){return this.radius=e,this.phi=t,this.theta=r,this}set(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(Un(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class wne{constructor(e=1,t=0,r=0){return this.radius=e,this.theta=t,this.y=r,this}set(e,t,r){return this.radius=e,this.theta=t,this.y=r,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=t,this}clone(){return new this.constructor().copy(this)}}const dL=new me;class Sne{constructor(e=new me(1/0,1/0),t=new me(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=dL.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,dL).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const hL=new j,_v=new j;class bne{constructor(e=new j,t=new j){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){hL.subVectors(e,this.start),_v.subVectors(this.end,this.start);const r=_v.dot(_v);let s=_v.dot(hL)/r;return t&&(s=Un(s,0,1)),s}closestPointToPoint(e,t,r){const i=this.closestPointToPointParameter(e,t);return this.delta(r).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const fL=new j;class Ene extends nn{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const r=new zt,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const c=o/l*Math.PI*2,d=a/l*Math.PI*2;i.push(Math.cos(c),Math.sin(c),1,Math.cos(d),Math.sin(d),1)}r.setAttribute("position",new rt(i,3));const s=new ri({fog:!1,toneMapped:!1});this.cone=new yo(r,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),fL.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(fL),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const ba=new j,xv=new Et,sS=new Et;class Mne extends yo{constructor(e){const t=rz(e),r=new zt,i=[],s=[],o=new Xe(0,0,1),a=new Xe(0,1,0);for(let c=0;c<t.length;c++){const d=t[c];d.parent&&d.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}r.setAttribute("position",new rt(i,3)),r.setAttribute("color",new rt(s,3));const l=new ri({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,r=this.geometry,i=r.getAttribute("position");sS.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(xv.multiplyMatrices(sS,a.matrixWorld),ba.setFromMatrixPosition(xv),i.setXYZ(o,ba.x,ba.y,ba.z),xv.multiplyMatrices(sS,a.parent.matrixWorld),ba.setFromMatrixPosition(xv),i.setXYZ(o+1,ba.x,ba.y,ba.z),o+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function rz(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,rz(n.children[t]));return e}class Tne extends sr{constructor(e,t,r){const i=new am(t,4,2),s=new Sl({wireframe:!0,fog:!1,toneMapped:!1});super(i,s),this.light=e,this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const Ane=new j,pL=new Xe,mL=new Xe;class Cne extends nn{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="HemisphereLightHelper";const i=new om(t);i.rotateY(Math.PI*.5),this.material=new Sl({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=i.getAttribute("position"),o=new Float32Array(s.count*3);i.setAttribute("color",new an(o,3)),this.add(new sr(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");pL.copy(this.light.color),mL.copy(this.light.groundColor);for(let r=0,i=t.count;r<i;r++){const s=r<i/2?pL:mL;t.setXYZ(r,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(Ane.setFromMatrixPosition(this.light.matrixWorld).negate())}}class Pne extends yo{constructor(e=10,t=10,r=4473924,i=8947848){r=new Xe(r),i=new Xe(i);const s=t/2,o=e/t,a=e/2,l=[],c=[];for(let p=0,m=0,v=-a;p<=t;p++,v+=o){l.push(-a,0,v,a,0,v),l.push(v,0,-a,v,0,a);const x=p===s?r:i;x.toArray(c,m),m+=3,x.toArray(c,m),m+=3,x.toArray(c,m),m+=3,x.toArray(c,m),m+=3}const d=new zt;d.setAttribute("position",new rt(l,3)),d.setAttribute("color",new rt(c,3));const f=new ri({vertexColors:!0,toneMapped:!1});super(d,f),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class Rne extends yo{constructor(e=10,t=16,r=8,i=64,s=4473924,o=8947848){s=new Xe(s),o=new Xe(o);const a=[],l=[];if(t>1)for(let f=0;f<t;f++){const p=f/t*(Math.PI*2),m=Math.sin(p)*e,v=Math.cos(p)*e;a.push(0,0,0),a.push(m,0,v);const x=f&1?s:o;l.push(x.r,x.g,x.b),l.push(x.r,x.g,x.b)}for(let f=0;f<r;f++){const p=f&1?s:o,m=e-e/r*f;for(let v=0;v<i;v++){let x=v/i*(Math.PI*2),y=Math.sin(x)*m,g=Math.cos(x)*m;a.push(y,0,g),l.push(p.r,p.g,p.b),x=(v+1)/i*(Math.PI*2),y=Math.sin(x)*m,g=Math.cos(x)*m,a.push(y,0,g),l.push(p.r,p.g,p.b)}}const c=new zt;c.setAttribute("position",new rt(a,3)),c.setAttribute("color",new rt(l,3));const d=new ri({vertexColors:!0,toneMapped:!1});super(c,d),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const gL=new j,wv=new j,vL=new j;class Ine extends nn{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="DirectionalLightHelper",t===void 0&&(t=1);let i=new zt;i.setAttribute("position",new rt([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new ri({fog:!1,toneMapped:!1});this.lightPlane=new fl(i,s),this.add(this.lightPlane),i=new zt,i.setAttribute("position",new rt([0,0,0,0,0,1],3)),this.targetLine=new fl(i,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),gL.setFromMatrixPosition(this.light.matrixWorld),wv.setFromMatrixPosition(this.light.target.matrixWorld),vL.subVectors(wv,gL),this.lightPlane.lookAt(wv),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(wv),this.targetLine.scale.z=vL.length()}}const Sv=new j,Ln=new tm;class Lne extends yo{constructor(e){const t=new zt,r=new ri({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(v,x){l(v),l(x)}function l(v){i.push(0,0,0),s.push(0,0,0),o[v]===void 0&&(o[v]=[]),o[v].push(i.length/3-1)}t.setAttribute("position",new rt(i,3)),t.setAttribute("color",new rt(s,3)),super(t,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const c=new Xe(16755200),d=new Xe(16711680),f=new Xe(43775),p=new Xe(16777215),m=new Xe(3355443);this.setColors(c,d,f,p,m)}setColors(e,t,r,i,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,r.r,r.g,r.b),a.setXYZ(33,r.r,r.g,r.b),a.setXYZ(34,r.r,r.g,r.b),a.setXYZ(35,r.r,r.g,r.b),a.setXYZ(36,r.r,r.g,r.b),a.setXYZ(37,r.r,r.g,r.b),a.setXYZ(38,i.r,i.g,i.b),a.setXYZ(39,i.r,i.g,i.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,r=1,i=1;Ln.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),zn("c",t,e,Ln,0,0,-1),zn("t",t,e,Ln,0,0,1),zn("n1",t,e,Ln,-r,-i,-1),zn("n2",t,e,Ln,r,-i,-1),zn("n3",t,e,Ln,-r,i,-1),zn("n4",t,e,Ln,r,i,-1),zn("f1",t,e,Ln,-r,-i,1),zn("f2",t,e,Ln,r,-i,1),zn("f3",t,e,Ln,-r,i,1),zn("f4",t,e,Ln,r,i,1),zn("u1",t,e,Ln,r*.7,i*1.1,-1),zn("u2",t,e,Ln,-r*.7,i*1.1,-1),zn("u3",t,e,Ln,0,i*2,-1),zn("cf1",t,e,Ln,-r,0,1),zn("cf2",t,e,Ln,r,0,1),zn("cf3",t,e,Ln,0,-i,1),zn("cf4",t,e,Ln,0,i,1),zn("cn1",t,e,Ln,-r,0,-1),zn("cn2",t,e,Ln,r,0,-1),zn("cn3",t,e,Ln,0,-i,-1),zn("cn4",t,e,Ln,0,i,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function zn(n,e,t,r,i,s,o){Sv.set(i,s,o).unproject(r);const a=e[n];if(a!==void 0){const l=t.getAttribute("position");for(let c=0,d=a.length;c<d;c++)l.setXYZ(a[c],Sv.x,Sv.y,Sv.z)}}const bv=new ei;class kne extends yo{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(8*3),s=new zt;s.setIndex(new an(r,1)),s.setAttribute("position",new an(i,3)),super(s,new ri({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&bv.setFromObject(this.object),bv.isEmpty())return;const t=bv.min,r=bv.max,i=this.geometry.attributes.position,s=i.array;s[0]=r.x,s[1]=r.y,s[2]=r.z,s[3]=t.x,s[4]=r.y,s[5]=r.z,s[6]=t.x,s[7]=t.y,s[8]=r.z,s[9]=r.x,s[10]=t.y,s[11]=r.z,s[12]=r.x,s[13]=r.y,s[14]=t.z,s[15]=t.x,s[16]=r.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=r.x,s[22]=t.y,s[23]=t.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class One extends yo{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new zt;s.setIndex(new an(r,1)),s.setAttribute("position",new rt(i,3)),super(s,new ri({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class Nne extends fl{constructor(e,t=1,r=16776960){const i=r,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new zt;o.setAttribute("position",new rt(s,3)),o.computeBoundingSphere(),super(o,new ri({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new zt;l.setAttribute("position",new rt(a,3)),l.computeBoundingSphere(),this.add(new sr(l,new Sl({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const yL=new j;let Ev,oS;class Dne extends nn{constructor(e=new j(0,0,1),t=new j(0,0,0),r=1,i=16776960,s=r*.2,o=s*.2){super(),this.type="ArrowHelper",Ev===void 0&&(Ev=new zt,Ev.setAttribute("position",new rt([0,0,0,0,1,0],3)),oS=new uh(0,.5,1,5,1),oS.translate(0,-.5,0)),this.position.copy(t),this.line=new fl(Ev,new ri({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new sr(oS,new Sl({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{yL.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(yL,t)}}setLength(e,t=e*.2,r=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(r,t,r),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class Une extends yo{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new zt;i.setAttribute("position",new rt(t,3)),i.setAttribute("color",new rt(r,3));const s=new ri({vertexColors:!0,toneMapped:!1});super(i,s),this.type="AxesHelper"}setColors(e,t,r){const i=new Xe,s=this.geometry.attributes.color.array;return i.set(e),i.toArray(s,0),i.toArray(s,3),i.set(t),i.toArray(s,6),i.toArray(s,9),i.set(r),i.toArray(s,12),i.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Fne{constructor(){this.type="ShapePath",this.color=new Xe,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Ep,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,r,i){return this.currentPath.quadraticCurveTo(e,t,r,i),this}bezierCurveTo(e,t,r,i,s,o){return this.currentPath.bezierCurveTo(e,t,r,i,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(g){const w=[];for(let S=0,E=g.length;S<E;S++){const A=g[S],T=new Cc;T.curves=A.curves,w.push(T)}return w}function r(g,w){const S=w.length;let E=!1;for(let A=S-1,T=0;T<S;A=T++){let P=w[A],k=w[T],R=k.x-P.x,I=k.y-P.y;if(Math.abs(I)>Number.EPSILON){if(I<0&&(P=w[T],R=-R,k=w[A],I=-I),g.y<P.y||g.y>k.y)continue;if(g.y===P.y){if(g.x===P.x)return!0}else{const H=I*(g.x-P.x)-R*(g.y-P.y);if(H===0)return!0;if(H<0)continue;E=!E}}else{if(g.y!==P.y)continue;if(k.x<=g.x&&g.x<=P.x||P.x<=g.x&&g.x<=k.x)return!0}}return E}const i=uo.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const c=[];if(s.length===1)return a=s[0],l=new Cc,l.curves=a.curves,c.push(l),c;let d=!i(s[0].getPoints());d=e?!d:d;const f=[],p=[];let m=[],v=0,x;p[v]=void 0,m[v]=[];for(let g=0,w=s.length;g<w;g++)a=s[g],x=a.getPoints(),o=i(x),o=e?!o:o,o?(!d&&p[v]&&v++,p[v]={s:new Cc,p:x},p[v].s.curves=a.curves,d&&v++,m[v]=[]):m[v].push({h:a,p:x[0]});if(!p[0])return t(s);if(p.length>1){let g=!1,w=0;for(let S=0,E=p.length;S<E;S++)f[S]=[];for(let S=0,E=p.length;S<E;S++){const A=m[S];for(let T=0;T<A.length;T++){const P=A[T];let k=!0;for(let R=0;R<p.length;R++)r(P.p,p[R].p)&&(S!==R&&w++,k?(k=!1,f[R].push(P)):g=!0);k&&f[S].push(P)}}w>0&&g===!1&&(m=f)}let y;for(let g=0,w=p.length;g<w;g++){l=p[g].s,c.push(l),y=m[g];for(let S=0,E=y.length;S<E;S++)l.holes.push(y[S].h)}return c}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:q0}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=q0);const Bne=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:tT,AddEquation:ka,AddOperation:xF,AdditiveAnimationBlendMode:uT,AdditiveBlending:t1,AgXToneMapping:MF,AlphaFormat:PF,AlwaysCompare:XF,AlwaysDepth:fF,AlwaysStencilFunc:L1,AmbientLight:XB,AnimationAction:tz,AnimationClip:Rp,AnimationLoader:Vte,AnimationMixer:gne,AnimationObjectGroup:pne,AnimationUtils:Ute,ArcCurve:_B,ArrayCamera:cB,ArrowHelper:Dne,AttachedBindMode:o1,Audio:QB,AudioAnalyser:ine,AudioContext:zT,AudioListener:tne,AudioLoader:Jte,AxesHelper:Une,BackSide:Qr,BasicDepthPacking:FF,BasicShadowMap:YU,BatchedMesh:gB,Bone:MT,BooleanKeyframeTrack:Wc,Box2:Sne,Box3:ei,Box3Helper:One,BoxGeometry:Hc,BoxHelper:kne,BufferAttribute:an,BufferGeometry:zt,BufferGeometryLoader:JB,ByteType:AF,Cache:jo,Camera:tm,CameraHelper:Lne,CanvasTexture:ate,CapsuleGeometry:l_,CatmullRomCurve3:xB,CineonToneMapping:bF,CircleGeometry:c_,ClampToEdgeWrapping:Ur,Clock:VT,Color:Xe,ColorKeyframeTrack:UT,ColorManagement:rn,CompressedArrayTexture:ste,CompressedCubeTexture:ote,CompressedTexture:o_,CompressedTextureLoader:jte,ConeGeometry:u_,ConstantAlphaFactor:uF,ConstantColorFactor:lF,CubeCamera:eB,CubeReflectionMapping:ta,CubeRefractionMapping:dl,CubeTexture:nm,CubeTextureLoader:Hte,CubeUVReflectionMapping:lh,CubicBezierCurve:CT,CubicBezierCurve3:wB,CubicInterpolant:BB,CullFaceBack:e1,CullFaceFront:qU,CullFaceFrontBack:qq,CullFaceNone:XU,Curve:Fs,CurvePath:bB,CustomBlending:KU,CustomToneMapping:EF,CylinderGeometry:uh,Cylindrical:wne,Data3DTexture:mT,DataArrayTexture:e_,DataTexture:Ac,DataTextureLoader:Wte,DataUtils:iK,DecrementStencilOp:oY,DecrementWrapStencilOp:lY,DefaultLoadingManager:jB,DepthFormat:Qa,DepthStencilFormat:Nc,DepthTexture:_T,DetachedBindMode:TF,DirectionalLight:$B,DirectionalLightHelper:Ine,DiscreteInterpolant:zB,DisplayP3ColorSpace:Q0,DodecahedronGeometry:d_,DoubleSide:to,DstAlphaFactor:rF,DstColorFactor:sF,DynamicCopyUsage:bY,DynamicDrawUsage:vY,DynamicReadUsage:xY,EdgesGeometry:EB,EllipseCurve:a_,EqualCompare:HF,EqualDepth:mF,EqualStencilFunc:hY,EquirectangularReflectionMapping:hp,EquirectangularRefractionMapping:fp,Euler:em,EventDispatcher:ia,ExtrudeGeometry:f_,FileLoader:na,Float16BufferAttribute:uK,Float32BufferAttribute:rt,Float64BufferAttribute:dK,FloatType:Ps,Fog:r_,FogExp2:n_,FramebufferTexture:ite,FrontSide:ea,Frustum:rm,GLBufferAttribute:xne,GLSL1:MY,GLSL3:k1,GreaterCompare:WF,GreaterDepth:vF,GreaterEqualCompare:$F,GreaterEqualDepth:gF,GreaterEqualStencilFunc:gY,GreaterStencilFunc:pY,GridHelper:Pne,Group:cd,HalfFloatType:Hd,HemisphereLight:HB,HemisphereLightHelper:Cne,IcosahedronGeometry:p_,ImageBitmapLoader:Zte,ImageLoader:Ip,ImageUtils:pT,IncrementStencilOp:sY,IncrementWrapStencilOp:aY,InstancedBufferAttribute:Xd,InstancedBufferGeometry:ZB,InstancedInterleavedBuffer:_ne,InstancedMesh:mB,Int16BufferAttribute:lK,Int32BufferAttribute:cK,Int8BufferAttribute:sK,IntType:rT,InterleavedBuffer:i_,InterleavedBufferAttribute:Dc,Interpolant:lm,InterpolateDiscrete:gp,InterpolateLinear:vp,InterpolateSmooth:oy,InvertStencilOp:cY,KeepStencilOp:ec,KeyframeTrack:Bs,LOD:fB,LatheGeometry:sm,Layers:Tc,LessCompare:jF,LessDepth:pF,LessEqualCompare:hT,LessEqualDepth:dp,LessEqualStencilFunc:fY,LessStencilFunc:dY,Light:El,LightProbe:KB,Line:fl,Line3:bne,LineBasicMaterial:ri,LineCurve:PT,LineCurve3:SB,LineDashedMaterial:DB,LineLoop:vB,LineSegments:yo,LinearDisplayP3ColorSpace:Qp,LinearEncoding:dT,LinearFilter:Wn,LinearInterpolant:DT,LinearMipMapLinearFilter:Qq,LinearMipMapNearestFilter:Jq,LinearMipmapLinearFilter:hl,LinearMipmapNearestFilter:nT,LinearSRGBColorSpace:po,LinearToneMapping:wF,LinearTransfer:_p,Loader:_i,LoaderUtils:V1,LoadingManager:FT,LoopOnce:NF,LoopPingPong:UF,LoopRepeat:DF,LuminanceAlphaFormat:IF,LuminanceFormat:RF,MOUSE:Jl,Material:jr,MaterialLoader:w_,MathUtils:zY,Matrix3:Bt,Matrix4:Et,MaxEquation:s1,Mesh:sr,MeshBasicMaterial:Sl,MeshDepthMaterial:xT,MeshDistanceMaterial:wT,MeshLambertMaterial:OB,MeshMatcapMaterial:NB,MeshNormalMaterial:kB,MeshPhongMaterial:IB,MeshPhysicalMaterial:OT,MeshStandardMaterial:kT,MeshToonMaterial:LB,MinEquation:i1,MirroredRepeatWrapping:mp,MixOperation:_F,MultiplyBlending:r1,MultiplyOperation:Jp,NearestFilter:jn,NearestMipMapLinearFilter:Zq,NearestMipMapNearestFilter:Kq,NearestMipmapLinearFilter:If,NearestMipmapNearestFilter:Zy,NeverCompare:VF,NeverDepth:hF,NeverStencilFunc:uY,NoBlending:$o,NoColorSpace:Pi,NoToneMapping:lo,NormalAnimationBlendMode:J0,NormalBlending:Ec,NotEqualCompare:GF,NotEqualDepth:yF,NotEqualStencilFunc:mY,NumberKeyframeTrack:Cp,Object3D:nn,ObjectLoader:Yte,ObjectSpaceNormalMap:zF,OctahedronGeometry:om,OneFactor:eF,OneMinusConstantAlphaFactor:dF,OneMinusConstantColorFactor:cF,OneMinusDstAlphaFactor:iF,OneMinusDstColorFactor:oF,OneMinusSrcAlphaFactor:Ky,OneMinusSrcColorFactor:nF,OrthographicCamera:tl,P3Primaries:wp,PCFShadowMap:Y0,PCFSoftShadowMap:Rf,PMREMGenerator:N1,Path:Ep,PerspectiveCamera:Gn,Plane:Do,PlaneGeometry:im,PlaneHelper:Nne,PointLight:GB,PointLightHelper:Tne,Points:yB,PointsMaterial:TT,PolarGridHelper:Rne,PolyhedronGeometry:bl,PositionalAudio:rne,PropertyBinding:qt,PropertyMixer:ez,QuadraticBezierCurve:RT,QuadraticBezierCurve3:IT,Quaternion:Br,QuaternionKeyframeTrack:dh,QuaternionLinearInterpolant:VB,RED_GREEN_RGTC2_Format:R1,RED_RGTC1_Format:OF,REVISION:q0,RGBADepthPacking:BF,RGBAFormat:Zr,RGBAIntegerFormat:lT,RGBA_ASTC_10x10_Format:E1,RGBA_ASTC_10x5_Format:w1,RGBA_ASTC_10x6_Format:S1,RGBA_ASTC_10x8_Format:b1,RGBA_ASTC_12x10_Format:M1,RGBA_ASTC_12x12_Format:T1,RGBA_ASTC_4x4_Format:f1,RGBA_ASTC_5x4_Format:p1,RGBA_ASTC_5x5_Format:m1,RGBA_ASTC_6x5_Format:g1,RGBA_ASTC_6x6_Format:v1,RGBA_ASTC_8x5_Format:y1,RGBA_ASTC_8x6_Format:_1,RGBA_ASTC_8x8_Format:x1,RGBA_BPTC_Format:sy,RGBA_ETC2_EAC_Format:h1,RGBA_PVRTC_2BPPV1_Format:u1,RGBA_PVRTC_4BPPV1_Format:c1,RGBA_S3TC_DXT1_Format:ny,RGBA_S3TC_DXT3_Format:ry,RGBA_S3TC_DXT5_Format:iy,RGB_BPTC_SIGNED_Format:A1,RGB_BPTC_UNSIGNED_Format:C1,RGB_ETC1_Format:cT,RGB_ETC2_Format:d1,RGB_PVRTC_2BPPV1_Format:l1,RGB_PVRTC_4BPPV1_Format:a1,RGB_S3TC_DXT1_Format:ty,RGFormat:kF,RGIntegerFormat:aT,RawShaderMaterial:RB,Ray:jc,Raycaster:nz,Rec709Primaries:xp,RectAreaLight:qB,RedFormat:LF,RedIntegerFormat:oT,ReinhardToneMapping:SF,RenderTarget:KF,RepeatWrapping:pp,ReplaceStencilOp:iY,ReverseSubtractEquation:JU,RingGeometry:m_,SIGNED_RED_GREEN_RGTC2_Format:I1,SIGNED_RED_RGTC1_Format:P1,SRGBColorSpace:tr,SRGBTransfer:un,Scene:bT,ShaderChunk:Dt,ShaderLib:Cs,ShaderMaterial:mo,ShadowMaterial:PB,Shape:Cc,ShapeGeometry:g_,ShapePath:Fne,ShapeUtils:uo,ShortType:CF,Skeleton:s_,SkeletonHelper:Mne,SkinnedMesh:pB,Source:hc,Sphere:zr,SphereGeometry:am,Spherical:H1,SphericalHarmonics3:YB,SplineCurve:LT,SpotLight:WB,SpotLightHelper:Ene,Sprite:hB,SpriteMaterial:ET,SrcAlphaFactor:Yy,SrcAlphaSaturateFactor:aF,SrcColorFactor:tF,StaticCopyUsage:SY,StaticDrawUsage:Sp,StaticReadUsage:_Y,StereoCamera:Qte,StreamCopyUsage:EY,StreamDrawUsage:yY,StreamReadUsage:wY,StringKeyframeTrack:Gc,SubtractEquation:ZU,SubtractiveBlending:n1,TOUCH:Ql,TangentSpaceNormalMap:wl,TetrahedronGeometry:v_,Texture:$n,TextureLoader:Gte,TorusGeometry:y_,TorusKnotGeometry:__,Triangle:di,TriangleFanDrawMode:nY,TriangleStripDrawMode:tY,TrianglesDrawMode:eY,TubeGeometry:x_,TwoPassDoubleSide:Yq,UVMapping:K0,Uint16BufferAttribute:gT,Uint32BufferAttribute:vT,Uint8BufferAttribute:oK,Uint8ClampedBufferAttribute:aK,Uniform:WT,UniformsGroup:yne,UniformsLib:Ue,UniformsUtils:QF,UnsignedByteType:co,UnsignedInt248Type:Ja,UnsignedIntType:Vo,UnsignedShort4444Type:iT,UnsignedShort5551Type:sT,UnsignedShortType:Z0,VSMShadowMap:ws,Vector2:me,Vector3:j,Vector4:sn,VectorKeyframeTrack:Pp,VideoTexture:rte,WebGL1Renderer:uB,WebGL3DRenderTarget:$Y,WebGLArrayRenderTarget:GY,WebGLCoordinateSystem:Rs,WebGLCubeRenderTarget:tB,WebGLMultipleRenderTargets:XY,WebGLRenderTarget:Us,WebGLRenderer:ST,WebGLUtils:lB,WebGPUCoordinateSystem:Wd,WireframeGeometry:CB,WrapAroundEnding:yp,ZeroCurvatureEnding:uc,ZeroFactor:QU,ZeroSlopeEnding:dc,ZeroStencilOp:rY,_SRGBAFormat:Jy,createCanvasElement:YF,sRGBEncoding:el},Symbol.toStringTag,{value:"Module"}));var iz={exports:{}},$c={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */$c.ConcurrentRoot=1;$c.ContinuousEventPriority=4;$c.DefaultEventPriority=16;$c.DiscreteEventPriority=1;$c.IdleEventPriority=536870912;$c.LegacyRoot=0;iz.exports=$c;var dd=iz.exports;function zne(n){let e;const t=new Set,r=(c,d)=>{const f=typeof c=="function"?c(e):c;if(f!==e){const p=e;e=d?f:Object.assign({},e,f),t.forEach(m=>m(e,p))}},i=()=>e,s=(c,d=i,f=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let p=d(e);function m(){const v=d(e);if(!f(p,v)){const x=p;c(p=v,x)}}return t.add(m),()=>t.delete(m)},l={setState:r,getState:i,subscribe:(c,d,f)=>d||f?s(c,d,f):(t.add(c),()=>t.delete(c)),destroy:()=>t.clear()};return e=n(r,i,l),l}const Vne=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),_L=Vne?N.useEffect:N.useLayoutEffect;function jne(n){const e=typeof n=="function"?zne(n):n,t=(r=e.getState,i=Object.is)=>{const[,s]=N.useReducer(y=>y+1,0),o=e.getState(),a=N.useRef(o),l=N.useRef(r),c=N.useRef(i),d=N.useRef(!1),f=N.useRef();f.current===void 0&&(f.current=r(o));let p,m=!1;(a.current!==o||l.current!==r||c.current!==i||d.current)&&(p=r(o),m=!i(f.current,p)),_L(()=>{m&&(f.current=p),a.current=o,l.current=r,c.current=i,d.current=!1});const v=N.useRef(o);_L(()=>{const y=()=>{try{const w=e.getState(),S=l.current(w);c.current(f.current,S)||(a.current=w,f.current=S,s())}catch{d.current=!0,s()}},g=e.subscribe(y);return e.getState()!==v.current&&y(),g},[]);const x=m?p:f.current;return N.useDebugValue(x),x};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[t,e];return{next(){const i=r.length<=0;return{value:r.shift(),done:i}}}},t}var sz={exports:{}},aS={exports:{}},lS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xL;function Hne(){return xL||(xL=1,function(n){function e(L,U){var V=L.length;L.push(U);e:for(;0<V;){var Y=V-1>>>1,Q=L[Y];if(0<i(Q,U))L[Y]=U,L[V]=Q,V=Y;else break e}}function t(L){return L.length===0?null:L[0]}function r(L){if(L.length===0)return null;var U=L[0],V=L.pop();if(V!==U){L[0]=V;e:for(var Y=0,Q=L.length,K=Q>>>1;Y<K;){var oe=2*(Y+1)-1,xe=L[oe],Ae=oe+1,we=L[Ae];if(0>i(xe,V))Ae<Q&&0>i(we,xe)?(L[Y]=we,L[Ae]=V,Y=Ae):(L[Y]=xe,L[oe]=V,Y=oe);else if(Ae<Q&&0>i(we,V))L[Y]=we,L[Ae]=V,Y=Ae;else break e}}return U}function i(L,U){var V=L.sortIndex-U.sortIndex;return V!==0?V:L.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,f=null,p=3,m=!1,v=!1,x=!1,y=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(L){for(var U=t(c);U!==null;){if(U.callback===null)r(c);else if(U.startTime<=L)r(c),U.sortIndex=U.expirationTime,e(l,U);else break;U=t(c)}}function E(L){if(x=!1,S(L),!v)if(t(l)!==null)v=!0,J(A);else{var U=t(c);U!==null&&te(E,U.startTime-L)}}function A(L,U){v=!1,x&&(x=!1,g(k),k=-1),m=!0;var V=p;try{for(S(U),f=t(l);f!==null&&(!(f.expirationTime>U)||L&&!H());){var Y=f.callback;if(typeof Y=="function"){f.callback=null,p=f.priorityLevel;var Q=Y(f.expirationTime<=U);U=n.unstable_now(),typeof Q=="function"?f.callback=Q:f===t(l)&&r(l),S(U)}else r(l);f=t(l)}if(f!==null)var K=!0;else{var oe=t(c);oe!==null&&te(E,oe.startTime-U),K=!1}return K}finally{f=null,p=V,m=!1}}var T=!1,P=null,k=-1,R=5,I=-1;function H(){return!(n.unstable_now()-I<R)}function G(){if(P!==null){var L=n.unstable_now();I=L;var U=!0;try{U=P(!0,L)}finally{U?re():(T=!1,P=null)}}else T=!1}var re;if(typeof w=="function")re=function(){w(G)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,Z=z.port2;z.port1.onmessage=G,re=function(){Z.postMessage(null)}}else re=function(){y(G,0)};function J(L){P=L,T||(T=!0,re())}function te(L,U){k=y(function(){L(n.unstable_now())},U)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(L){L.callback=null},n.unstable_continueExecution=function(){v||m||(v=!0,J(A))},n.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<L?Math.floor(1e3/L):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(L){switch(p){case 1:case 2:case 3:var U=3;break;default:U=p}var V=p;p=U;try{return L()}finally{p=V}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(L,U){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var V=p;p=L;try{return U()}finally{p=V}},n.unstable_scheduleCallback=function(L,U,V){var Y=n.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?Y+V:Y):V=Y,L){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=V+Q,L={id:d++,callback:U,priorityLevel:L,startTime:V,expirationTime:Q,sortIndex:-1},V>Y?(L.sortIndex=V,e(c,L),t(l)===null&&L===t(c)&&(x?(g(k),k=-1):x=!0,te(E,V-Y))):(L.sortIndex=Q,e(l,L),v||m||(v=!0,J(A))),L},n.unstable_shouldYield=H,n.unstable_wrapCallback=function(L){var U=p;return function(){var V=p;p=U;try{return L.apply(this,arguments)}finally{p=V}}}}(lS)),lS}var wL;function Wne(){return wL||(wL=1,aS.exports=Hne()),aS.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gne=function(e){var t={},r=N,i=Wne(),s=Object.assign;function o(u){for(var h="https://reactjs.org/docs/error-decoder.html?invariant="+u,_=1;_<arguments.length;_++)h+="&args[]="+encodeURIComponent(arguments[_]);return"Minified React error #"+u+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),c=Symbol.for("react.portal"),d=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),m=Symbol.for("react.provider"),v=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),g=Symbol.for("react.suspense_list"),w=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),E=Symbol.for("react.offscreen"),A=Symbol.iterator;function T(u){return u===null||typeof u!="object"?null:(u=A&&u[A]||u["@@iterator"],typeof u=="function"?u:null)}function P(u){if(u==null)return null;if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case d:return"Fragment";case c:return"Portal";case p:return"Profiler";case f:return"StrictMode";case y:return"Suspense";case g:return"SuspenseList"}if(typeof u=="object")switch(u.$$typeof){case v:return(u.displayName||"Context")+".Consumer";case m:return(u._context.displayName||"Context")+".Provider";case x:var h=u.render;return u=u.displayName,u||(u=h.displayName||h.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case w:return h=u.displayName||null,h!==null?h:P(u.type)||"Memo";case S:h=u._payload,u=u._init;try{return P(u(h))}catch{}}return null}function k(u){var h=u.type;switch(u.tag){case 24:return"Cache";case 9:return(h.displayName||"Context")+".Consumer";case 10:return(h._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return u=h.render,u=u.displayName||u.name||"",h.displayName||(u!==""?"ForwardRef("+u+")":"ForwardRef");case 7:return"Fragment";case 5:return h;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return P(h);case 8:return h===f?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h}return null}function R(u){var h=u,_=u;if(u.alternate)for(;h.return;)h=h.return;else{u=h;do h=u,h.flags&4098&&(_=h.return),u=h.return;while(u)}return h.tag===3?_:null}function I(u){if(R(u)!==u)throw Error(o(188))}function H(u){var h=u.alternate;if(!h){if(h=R(u),h===null)throw Error(o(188));return h!==u?null:u}for(var _=u,b=h;;){var M=_.return;if(M===null)break;var C=M.alternate;if(C===null){if(b=M.return,b!==null){_=b;continue}break}if(M.child===C.child){for(C=M.child;C;){if(C===_)return I(M),u;if(C===b)return I(M),h;C=C.sibling}throw Error(o(188))}if(_.return!==b.return)_=M,b=C;else{for(var W=!1,ee=M.child;ee;){if(ee===_){W=!0,_=M,b=C;break}if(ee===b){W=!0,b=M,_=C;break}ee=ee.sibling}if(!W){for(ee=C.child;ee;){if(ee===_){W=!0,_=C,b=M;break}if(ee===b){W=!0,b=C,_=M;break}ee=ee.sibling}if(!W)throw Error(o(189))}}if(_.alternate!==b)throw Error(o(190))}if(_.tag!==3)throw Error(o(188));return _.stateNode.current===_?u:h}function G(u){return u=H(u),u!==null?re(u):null}function re(u){if(u.tag===5||u.tag===6)return u;for(u=u.child;u!==null;){var h=re(u);if(h!==null)return h;u=u.sibling}return null}function z(u){if(u.tag===5||u.tag===6)return u;for(u=u.child;u!==null;){if(u.tag!==4){var h=z(u);if(h!==null)return h}u=u.sibling}return null}var Z=Array.isArray,J=e.getPublicInstance,te=e.getRootHostContext,L=e.getChildHostContext,U=e.prepareForCommit,V=e.resetAfterCommit,Y=e.createInstance,Q=e.appendInitialChild,K=e.finalizeInitialChildren,oe=e.prepareUpdate,xe=e.shouldSetTextContent,Ae=e.createTextInstance,we=e.scheduleTimeout,lt=e.cancelTimeout,ct=e.noTimeout,He=e.isPrimaryRenderer,Ye=e.supportsMutation,$=e.supportsPersistence,Se=e.supportsHydration,fe=e.getInstanceFromNode,Ce=e.preparePortalMount,pe=e.getCurrentEventPriority,et=e.detachDeletedInstance,De=e.supportsMicrotasks,F=e.scheduleMicrotask,O=e.supportsTestSelectors,ie=e.findFiberRoot,Me=e.getBoundingRect,_e=e.getTextContent,ve=e.isHiddenSubtree,Qe=e.matchAccessibilityRole,Re=e.setFocusIfFocusable,Fe=e.setupIntersectionObserver,ut=e.appendChild,bt=e.appendChildToContainer,be=e.commitTextUpdate,Wt=e.commitMount,Ct=e.commitUpdate,vt=e.insertBefore,tt=e.insertInContainerBefore,We=e.removeChild,X=e.removeChildFromContainer,ye=e.resetTextContent,Ve=e.hideInstance,Be=e.hideTextInstance,Te=e.unhideInstance,q=e.unhideTextInstance,Ie=e.clearContainer,Oe=e.cloneInstance,pt=e.createContainerChildSet,Ee=e.appendChildToContainerChildSet,qe=e.finalizeContainerChildren,it=e.replaceContainerChildren,Vt=e.cloneHiddenInstance,Xt=e.cloneHiddenTextInstance,Ot=e.canHydrateInstance,hn=e.canHydrateTextInstance,_n=e.canHydrateSuspenseInstance,ii=e.isSuspenseInstancePending,mh=e.isSuspenseInstanceFallback,Xc=e.registerSuspenseInstanceRetry,sa=e.getNextHydratableSibling,qc=e.getFirstHydratableChild,dm=e.getFirstHydratableChildWithinContainer,hm=e.getFirstHydratableChildWithinSuspenseInstance,E_=e.hydrateInstance,M_=e.hydrateTextInstance,T_=e.hydrateSuspenseInstance,B=e.getNextHydratableInstanceAfterSuspenseInstance,se=e.commitHydratedContainer,ce=e.commitHydratedSuspenseInstance,ue=e.clearSuspenseBoundary,le=e.clearSuspenseBoundaryFromContainer,$e=e.shouldDeleteUnhydratedTailInstances,dt=e.didNotMatchHydratedContainerTextInstance,yt=e.didNotMatchHydratedTextInstance,xt;function Tt(u){if(xt===void 0)try{throw Error()}catch(_){var h=_.stack.trim().match(/\n( *(at )?)/);xt=h&&h[1]||""}return`
`+xt+u}var Mt=!1;function At(u,h){if(!u||Mt)return"";Mt=!0;var _=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(h)if(h=function(){throw Error()},Object.defineProperty(h.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(h,[])}catch(Le){var b=Le}Reflect.construct(u,[],h)}else{try{h.call()}catch(Le){b=Le}u.call(h.prototype)}else{try{throw Error()}catch(Le){b=Le}u()}}catch(Le){if(Le&&b&&typeof Le.stack=="string"){for(var M=Le.stack.split(`
`),C=b.stack.split(`
`),W=M.length-1,ee=C.length-1;1<=W&&0<=ee&&M[W]!==C[ee];)ee--;for(;1<=W&&0<=ee;W--,ee--)if(M[W]!==C[ee]){if(W!==1||ee!==1)do if(W--,ee--,0>ee||M[W]!==C[ee]){var he=`
`+M[W].replace(" at new "," at ");return u.displayName&&he.includes("<anonymous>")&&(he=he.replace("<anonymous>",u.displayName)),he}while(1<=W&&0<=ee);break}}}finally{Mt=!1,Error.prepareStackTrace=_}return(u=u?u.displayName||u.name:"")?Tt(u):""}var Sn=Object.prototype.hasOwnProperty,gr=[],fn=-1;function lr(u){return{current:u}}function wt(u){0>fn||(u.current=gr[fn],gr[fn]=null,fn--)}function Ze(u,h){fn++,gr[fn]=u.current,u.current=h}var ji={},jt=lr(ji),Rn=lr(!1),zs=ji;function Hi(u,h){var _=u.type.contextTypes;if(!_)return ji;var b=u.stateNode;if(b&&b.__reactInternalMemoizedUnmaskedChildContext===h)return b.__reactInternalMemoizedMaskedChildContext;var M={},C;for(C in _)M[C]=h[C];return b&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=h,u.__reactInternalMemoizedMaskedChildContext=M),M}function cr(u){return u=u.childContextTypes,u!=null}function Fn(){wt(Rn),wt(jt)}function Vs(u,h,_){if(jt.current!==ji)throw Error(o(168));Ze(jt,h),Ze(Rn,_)}function Yc(u,h,_){var b=u.stateNode;if(h=h.childContextTypes,typeof b.getChildContext!="function")return _;b=b.getChildContext();for(var M in b)if(!(M in h))throw Error(o(108,k(u)||"Unknown",M));return s({},_,b)}function vr(u){return u=(u=u.stateNode)&&u.__reactInternalMemoizedMergedChildContext||ji,zs=jt.current,Ze(jt,u),Ze(Rn,Rn.current),!0}function Kc(u,h,_){var b=u.stateNode;if(!b)throw Error(o(169));_?(u=Yc(u,h,zs),b.__reactInternalMemoizedMergedChildContext=u,wt(Rn),wt(jt),Ze(jt,u)):wt(Rn),Ze(Rn,_)}var xi=Math.clz32?Math.clz32:I4,fm=Math.log,R4=Math.LN2;function I4(u){return u>>>=0,u===0?32:31-(fm(u)/R4|0)|0}var pm=64,mm=4194304;function gh(u){switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return u&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return u}}function gm(u,h){var _=u.pendingLanes;if(_===0)return 0;var b=0,M=u.suspendedLanes,C=u.pingedLanes,W=_&268435455;if(W!==0){var ee=W&~M;ee!==0?b=gh(ee):(C&=W,C!==0&&(b=gh(C)))}else W=_&~M,W!==0?b=gh(W):C!==0&&(b=gh(C));if(b===0)return 0;if(h!==0&&h!==b&&!(h&M)&&(M=b&-b,C=h&-h,M>=C||M===16&&(C&4194240)!==0))return h;if(b&4&&(b|=_&16),h=u.entangledLanes,h!==0)for(u=u.entanglements,h&=b;0<h;)_=31-xi(h),M=1<<_,b|=u[_],h&=~M;return b}function L4(u,h){switch(u){case 1:case 2:case 4:return h+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function k4(u,h){for(var _=u.suspendedLanes,b=u.pingedLanes,M=u.expirationTimes,C=u.pendingLanes;0<C;){var W=31-xi(C),ee=1<<W,he=M[W];he===-1?(!(ee&_)||ee&b)&&(M[W]=L4(ee,h)):he<=h&&(u.expiredLanes|=ee),C&=~ee}}function A_(u){return u=u.pendingLanes&-1073741825,u!==0?u:u&1073741824?1073741824:0}function C_(u){for(var h=[],_=0;31>_;_++)h.push(u);return h}function vh(u,h,_){u.pendingLanes|=h,h!==536870912&&(u.suspendedLanes=0,u.pingedLanes=0),u=u.eventTimes,h=31-xi(h),u[h]=_}function O4(u,h){var _=u.pendingLanes&~h;u.pendingLanes=h,u.suspendedLanes=0,u.pingedLanes=0,u.expiredLanes&=h,u.mutableReadLanes&=h,u.entangledLanes&=h,h=u.entanglements;var b=u.eventTimes;for(u=u.expirationTimes;0<_;){var M=31-xi(_),C=1<<M;h[M]=0,b[M]=-1,u[M]=-1,_&=~C}}function P_(u,h){var _=u.entangledLanes|=h;for(u=u.entanglements;_;){var b=31-xi(_),M=1<<b;M&h|u[b]&h&&(u[b]|=h),_&=~M}}var Zt=0;function iA(u){return u&=-u,1<u?4<u?u&268435455?16:536870912:4:1}var R_=i.unstable_scheduleCallback,sA=i.unstable_cancelCallback,N4=i.unstable_shouldYield,D4=i.unstable_requestPaint,ur=i.unstable_now,I_=i.unstable_ImmediatePriority,U4=i.unstable_UserBlockingPriority,L_=i.unstable_NormalPriority,F4=i.unstable_IdlePriority,vm=null,js=null;function B4(u){if(js&&typeof js.onCommitFiberRoot=="function")try{js.onCommitFiberRoot(vm,u,void 0,(u.current.flags&128)===128)}catch{}}function z4(u,h){return u===h&&(u!==0||1/u===1/h)||u!==u&&h!==h}var Hs=typeof Object.is=="function"?Object.is:z4,_o=null,ym=!1,k_=!1;function oA(u){_o===null?_o=[u]:_o.push(u)}function V4(u){ym=!0,oA(u)}function Ws(){if(!k_&&_o!==null){k_=!0;var u=0,h=Zt;try{var _=_o;for(Zt=1;u<_.length;u++){var b=_[u];do b=b(!0);while(b!==null)}_o=null,ym=!1}catch(M){throw _o!==null&&(_o=_o.slice(u+1)),R_(I_,Ws),M}finally{Zt=h,k_=!1}}return null}var j4=a.ReactCurrentBatchConfig;function _m(u,h){if(Hs(u,h))return!0;if(typeof u!="object"||u===null||typeof h!="object"||h===null)return!1;var _=Object.keys(u),b=Object.keys(h);if(_.length!==b.length)return!1;for(b=0;b<_.length;b++){var M=_[b];if(!Sn.call(h,M)||!Hs(u[M],h[M]))return!1}return!0}function H4(u){switch(u.tag){case 5:return Tt(u.type);case 16:return Tt("Lazy");case 13:return Tt("Suspense");case 19:return Tt("SuspenseList");case 0:case 2:case 15:return u=At(u.type,!1),u;case 11:return u=At(u.type.render,!1),u;case 1:return u=At(u.type,!0),u;default:return""}}function cs(u,h){if(u&&u.defaultProps){h=s({},h),u=u.defaultProps;for(var _ in u)h[_]===void 0&&(h[_]=u[_]);return h}return h}var xm=lr(null),wm=null,Zc=null,O_=null;function N_(){O_=Zc=wm=null}function aA(u,h,_){He?(Ze(xm,h._currentValue),h._currentValue=_):(Ze(xm,h._currentValue2),h._currentValue2=_)}function D_(u){var h=xm.current;wt(xm),He?u._currentValue=h:u._currentValue2=h}function U_(u,h,_){for(;u!==null;){var b=u.alternate;if((u.childLanes&h)!==h?(u.childLanes|=h,b!==null&&(b.childLanes|=h)):b!==null&&(b.childLanes&h)!==h&&(b.childLanes|=h),u===_)break;u=u.return}}function Jc(u,h){wm=u,O_=Zc=null,u=u.dependencies,u!==null&&u.firstContext!==null&&(u.lanes&h&&(bi=!0),u.firstContext=null)}function Wi(u){var h=He?u._currentValue:u._currentValue2;if(O_!==u)if(u={context:u,memoizedValue:h,next:null},Zc===null){if(wm===null)throw Error(o(308));Zc=u,wm.dependencies={lanes:0,firstContext:u}}else Zc=Zc.next=u;return h}var Gs=null,oa=!1;function F_(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lA(u,h){u=u.updateQueue,h.updateQueue===u&&(h.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,effects:u.effects})}function xo(u,h){return{eventTime:u,lane:h,tag:0,payload:null,callback:null,next:null}}function aa(u,h){var _=u.updateQueue;_!==null&&(_=_.shared,Xn!==null&&u.mode&1&&!(Ht&2)?(u=_.interleaved,u===null?(h.next=h,Gs===null?Gs=[_]:Gs.push(_)):(h.next=u.next,u.next=h),_.interleaved=h):(u=_.pending,u===null?h.next=h:(h.next=u.next,u.next=h),_.pending=h))}function Sm(u,h,_){if(h=h.updateQueue,h!==null&&(h=h.shared,(_&4194240)!==0)){var b=h.lanes;b&=u.pendingLanes,_|=b,h.lanes=_,P_(u,_)}}function cA(u,h){var _=u.updateQueue,b=u.alternate;if(b!==null&&(b=b.updateQueue,_===b)){var M=null,C=null;if(_=_.firstBaseUpdate,_!==null){do{var W={eventTime:_.eventTime,lane:_.lane,tag:_.tag,payload:_.payload,callback:_.callback,next:null};C===null?M=C=W:C=C.next=W,_=_.next}while(_!==null);C===null?M=C=h:C=C.next=h}else M=C=h;_={baseState:b.baseState,firstBaseUpdate:M,lastBaseUpdate:C,shared:b.shared,effects:b.effects},u.updateQueue=_;return}u=_.lastBaseUpdate,u===null?_.firstBaseUpdate=h:u.next=h,_.lastBaseUpdate=h}function bm(u,h,_,b){var M=u.updateQueue;oa=!1;var C=M.firstBaseUpdate,W=M.lastBaseUpdate,ee=M.shared.pending;if(ee!==null){M.shared.pending=null;var he=ee,Le=he.next;he.next=null,W===null?C=Le:W.next=Le,W=he;var Je=u.alternate;Je!==null&&(Je=Je.updateQueue,ee=Je.lastBaseUpdate,ee!==W&&(ee===null?Je.firstBaseUpdate=Le:ee.next=Le,Je.lastBaseUpdate=he))}if(C!==null){var It=M.baseState;W=0,Je=Le=he=null,ee=C;do{var mt=ee.lane,ln=ee.eventTime;if((b&mt)===mt){Je!==null&&(Je=Je.next={eventTime:ln,lane:0,tag:ee.tag,payload:ee.payload,callback:ee.callback,next:null});e:{var ht=u,Tr=ee;switch(mt=h,ln=_,Tr.tag){case 1:if(ht=Tr.payload,typeof ht=="function"){It=ht.call(ln,It,mt);break e}It=ht;break e;case 3:ht.flags=ht.flags&-65537|128;case 0:if(ht=Tr.payload,mt=typeof ht=="function"?ht.call(ln,It,mt):ht,mt==null)break e;It=s({},It,mt);break e;case 2:oa=!0}}ee.callback!==null&&ee.lane!==0&&(u.flags|=64,mt=M.effects,mt===null?M.effects=[ee]:mt.push(ee))}else ln={eventTime:ln,lane:mt,tag:ee.tag,payload:ee.payload,callback:ee.callback,next:null},Je===null?(Le=Je=ln,he=It):Je=Je.next=ln,W|=mt;if(ee=ee.next,ee===null){if(ee=M.shared.pending,ee===null)break;mt=ee,ee=mt.next,mt.next=null,M.lastBaseUpdate=mt,M.shared.pending=null}}while(!0);if(Je===null&&(he=It),M.baseState=he,M.firstBaseUpdate=Le,M.lastBaseUpdate=Je,h=M.shared.interleaved,h!==null){M=h;do W|=M.lane,M=M.next;while(M!==h)}else C===null&&(M.shared.lanes=0);au|=W,u.lanes=W,u.memoizedState=It}}function uA(u,h,_){if(u=h.effects,h.effects=null,u!==null)for(h=0;h<u.length;h++){var b=u[h],M=b.callback;if(M!==null){if(b.callback=null,b=_,typeof M!="function")throw Error(o(191,M));M.call(b)}}}var dA=new r.Component().refs;function B_(u,h,_,b){h=u.memoizedState,_=_(b,h),_=_==null?h:s({},h,_),u.memoizedState=_,u.lanes===0&&(u.updateQueue.baseState=_)}var Em={isMounted:function(u){return(u=u._reactInternals)?R(u)===u:!1},enqueueSetState:function(u,h,_){u=u._reactInternals;var b=Wr(),M=ua(u),C=xo(b,M);C.payload=h,_!=null&&(C.callback=_),aa(u,C),h=Yi(u,M,b),h!==null&&Sm(h,u,M)},enqueueReplaceState:function(u,h,_){u=u._reactInternals;var b=Wr(),M=ua(u),C=xo(b,M);C.tag=1,C.payload=h,_!=null&&(C.callback=_),aa(u,C),h=Yi(u,M,b),h!==null&&Sm(h,u,M)},enqueueForceUpdate:function(u,h){u=u._reactInternals;var _=Wr(),b=ua(u),M=xo(_,b);M.tag=2,h!=null&&(M.callback=h),aa(u,M),h=Yi(u,b,_),h!==null&&Sm(h,u,b)}};function hA(u,h,_,b,M,C,W){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(b,C,W):h.prototype&&h.prototype.isPureReactComponent?!_m(_,b)||!_m(M,C):!0}function fA(u,h,_){var b=!1,M=ji,C=h.contextType;return typeof C=="object"&&C!==null?C=Wi(C):(M=cr(h)?zs:jt.current,b=h.contextTypes,C=(b=b!=null)?Hi(u,M):ji),h=new h(_,C),u.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=Em,u.stateNode=h,h._reactInternals=u,b&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=M,u.__reactInternalMemoizedMaskedChildContext=C),h}function pA(u,h,_,b){u=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(_,b),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(_,b),h.state!==u&&Em.enqueueReplaceState(h,h.state,null)}function z_(u,h,_,b){var M=u.stateNode;M.props=_,M.state=u.memoizedState,M.refs=dA,F_(u);var C=h.contextType;typeof C=="object"&&C!==null?M.context=Wi(C):(C=cr(h)?zs:jt.current,M.context=Hi(u,C)),M.state=u.memoizedState,C=h.getDerivedStateFromProps,typeof C=="function"&&(B_(u,h,C,_),M.state=u.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof M.getSnapshotBeforeUpdate=="function"||typeof M.UNSAFE_componentWillMount!="function"&&typeof M.componentWillMount!="function"||(h=M.state,typeof M.componentWillMount=="function"&&M.componentWillMount(),typeof M.UNSAFE_componentWillMount=="function"&&M.UNSAFE_componentWillMount(),h!==M.state&&Em.enqueueReplaceState(M,M.state,null),bm(u,_,M,b),M.state=u.memoizedState),typeof M.componentDidMount=="function"&&(u.flags|=4194308)}var Qc=[],eu=0,Mm=null,Tm=0,Gi=[],$i=0,Tl=null,wo=1,So="";function Al(u,h){Qc[eu++]=Tm,Qc[eu++]=Mm,Mm=u,Tm=h}function mA(u,h,_){Gi[$i++]=wo,Gi[$i++]=So,Gi[$i++]=Tl,Tl=u;var b=wo;u=So;var M=32-xi(b)-1;b&=~(1<<M),_+=1;var C=32-xi(h)+M;if(30<C){var W=M-M%5;C=(b&(1<<W)-1).toString(32),b>>=W,M-=W,wo=1<<32-xi(h)+M|_<<M|b,So=C+u}else wo=1<<C|_<<M|b,So=u}function V_(u){u.return!==null&&(Al(u,1),mA(u,1,0))}function j_(u){for(;u===Mm;)Mm=Qc[--eu],Qc[eu]=null,Tm=Qc[--eu],Qc[eu]=null;for(;u===Tl;)Tl=Gi[--$i],Gi[$i]=null,So=Gi[--$i],Gi[$i]=null,wo=Gi[--$i],Gi[$i]=null}var wi=null,Si=null,xn=!1,yh=!1,us=null;function gA(u,h){var _=Ki(5,null,null,0);_.elementType="DELETED",_.stateNode=h,_.return=u,h=u.deletions,h===null?(u.deletions=[_],u.flags|=16):h.push(_)}function vA(u,h){switch(u.tag){case 5:return h=Ot(h,u.type,u.pendingProps),h!==null?(u.stateNode=h,wi=u,Si=qc(h),!0):!1;case 6:return h=hn(h,u.pendingProps),h!==null?(u.stateNode=h,wi=u,Si=null,!0):!1;case 13:if(h=_n(h),h!==null){var _=Tl!==null?{id:wo,overflow:So}:null;return u.memoizedState={dehydrated:h,treeContext:_,retryLane:1073741824},_=Ki(18,null,null,0),_.stateNode=h,_.return=u,u.child=_,wi=u,Si=null,!0}return!1;default:return!1}}function H_(u){return(u.mode&1)!==0&&(u.flags&128)===0}function W_(u){if(xn){var h=Si;if(h){var _=h;if(!vA(u,h)){if(H_(u))throw Error(o(418));h=sa(_);var b=wi;h&&vA(u,h)?gA(b,_):(u.flags=u.flags&-4097|2,xn=!1,wi=u)}}else{if(H_(u))throw Error(o(418));u.flags=u.flags&-4097|2,xn=!1,wi=u}}}function yA(u){for(u=u.return;u!==null&&u.tag!==5&&u.tag!==3&&u.tag!==13;)u=u.return;wi=u}function _h(u){if(!Se||u!==wi)return!1;if(!xn)return yA(u),xn=!0,!1;if(u.tag!==3&&(u.tag!==5||$e(u.type)&&!xe(u.type,u.memoizedProps))){var h=Si;if(h){if(H_(u)){for(u=Si;u;)u=sa(u);throw Error(o(418))}for(;h;)gA(u,h),h=sa(h)}}if(yA(u),u.tag===13){if(!Se)throw Error(o(316));if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(o(317));Si=B(u)}else Si=wi?sa(u.stateNode):null;return!0}function tu(){Se&&(Si=wi=null,yh=xn=!1)}function G_(u){us===null?us=[u]:us.push(u)}function xh(u,h,_){if(u=_.ref,u!==null&&typeof u!="function"&&typeof u!="object"){if(_._owner){if(_=_._owner,_){if(_.tag!==1)throw Error(o(309));var b=_.stateNode}if(!b)throw Error(o(147,u));var M=b,C=""+u;return h!==null&&h.ref!==null&&typeof h.ref=="function"&&h.ref._stringRef===C?h.ref:(h=function(W){var ee=M.refs;ee===dA&&(ee=M.refs={}),W===null?delete ee[C]:ee[C]=W},h._stringRef=C,h)}if(typeof u!="string")throw Error(o(284));if(!_._owner)throw Error(o(290,u))}return u}function Am(u,h){throw u=Object.prototype.toString.call(h),Error(o(31,u==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":u))}function _A(u){var h=u._init;return h(u._payload)}function xA(u){function h(ae,ne){if(u){var de=ae.deletions;de===null?(ae.deletions=[ne],ae.flags|=16):de.push(ne)}}function _(ae,ne){if(!u)return null;for(;ne!==null;)h(ae,ne),ne=ne.sibling;return null}function b(ae,ne){for(ae=new Map;ne!==null;)ne.key!==null?ae.set(ne.key,ne):ae.set(ne.index,ne),ne=ne.sibling;return ae}function M(ae,ne){return ae=ha(ae,ne),ae.index=0,ae.sibling=null,ae}function C(ae,ne,de){return ae.index=de,u?(de=ae.alternate,de!==null?(de=de.index,de<ne?(ae.flags|=2,ne):de):(ae.flags|=2,ne)):(ae.flags|=1048576,ne)}function W(ae){return u&&ae.alternate===null&&(ae.flags|=2),ae}function ee(ae,ne,de,je){return ne===null||ne.tag!==6?(ne=Cx(de,ae.mode,je),ne.return=ae,ne):(ne=M(ne,de),ne.return=ae,ne)}function he(ae,ne,de,je){var at=de.type;return at===d?Je(ae,ne,de.props.children,je,de.key):ne!==null&&(ne.elementType===at||typeof at=="object"&&at!==null&&at.$$typeof===S&&_A(at)===ne.type)?(je=M(ne,de.props),je.ref=xh(ae,ne,de),je.return=ae,je):(je=ig(de.type,de.key,de.props,null,ae.mode,je),je.ref=xh(ae,ne,de),je.return=ae,je)}function Le(ae,ne,de,je){return ne===null||ne.tag!==4||ne.stateNode.containerInfo!==de.containerInfo||ne.stateNode.implementation!==de.implementation?(ne=Px(de,ae.mode,je),ne.return=ae,ne):(ne=M(ne,de.children||[]),ne.return=ae,ne)}function Je(ae,ne,de,je,at){return ne===null||ne.tag!==7?(ne=Ol(de,ae.mode,je,at),ne.return=ae,ne):(ne=M(ne,de),ne.return=ae,ne)}function It(ae,ne,de){if(typeof ne=="string"&&ne!==""||typeof ne=="number")return ne=Cx(""+ne,ae.mode,de),ne.return=ae,ne;if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case l:return de=ig(ne.type,ne.key,ne.props,null,ae.mode,de),de.ref=xh(ae,null,ne),de.return=ae,de;case c:return ne=Px(ne,ae.mode,de),ne.return=ae,ne;case S:var je=ne._init;return It(ae,je(ne._payload),de)}if(Z(ne)||T(ne))return ne=Ol(ne,ae.mode,de,null),ne.return=ae,ne;Am(ae,ne)}return null}function mt(ae,ne,de,je){var at=ne!==null?ne.key:null;if(typeof de=="string"&&de!==""||typeof de=="number")return at!==null?null:ee(ae,ne,""+de,je);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case l:return de.key===at?he(ae,ne,de,je):null;case c:return de.key===at?Le(ae,ne,de,je):null;case S:return at=de._init,mt(ae,ne,at(de._payload),je)}if(Z(de)||T(de))return at!==null?null:Je(ae,ne,de,je,null);Am(ae,de)}return null}function ln(ae,ne,de,je,at){if(typeof je=="string"&&je!==""||typeof je=="number")return ae=ae.get(de)||null,ee(ne,ae,""+je,at);if(typeof je=="object"&&je!==null){switch(je.$$typeof){case l:return ae=ae.get(je.key===null?de:je.key)||null,he(ne,ae,je,at);case c:return ae=ae.get(je.key===null?de:je.key)||null,Le(ne,ae,je,at);case S:var Ft=je._init;return ln(ae,ne,de,Ft(je._payload),at)}if(Z(je)||T(je))return ae=ae.get(de)||null,Je(ne,ae,je,at,null);Am(ne,je)}return null}function ht(ae,ne,de,je){for(var at=null,Ft=null,Lt=ne,Jt=ne=0,hr=null;Lt!==null&&Jt<de.length;Jt++){Lt.index>Jt?(hr=Lt,Lt=null):hr=Lt.sibling;var Qt=mt(ae,Lt,de[Jt],je);if(Qt===null){Lt===null&&(Lt=hr);break}u&&Lt&&Qt.alternate===null&&h(ae,Lt),ne=C(Qt,ne,Jt),Ft===null?at=Qt:Ft.sibling=Qt,Ft=Qt,Lt=hr}if(Jt===de.length)return _(ae,Lt),xn&&Al(ae,Jt),at;if(Lt===null){for(;Jt<de.length;Jt++)Lt=It(ae,de[Jt],je),Lt!==null&&(ne=C(Lt,ne,Jt),Ft===null?at=Lt:Ft.sibling=Lt,Ft=Lt);return xn&&Al(ae,Jt),at}for(Lt=b(ae,Lt);Jt<de.length;Jt++)hr=ln(Lt,ae,Jt,de[Jt],je),hr!==null&&(u&&hr.alternate!==null&&Lt.delete(hr.key===null?Jt:hr.key),ne=C(hr,ne,Jt),Ft===null?at=hr:Ft.sibling=hr,Ft=hr);return u&&Lt.forEach(function(fa){return h(ae,fa)}),xn&&Al(ae,Jt),at}function Tr(ae,ne,de,je){var at=T(de);if(typeof at!="function")throw Error(o(150));if(de=at.call(de),de==null)throw Error(o(151));for(var Ft=at=null,Lt=ne,Jt=ne=0,hr=null,Qt=de.next();Lt!==null&&!Qt.done;Jt++,Qt=de.next()){Lt.index>Jt?(hr=Lt,Lt=null):hr=Lt.sibling;var fa=mt(ae,Lt,Qt.value,je);if(fa===null){Lt===null&&(Lt=hr);break}u&&Lt&&fa.alternate===null&&h(ae,Lt),ne=C(fa,ne,Jt),Ft===null?at=fa:Ft.sibling=fa,Ft=fa,Lt=hr}if(Qt.done)return _(ae,Lt),xn&&Al(ae,Jt),at;if(Lt===null){for(;!Qt.done;Jt++,Qt=de.next())Qt=It(ae,Qt.value,je),Qt!==null&&(ne=C(Qt,ne,Jt),Ft===null?at=Qt:Ft.sibling=Qt,Ft=Qt);return xn&&Al(ae,Jt),at}for(Lt=b(ae,Lt);!Qt.done;Jt++,Qt=de.next())Qt=ln(Lt,ae,Jt,Qt.value,je),Qt!==null&&(u&&Qt.alternate!==null&&Lt.delete(Qt.key===null?Jt:Qt.key),ne=C(Qt,ne,Jt),Ft===null?at=Qt:Ft.sibling=Qt,Ft=Qt);return u&&Lt.forEach(function(_V){return h(ae,_V)}),xn&&Al(ae,Jt),at}function Zi(ae,ne,de,je){if(typeof de=="object"&&de!==null&&de.type===d&&de.key===null&&(de=de.props.children),typeof de=="object"&&de!==null){switch(de.$$typeof){case l:e:{for(var at=de.key,Ft=ne;Ft!==null;){if(Ft.key===at){if(at=de.type,at===d){if(Ft.tag===7){_(ae,Ft.sibling),ne=M(Ft,de.props.children),ne.return=ae,ae=ne;break e}}else if(Ft.elementType===at||typeof at=="object"&&at!==null&&at.$$typeof===S&&_A(at)===Ft.type){_(ae,Ft.sibling),ne=M(Ft,de.props),ne.ref=xh(ae,Ft,de),ne.return=ae,ae=ne;break e}_(ae,Ft);break}else h(ae,Ft);Ft=Ft.sibling}de.type===d?(ne=Ol(de.props.children,ae.mode,je,de.key),ne.return=ae,ae=ne):(je=ig(de.type,de.key,de.props,null,ae.mode,je),je.ref=xh(ae,ne,de),je.return=ae,ae=je)}return W(ae);case c:e:{for(Ft=de.key;ne!==null;){if(ne.key===Ft)if(ne.tag===4&&ne.stateNode.containerInfo===de.containerInfo&&ne.stateNode.implementation===de.implementation){_(ae,ne.sibling),ne=M(ne,de.children||[]),ne.return=ae,ae=ne;break e}else{_(ae,ne);break}else h(ae,ne);ne=ne.sibling}ne=Px(de,ae.mode,je),ne.return=ae,ae=ne}return W(ae);case S:return Ft=de._init,Zi(ae,ne,Ft(de._payload),je)}if(Z(de))return ht(ae,ne,de,je);if(T(de))return Tr(ae,ne,de,je);Am(ae,de)}return typeof de=="string"&&de!==""||typeof de=="number"?(de=""+de,ne!==null&&ne.tag===6?(_(ae,ne.sibling),ne=M(ne,de),ne.return=ae,ae=ne):(_(ae,ne),ne=Cx(de,ae.mode,je),ne.return=ae,ae=ne),W(ae)):_(ae,ne)}return Zi}var nu=xA(!0),wA=xA(!1),wh={},Xi=lr(wh),Sh=lr(wh),ru=lr(wh);function $s(u){if(u===wh)throw Error(o(174));return u}function $_(u,h){Ze(ru,h),Ze(Sh,u),Ze(Xi,wh),u=te(h),wt(Xi),Ze(Xi,u)}function iu(){wt(Xi),wt(Sh),wt(ru)}function SA(u){var h=$s(ru.current),_=$s(Xi.current);h=L(_,u.type,h),_!==h&&(Ze(Sh,u),Ze(Xi,h))}function X_(u){Sh.current===u&&(wt(Xi),wt(Sh))}var bn=lr(0);function Cm(u){for(var h=u;h!==null;){if(h.tag===13){var _=h.memoizedState;if(_!==null&&(_=_.dehydrated,_===null||ii(_)||mh(_)))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if(h.flags&128)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===u)break;for(;h.sibling===null;){if(h.return===null||h.return===u)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}var q_=[];function Y_(){for(var u=0;u<q_.length;u++){var h=q_[u];He?h._workInProgressVersionPrimary=null:h._workInProgressVersionSecondary=null}q_.length=0}var Pm=a.ReactCurrentDispatcher,qi=a.ReactCurrentBatchConfig,su=0,In=null,br=null,dr=null,Rm=!1,bh=!1,Eh=0,W4=0;function Er(){throw Error(o(321))}function K_(u,h){if(h===null)return!1;for(var _=0;_<h.length&&_<u.length;_++)if(!Hs(u[_],h[_]))return!1;return!0}function Z_(u,h,_,b,M,C){if(su=C,In=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,Pm.current=u===null||u.memoizedState===null?q4:Y4,u=_(b,M),bh){C=0;do{if(bh=!1,Eh=0,25<=C)throw Error(o(301));C+=1,dr=br=null,h.updateQueue=null,Pm.current=K4,u=_(b,M)}while(bh)}if(Pm.current=Nm,h=br!==null&&br.next!==null,su=0,dr=br=In=null,Rm=!1,h)throw Error(o(300));return u}function J_(){var u=Eh!==0;return Eh=0,u}function bo(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dr===null?In.memoizedState=dr=u:dr=dr.next=u,dr}function Xs(){if(br===null){var u=In.alternate;u=u!==null?u.memoizedState:null}else u=br.next;var h=dr===null?In.memoizedState:dr.next;if(h!==null)dr=h,br=u;else{if(u===null)throw Error(o(310));br=u,u={memoizedState:br.memoizedState,baseState:br.baseState,baseQueue:br.baseQueue,queue:br.queue,next:null},dr===null?In.memoizedState=dr=u:dr=dr.next=u}return dr}function Cl(u,h){return typeof h=="function"?h(u):h}function Im(u){var h=Xs(),_=h.queue;if(_===null)throw Error(o(311));_.lastRenderedReducer=u;var b=br,M=b.baseQueue,C=_.pending;if(C!==null){if(M!==null){var W=M.next;M.next=C.next,C.next=W}b.baseQueue=M=C,_.pending=null}if(M!==null){C=M.next,b=b.baseState;var ee=W=null,he=null,Le=C;do{var Je=Le.lane;if((su&Je)===Je)he!==null&&(he=he.next={lane:0,action:Le.action,hasEagerState:Le.hasEagerState,eagerState:Le.eagerState,next:null}),b=Le.hasEagerState?Le.eagerState:u(b,Le.action);else{var It={lane:Je,action:Le.action,hasEagerState:Le.hasEagerState,eagerState:Le.eagerState,next:null};he===null?(ee=he=It,W=b):he=he.next=It,In.lanes|=Je,au|=Je}Le=Le.next}while(Le!==null&&Le!==C);he===null?W=b:he.next=ee,Hs(b,h.memoizedState)||(bi=!0),h.memoizedState=b,h.baseState=W,h.baseQueue=he,_.lastRenderedState=b}if(u=_.interleaved,u!==null){M=u;do C=M.lane,In.lanes|=C,au|=C,M=M.next;while(M!==u)}else M===null&&(_.lanes=0);return[h.memoizedState,_.dispatch]}function Lm(u){var h=Xs(),_=h.queue;if(_===null)throw Error(o(311));_.lastRenderedReducer=u;var b=_.dispatch,M=_.pending,C=h.memoizedState;if(M!==null){_.pending=null;var W=M=M.next;do C=u(C,W.action),W=W.next;while(W!==M);Hs(C,h.memoizedState)||(bi=!0),h.memoizedState=C,h.baseQueue===null&&(h.baseState=C),_.lastRenderedState=C}return[C,b]}function bA(){}function EA(u,h){var _=In,b=Xs(),M=h(),C=!Hs(b.memoizedState,M);if(C&&(b.memoizedState=M,bi=!0),b=b.queue,Th(AA.bind(null,_,b,u),[u]),b.getSnapshot!==h||C||dr!==null&&dr.memoizedState.tag&1){if(_.flags|=2048,Mh(9,TA.bind(null,_,b,M,h),void 0,null),Xn===null)throw Error(o(349));su&30||MA(_,h,M)}return M}function MA(u,h,_){u.flags|=16384,u={getSnapshot:h,value:_},h=In.updateQueue,h===null?(h={lastEffect:null,stores:null},In.updateQueue=h,h.stores=[u]):(_=h.stores,_===null?h.stores=[u]:_.push(u))}function TA(u,h,_,b){h.value=_,h.getSnapshot=b,CA(h)&&Yi(u,1,-1)}function AA(u,h,_){return _(function(){CA(h)&&Yi(u,1,-1)})}function CA(u){var h=u.getSnapshot;u=u.value;try{var _=h();return!Hs(u,_)}catch{return!0}}function Q_(u){var h=bo();return typeof u=="function"&&(u=u()),h.memoizedState=h.baseState=u,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Cl,lastRenderedState:u},h.queue=u,u=u.dispatch=X4.bind(null,In,u),[h.memoizedState,u]}function Mh(u,h,_,b){return u={tag:u,create:h,destroy:_,deps:b,next:null},h=In.updateQueue,h===null?(h={lastEffect:null,stores:null},In.updateQueue=h,h.lastEffect=u.next=u):(_=h.lastEffect,_===null?h.lastEffect=u.next=u:(b=_.next,_.next=u,u.next=b,h.lastEffect=u)),u}function PA(){return Xs().memoizedState}function km(u,h,_,b){var M=bo();In.flags|=u,M.memoizedState=Mh(1|h,_,void 0,b===void 0?null:b)}function Om(u,h,_,b){var M=Xs();b=b===void 0?null:b;var C=void 0;if(br!==null){var W=br.memoizedState;if(C=W.destroy,b!==null&&K_(b,W.deps)){M.memoizedState=Mh(h,_,C,b);return}}In.flags|=u,M.memoizedState=Mh(1|h,_,C,b)}function ex(u,h){return km(8390656,8,u,h)}function Th(u,h){return Om(2048,8,u,h)}function RA(u,h){return Om(4,2,u,h)}function IA(u,h){return Om(4,4,u,h)}function LA(u,h){if(typeof h=="function")return u=u(),h(u),function(){h(null)};if(h!=null)return u=u(),h.current=u,function(){h.current=null}}function kA(u,h,_){return _=_!=null?_.concat([u]):null,Om(4,4,LA.bind(null,h,u),_)}function tx(){}function OA(u,h){var _=Xs();h=h===void 0?null:h;var b=_.memoizedState;return b!==null&&h!==null&&K_(h,b[1])?b[0]:(_.memoizedState=[u,h],u)}function NA(u,h){var _=Xs();h=h===void 0?null:h;var b=_.memoizedState;return b!==null&&h!==null&&K_(h,b[1])?b[0]:(u=u(),_.memoizedState=[u,h],u)}function G4(u,h){var _=Zt;Zt=_!==0&&4>_?_:4,u(!0);var b=qi.transition;qi.transition={};try{u(!1),h()}finally{Zt=_,qi.transition=b}}function DA(){return Xs().memoizedState}function $4(u,h,_){var b=ua(u);_={lane:b,action:_,hasEagerState:!1,eagerState:null,next:null},UA(u)?FA(h,_):(BA(u,h,_),_=Wr(),u=Yi(u,b,_),u!==null&&zA(u,h,b))}function X4(u,h,_){var b=ua(u),M={lane:b,action:_,hasEagerState:!1,eagerState:null,next:null};if(UA(u))FA(h,M);else{BA(u,h,M);var C=u.alternate;if(u.lanes===0&&(C===null||C.lanes===0)&&(C=h.lastRenderedReducer,C!==null))try{var W=h.lastRenderedState,ee=C(W,_);if(M.hasEagerState=!0,M.eagerState=ee,Hs(ee,W))return}catch{}finally{}_=Wr(),u=Yi(u,b,_),u!==null&&zA(u,h,b)}}function UA(u){var h=u.alternate;return u===In||h!==null&&h===In}function FA(u,h){bh=Rm=!0;var _=u.pending;_===null?h.next=h:(h.next=_.next,_.next=h),u.pending=h}function BA(u,h,_){Xn!==null&&u.mode&1&&!(Ht&2)?(u=h.interleaved,u===null?(_.next=_,Gs===null?Gs=[h]:Gs.push(h)):(_.next=u.next,u.next=_),h.interleaved=_):(u=h.pending,u===null?_.next=_:(_.next=u.next,u.next=_),h.pending=_)}function zA(u,h,_){if(_&4194240){var b=h.lanes;b&=u.pendingLanes,_|=b,h.lanes=_,P_(u,_)}}var Nm={readContext:Wi,useCallback:Er,useContext:Er,useEffect:Er,useImperativeHandle:Er,useInsertionEffect:Er,useLayoutEffect:Er,useMemo:Er,useReducer:Er,useRef:Er,useState:Er,useDebugValue:Er,useDeferredValue:Er,useTransition:Er,useMutableSource:Er,useSyncExternalStore:Er,useId:Er,unstable_isNewReconciler:!1},q4={readContext:Wi,useCallback:function(u,h){return bo().memoizedState=[u,h===void 0?null:h],u},useContext:Wi,useEffect:ex,useImperativeHandle:function(u,h,_){return _=_!=null?_.concat([u]):null,km(4194308,4,LA.bind(null,h,u),_)},useLayoutEffect:function(u,h){return km(4194308,4,u,h)},useInsertionEffect:function(u,h){return km(4,2,u,h)},useMemo:function(u,h){var _=bo();return h=h===void 0?null:h,u=u(),_.memoizedState=[u,h],u},useReducer:function(u,h,_){var b=bo();return h=_!==void 0?_(h):h,b.memoizedState=b.baseState=h,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:h},b.queue=u,u=u.dispatch=$4.bind(null,In,u),[b.memoizedState,u]},useRef:function(u){var h=bo();return u={current:u},h.memoizedState=u},useState:Q_,useDebugValue:tx,useDeferredValue:function(u){var h=Q_(u),_=h[0],b=h[1];return ex(function(){var M=qi.transition;qi.transition={};try{b(u)}finally{qi.transition=M}},[u]),_},useTransition:function(){var u=Q_(!1),h=u[0];return u=G4.bind(null,u[1]),bo().memoizedState=u,[h,u]},useMutableSource:function(){},useSyncExternalStore:function(u,h,_){var b=In,M=bo();if(xn){if(_===void 0)throw Error(o(407));_=_()}else{if(_=h(),Xn===null)throw Error(o(349));su&30||MA(b,h,_)}M.memoizedState=_;var C={value:_,getSnapshot:h};return M.queue=C,ex(AA.bind(null,b,C,u),[u]),b.flags|=2048,Mh(9,TA.bind(null,b,C,_,h),void 0,null),_},useId:function(){var u=bo(),h=Xn.identifierPrefix;if(xn){var _=So,b=wo;_=(b&~(1<<32-xi(b)-1)).toString(32)+_,h=":"+h+"R"+_,_=Eh++,0<_&&(h+="H"+_.toString(32)),h+=":"}else _=W4++,h=":"+h+"r"+_.toString(32)+":";return u.memoizedState=h},unstable_isNewReconciler:!1},Y4={readContext:Wi,useCallback:OA,useContext:Wi,useEffect:Th,useImperativeHandle:kA,useInsertionEffect:RA,useLayoutEffect:IA,useMemo:NA,useReducer:Im,useRef:PA,useState:function(){return Im(Cl)},useDebugValue:tx,useDeferredValue:function(u){var h=Im(Cl),_=h[0],b=h[1];return Th(function(){var M=qi.transition;qi.transition={};try{b(u)}finally{qi.transition=M}},[u]),_},useTransition:function(){var u=Im(Cl)[0],h=Xs().memoizedState;return[u,h]},useMutableSource:bA,useSyncExternalStore:EA,useId:DA,unstable_isNewReconciler:!1},K4={readContext:Wi,useCallback:OA,useContext:Wi,useEffect:Th,useImperativeHandle:kA,useInsertionEffect:RA,useLayoutEffect:IA,useMemo:NA,useReducer:Lm,useRef:PA,useState:function(){return Lm(Cl)},useDebugValue:tx,useDeferredValue:function(u){var h=Lm(Cl),_=h[0],b=h[1];return Th(function(){var M=qi.transition;qi.transition={};try{b(u)}finally{qi.transition=M}},[u]),_},useTransition:function(){var u=Lm(Cl)[0],h=Xs().memoizedState;return[u,h]},useMutableSource:bA,useSyncExternalStore:EA,useId:DA,unstable_isNewReconciler:!1};function nx(u,h){try{var _="",b=h;do _+=H4(b),b=b.return;while(b);var M=_}catch(C){M=`
Error generating stack: `+C.message+`
`+C.stack}return{value:u,source:h,stack:M}}function rx(u,h){try{console.error(h.value)}catch(_){setTimeout(function(){throw _})}}var Z4=typeof WeakMap=="function"?WeakMap:Map;function VA(u,h,_){_=xo(-1,_),_.tag=3,_.payload={element:null};var b=h.value;return _.callback=function(){Zm||(Zm=!0,wx=b),rx(u,h)},_}function jA(u,h,_){_=xo(-1,_),_.tag=3;var b=u.type.getDerivedStateFromError;if(typeof b=="function"){var M=h.value;_.payload=function(){return b(M)},_.callback=function(){rx(u,h)}}var C=u.stateNode;return C!==null&&typeof C.componentDidCatch=="function"&&(_.callback=function(){rx(u,h),typeof b!="function"&&(la===null?la=new Set([this]):la.add(this));var W=h.stack;this.componentDidCatch(h.value,{componentStack:W!==null?W:""})}),_}function HA(u,h,_){var b=u.pingCache;if(b===null){b=u.pingCache=new Z4;var M=new Set;b.set(h,M)}else M=b.get(h),M===void 0&&(M=new Set,b.set(h,M));M.has(_)||(M.add(_),u=dV.bind(null,u,h,_),h.then(u,u))}function WA(u){do{var h;if((h=u.tag===13)&&(h=u.memoizedState,h=h!==null?h.dehydrated!==null:!0),h)return u;u=u.return}while(u!==null);return null}function GA(u,h,_,b,M){return u.mode&1?(u.flags|=65536,u.lanes=M,u):(u===h?u.flags|=65536:(u.flags|=128,_.flags|=131072,_.flags&=-52805,_.tag===1&&(_.alternate===null?_.tag=17:(h=xo(-1,1),h.tag=2,aa(_,h))),_.lanes|=1),u)}function qs(u){u.flags|=4}function $A(u,h){if(u!==null&&u.child===h.child)return!0;if(h.flags&16)return!1;for(u=h.child;u!==null;){if(u.flags&12854||u.subtreeFlags&12854)return!1;u=u.sibling}return!0}var Ah,Ch,Dm,Um;if(Ye)Ah=function(u,h){for(var _=h.child;_!==null;){if(_.tag===5||_.tag===6)Q(u,_.stateNode);else if(_.tag!==4&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===h)break;for(;_.sibling===null;){if(_.return===null||_.return===h)return;_=_.return}_.sibling.return=_.return,_=_.sibling}},Ch=function(){},Dm=function(u,h,_,b,M){if(u=u.memoizedProps,u!==b){var C=h.stateNode,W=$s(Xi.current);_=oe(C,_,u,b,M,W),(h.updateQueue=_)&&qs(h)}},Um=function(u,h,_,b){_!==b&&qs(h)};else if($){Ah=function(u,h,_,b){for(var M=h.child;M!==null;){if(M.tag===5){var C=M.stateNode;_&&b&&(C=Vt(C,M.type,M.memoizedProps,M)),Q(u,C)}else if(M.tag===6)C=M.stateNode,_&&b&&(C=Xt(C,M.memoizedProps,M)),Q(u,C);else if(M.tag!==4){if(M.tag===22&&M.memoizedState!==null)C=M.child,C!==null&&(C.return=M),Ah(u,M,!0,!0);else if(M.child!==null){M.child.return=M,M=M.child;continue}}if(M===h)break;for(;M.sibling===null;){if(M.return===null||M.return===h)return;M=M.return}M.sibling.return=M.return,M=M.sibling}};var XA=function(u,h,_,b){for(var M=h.child;M!==null;){if(M.tag===5){var C=M.stateNode;_&&b&&(C=Vt(C,M.type,M.memoizedProps,M)),Ee(u,C)}else if(M.tag===6)C=M.stateNode,_&&b&&(C=Xt(C,M.memoizedProps,M)),Ee(u,C);else if(M.tag!==4){if(M.tag===22&&M.memoizedState!==null)C=M.child,C!==null&&(C.return=M),XA(u,M,!0,!0);else if(M.child!==null){M.child.return=M,M=M.child;continue}}if(M===h)break;for(;M.sibling===null;){if(M.return===null||M.return===h)return;M=M.return}M.sibling.return=M.return,M=M.sibling}};Ch=function(u,h){var _=h.stateNode;if(!$A(u,h)){u=_.containerInfo;var b=pt(u);XA(b,h,!1,!1),_.pendingChildren=b,qs(h),qe(u,b)}},Dm=function(u,h,_,b,M){var C=u.stateNode,W=u.memoizedProps;if((u=$A(u,h))&&W===b)h.stateNode=C;else{var ee=h.stateNode,he=$s(Xi.current),Le=null;W!==b&&(Le=oe(ee,_,W,b,M,he)),u&&Le===null?h.stateNode=C:(C=Oe(C,Le,_,W,b,h,u,ee),K(C,_,b,M,he)&&qs(h),h.stateNode=C,u?qs(h):Ah(C,h,!1,!1))}},Um=function(u,h,_,b){_!==b?(u=$s(ru.current),_=$s(Xi.current),h.stateNode=Ae(b,u,_,h),qs(h)):h.stateNode=u.stateNode}}else Ch=function(){},Dm=function(){},Um=function(){};function Ph(u,h){if(!xn)switch(u.tailMode){case"hidden":h=u.tail;for(var _=null;h!==null;)h.alternate!==null&&(_=h),h=h.sibling;_===null?u.tail=null:_.sibling=null;break;case"collapsed":_=u.tail;for(var b=null;_!==null;)_.alternate!==null&&(b=_),_=_.sibling;b===null?h||u.tail===null?u.tail=null:u.tail.sibling=null:b.sibling=null}}function Mr(u){var h=u.alternate!==null&&u.alternate.child===u.child,_=0,b=0;if(h)for(var M=u.child;M!==null;)_|=M.lanes|M.childLanes,b|=M.subtreeFlags&14680064,b|=M.flags&14680064,M.return=u,M=M.sibling;else for(M=u.child;M!==null;)_|=M.lanes|M.childLanes,b|=M.subtreeFlags,b|=M.flags,M.return=u,M=M.sibling;return u.subtreeFlags|=b,u.childLanes=_,h}function J4(u,h,_){var b=h.pendingProps;switch(j_(h),h.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mr(h),null;case 1:return cr(h.type)&&Fn(),Mr(h),null;case 3:return b=h.stateNode,iu(),wt(Rn),wt(jt),Y_(),b.pendingContext&&(b.context=b.pendingContext,b.pendingContext=null),(u===null||u.child===null)&&(_h(h)?qs(h):u===null||u.memoizedState.isDehydrated&&!(h.flags&256)||(h.flags|=1024,us!==null&&(Ex(us),us=null))),Ch(u,h),Mr(h),null;case 5:X_(h),_=$s(ru.current);var M=h.type;if(u!==null&&h.stateNode!=null)Dm(u,h,M,b,_),u.ref!==h.ref&&(h.flags|=512,h.flags|=2097152);else{if(!b){if(h.stateNode===null)throw Error(o(166));return Mr(h),null}if(u=$s(Xi.current),_h(h)){if(!Se)throw Error(o(175));u=E_(h.stateNode,h.type,h.memoizedProps,_,u,h,!yh),h.updateQueue=u,u!==null&&qs(h)}else{var C=Y(M,b,_,u,h);Ah(C,h,!1,!1),h.stateNode=C,K(C,M,b,_,u)&&qs(h)}h.ref!==null&&(h.flags|=512,h.flags|=2097152)}return Mr(h),null;case 6:if(u&&h.stateNode!=null)Um(u,h,u.memoizedProps,b);else{if(typeof b!="string"&&h.stateNode===null)throw Error(o(166));if(u=$s(ru.current),_=$s(Xi.current),_h(h)){if(!Se)throw Error(o(176));if(u=h.stateNode,b=h.memoizedProps,(_=M_(u,b,h,!yh))&&(M=wi,M!==null))switch(C=(M.mode&1)!==0,M.tag){case 3:dt(M.stateNode.containerInfo,u,b,C);break;case 5:yt(M.type,M.memoizedProps,M.stateNode,u,b,C)}_&&qs(h)}else h.stateNode=Ae(b,u,_,h)}return Mr(h),null;case 13:if(wt(bn),b=h.memoizedState,xn&&Si!==null&&h.mode&1&&!(h.flags&128)){for(u=Si;u;)u=sa(u);return tu(),h.flags|=98560,h}if(b!==null&&b.dehydrated!==null){if(b=_h(h),u===null){if(!b)throw Error(o(318));if(!Se)throw Error(o(344));if(u=h.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(o(317));T_(u,h)}else tu(),!(h.flags&128)&&(h.memoizedState=null),h.flags|=4;return Mr(h),null}return us!==null&&(Ex(us),us=null),h.flags&128?(h.lanes=_,h):(b=b!==null,_=!1,u===null?_h(h):_=u.memoizedState!==null,b&&!_&&(h.child.flags|=8192,h.mode&1&&(u===null||bn.current&1?Jn===0&&(Jn=3):Tx())),h.updateQueue!==null&&(h.flags|=4),Mr(h),null);case 4:return iu(),Ch(u,h),u===null&&Ce(h.stateNode.containerInfo),Mr(h),null;case 10:return D_(h.type._context),Mr(h),null;case 17:return cr(h.type)&&Fn(),Mr(h),null;case 19:if(wt(bn),M=h.memoizedState,M===null)return Mr(h),null;if(b=(h.flags&128)!==0,C=M.rendering,C===null)if(b)Ph(M,!1);else{if(Jn!==0||u!==null&&u.flags&128)for(u=h.child;u!==null;){if(C=Cm(u),C!==null){for(h.flags|=128,Ph(M,!1),u=C.updateQueue,u!==null&&(h.updateQueue=u,h.flags|=4),h.subtreeFlags=0,u=_,b=h.child;b!==null;)_=b,M=u,_.flags&=14680066,C=_.alternate,C===null?(_.childLanes=0,_.lanes=M,_.child=null,_.subtreeFlags=0,_.memoizedProps=null,_.memoizedState=null,_.updateQueue=null,_.dependencies=null,_.stateNode=null):(_.childLanes=C.childLanes,_.lanes=C.lanes,_.child=C.child,_.subtreeFlags=0,_.deletions=null,_.memoizedProps=C.memoizedProps,_.memoizedState=C.memoizedState,_.updateQueue=C.updateQueue,_.type=C.type,M=C.dependencies,_.dependencies=M===null?null:{lanes:M.lanes,firstContext:M.firstContext}),b=b.sibling;return Ze(bn,bn.current&1|2),h.child}u=u.sibling}M.tail!==null&&ur()>xx&&(h.flags|=128,b=!0,Ph(M,!1),h.lanes=4194304)}else{if(!b)if(u=Cm(C),u!==null){if(h.flags|=128,b=!0,u=u.updateQueue,u!==null&&(h.updateQueue=u,h.flags|=4),Ph(M,!0),M.tail===null&&M.tailMode==="hidden"&&!C.alternate&&!xn)return Mr(h),null}else 2*ur()-M.renderingStartTime>xx&&_!==1073741824&&(h.flags|=128,b=!0,Ph(M,!1),h.lanes=4194304);M.isBackwards?(C.sibling=h.child,h.child=C):(u=M.last,u!==null?u.sibling=C:h.child=C,M.last=C)}return M.tail!==null?(h=M.tail,M.rendering=h,M.tail=h.sibling,M.renderingStartTime=ur(),h.sibling=null,u=bn.current,Ze(bn,b?u&1|2:u&1),h):(Mr(h),null);case 22:case 23:return Mx(),b=h.memoizedState!==null,u!==null&&u.memoizedState!==null!==b&&(h.flags|=8192),b&&h.mode&1?Ei&1073741824&&(Mr(h),Ye&&h.subtreeFlags&6&&(h.flags|=8192)):Mr(h),null;case 24:return null;case 25:return null}throw Error(o(156,h.tag))}var Q4=a.ReactCurrentOwner,bi=!1;function Hr(u,h,_,b){h.child=u===null?wA(h,null,_,b):nu(h,u.child,_,b)}function qA(u,h,_,b,M){_=_.render;var C=h.ref;return Jc(h,M),b=Z_(u,h,_,b,C,M),_=J_(),u!==null&&!bi?(h.updateQueue=u.updateQueue,h.flags&=-2053,u.lanes&=~M,Eo(u,h,M)):(xn&&_&&V_(h),h.flags|=1,Hr(u,h,b,M),h.child)}function YA(u,h,_,b,M){if(u===null){var C=_.type;return typeof C=="function"&&!Ax(C)&&C.defaultProps===void 0&&_.compare===null&&_.defaultProps===void 0?(h.tag=15,h.type=C,KA(u,h,C,b,M)):(u=ig(_.type,null,b,h,h.mode,M),u.ref=h.ref,u.return=h,h.child=u)}if(C=u.child,!(u.lanes&M)){var W=C.memoizedProps;if(_=_.compare,_=_!==null?_:_m,_(W,b)&&u.ref===h.ref)return Eo(u,h,M)}return h.flags|=1,u=ha(C,b),u.ref=h.ref,u.return=h,h.child=u}function KA(u,h,_,b,M){if(u!==null&&_m(u.memoizedProps,b)&&u.ref===h.ref)if(bi=!1,(u.lanes&M)!==0)u.flags&131072&&(bi=!0);else return h.lanes=u.lanes,Eo(u,h,M);return ix(u,h,_,b,M)}function ZA(u,h,_){var b=h.pendingProps,M=b.children,C=u!==null?u.memoizedState:null;if(b.mode==="hidden")if(!(h.mode&1))h.memoizedState={baseLanes:0,cachePool:null},Ze(ou,Ei),Ei|=_;else if(_&1073741824)h.memoizedState={baseLanes:0,cachePool:null},b=C!==null?C.baseLanes:_,Ze(ou,Ei),Ei|=b;else return u=C!==null?C.baseLanes|_:_,h.lanes=h.childLanes=1073741824,h.memoizedState={baseLanes:u,cachePool:null},h.updateQueue=null,Ze(ou,Ei),Ei|=u,null;else C!==null?(b=C.baseLanes|_,h.memoizedState=null):b=_,Ze(ou,Ei),Ei|=b;return Hr(u,h,M,_),h.child}function JA(u,h){var _=h.ref;(u===null&&_!==null||u!==null&&u.ref!==_)&&(h.flags|=512,h.flags|=2097152)}function ix(u,h,_,b,M){var C=cr(_)?zs:jt.current;return C=Hi(h,C),Jc(h,M),_=Z_(u,h,_,b,C,M),b=J_(),u!==null&&!bi?(h.updateQueue=u.updateQueue,h.flags&=-2053,u.lanes&=~M,Eo(u,h,M)):(xn&&b&&V_(h),h.flags|=1,Hr(u,h,_,M),h.child)}function QA(u,h,_,b,M){if(cr(_)){var C=!0;vr(h)}else C=!1;if(Jc(h,M),h.stateNode===null)u!==null&&(u.alternate=null,h.alternate=null,h.flags|=2),fA(h,_,b),z_(h,_,b,M),b=!0;else if(u===null){var W=h.stateNode,ee=h.memoizedProps;W.props=ee;var he=W.context,Le=_.contextType;typeof Le=="object"&&Le!==null?Le=Wi(Le):(Le=cr(_)?zs:jt.current,Le=Hi(h,Le));var Je=_.getDerivedStateFromProps,It=typeof Je=="function"||typeof W.getSnapshotBeforeUpdate=="function";It||typeof W.UNSAFE_componentWillReceiveProps!="function"&&typeof W.componentWillReceiveProps!="function"||(ee!==b||he!==Le)&&pA(h,W,b,Le),oa=!1;var mt=h.memoizedState;W.state=mt,bm(h,b,W,M),he=h.memoizedState,ee!==b||mt!==he||Rn.current||oa?(typeof Je=="function"&&(B_(h,_,Je,b),he=h.memoizedState),(ee=oa||hA(h,_,ee,b,mt,he,Le))?(It||typeof W.UNSAFE_componentWillMount!="function"&&typeof W.componentWillMount!="function"||(typeof W.componentWillMount=="function"&&W.componentWillMount(),typeof W.UNSAFE_componentWillMount=="function"&&W.UNSAFE_componentWillMount()),typeof W.componentDidMount=="function"&&(h.flags|=4194308)):(typeof W.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=b,h.memoizedState=he),W.props=b,W.state=he,W.context=Le,b=ee):(typeof W.componentDidMount=="function"&&(h.flags|=4194308),b=!1)}else{W=h.stateNode,lA(u,h),ee=h.memoizedProps,Le=h.type===h.elementType?ee:cs(h.type,ee),W.props=Le,It=h.pendingProps,mt=W.context,he=_.contextType,typeof he=="object"&&he!==null?he=Wi(he):(he=cr(_)?zs:jt.current,he=Hi(h,he));var ln=_.getDerivedStateFromProps;(Je=typeof ln=="function"||typeof W.getSnapshotBeforeUpdate=="function")||typeof W.UNSAFE_componentWillReceiveProps!="function"&&typeof W.componentWillReceiveProps!="function"||(ee!==It||mt!==he)&&pA(h,W,b,he),oa=!1,mt=h.memoizedState,W.state=mt,bm(h,b,W,M);var ht=h.memoizedState;ee!==It||mt!==ht||Rn.current||oa?(typeof ln=="function"&&(B_(h,_,ln,b),ht=h.memoizedState),(Le=oa||hA(h,_,Le,b,mt,ht,he)||!1)?(Je||typeof W.UNSAFE_componentWillUpdate!="function"&&typeof W.componentWillUpdate!="function"||(typeof W.componentWillUpdate=="function"&&W.componentWillUpdate(b,ht,he),typeof W.UNSAFE_componentWillUpdate=="function"&&W.UNSAFE_componentWillUpdate(b,ht,he)),typeof W.componentDidUpdate=="function"&&(h.flags|=4),typeof W.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof W.componentDidUpdate!="function"||ee===u.memoizedProps&&mt===u.memoizedState||(h.flags|=4),typeof W.getSnapshotBeforeUpdate!="function"||ee===u.memoizedProps&&mt===u.memoizedState||(h.flags|=1024),h.memoizedProps=b,h.memoizedState=ht),W.props=b,W.state=ht,W.context=he,b=Le):(typeof W.componentDidUpdate!="function"||ee===u.memoizedProps&&mt===u.memoizedState||(h.flags|=4),typeof W.getSnapshotBeforeUpdate!="function"||ee===u.memoizedProps&&mt===u.memoizedState||(h.flags|=1024),b=!1)}return sx(u,h,_,b,C,M)}function sx(u,h,_,b,M,C){JA(u,h);var W=(h.flags&128)!==0;if(!b&&!W)return M&&Kc(h,_,!1),Eo(u,h,C);b=h.stateNode,Q4.current=h;var ee=W&&typeof _.getDerivedStateFromError!="function"?null:b.render();return h.flags|=1,u!==null&&W?(h.child=nu(h,u.child,null,C),h.child=nu(h,null,ee,C)):Hr(u,h,ee,C),h.memoizedState=b.state,M&&Kc(h,_,!0),h.child}function eC(u){var h=u.stateNode;h.pendingContext?Vs(u,h.pendingContext,h.pendingContext!==h.context):h.context&&Vs(u,h.context,!1),$_(u,h.containerInfo)}function tC(u,h,_,b,M){return tu(),G_(M),h.flags|=256,Hr(u,h,_,b),h.child}var Fm={dehydrated:null,treeContext:null,retryLane:0};function Bm(u){return{baseLanes:u,cachePool:null}}function nC(u,h,_){var b=h.pendingProps,M=bn.current,C=!1,W=(h.flags&128)!==0,ee;if((ee=W)||(ee=u!==null&&u.memoizedState===null?!1:(M&2)!==0),ee?(C=!0,h.flags&=-129):(u===null||u.memoizedState!==null)&&(M|=1),Ze(bn,M&1),u===null)return W_(h),u=h.memoizedState,u!==null&&(u=u.dehydrated,u!==null)?(h.mode&1?mh(u)?h.lanes=8:h.lanes=1073741824:h.lanes=1,null):(M=b.children,u=b.fallback,C?(b=h.mode,C=h.child,M={mode:"hidden",children:M},!(b&1)&&C!==null?(C.childLanes=0,C.pendingProps=M):C=sg(M,b,0,null),u=Ol(u,b,_,null),C.return=h,u.return=h,C.sibling=u,h.child=C,h.child.memoizedState=Bm(_),h.memoizedState=Fm,u):ox(h,M));if(M=u.memoizedState,M!==null){if(ee=M.dehydrated,ee!==null){if(W)return h.flags&256?(h.flags&=-257,zm(u,h,_,Error(o(422)))):h.memoizedState!==null?(h.child=u.child,h.flags|=128,null):(C=b.fallback,M=h.mode,b=sg({mode:"visible",children:b.children},M,0,null),C=Ol(C,M,_,null),C.flags|=2,b.return=h,C.return=h,b.sibling=C,h.child=b,h.mode&1&&nu(h,u.child,null,_),h.child.memoizedState=Bm(_),h.memoizedState=Fm,C);if(!(h.mode&1))h=zm(u,h,_,null);else if(mh(ee))h=zm(u,h,_,Error(o(419)));else if(b=(_&u.childLanes)!==0,bi||b){if(b=Xn,b!==null){switch(_&-_){case 4:C=2;break;case 16:C=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:C=32;break;case 536870912:C=268435456;break;default:C=0}b=C&(b.suspendedLanes|_)?0:C,b!==0&&b!==M.retryLane&&(M.retryLane=b,Yi(u,b,-1))}Tx(),h=zm(u,h,_,Error(o(421)))}else ii(ee)?(h.flags|=128,h.child=u.child,h=hV.bind(null,u),Xc(ee,h),h=null):(_=M.treeContext,Se&&(Si=hm(ee),wi=h,xn=!0,us=null,yh=!1,_!==null&&(Gi[$i++]=wo,Gi[$i++]=So,Gi[$i++]=Tl,wo=_.id,So=_.overflow,Tl=h)),h=ox(h,h.pendingProps.children),h.flags|=4096);return h}return C?(b=iC(u,h,b.children,b.fallback,_),C=h.child,M=u.child.memoizedState,C.memoizedState=M===null?Bm(_):{baseLanes:M.baseLanes|_,cachePool:null},C.childLanes=u.childLanes&~_,h.memoizedState=Fm,b):(_=rC(u,h,b.children,_),h.memoizedState=null,_)}return C?(b=iC(u,h,b.children,b.fallback,_),C=h.child,M=u.child.memoizedState,C.memoizedState=M===null?Bm(_):{baseLanes:M.baseLanes|_,cachePool:null},C.childLanes=u.childLanes&~_,h.memoizedState=Fm,b):(_=rC(u,h,b.children,_),h.memoizedState=null,_)}function ox(u,h){return h=sg({mode:"visible",children:h},u.mode,0,null),h.return=u,u.child=h}function rC(u,h,_,b){var M=u.child;return u=M.sibling,_=ha(M,{mode:"visible",children:_}),!(h.mode&1)&&(_.lanes=b),_.return=h,_.sibling=null,u!==null&&(b=h.deletions,b===null?(h.deletions=[u],h.flags|=16):b.push(u)),h.child=_}function iC(u,h,_,b,M){var C=h.mode;u=u.child;var W=u.sibling,ee={mode:"hidden",children:_};return!(C&1)&&h.child!==u?(_=h.child,_.childLanes=0,_.pendingProps=ee,h.deletions=null):(_=ha(u,ee),_.subtreeFlags=u.subtreeFlags&14680064),W!==null?b=ha(W,b):(b=Ol(b,C,M,null),b.flags|=2),b.return=h,_.return=h,_.sibling=b,h.child=_,b}function zm(u,h,_,b){return b!==null&&G_(b),nu(h,u.child,null,_),u=ox(h,h.pendingProps.children),u.flags|=2,h.memoizedState=null,u}function sC(u,h,_){u.lanes|=h;var b=u.alternate;b!==null&&(b.lanes|=h),U_(u.return,h,_)}function ax(u,h,_,b,M){var C=u.memoizedState;C===null?u.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:b,tail:_,tailMode:M}:(C.isBackwards=h,C.rendering=null,C.renderingStartTime=0,C.last=b,C.tail=_,C.tailMode=M)}function oC(u,h,_){var b=h.pendingProps,M=b.revealOrder,C=b.tail;if(Hr(u,h,b.children,_),b=bn.current,b&2)b=b&1|2,h.flags|=128;else{if(u!==null&&u.flags&128)e:for(u=h.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&sC(u,_,h);else if(u.tag===19)sC(u,_,h);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===h)break e;for(;u.sibling===null;){if(u.return===null||u.return===h)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}b&=1}if(Ze(bn,b),!(h.mode&1))h.memoizedState=null;else switch(M){case"forwards":for(_=h.child,M=null;_!==null;)u=_.alternate,u!==null&&Cm(u)===null&&(M=_),_=_.sibling;_=M,_===null?(M=h.child,h.child=null):(M=_.sibling,_.sibling=null),ax(h,!1,M,_,C);break;case"backwards":for(_=null,M=h.child,h.child=null;M!==null;){if(u=M.alternate,u!==null&&Cm(u)===null){h.child=M;break}u=M.sibling,M.sibling=_,_=M,M=u}ax(h,!0,_,null,C);break;case"together":ax(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function Eo(u,h,_){if(u!==null&&(h.dependencies=u.dependencies),au|=h.lanes,!(_&h.childLanes))return null;if(u!==null&&h.child!==u.child)throw Error(o(153));if(h.child!==null){for(u=h.child,_=ha(u,u.pendingProps),h.child=_,_.return=h;u.sibling!==null;)u=u.sibling,_=_.sibling=ha(u,u.pendingProps),_.return=h;_.sibling=null}return h.child}function eV(u,h,_){switch(h.tag){case 3:eC(h),tu();break;case 5:SA(h);break;case 1:cr(h.type)&&vr(h);break;case 4:$_(h,h.stateNode.containerInfo);break;case 10:aA(h,h.type._context,h.memoizedProps.value);break;case 13:var b=h.memoizedState;if(b!==null)return b.dehydrated!==null?(Ze(bn,bn.current&1),h.flags|=128,null):_&h.child.childLanes?nC(u,h,_):(Ze(bn,bn.current&1),u=Eo(u,h,_),u!==null?u.sibling:null);Ze(bn,bn.current&1);break;case 19:if(b=(_&h.childLanes)!==0,u.flags&128){if(b)return oC(u,h,_);h.flags|=128}var M=h.memoizedState;if(M!==null&&(M.rendering=null,M.tail=null,M.lastEffect=null),Ze(bn,bn.current),b)break;return null;case 22:case 23:return h.lanes=0,ZA(u,h,_)}return Eo(u,h,_)}function tV(u,h){switch(j_(h),h.tag){case 1:return cr(h.type)&&Fn(),u=h.flags,u&65536?(h.flags=u&-65537|128,h):null;case 3:return iu(),wt(Rn),wt(jt),Y_(),u=h.flags,u&65536&&!(u&128)?(h.flags=u&-65537|128,h):null;case 5:return X_(h),null;case 13:if(wt(bn),u=h.memoizedState,u!==null&&u.dehydrated!==null){if(h.alternate===null)throw Error(o(340));tu()}return u=h.flags,u&65536?(h.flags=u&-65537|128,h):null;case 19:return wt(bn),null;case 4:return iu(),null;case 10:return D_(h.type._context),null;case 22:case 23:return Mx(),null;case 24:return null;default:return null}}var Vm=!1,Pl=!1,nV=typeof WeakSet=="function"?WeakSet:Set,ze=null;function jm(u,h){var _=u.ref;if(_!==null)if(typeof _=="function")try{_(null)}catch(b){ai(u,h,b)}else _.current=null}function lx(u,h,_){try{_()}catch(b){ai(u,h,b)}}var aC=!1;function rV(u,h){for(U(u.containerInfo),ze=h;ze!==null;)if(u=ze,h=u.child,(u.subtreeFlags&1028)!==0&&h!==null)h.return=u,ze=h;else for(;ze!==null;){u=ze;try{var _=u.alternate;if(u.flags&1024)switch(u.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var b=_.memoizedProps,M=_.memoizedState,C=u.stateNode,W=C.getSnapshotBeforeUpdate(u.elementType===u.type?b:cs(u.type,b),M);C.__reactInternalSnapshotBeforeUpdate=W}break;case 3:Ye&&Ie(u.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(ee){ai(u,u.return,ee)}if(h=u.sibling,h!==null){h.return=u.return,ze=h;break}ze=u.return}return _=aC,aC=!1,_}function Rl(u,h,_){var b=h.updateQueue;if(b=b!==null?b.lastEffect:null,b!==null){var M=b=b.next;do{if((M.tag&u)===u){var C=M.destroy;M.destroy=void 0,C!==void 0&&lx(h,_,C)}M=M.next}while(M!==b)}}function Rh(u,h){if(h=h.updateQueue,h=h!==null?h.lastEffect:null,h!==null){var _=h=h.next;do{if((_.tag&u)===u){var b=_.create;_.destroy=b()}_=_.next}while(_!==h)}}function cx(u){var h=u.ref;if(h!==null){var _=u.stateNode;switch(u.tag){case 5:u=J(_);break;default:u=_}typeof h=="function"?h(u):h.current=u}}function lC(u,h,_){if(js&&typeof js.onCommitFiberUnmount=="function")try{js.onCommitFiberUnmount(vm,h)}catch{}switch(h.tag){case 0:case 11:case 14:case 15:if(u=h.updateQueue,u!==null&&(u=u.lastEffect,u!==null)){var b=u=u.next;do{var M=b,C=M.destroy;M=M.tag,C!==void 0&&(M&2||M&4)&&lx(h,_,C),b=b.next}while(b!==u)}break;case 1:if(jm(h,_),u=h.stateNode,typeof u.componentWillUnmount=="function")try{u.props=h.memoizedProps,u.state=h.memoizedState,u.componentWillUnmount()}catch(W){ai(h,_,W)}break;case 5:jm(h,_);break;case 4:Ye?pC(u,h,_):$&&$&&(h=h.stateNode.containerInfo,_=pt(h),it(h,_))}}function cC(u,h,_){for(var b=h;;)if(lC(u,b,_),b.child===null||Ye&&b.tag===4){if(b===h)break;for(;b.sibling===null;){if(b.return===null||b.return===h)return;b=b.return}b.sibling.return=b.return,b=b.sibling}else b.child.return=b,b=b.child}function uC(u){var h=u.alternate;h!==null&&(u.alternate=null,uC(h)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(h=u.stateNode,h!==null&&et(h)),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}function dC(u){return u.tag===5||u.tag===3||u.tag===4}function hC(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||dC(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function fC(u){if(Ye){e:{for(var h=u.return;h!==null;){if(dC(h))break e;h=h.return}throw Error(o(160))}var _=h;switch(_.tag){case 5:h=_.stateNode,_.flags&32&&(ye(h),_.flags&=-33),_=hC(u),dx(u,_,h);break;case 3:case 4:h=_.stateNode.containerInfo,_=hC(u),ux(u,_,h);break;default:throw Error(o(161))}}}function ux(u,h,_){var b=u.tag;if(b===5||b===6)u=u.stateNode,h?tt(_,u,h):bt(_,u);else if(b!==4&&(u=u.child,u!==null))for(ux(u,h,_),u=u.sibling;u!==null;)ux(u,h,_),u=u.sibling}function dx(u,h,_){var b=u.tag;if(b===5||b===6)u=u.stateNode,h?vt(_,u,h):ut(_,u);else if(b!==4&&(u=u.child,u!==null))for(dx(u,h,_),u=u.sibling;u!==null;)dx(u,h,_),u=u.sibling}function pC(u,h,_){for(var b=h,M=!1,C,W;;){if(!M){M=b.return;e:for(;;){if(M===null)throw Error(o(160));switch(C=M.stateNode,M.tag){case 5:W=!1;break e;case 3:C=C.containerInfo,W=!0;break e;case 4:C=C.containerInfo,W=!0;break e}M=M.return}M=!0}if(b.tag===5||b.tag===6)cC(u,b,_),W?X(C,b.stateNode):We(C,b.stateNode);else if(b.tag===18)W?le(C,b.stateNode):ue(C,b.stateNode);else if(b.tag===4){if(b.child!==null){C=b.stateNode.containerInfo,W=!0,b.child.return=b,b=b.child;continue}}else if(lC(u,b,_),b.child!==null){b.child.return=b,b=b.child;continue}if(b===h)break;for(;b.sibling===null;){if(b.return===null||b.return===h)return;b=b.return,b.tag===4&&(M=!1)}b.sibling.return=b.return,b=b.sibling}}function hx(u,h){if(Ye){switch(h.tag){case 0:case 11:case 14:case 15:Rl(3,h,h.return),Rh(3,h),Rl(5,h,h.return);return;case 1:return;case 5:var _=h.stateNode;if(_!=null){var b=h.memoizedProps;u=u!==null?u.memoizedProps:b;var M=h.type,C=h.updateQueue;h.updateQueue=null,C!==null&&Ct(_,C,M,u,b,h)}return;case 6:if(h.stateNode===null)throw Error(o(162));_=h.memoizedProps,be(h.stateNode,u!==null?u.memoizedProps:_,_);return;case 3:Se&&u!==null&&u.memoizedState.isDehydrated&&se(h.stateNode.containerInfo);return;case 12:return;case 13:Hm(h);return;case 19:Hm(h);return;case 17:return}throw Error(o(163))}switch(h.tag){case 0:case 11:case 14:case 15:Rl(3,h,h.return),Rh(3,h),Rl(5,h,h.return);return;case 12:return;case 13:Hm(h);return;case 19:Hm(h);return;case 3:Se&&u!==null&&u.memoizedState.isDehydrated&&se(h.stateNode.containerInfo);break;case 22:case 23:return}e:if($){switch(h.tag){case 1:case 5:case 6:break e;case 3:case 4:h=h.stateNode,it(h.containerInfo,h.pendingChildren);break e}throw Error(o(163))}}function Hm(u){var h=u.updateQueue;if(h!==null){u.updateQueue=null;var _=u.stateNode;_===null&&(_=u.stateNode=new nV),h.forEach(function(b){var M=fV.bind(null,u,b);_.has(b)||(_.add(b),b.then(M,M))})}}function iV(u,h){for(ze=h;ze!==null;){h=ze;var _=h.deletions;if(_!==null)for(var b=0;b<_.length;b++){var M=_[b];try{var C=u;Ye?pC(C,M,h):cC(C,M,h);var W=M.alternate;W!==null&&(W.return=null),M.return=null}catch(at){ai(M,h,at)}}if(_=h.child,h.subtreeFlags&12854&&_!==null)_.return=h,ze=_;else for(;ze!==null;){h=ze;try{var ee=h.flags;if(ee&32&&Ye&&ye(h.stateNode),ee&512){var he=h.alternate;if(he!==null){var Le=he.ref;Le!==null&&(typeof Le=="function"?Le(null):Le.current=null)}}if(ee&8192)switch(h.tag){case 13:if(h.memoizedState!==null){var Je=h.alternate;(Je===null||Je.memoizedState===null)&&(_x=ur())}break;case 22:var It=h.memoizedState!==null,mt=h.alternate,ln=mt!==null&&mt.memoizedState!==null;if(_=h,Ye){e:if(b=_,M=It,C=null,Ye)for(var ht=b;;){if(ht.tag===5){if(C===null){C=ht;var Tr=ht.stateNode;M?Ve(Tr):Te(ht.stateNode,ht.memoizedProps)}}else if(ht.tag===6){if(C===null){var Zi=ht.stateNode;M?Be(Zi):q(Zi,ht.memoizedProps)}}else if((ht.tag!==22&&ht.tag!==23||ht.memoizedState===null||ht===b)&&ht.child!==null){ht.child.return=ht,ht=ht.child;continue}if(ht===b)break;for(;ht.sibling===null;){if(ht.return===null||ht.return===b)break e;C===ht&&(C=null),ht=ht.return}C===ht&&(C=null),ht.sibling.return=ht.return,ht=ht.sibling}}if(It&&!ln&&_.mode&1){ze=_;for(var ae=_.child;ae!==null;){for(_=ze=ae;ze!==null;){b=ze;var ne=b.child;switch(b.tag){case 0:case 11:case 14:case 15:Rl(4,b,b.return);break;case 1:jm(b,b.return);var de=b.stateNode;if(typeof de.componentWillUnmount=="function"){var je=b.return;try{de.props=b.memoizedProps,de.state=b.memoizedState,de.componentWillUnmount()}catch(at){ai(b,je,at)}}break;case 5:jm(b,b.return);break;case 22:if(b.memoizedState!==null){vC(_);continue}}ne!==null?(ne.return=b,ze=ne):vC(_)}ae=ae.sibling}}}switch(ee&4102){case 2:fC(h),h.flags&=-3;break;case 6:fC(h),h.flags&=-3,hx(h.alternate,h);break;case 4096:h.flags&=-4097;break;case 4100:h.flags&=-4097,hx(h.alternate,h);break;case 4:hx(h.alternate,h)}}catch(at){ai(h,h.return,at)}if(_=h.sibling,_!==null){_.return=h.return,ze=_;break}ze=h.return}}}function sV(u,h,_){ze=u,mC(u)}function mC(u,h,_){for(var b=(u.mode&1)!==0;ze!==null;){var M=ze,C=M.child;if(M.tag===22&&b){var W=M.memoizedState!==null||Vm;if(!W){var ee=M.alternate,he=ee!==null&&ee.memoizedState!==null||Pl;ee=Vm;var Le=Pl;if(Vm=W,(Pl=he)&&!Le)for(ze=M;ze!==null;)W=ze,he=W.child,W.tag===22&&W.memoizedState!==null?yC(M):he!==null?(he.return=W,ze=he):yC(M);for(;C!==null;)ze=C,mC(C),C=C.sibling;ze=M,Vm=ee,Pl=Le}gC(u)}else M.subtreeFlags&8772&&C!==null?(C.return=M,ze=C):gC(u)}}function gC(u){for(;ze!==null;){var h=ze;if(h.flags&8772){var _=h.alternate;try{if(h.flags&8772)switch(h.tag){case 0:case 11:case 15:Pl||Rh(5,h);break;case 1:var b=h.stateNode;if(h.flags&4&&!Pl)if(_===null)b.componentDidMount();else{var M=h.elementType===h.type?_.memoizedProps:cs(h.type,_.memoizedProps);b.componentDidUpdate(M,_.memoizedState,b.__reactInternalSnapshotBeforeUpdate)}var C=h.updateQueue;C!==null&&uA(h,C,b);break;case 3:var W=h.updateQueue;if(W!==null){if(_=null,h.child!==null)switch(h.child.tag){case 5:_=J(h.child.stateNode);break;case 1:_=h.child.stateNode}uA(h,W,_)}break;case 5:var ee=h.stateNode;_===null&&h.flags&4&&Wt(ee,h.type,h.memoizedProps,h);break;case 6:break;case 4:break;case 12:break;case 13:if(Se&&h.memoizedState===null){var he=h.alternate;if(he!==null){var Le=he.memoizedState;if(Le!==null){var Je=Le.dehydrated;Je!==null&&ce(Je)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}Pl||h.flags&512&&cx(h)}catch(It){ai(h,h.return,It)}}if(h===u){ze=null;break}if(_=h.sibling,_!==null){_.return=h.return,ze=_;break}ze=h.return}}function vC(u){for(;ze!==null;){var h=ze;if(h===u){ze=null;break}var _=h.sibling;if(_!==null){_.return=h.return,ze=_;break}ze=h.return}}function yC(u){for(;ze!==null;){var h=ze;try{switch(h.tag){case 0:case 11:case 15:var _=h.return;try{Rh(4,h)}catch(he){ai(h,_,he)}break;case 1:var b=h.stateNode;if(typeof b.componentDidMount=="function"){var M=h.return;try{b.componentDidMount()}catch(he){ai(h,M,he)}}var C=h.return;try{cx(h)}catch(he){ai(h,C,he)}break;case 5:var W=h.return;try{cx(h)}catch(he){ai(h,W,he)}}}catch(he){ai(h,h.return,he)}if(h===u){ze=null;break}var ee=h.sibling;if(ee!==null){ee.return=h.return,ze=ee;break}ze=h.return}}var Wm=0,Gm=1,$m=2,Xm=3,qm=4;if(typeof Symbol=="function"&&Symbol.for){var Ih=Symbol.for;Wm=Ih("selector.component"),Gm=Ih("selector.has_pseudo_class"),$m=Ih("selector.role"),Xm=Ih("selector.test_id"),qm=Ih("selector.text")}function fx(u){var h=fe(u);if(h!=null){if(typeof h.memoizedProps["data-testname"]!="string")throw Error(o(364));return h}if(u=ie(u),u===null)throw Error(o(362));return u.stateNode.current}function px(u,h){switch(h.$$typeof){case Wm:if(u.type===h.value)return!0;break;case Gm:e:{h=h.value,u=[u,0];for(var _=0;_<u.length;){var b=u[_++],M=u[_++],C=h[M];if(b.tag!==5||!ve(b)){for(;C!=null&&px(b,C);)M++,C=h[M];if(M===h.length){h=!0;break e}else for(b=b.child;b!==null;)u.push(b,M),b=b.sibling}}h=!1}return h;case $m:if(u.tag===5&&Qe(u.stateNode,h.value))return!0;break;case qm:if((u.tag===5||u.tag===6)&&(u=_e(u),u!==null&&0<=u.indexOf(h.value)))return!0;break;case Xm:if(u.tag===5&&(u=u.memoizedProps["data-testname"],typeof u=="string"&&u.toLowerCase()===h.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function mx(u){switch(u.$$typeof){case Wm:return"<"+(P(u.value)||"Unknown")+">";case Gm:return":has("+(mx(u)||"")+")";case $m:return'[role="'+u.value+'"]';case qm:return'"'+u.value+'"';case Xm:return'[data-testname="'+u.value+'"]';default:throw Error(o(365))}}function _C(u,h){var _=[];u=[u,0];for(var b=0;b<u.length;){var M=u[b++],C=u[b++],W=h[C];if(M.tag!==5||!ve(M)){for(;W!=null&&px(M,W);)C++,W=h[C];if(C===h.length)_.push(M);else for(M=M.child;M!==null;)u.push(M,C),M=M.sibling}}return _}function gx(u,h){if(!O)throw Error(o(363));u=fx(u),u=_C(u,h),h=[],u=Array.from(u);for(var _=0;_<u.length;){var b=u[_++];if(b.tag===5)ve(b)||h.push(b.stateNode);else for(b=b.child;b!==null;)u.push(b),b=b.sibling}return h}var oV=Math.ceil,Ym=a.ReactCurrentDispatcher,vx=a.ReactCurrentOwner,Bn=a.ReactCurrentBatchConfig,Ht=0,Xn=null,qn=null,yr=0,Ei=0,ou=lr(0),Jn=0,Lh=null,au=0,Km=0,yx=0,kh=null,si=null,_x=0,xx=1/0;function lu(){xx=ur()+500}var Zm=!1,wx=null,la=null,Jm=!1,ca=null,Qm=0,Oh=0,Sx=null,eg=-1,tg=0;function Wr(){return Ht&6?ur():eg!==-1?eg:eg=ur()}function ua(u){return u.mode&1?Ht&2&&yr!==0?yr&-yr:j4.transition!==null?(tg===0&&(u=pm,pm<<=1,!(pm&4194240)&&(pm=64),tg=u),tg):(u=Zt,u!==0?u:pe()):1}function Yi(u,h,_){if(50<Oh)throw Oh=0,Sx=null,Error(o(185));var b=ng(u,h);return b===null?null:(vh(b,h,_),(!(Ht&2)||b!==Xn)&&(b===Xn&&(!(Ht&2)&&(Km|=h),Jn===4&&da(b,yr)),oi(b,_),h===1&&Ht===0&&!(u.mode&1)&&(lu(),ym&&Ws())),b)}function ng(u,h){u.lanes|=h;var _=u.alternate;for(_!==null&&(_.lanes|=h),_=u,u=u.return;u!==null;)u.childLanes|=h,_=u.alternate,_!==null&&(_.childLanes|=h),_=u,u=u.return;return _.tag===3?_.stateNode:null}function oi(u,h){var _=u.callbackNode;k4(u,h);var b=gm(u,u===Xn?yr:0);if(b===0)_!==null&&sA(_),u.callbackNode=null,u.callbackPriority=0;else if(h=b&-b,u.callbackPriority!==h){if(_!=null&&sA(_),h===1)u.tag===0?V4(wC.bind(null,u)):oA(wC.bind(null,u)),De?F(function(){Ht===0&&Ws()}):R_(I_,Ws),_=null;else{switch(iA(b)){case 1:_=I_;break;case 4:_=U4;break;case 16:_=L_;break;case 536870912:_=F4;break;default:_=L_}_=RC(_,xC.bind(null,u))}u.callbackPriority=h,u.callbackNode=_}}function xC(u,h){if(eg=-1,tg=0,Ht&6)throw Error(o(327));var _=u.callbackNode;if(kl()&&u.callbackNode!==_)return null;var b=gm(u,u===Xn?yr:0);if(b===0)return null;if(b&30||b&u.expiredLanes||h)h=rg(u,b);else{h=b;var M=Ht;Ht|=2;var C=EC();(Xn!==u||yr!==h)&&(lu(),Il(u,h));do try{cV();break}catch(ee){bC(u,ee)}while(!0);N_(),Ym.current=C,Ht=M,qn!==null?h=0:(Xn=null,yr=0,h=Jn)}if(h!==0){if(h===2&&(M=A_(u),M!==0&&(b=M,h=bx(u,M))),h===1)throw _=Lh,Il(u,0),da(u,b),oi(u,ur()),_;if(h===6)da(u,b);else{if(M=u.current.alternate,!(b&30)&&!aV(M)&&(h=rg(u,b),h===2&&(C=A_(u),C!==0&&(b=C,h=bx(u,C))),h===1))throw _=Lh,Il(u,0),da(u,b),oi(u,ur()),_;switch(u.finishedWork=M,u.finishedLanes=b,h){case 0:case 1:throw Error(o(345));case 2:Ll(u,si);break;case 3:if(da(u,b),(b&130023424)===b&&(h=_x+500-ur(),10<h)){if(gm(u,0)!==0)break;if(M=u.suspendedLanes,(M&b)!==b){Wr(),u.pingedLanes|=u.suspendedLanes&M;break}u.timeoutHandle=we(Ll.bind(null,u,si),h);break}Ll(u,si);break;case 4:if(da(u,b),(b&4194240)===b)break;for(h=u.eventTimes,M=-1;0<b;){var W=31-xi(b);C=1<<W,W=h[W],W>M&&(M=W),b&=~C}if(b=M,b=ur()-b,b=(120>b?120:480>b?480:1080>b?1080:1920>b?1920:3e3>b?3e3:4320>b?4320:1960*oV(b/1960))-b,10<b){u.timeoutHandle=we(Ll.bind(null,u,si),b);break}Ll(u,si);break;case 5:Ll(u,si);break;default:throw Error(o(329))}}}return oi(u,ur()),u.callbackNode===_?xC.bind(null,u):null}function bx(u,h){var _=kh;return u.current.memoizedState.isDehydrated&&(Il(u,h).flags|=256),u=rg(u,h),u!==2&&(h=si,si=_,h!==null&&Ex(h)),u}function Ex(u){si===null?si=u:si.push.apply(si,u)}function aV(u){for(var h=u;;){if(h.flags&16384){var _=h.updateQueue;if(_!==null&&(_=_.stores,_!==null))for(var b=0;b<_.length;b++){var M=_[b],C=M.getSnapshot;M=M.value;try{if(!Hs(C(),M))return!1}catch{return!1}}}if(_=h.child,h.subtreeFlags&16384&&_!==null)_.return=h,h=_;else{if(h===u)break;for(;h.sibling===null;){if(h.return===null||h.return===u)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function da(u,h){for(h&=~yx,h&=~Km,u.suspendedLanes|=h,u.pingedLanes&=~h,u=u.expirationTimes;0<h;){var _=31-xi(h),b=1<<_;u[_]=-1,h&=~b}}function wC(u){if(Ht&6)throw Error(o(327));kl();var h=gm(u,0);if(!(h&1))return oi(u,ur()),null;var _=rg(u,h);if(u.tag!==0&&_===2){var b=A_(u);b!==0&&(h=b,_=bx(u,b))}if(_===1)throw _=Lh,Il(u,0),da(u,h),oi(u,ur()),_;if(_===6)throw Error(o(345));return u.finishedWork=u.current.alternate,u.finishedLanes=h,Ll(u,si),oi(u,ur()),null}function SC(u){ca!==null&&ca.tag===0&&!(Ht&6)&&kl();var h=Ht;Ht|=1;var _=Bn.transition,b=Zt;try{if(Bn.transition=null,Zt=1,u)return u()}finally{Zt=b,Bn.transition=_,Ht=h,!(Ht&6)&&Ws()}}function Mx(){Ei=ou.current,wt(ou)}function Il(u,h){u.finishedWork=null,u.finishedLanes=0;var _=u.timeoutHandle;if(_!==ct&&(u.timeoutHandle=ct,lt(_)),qn!==null)for(_=qn.return;_!==null;){var b=_;switch(j_(b),b.tag){case 1:b=b.type.childContextTypes,b!=null&&Fn();break;case 3:iu(),wt(Rn),wt(jt),Y_();break;case 5:X_(b);break;case 4:iu();break;case 13:wt(bn);break;case 19:wt(bn);break;case 10:D_(b.type._context);break;case 22:case 23:Mx()}_=_.return}if(Xn=u,qn=u=ha(u.current,null),yr=Ei=h,Jn=0,Lh=null,yx=Km=au=0,si=kh=null,Gs!==null){for(h=0;h<Gs.length;h++)if(_=Gs[h],b=_.interleaved,b!==null){_.interleaved=null;var M=b.next,C=_.pending;if(C!==null){var W=C.next;C.next=M,b.next=W}_.pending=b}Gs=null}return u}function bC(u,h){do{var _=qn;try{if(N_(),Pm.current=Nm,Rm){for(var b=In.memoizedState;b!==null;){var M=b.queue;M!==null&&(M.pending=null),b=b.next}Rm=!1}if(su=0,dr=br=In=null,bh=!1,Eh=0,vx.current=null,_===null||_.return===null){Jn=1,Lh=h,qn=null;break}e:{var C=u,W=_.return,ee=_,he=h;if(h=yr,ee.flags|=32768,he!==null&&typeof he=="object"&&typeof he.then=="function"){var Le=he,Je=ee,It=Je.tag;if(!(Je.mode&1)&&(It===0||It===11||It===15)){var mt=Je.alternate;mt?(Je.updateQueue=mt.updateQueue,Je.memoizedState=mt.memoizedState,Je.lanes=mt.lanes):(Je.updateQueue=null,Je.memoizedState=null)}var ln=WA(W);if(ln!==null){ln.flags&=-257,GA(ln,W,ee,C,h),ln.mode&1&&HA(C,Le,h),h=ln,he=Le;var ht=h.updateQueue;if(ht===null){var Tr=new Set;Tr.add(he),h.updateQueue=Tr}else ht.add(he);break e}else{if(!(h&1)){HA(C,Le,h),Tx();break e}he=Error(o(426))}}else if(xn&&ee.mode&1){var Zi=WA(W);if(Zi!==null){!(Zi.flags&65536)&&(Zi.flags|=256),GA(Zi,W,ee,C,h),G_(he);break e}}C=he,Jn!==4&&(Jn=2),kh===null?kh=[C]:kh.push(C),he=nx(he,ee),ee=W;do{switch(ee.tag){case 3:ee.flags|=65536,h&=-h,ee.lanes|=h;var ae=VA(ee,he,h);cA(ee,ae);break e;case 1:C=he;var ne=ee.type,de=ee.stateNode;if(!(ee.flags&128)&&(typeof ne.getDerivedStateFromError=="function"||de!==null&&typeof de.componentDidCatch=="function"&&(la===null||!la.has(de)))){ee.flags|=65536,h&=-h,ee.lanes|=h;var je=jA(ee,C,h);cA(ee,je);break e}}ee=ee.return}while(ee!==null)}TC(_)}catch(at){h=at,qn===_&&_!==null&&(qn=_=_.return);continue}break}while(!0)}function EC(){var u=Ym.current;return Ym.current=Nm,u===null?Nm:u}function Tx(){(Jn===0||Jn===3||Jn===2)&&(Jn=4),Xn===null||!(au&268435455)&&!(Km&268435455)||da(Xn,yr)}function rg(u,h){var _=Ht;Ht|=2;var b=EC();Xn===u&&yr===h||Il(u,h);do try{lV();break}catch(M){bC(u,M)}while(!0);if(N_(),Ht=_,Ym.current=b,qn!==null)throw Error(o(261));return Xn=null,yr=0,Jn}function lV(){for(;qn!==null;)MC(qn)}function cV(){for(;qn!==null&&!N4();)MC(qn)}function MC(u){var h=PC(u.alternate,u,Ei);u.memoizedProps=u.pendingProps,h===null?TC(u):qn=h,vx.current=null}function TC(u){var h=u;do{var _=h.alternate;if(u=h.return,h.flags&32768){if(_=tV(_,h),_!==null){_.flags&=32767,qn=_;return}if(u!==null)u.flags|=32768,u.subtreeFlags=0,u.deletions=null;else{Jn=6,qn=null;return}}else if(_=J4(_,h,Ei),_!==null){qn=_;return}if(h=h.sibling,h!==null){qn=h;return}qn=h=u}while(h!==null);Jn===0&&(Jn=5)}function Ll(u,h){var _=Zt,b=Bn.transition;try{Bn.transition=null,Zt=1,uV(u,h,_)}finally{Bn.transition=b,Zt=_}return null}function uV(u,h,_){do kl();while(ca!==null);if(Ht&6)throw Error(o(327));var b=u.finishedWork,M=u.finishedLanes;if(b===null)return null;if(u.finishedWork=null,u.finishedLanes=0,b===u.current)throw Error(o(177));u.callbackNode=null,u.callbackPriority=0;var C=b.lanes|b.childLanes;if(O4(u,C),u===Xn&&(qn=Xn=null,yr=0),!(b.subtreeFlags&2064)&&!(b.flags&2064)||Jm||(Jm=!0,RC(L_,function(){return kl(),null})),C=(b.flags&15990)!==0,b.subtreeFlags&15990||C){C=Bn.transition,Bn.transition=null;var W=Zt;Zt=1;var ee=Ht;Ht|=4,vx.current=null,rV(u,b),iV(u,b),V(u.containerInfo),u.current=b,sV(b),D4(),Ht=ee,Zt=W,Bn.transition=C}else u.current=b;if(Jm&&(Jm=!1,ca=u,Qm=M),C=u.pendingLanes,C===0&&(la=null),B4(b.stateNode),oi(u,ur()),h!==null)for(_=u.onRecoverableError,b=0;b<h.length;b++)_(h[b]);if(Zm)throw Zm=!1,u=wx,wx=null,u;return Qm&1&&u.tag!==0&&kl(),C=u.pendingLanes,C&1?u===Sx?Oh++:(Oh=0,Sx=u):Oh=0,Ws(),null}function kl(){if(ca!==null){var u=iA(Qm),h=Bn.transition,_=Zt;try{if(Bn.transition=null,Zt=16>u?16:u,ca===null)var b=!1;else{if(u=ca,ca=null,Qm=0,Ht&6)throw Error(o(331));var M=Ht;for(Ht|=4,ze=u.current;ze!==null;){var C=ze,W=C.child;if(ze.flags&16){var ee=C.deletions;if(ee!==null){for(var he=0;he<ee.length;he++){var Le=ee[he];for(ze=Le;ze!==null;){var Je=ze;switch(Je.tag){case 0:case 11:case 15:Rl(8,Je,C)}var It=Je.child;if(It!==null)It.return=Je,ze=It;else for(;ze!==null;){Je=ze;var mt=Je.sibling,ln=Je.return;if(uC(Je),Je===Le){ze=null;break}if(mt!==null){mt.return=ln,ze=mt;break}ze=ln}}}var ht=C.alternate;if(ht!==null){var Tr=ht.child;if(Tr!==null){ht.child=null;do{var Zi=Tr.sibling;Tr.sibling=null,Tr=Zi}while(Tr!==null)}}ze=C}}if(C.subtreeFlags&2064&&W!==null)W.return=C,ze=W;else e:for(;ze!==null;){if(C=ze,C.flags&2048)switch(C.tag){case 0:case 11:case 15:Rl(9,C,C.return)}var ae=C.sibling;if(ae!==null){ae.return=C.return,ze=ae;break e}ze=C.return}}var ne=u.current;for(ze=ne;ze!==null;){W=ze;var de=W.child;if(W.subtreeFlags&2064&&de!==null)de.return=W,ze=de;else e:for(W=ne;ze!==null;){if(ee=ze,ee.flags&2048)try{switch(ee.tag){case 0:case 11:case 15:Rh(9,ee)}}catch(at){ai(ee,ee.return,at)}if(ee===W){ze=null;break e}var je=ee.sibling;if(je!==null){je.return=ee.return,ze=je;break e}ze=ee.return}}if(Ht=M,Ws(),js&&typeof js.onPostCommitFiberRoot=="function")try{js.onPostCommitFiberRoot(vm,u)}catch{}b=!0}return b}finally{Zt=_,Bn.transition=h}}return!1}function AC(u,h,_){h=nx(_,h),h=VA(u,h,1),aa(u,h),h=Wr(),u=ng(u,1),u!==null&&(vh(u,1,h),oi(u,h))}function ai(u,h,_){if(u.tag===3)AC(u,u,_);else for(;h!==null;){if(h.tag===3){AC(h,u,_);break}else if(h.tag===1){var b=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof b.componentDidCatch=="function"&&(la===null||!la.has(b))){u=nx(_,u),u=jA(h,u,1),aa(h,u),u=Wr(),h=ng(h,1),h!==null&&(vh(h,1,u),oi(h,u));break}}h=h.return}}function dV(u,h,_){var b=u.pingCache;b!==null&&b.delete(h),h=Wr(),u.pingedLanes|=u.suspendedLanes&_,Xn===u&&(yr&_)===_&&(Jn===4||Jn===3&&(yr&130023424)===yr&&500>ur()-_x?Il(u,0):yx|=_),oi(u,h)}function CC(u,h){h===0&&(u.mode&1?(h=mm,mm<<=1,!(mm&130023424)&&(mm=4194304)):h=1);var _=Wr();u=ng(u,h),u!==null&&(vh(u,h,_),oi(u,_))}function hV(u){var h=u.memoizedState,_=0;h!==null&&(_=h.retryLane),CC(u,_)}function fV(u,h){var _=0;switch(u.tag){case 13:var b=u.stateNode,M=u.memoizedState;M!==null&&(_=M.retryLane);break;case 19:b=u.stateNode;break;default:throw Error(o(314))}b!==null&&b.delete(h),CC(u,_)}var PC;PC=function(u,h,_){if(u!==null)if(u.memoizedProps!==h.pendingProps||Rn.current)bi=!0;else{if(!(u.lanes&_)&&!(h.flags&128))return bi=!1,eV(u,h,_);bi=!!(u.flags&131072)}else bi=!1,xn&&h.flags&1048576&&mA(h,Tm,h.index);switch(h.lanes=0,h.tag){case 2:var b=h.type;u!==null&&(u.alternate=null,h.alternate=null,h.flags|=2),u=h.pendingProps;var M=Hi(h,jt.current);Jc(h,_),M=Z_(null,h,b,u,M,_);var C=J_();return h.flags|=1,typeof M=="object"&&M!==null&&typeof M.render=="function"&&M.$$typeof===void 0?(h.tag=1,h.memoizedState=null,h.updateQueue=null,cr(b)?(C=!0,vr(h)):C=!1,h.memoizedState=M.state!==null&&M.state!==void 0?M.state:null,F_(h),M.updater=Em,h.stateNode=M,M._reactInternals=h,z_(h,b,u,_),h=sx(null,h,b,!0,C,_)):(h.tag=0,xn&&C&&V_(h),Hr(null,h,M,_),h=h.child),h;case 16:b=h.elementType;e:{switch(u!==null&&(u.alternate=null,h.alternate=null,h.flags|=2),u=h.pendingProps,M=b._init,b=M(b._payload),h.type=b,M=h.tag=mV(b),u=cs(b,u),M){case 0:h=ix(null,h,b,u,_);break e;case 1:h=QA(null,h,b,u,_);break e;case 11:h=qA(null,h,b,u,_);break e;case 14:h=YA(null,h,b,cs(b.type,u),_);break e}throw Error(o(306,b,""))}return h;case 0:return b=h.type,M=h.pendingProps,M=h.elementType===b?M:cs(b,M),ix(u,h,b,M,_);case 1:return b=h.type,M=h.pendingProps,M=h.elementType===b?M:cs(b,M),QA(u,h,b,M,_);case 3:e:{if(eC(h),u===null)throw Error(o(387));b=h.pendingProps,C=h.memoizedState,M=C.element,lA(u,h),bm(h,b,null,_);var W=h.memoizedState;if(b=W.element,Se&&C.isDehydrated)if(C={element:b,isDehydrated:!1,cache:W.cache,transitions:W.transitions},h.updateQueue.baseState=C,h.memoizedState=C,h.flags&256){M=Error(o(423)),h=tC(u,h,b,_,M);break e}else if(b!==M){M=Error(o(424)),h=tC(u,h,b,_,M);break e}else for(Se&&(Si=dm(h.stateNode.containerInfo),wi=h,xn=!0,us=null,yh=!1),_=wA(h,null,b,_),h.child=_;_;)_.flags=_.flags&-3|4096,_=_.sibling;else{if(tu(),b===M){h=Eo(u,h,_);break e}Hr(u,h,b,_)}h=h.child}return h;case 5:return SA(h),u===null&&W_(h),b=h.type,M=h.pendingProps,C=u!==null?u.memoizedProps:null,W=M.children,xe(b,M)?W=null:C!==null&&xe(b,C)&&(h.flags|=32),JA(u,h),Hr(u,h,W,_),h.child;case 6:return u===null&&W_(h),null;case 13:return nC(u,h,_);case 4:return $_(h,h.stateNode.containerInfo),b=h.pendingProps,u===null?h.child=nu(h,null,b,_):Hr(u,h,b,_),h.child;case 11:return b=h.type,M=h.pendingProps,M=h.elementType===b?M:cs(b,M),qA(u,h,b,M,_);case 7:return Hr(u,h,h.pendingProps,_),h.child;case 8:return Hr(u,h,h.pendingProps.children,_),h.child;case 12:return Hr(u,h,h.pendingProps.children,_),h.child;case 10:e:{if(b=h.type._context,M=h.pendingProps,C=h.memoizedProps,W=M.value,aA(h,b,W),C!==null)if(Hs(C.value,W)){if(C.children===M.children&&!Rn.current){h=Eo(u,h,_);break e}}else for(C=h.child,C!==null&&(C.return=h);C!==null;){var ee=C.dependencies;if(ee!==null){W=C.child;for(var he=ee.firstContext;he!==null;){if(he.context===b){if(C.tag===1){he=xo(-1,_&-_),he.tag=2;var Le=C.updateQueue;if(Le!==null){Le=Le.shared;var Je=Le.pending;Je===null?he.next=he:(he.next=Je.next,Je.next=he),Le.pending=he}}C.lanes|=_,he=C.alternate,he!==null&&(he.lanes|=_),U_(C.return,_,h),ee.lanes|=_;break}he=he.next}}else if(C.tag===10)W=C.type===h.type?null:C.child;else if(C.tag===18){if(W=C.return,W===null)throw Error(o(341));W.lanes|=_,ee=W.alternate,ee!==null&&(ee.lanes|=_),U_(W,_,h),W=C.sibling}else W=C.child;if(W!==null)W.return=C;else for(W=C;W!==null;){if(W===h){W=null;break}if(C=W.sibling,C!==null){C.return=W.return,W=C;break}W=W.return}C=W}Hr(u,h,M.children,_),h=h.child}return h;case 9:return M=h.type,b=h.pendingProps.children,Jc(h,_),M=Wi(M),b=b(M),h.flags|=1,Hr(u,h,b,_),h.child;case 14:return b=h.type,M=cs(b,h.pendingProps),M=cs(b.type,M),YA(u,h,b,M,_);case 15:return KA(u,h,h.type,h.pendingProps,_);case 17:return b=h.type,M=h.pendingProps,M=h.elementType===b?M:cs(b,M),u!==null&&(u.alternate=null,h.alternate=null,h.flags|=2),h.tag=1,cr(b)?(u=!0,vr(h)):u=!1,Jc(h,_),fA(h,b,M),z_(h,b,M,_),sx(null,h,b,!0,u,_);case 19:return oC(u,h,_);case 22:return ZA(u,h,_)}throw Error(o(156,h.tag))};function RC(u,h){return R_(u,h)}function pV(u,h,_,b){this.tag=u,this.key=_,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=b,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ki(u,h,_,b){return new pV(u,h,_,b)}function Ax(u){return u=u.prototype,!(!u||!u.isReactComponent)}function mV(u){if(typeof u=="function")return Ax(u)?1:0;if(u!=null){if(u=u.$$typeof,u===x)return 11;if(u===w)return 14}return 2}function ha(u,h){var _=u.alternate;return _===null?(_=Ki(u.tag,h,u.key,u.mode),_.elementType=u.elementType,_.type=u.type,_.stateNode=u.stateNode,_.alternate=u,u.alternate=_):(_.pendingProps=h,_.type=u.type,_.flags=0,_.subtreeFlags=0,_.deletions=null),_.flags=u.flags&14680064,_.childLanes=u.childLanes,_.lanes=u.lanes,_.child=u.child,_.memoizedProps=u.memoizedProps,_.memoizedState=u.memoizedState,_.updateQueue=u.updateQueue,h=u.dependencies,_.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},_.sibling=u.sibling,_.index=u.index,_.ref=u.ref,_}function ig(u,h,_,b,M,C){var W=2;if(b=u,typeof u=="function")Ax(u)&&(W=1);else if(typeof u=="string")W=5;else e:switch(u){case d:return Ol(_.children,M,C,h);case f:W=8,M|=8;break;case p:return u=Ki(12,_,h,M|2),u.elementType=p,u.lanes=C,u;case y:return u=Ki(13,_,h,M),u.elementType=y,u.lanes=C,u;case g:return u=Ki(19,_,h,M),u.elementType=g,u.lanes=C,u;case E:return sg(_,M,C,h);default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case m:W=10;break e;case v:W=9;break e;case x:W=11;break e;case w:W=14;break e;case S:W=16,b=null;break e}throw Error(o(130,u==null?u:typeof u,""))}return h=Ki(W,_,h,M),h.elementType=u,h.type=b,h.lanes=C,h}function Ol(u,h,_,b){return u=Ki(7,u,b,h),u.lanes=_,u}function sg(u,h,_,b){return u=Ki(22,u,b,h),u.elementType=E,u.lanes=_,u.stateNode={},u}function Cx(u,h,_){return u=Ki(6,u,null,h),u.lanes=_,u}function Px(u,h,_){return h=Ki(4,u.children!==null?u.children:[],u.key,h),h.lanes=_,h.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},h}function gV(u,h,_,b,M){this.tag=h,this.containerInfo=u,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=ct,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=C_(0),this.expirationTimes=C_(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=C_(0),this.identifierPrefix=b,this.onRecoverableError=M,Se&&(this.mutableSourceEagerHydrationData=null)}function IC(u,h,_,b,M,C,W,ee,he){return u=new gV(u,h,_,ee,he),h===1?(h=1,C===!0&&(h|=8)):h=0,C=Ki(3,null,null,h),u.current=C,C.stateNode=u,C.memoizedState={element:b,isDehydrated:_,cache:null,transitions:null},F_(C),u}function LC(u){if(!u)return ji;u=u._reactInternals;e:{if(R(u)!==u||u.tag!==1)throw Error(o(170));var h=u;do{switch(h.tag){case 3:h=h.stateNode.context;break e;case 1:if(cr(h.type)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break e}}h=h.return}while(h!==null);throw Error(o(171))}if(u.tag===1){var _=u.type;if(cr(_))return Yc(u,_,h)}return h}function kC(u){var h=u._reactInternals;if(h===void 0)throw typeof u.render=="function"?Error(o(188)):(u=Object.keys(u).join(","),Error(o(268,u)));return u=G(h),u===null?null:u.stateNode}function OC(u,h){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var _=u.retryLane;u.retryLane=_!==0&&_<h?_:h}}function Rx(u,h){OC(u,h),(u=u.alternate)&&OC(u,h)}function vV(u){return u=G(u),u===null?null:u.stateNode}function yV(){return null}return t.attemptContinuousHydration=function(u){if(u.tag===13){var h=Wr();Yi(u,134217728,h),Rx(u,134217728)}},t.attemptHydrationAtCurrentPriority=function(u){if(u.tag===13){var h=Wr(),_=ua(u);Yi(u,_,h),Rx(u,_)}},t.attemptSynchronousHydration=function(u){switch(u.tag){case 3:var h=u.stateNode;if(h.current.memoizedState.isDehydrated){var _=gh(h.pendingLanes);_!==0&&(P_(h,_|1),oi(h,ur()),!(Ht&6)&&(lu(),Ws()))}break;case 13:var b=Wr();SC(function(){return Yi(u,1,b)}),Rx(u,1)}},t.batchedUpdates=function(u,h){var _=Ht;Ht|=1;try{return u(h)}finally{Ht=_,Ht===0&&(lu(),ym&&Ws())}},t.createComponentSelector=function(u){return{$$typeof:Wm,value:u}},t.createContainer=function(u,h,_,b,M,C,W){return IC(u,h,!1,null,_,b,M,C,W)},t.createHasPseudoClassSelector=function(u){return{$$typeof:Gm,value:u}},t.createHydrationContainer=function(u,h,_,b,M,C,W,ee,he){return u=IC(_,b,!0,u,M,C,W,ee,he),u.context=LC(null),_=u.current,b=Wr(),M=ua(_),C=xo(b,M),C.callback=h??null,aa(_,C),u.current.lanes=M,vh(u,M,b),oi(u,b),u},t.createPortal=function(u,h,_){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:b==null?null:""+b,children:u,containerInfo:h,implementation:_}},t.createRoleSelector=function(u){return{$$typeof:$m,value:u}},t.createTestNameSelector=function(u){return{$$typeof:Xm,value:u}},t.createTextSelector=function(u){return{$$typeof:qm,value:u}},t.deferredUpdates=function(u){var h=Zt,_=Bn.transition;try{return Bn.transition=null,Zt=16,u()}finally{Zt=h,Bn.transition=_}},t.discreteUpdates=function(u,h,_,b,M){var C=Zt,W=Bn.transition;try{return Bn.transition=null,Zt=1,u(h,_,b,M)}finally{Zt=C,Bn.transition=W,Ht===0&&lu()}},t.findAllNodes=gx,t.findBoundingRects=function(u,h){if(!O)throw Error(o(363));h=gx(u,h),u=[];for(var _=0;_<h.length;_++)u.push(Me(h[_]));for(h=u.length-1;0<h;h--){_=u[h];for(var b=_.x,M=b+_.width,C=_.y,W=C+_.height,ee=h-1;0<=ee;ee--)if(h!==ee){var he=u[ee],Le=he.x,Je=Le+he.width,It=he.y,mt=It+he.height;if(b>=Le&&C>=It&&M<=Je&&W<=mt){u.splice(h,1);break}else if(b!==Le||_.width!==he.width||mt<C||It>W){if(!(C!==It||_.height!==he.height||Je<b||Le>M)){Le>b&&(he.width+=Le-b,he.x=b),Je<M&&(he.width=M-Le),u.splice(h,1);break}}else{It>C&&(he.height+=It-C,he.y=C),mt<W&&(he.height=W-It),u.splice(h,1);break}}}return u},t.findHostInstance=kC,t.findHostInstanceWithNoPortals=function(u){return u=H(u),u=u!==null?z(u):null,u===null?null:u.stateNode},t.findHostInstanceWithWarning=function(u){return kC(u)},t.flushControlled=function(u){var h=Ht;Ht|=1;var _=Bn.transition,b=Zt;try{Bn.transition=null,Zt=1,u()}finally{Zt=b,Bn.transition=_,Ht=h,Ht===0&&(lu(),Ws())}},t.flushPassiveEffects=kl,t.flushSync=SC,t.focusWithin=function(u,h){if(!O)throw Error(o(363));for(u=fx(u),h=_C(u,h),h=Array.from(h),u=0;u<h.length;){var _=h[u++];if(!ve(_)){if(_.tag===5&&Re(_.stateNode))return!0;for(_=_.child;_!==null;)h.push(_),_=_.sibling}}return!1},t.getCurrentUpdatePriority=function(){return Zt},t.getFindAllNodesFailureDescription=function(u,h){if(!O)throw Error(o(363));var _=0,b=[];u=[fx(u),0];for(var M=0;M<u.length;){var C=u[M++],W=u[M++],ee=h[W];if((C.tag!==5||!ve(C))&&(px(C,ee)&&(b.push(mx(ee)),W++,W>_&&(_=W)),W<h.length))for(C=C.child;C!==null;)u.push(C,W),C=C.sibling}if(_<h.length){for(u=[];_<h.length;_++)u.push(mx(h[_]));return`findAllNodes was able to match part of the selector:
  `+(b.join(" > ")+`

No matching component was found for:
  `)+u.join(" > ")}return null},t.getPublicRootInstance=function(u){if(u=u.current,!u.child)return null;switch(u.child.tag){case 5:return J(u.child.stateNode);default:return u.child.stateNode}},t.injectIntoDevTools=function(u){if(u={bundleType:u.bundleType,version:u.version,rendererPackageName:u.rendererPackageName,rendererConfig:u.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:vV,findFiberByHostInstance:u.findFiberByHostInstance||yV,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")u=!1;else{var h=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(h.isDisabled||!h.supportsFiber)u=!0;else{try{vm=h.inject(u),js=h}catch{}u=!!h.checkDCE}}return u},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(u,h,_,b){if(!O)throw Error(o(363));u=gx(u,h);var M=Fe(u,_,b).disconnect;return{disconnect:function(){M()}}},t.registerMutableSourceForHydration=function(u,h){var _=h._getVersion;_=_(h._source),u.mutableSourceEagerHydrationData==null?u.mutableSourceEagerHydrationData=[h,_]:u.mutableSourceEagerHydrationData.push(h,_)},t.runWithPriority=function(u,h){var _=Zt;try{return Zt=u,h()}finally{Zt=_}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(u,h,_,b){var M=h.current,C=Wr(),W=ua(M);return _=LC(_),h.context===null?h.context=_:h.pendingContext=_,h=xo(C,W),h.payload={element:u},b=b===void 0?null:b,b!==null&&(h.callback=b),aa(M,h),u=Yi(M,W,C),u!==null&&Sm(u,M,W),W},t};sz.exports=Gne;var $ne=sz.exports;const Xne=uE($ne);var oz={exports:{}},az={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(L,U){var V=L.length;L.push(U);e:for(;0<V;){var Y=V-1>>>1,Q=L[Y];if(0<i(Q,U))L[Y]=U,L[V]=Q,V=Y;else break e}}function t(L){return L.length===0?null:L[0]}function r(L){if(L.length===0)return null;var U=L[0],V=L.pop();if(V!==U){L[0]=V;e:for(var Y=0,Q=L.length,K=Q>>>1;Y<K;){var oe=2*(Y+1)-1,xe=L[oe],Ae=oe+1,we=L[Ae];if(0>i(xe,V))Ae<Q&&0>i(we,xe)?(L[Y]=we,L[Ae]=V,Y=Ae):(L[Y]=xe,L[oe]=V,Y=oe);else if(Ae<Q&&0>i(we,V))L[Y]=we,L[Ae]=V,Y=Ae;else break e}}return U}function i(L,U){var V=L.sortIndex-U.sortIndex;return V!==0?V:L.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,f=null,p=3,m=!1,v=!1,x=!1,y=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(L){for(var U=t(c);U!==null;){if(U.callback===null)r(c);else if(U.startTime<=L)r(c),U.sortIndex=U.expirationTime,e(l,U);else break;U=t(c)}}function E(L){if(x=!1,S(L),!v)if(t(l)!==null)v=!0,J(A);else{var U=t(c);U!==null&&te(E,U.startTime-L)}}function A(L,U){v=!1,x&&(x=!1,g(k),k=-1),m=!0;var V=p;try{for(S(U),f=t(l);f!==null&&(!(f.expirationTime>U)||L&&!H());){var Y=f.callback;if(typeof Y=="function"){f.callback=null,p=f.priorityLevel;var Q=Y(f.expirationTime<=U);U=n.unstable_now(),typeof Q=="function"?f.callback=Q:f===t(l)&&r(l),S(U)}else r(l);f=t(l)}if(f!==null)var K=!0;else{var oe=t(c);oe!==null&&te(E,oe.startTime-U),K=!1}return K}finally{f=null,p=V,m=!1}}var T=!1,P=null,k=-1,R=5,I=-1;function H(){return!(n.unstable_now()-I<R)}function G(){if(P!==null){var L=n.unstable_now();I=L;var U=!0;try{U=P(!0,L)}finally{U?re():(T=!1,P=null)}}else T=!1}var re;if(typeof w=="function")re=function(){w(G)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,Z=z.port2;z.port1.onmessage=G,re=function(){Z.postMessage(null)}}else re=function(){y(G,0)};function J(L){P=L,T||(T=!0,re())}function te(L,U){k=y(function(){L(n.unstable_now())},U)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(L){L.callback=null},n.unstable_continueExecution=function(){v||m||(v=!0,J(A))},n.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<L?Math.floor(1e3/L):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(L){switch(p){case 1:case 2:case 3:var U=3;break;default:U=p}var V=p;p=U;try{return L()}finally{p=V}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(L,U){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var V=p;p=L;try{return U()}finally{p=V}},n.unstable_scheduleCallback=function(L,U,V){var Y=n.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?Y+V:Y):V=Y,L){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=V+Q,L={id:d++,callback:U,priorityLevel:L,startTime:V,expirationTime:Q,sortIndex:-1},V>Y?(L.sortIndex=V,e(c,L),t(l)===null&&L===t(c)&&(x?(g(k),k=-1):x=!0,te(E,V-Y))):(L.sortIndex=Q,e(l,L),v||m||(v=!0,J(A))),L},n.unstable_shouldYield=H,n.unstable_wrapCallback=function(L){var U=p;return function(){var V=p;p=U;try{return L.apply(this,arguments)}finally{p=V}}}})(az);oz.exports=az;var SL=oz.exports;const GT={},qne=n=>void Object.assign(GT,n);function Yne(n,e){function t(d,{args:f=[],attach:p,...m},v){let x=`${d[0].toUpperCase()}${d.slice(1)}`,y;if(d==="primitive"){if(m.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const g=m.object;y=Fu(g,{type:d,root:v,attach:p,primitive:!0})}else{const g=GT[x];if(!g)throw new Error(`R3F: ${x} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(f))throw new Error("R3F: The args prop must be an array!");y=Fu(new g(...f),{type:d,root:v,attach:p,memoizedProps:{args:f}})}return y.__r3f.attach===void 0&&(y.isBufferGeometry?y.__r3f.attach="geometry":y.isMaterial&&(y.__r3f.attach="material")),x!=="inject"&&dS(y,m),y}function r(d,f){let p=!1;if(f){var m,v;(m=f.__r3f)!=null&&m.attach?uS(d,f,f.__r3f.attach):f.isObject3D&&d.isObject3D&&(d.add(f),p=!0),p||(v=d.__r3f)==null||v.objects.push(f),f.__r3f||Fu(f,{}),f.__r3f.parent=d,G1(f),Bu(f)}}function i(d,f,p){let m=!1;if(f){var v,x;if((v=f.__r3f)!=null&&v.attach)uS(d,f,f.__r3f.attach);else if(f.isObject3D&&d.isObject3D){f.parent=d,f.dispatchEvent({type:"added"}),d.dispatchEvent({type:"childadded",child:f});const y=d.children.filter(w=>w!==f),g=y.indexOf(p);d.children=[...y.slice(0,g),f,...y.slice(g)],m=!0}m||(x=d.__r3f)==null||x.objects.push(f),f.__r3f||Fu(f,{}),f.__r3f.parent=d,G1(f),Bu(f)}}function s(d,f,p=!1){d&&[...d].forEach(m=>o(f,m,p))}function o(d,f,p){if(f){var m,v,x;if(f.__r3f&&(f.__r3f.parent=null),(m=d.__r3f)!=null&&m.objects&&(d.__r3f.objects=d.__r3f.objects.filter(E=>E!==f)),(v=f.__r3f)!=null&&v.attach)AL(d,f,f.__r3f.attach);else if(f.isObject3D&&d.isObject3D){var y;d.remove(f),(y=f.__r3f)!=null&&y.root&&rre(ly(f),f)}const w=(x=f.__r3f)==null?void 0:x.primitive,S=!w&&(p===void 0?f.dispose!==null:p);if(!w){var g;s((g=f.__r3f)==null?void 0:g.objects,f,S),s(f.children,f,S)}if(delete f.__r3f,S&&f.dispose&&f.type!=="Scene"){const E=()=>{try{f.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?SL.unstable_scheduleCallback(SL.unstable_IdlePriority,E):E()}Bu(d)}}function a(d,f,p,m){var v;const x=(v=d.__r3f)==null?void 0:v.parent;if(!x)return;const y=t(f,p,d.__r3f.root);if(d.children){for(const g of d.children)g.__r3f&&r(y,g);d.children=d.children.filter(g=>!g.__r3f)}d.__r3f.objects.forEach(g=>r(y,g)),d.__r3f.objects=[],d.__r3f.autoRemovedBeforeAppend||o(x,d),y.parent&&(y.__r3f.autoRemovedBeforeAppend=!0),r(x,y),y.raycast&&y.__r3f.eventCount&&ly(y).getState().internal.interaction.push(y),[m,m.alternate].forEach(g=>{g!==null&&(g.stateNode=y,g.ref&&(typeof g.ref=="function"?g.ref(y):g.ref.current=y))})}const l=()=>{};return{reconciler:Xne({createInstance:t,removeChild:o,appendChild:r,appendInitialChild:r,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(d,f)=>{if(!f)return;const p=d.getState().scene;p.__r3f&&(p.__r3f.root=d,r(p,f))},removeChildFromContainer:(d,f)=>{f&&o(d.getState().scene,f)},insertInContainerBefore:(d,f,p)=>{if(!f||!p)return;const m=d.getState().scene;m.__r3f&&i(m,f,p)},getRootHostContext:()=>null,getChildHostContext:d=>d,finalizeInitialChildren(d){var f;return!!((f=d==null?void 0:d.__r3f)!=null?f:{}).handlers},prepareUpdate(d,f,p,m){var v;if(((v=d==null?void 0:d.__r3f)!=null?v:{}).primitive&&m.object&&m.object!==d)return[!0];{const{args:y=[],children:g,...w}=m,{args:S=[],children:E,...A}=p;if(!Array.isArray(y))throw new Error("R3F: the args prop must be an array!");if(y.some((P,k)=>P!==S[k]))return[!0];const T=pz(d,w,A,!0);return T.changes.length?[!1,T]:null}},commitUpdate(d,[f,p],m,v,x,y){f?a(d,m,x,y):dS(d,p)},commitMount(d,f,p,m){var v;const x=(v=d.__r3f)!=null?v:{};d.raycast&&x.handlers&&x.eventCount&&ly(d).getState().internal.interaction.push(d)},getPublicInstance:d=>d,prepareForCommit:()=>null,preparePortalMount:d=>Fu(d.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(d){var f;const{attach:p,parent:m}=(f=d.__r3f)!=null?f:{};p&&m&&AL(m,d,p),d.isObject3D&&(d.visible=!1),Bu(d)},unhideInstance(d,f){var p;const{attach:m,parent:v}=(p=d.__r3f)!=null?p:{};m&&v&&uS(v,d,m),(d.isObject3D&&f.visible==null||f.visible)&&(d.visible=!0),Bu(d)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():dd.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&gn.fun(performance.now)?performance.now:gn.fun(Date.now)?Date.now:()=>0,scheduleTimeout:gn.fun(setTimeout)?setTimeout:void 0,cancelTimeout:gn.fun(clearTimeout)?clearTimeout:void 0}),applyProps:dS}}var bL,EL;const cS=n=>"colorSpace"in n||"outputColorSpace"in n,lz=()=>{var n;return(n=GT.ColorManagement)!=null?n:null},cz=n=>n&&n.isOrthographicCamera,Kne=n=>n&&n.hasOwnProperty("current"),cm=typeof window<"u"&&((bL=window.document)!=null&&bL.createElement||((EL=window.navigator)==null?void 0:EL.product)==="ReactNative")?N.useLayoutEffect:N.useEffect;function uz(n){const e=N.useRef(n);return cm(()=>void(e.current=n),[n]),e}function Zne({set:n}){return cm(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class dz extends N.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}dz.getDerivedStateFromError=()=>({error:!0});const hz="__default",ML=new Map,Jne=n=>n&&!!n.memoized&&!!n.changes;function fz(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}const rf=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()};function ly(n){let e=n.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const gn={obj:n=>n===Object(n)&&!gn.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:r="reference",strict:i=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(gn.str(n)||gn.num(n)||gn.boo(n))return n===e;const s=gn.obj(n);if(s&&r==="reference")return n===e;const o=gn.arr(n);if(o&&t==="reference")return n===e;if((o||s)&&n===e)return!0;let a;for(a in n)if(!(a in e))return!1;if(s&&t==="shallow"&&r==="shallow"){for(a in i?e:n)if(!gn.equ(n[a],e[a],{strict:i,objects:"reference"}))return!1}else for(a in i?e:n)if(n[a]!==e[a])return!1;if(gn.und(a)){if(o&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function Qne(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function Fu(n,e){const t=n;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},n}function W1(n,e){let t=n;if(e.includes("-")){const r=e.split("-"),i=r.pop();return t=r.reduce((s,o)=>s[o],n),{target:t,key:i}}else return{target:t,key:e}}const TL=/-\d+$/;function uS(n,e,t){if(gn.str(t)){if(TL.test(t)){const s=t.replace(TL,""),{target:o,key:a}=W1(n,s);Array.isArray(o[a])||(o[a]=[])}const{target:r,key:i}=W1(n,t);e.__r3f.previousAttach=r[i],r[i]=e}else e.__r3f.previousAttach=t(n,e)}function AL(n,e,t){var r,i;if(gn.str(t)){const{target:s,key:o}=W1(n,t),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(r=e.__r3f)==null||r.previousAttach==null||r.previousAttach(n,e);(i=e.__r3f)==null||delete i.previousAttach}function pz(n,{children:e,key:t,ref:r,...i},{children:s,key:o,ref:a,...l}={},c=!1){const d=n.__r3f,f=Object.entries(i),p=[];if(c){const v=Object.keys(l);for(let x=0;x<v.length;x++)i.hasOwnProperty(v[x])||f.unshift([v[x],hz+"remove"])}f.forEach(([v,x])=>{var y;if((y=n.__r3f)!=null&&y.primitive&&v==="object"||gn.equ(x,l[v]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(v))return p.push([v,x,!0,[]]);let g=[];v.includes("-")&&(g=v.split("-")),p.push([v,x,!1,g]);for(const w in i){const S=i[w];w.startsWith(`${v}-`)&&p.push([w,S,!1,w.split("-")])}});const m={...i};return d!=null&&d.memoizedProps&&d!=null&&d.memoizedProps.args&&(m.args=d.memoizedProps.args),d!=null&&d.memoizedProps&&d!=null&&d.memoizedProps.attach&&(m.attach=d.memoizedProps.attach),{memoized:m,changes:p}}const ere=typeof process<"u"&&!1;function dS(n,e){var t;const r=n.__r3f,i=r==null?void 0:r.root,s=i==null||i.getState==null?void 0:i.getState(),{memoized:o,changes:a}=Jne(e)?e:pz(n,e),l=r==null?void 0:r.eventCount;n.__r3f&&(n.__r3f.memoizedProps=o);for(let p=0;p<a.length;p++){let[m,v,x,y]=a[p];if(cS(n)){const E="srgb",A="srgb-linear";m==="encoding"?(m="colorSpace",v=v===3001?E:A):m==="outputEncoding"&&(m="outputColorSpace",v=v===3001?E:A)}let g=n,w=g[m];if(y.length&&(w=y.reduce((S,E)=>S[E],n),!(w&&w.set))){const[S,...E]=y.reverse();g=E.reverse().reduce((A,T)=>A[T],n),m=S}if(v===hz+"remove")if(g.constructor){let S=ML.get(g.constructor);S||(S=new g.constructor,ML.set(g.constructor,S)),v=S[m]}else v=0;if(x&&r)v?r.handlers[m]=v:delete r.handlers[m],r.eventCount=Object.keys(r.handlers).length;else if(w&&w.set&&(w.copy||w instanceof Tc)){if(Array.isArray(v))w.fromArray?w.fromArray(v):w.set(...v);else if(w.copy&&v&&v.constructor&&(ere?w.constructor.name===v.constructor.name:w.constructor===v.constructor))w.copy(v);else if(v!==void 0){var c;const S=(c=w)==null?void 0:c.isColor;!S&&w.setScalar?w.setScalar(v):w instanceof Tc&&v instanceof Tc?w.mask=v.mask:w.set(v),!lz()&&s&&!s.linear&&S&&w.convertSRGBToLinear()}}else{var d;if(g[m]=v,(d=g[m])!=null&&d.isTexture&&g[m].format===Zr&&g[m].type===co&&s){const S=g[m];cS(S)&&cS(s.gl)?S.colorSpace=s.gl.outputColorSpace:S.encoding=s.gl.outputEncoding}}Bu(n)}if(r&&r.parent&&n.raycast&&l!==r.eventCount){const p=ly(n).getState().internal,m=p.interaction.indexOf(n);m>-1&&p.interaction.splice(m,1),r.eventCount&&p.interaction.push(n)}return!(a.length===1&&a[0][0]==="onUpdate")&&a.length&&(t=n.__r3f)!=null&&t.parent&&G1(n),n}function Bu(n){var e,t;const r=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();r&&r.internal.frames===0&&r.invalidate()}function G1(n){n.onUpdate==null||n.onUpdate(n)}function tre(n,e){n.manual||(cz(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function Mv(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function nre(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return dd.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return dd.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return dd.ContinuousEventPriority;default:return dd.DefaultEventPriority}}function mz(n,e,t,r){const i=t.get(e);i&&(t.delete(e),t.size===0&&(n.delete(r),i.target.releasePointerCapture(r)))}function rre(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(r=>r!==e),t.initialHits=t.initialHits.filter(r=>r!==e),t.hovered.forEach((r,i)=>{(r.eventObject===e||r.object===e)&&t.hovered.delete(i)}),t.capturedMap.forEach((r,i)=>{mz(t.capturedMap,e,r,i)})}function ire(n){function e(l){const{internal:c}=n.getState(),d=l.offsetX-c.initialClick[0],f=l.offsetY-c.initialClick[1];return Math.round(Math.sqrt(d*d+f*f))}function t(l){return l.filter(c=>["Move","Over","Enter","Out","Leave"].some(d=>{var f;return(f=c.__r3f)==null?void 0:f.handlers["onPointer"+d]}))}function r(l,c){const d=n.getState(),f=new Set,p=[],m=c?c(d.internal.interaction):d.internal.interaction;for(let g=0;g<m.length;g++){const w=rf(m[g]);w&&(w.raycaster.camera=void 0)}d.previousRoot||d.events.compute==null||d.events.compute(l,d);function v(g){const w=rf(g);if(!w||!w.events.enabled||w.raycaster.camera===null)return[];if(w.raycaster.camera===void 0){var S;w.events.compute==null||w.events.compute(l,w,(S=w.previousRoot)==null?void 0:S.getState()),w.raycaster.camera===void 0&&(w.raycaster.camera=null)}return w.raycaster.camera?w.raycaster.intersectObject(g,!0):[]}let x=m.flatMap(v).sort((g,w)=>{const S=rf(g.object),E=rf(w.object);return!S||!E?g.distance-w.distance:E.events.priority-S.events.priority||g.distance-w.distance}).filter(g=>{const w=Mv(g);return f.has(w)?!1:(f.add(w),!0)});d.events.filter&&(x=d.events.filter(x,d));for(const g of x){let w=g.object;for(;w;){var y;(y=w.__r3f)!=null&&y.eventCount&&p.push({...g,eventObject:w}),w=w.parent}}if("pointerId"in l&&d.internal.capturedMap.has(l.pointerId))for(let g of d.internal.capturedMap.get(l.pointerId).values())f.has(Mv(g.intersection))||p.push(g.intersection);return p}function i(l,c,d,f){const p=n.getState();if(l.length){const m={stopped:!1};for(const v of l){const x=rf(v.object)||p,{raycaster:y,pointer:g,camera:w,internal:S}=x,E=new j(g.x,g.y,0).unproject(w),A=I=>{var H,G;return(H=(G=S.capturedMap.get(I))==null?void 0:G.has(v.eventObject))!=null?H:!1},T=I=>{const H={intersection:v,target:c.target};S.capturedMap.has(I)?S.capturedMap.get(I).set(v.eventObject,H):S.capturedMap.set(I,new Map([[v.eventObject,H]])),c.target.setPointerCapture(I)},P=I=>{const H=S.capturedMap.get(I);H&&mz(S.capturedMap,v.eventObject,H,I)};let k={};for(let I in c){let H=c[I];typeof H!="function"&&(k[I]=H)}let R={...v,...k,pointer:g,intersections:l,stopped:m.stopped,delta:d,unprojectedPoint:E,ray:y.ray,camera:w,stopPropagation(){const I="pointerId"in c&&S.capturedMap.get(c.pointerId);if((!I||I.has(v.eventObject))&&(R.stopped=m.stopped=!0,S.hovered.size&&Array.from(S.hovered.values()).find(H=>H.eventObject===v.eventObject))){const H=l.slice(0,l.indexOf(v));s([...H,v])}},target:{hasPointerCapture:A,setPointerCapture:T,releasePointerCapture:P},currentTarget:{hasPointerCapture:A,setPointerCapture:T,releasePointerCapture:P},nativeEvent:c};if(f(R),m.stopped===!0)break}}return l}function s(l){const{internal:c}=n.getState();for(const d of c.hovered.values())if(!l.length||!l.find(f=>f.object===d.object&&f.index===d.index&&f.instanceId===d.instanceId)){const p=d.eventObject.__r3f,m=p==null?void 0:p.handlers;if(c.hovered.delete(Mv(d)),p!=null&&p.eventCount){const v={...d,intersections:l};m.onPointerOut==null||m.onPointerOut(v),m.onPointerLeave==null||m.onPointerLeave(v)}}}function o(l,c){for(let d=0;d<c.length;d++){const f=c[d].__r3f;f==null||f.handlers.onPointerMissed==null||f.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return c=>{const{internal:d}=n.getState();"pointerId"in c&&d.capturedMap.has(c.pointerId)&&requestAnimationFrame(()=>{d.capturedMap.has(c.pointerId)&&(d.capturedMap.delete(c.pointerId),s([]))})}}return function(d){const{onPointerMissed:f,internal:p}=n.getState();p.lastEvent.current=d;const m=l==="onPointerMove",v=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",y=r(d,m?t:void 0),g=v?e(d):0;l==="onPointerDown"&&(p.initialClick=[d.offsetX,d.offsetY],p.initialHits=y.map(S=>S.eventObject)),v&&!y.length&&g<=2&&(o(d,p.interaction),f&&f(d)),m&&s(y);function w(S){const E=S.eventObject,A=E.__r3f,T=A==null?void 0:A.handlers;if(A!=null&&A.eventCount)if(m){if(T.onPointerOver||T.onPointerEnter||T.onPointerOut||T.onPointerLeave){const P=Mv(S),k=p.hovered.get(P);k?k.stopped&&S.stopPropagation():(p.hovered.set(P,S),T.onPointerOver==null||T.onPointerOver(S),T.onPointerEnter==null||T.onPointerEnter(S))}T.onPointerMove==null||T.onPointerMove(S)}else{const P=T[l];P?(!v||p.initialHits.includes(E))&&(o(d,p.interaction.filter(k=>!p.initialHits.includes(k))),P(S)):v&&p.initialHits.includes(E)&&o(d,p.interaction.filter(k=>!p.initialHits.includes(k)))}}i(y,d,g,w)}}return{handlePointer:a}}const gz=n=>!!(n!=null&&n.render),vz=N.createContext(null),sre=(n,e)=>{const t=jne((a,l)=>{const c=new j,d=new j,f=new j;function p(g=l().camera,w=d,S=l().size){const{width:E,height:A,top:T,left:P}=S,k=E/A;w.isVector3?f.copy(w):f.set(...w);const R=g.getWorldPosition(c).distanceTo(f);if(cz(g))return{width:E/g.zoom,height:A/g.zoom,top:T,left:P,factor:1,distance:R,aspect:k};{const I=g.fov*Math.PI/180,H=2*Math.tan(I/2)*R,G=H*(E/A);return{width:G,height:H,top:T,left:P,factor:E/G,distance:R,aspect:k}}}let m;const v=g=>a(w=>({performance:{...w.performance,current:g}})),x=new me;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(g=1)=>n(l(),g),advance:(g,w)=>e(g,w,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new VT,pointer:x,mouse:x,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const g=l();m&&clearTimeout(m),g.performance.current!==g.performance.min&&v(g.performance.min),m=setTimeout(()=>v(l().performance.max),g.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:p},setEvents:g=>a(w=>({...w,events:{...w.events,...g}})),setSize:(g,w,S,E,A)=>{const T=l().camera,P={width:g,height:w,top:E||0,left:A||0,updateStyle:S};a(k=>({size:P,viewport:{...k.viewport,...p(T,d,P)}}))},setDpr:g=>a(w=>{const S=fz(g);return{viewport:{...w.viewport,dpr:S,initialDpr:w.viewport.initialDpr||S}}}),setFrameloop:(g="always")=>{const w=l().clock;w.stop(),w.elapsedTime=0,g!=="never"&&(w.start(),w.elapsedTime=0),a(()=>({frameloop:g}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:N.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(g,w,S)=>{const E=l().internal;return E.priority=E.priority+(w>0?1:0),E.subscribers.push({ref:g,priority:w,store:S}),E.subscribers=E.subscribers.sort((A,T)=>A.priority-T.priority),()=>{const A=l().internal;A!=null&&A.subscribers&&(A.priority=A.priority-(w>0?1:0),A.subscribers=A.subscribers.filter(T=>T.ref!==g))}}}}}),r=t.getState();let i=r.size,s=r.viewport.dpr,o=r.camera;return t.subscribe(()=>{const{camera:a,size:l,viewport:c,gl:d,set:f}=t.getState();if(l.width!==i.width||l.height!==i.height||c.dpr!==s){var p;i=l,s=c.dpr,tre(a,l),d.setPixelRatio(c.dpr);const m=(p=l.updateStyle)!=null?p:typeof HTMLCanvasElement<"u"&&d.domElement instanceof HTMLCanvasElement;d.setSize(l.width,l.height,m)}a!==o&&(o=a,f(m=>({viewport:{...m.viewport,...m.viewport.getCurrentViewport(a)}})))}),t.subscribe(a=>n(a)),t};let Tv,ore=new Set,are=new Set,lre=new Set;function hS(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function sf(n,e){switch(n){case"before":return hS(ore,e);case"after":return hS(are,e);case"tail":return hS(lre,e)}}let fS,pS;function mS(n,e,t){let r=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(r=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),fS=e.internal.subscribers,Tv=0;Tv<fS.length;Tv++)pS=fS[Tv],pS.ref.current(pS.store.getState(),r,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function cre(n){let e=!1,t=!1,r,i,s;function o(c){i=requestAnimationFrame(o),e=!0,r=0,sf("before",c),t=!0;for(const f of n.values()){var d;s=f.store.getState(),s.internal.active&&(s.frameloop==="always"||s.internal.frames>0)&&!((d=s.gl.xr)!=null&&d.isPresenting)&&(r+=mS(c,s))}if(t=!1,sf("after",c),r===0)return sf("tail",c),e=!1,cancelAnimationFrame(i)}function a(c,d=1){var f;if(!c)return n.forEach(p=>a(p.store.getState(),d));(f=c.gl.xr)!=null&&f.isPresenting||!c.internal.active||c.frameloop==="never"||(d>1?c.internal.frames=Math.min(60,c.internal.frames+d):t?c.internal.frames=2:c.internal.frames=1,e||(e=!0,requestAnimationFrame(o)))}function l(c,d=!0,f,p){if(d&&sf("before",c),f)mS(c,f,p);else for(const m of n.values())mS(c,m.store.getState());d&&sf("after",c)}return{loop:o,invalidate:a,advance:l}}function yz(){const n=N.useContext(vz);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function Ea(n=t=>t,e){return yz()(n,e)}function $T(n,e=0){const t=yz(),r=t.getState().internal.subscribe,i=uz(n);return cm(()=>r(i,e,t),[e,r,t]),null}const qd=new Map,{invalidate:CL,advance:PL}=cre(qd),{reconciler:t0,applyProps:Iu}=Yne(qd,nre),Lu={objects:"shallow",strict:!1},ure=(n,e)=>{const t=typeof n=="function"?n(e):n;return gz(t)?t:new ST({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function dre(n,e){const t=typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement;if(e){const{width:r,height:i,top:s,left:o,updateStyle:a=t}=e;return{width:r,height:i,top:s,left:o,updateStyle:a}}else if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:r,height:i,top:s,left:o}=n.parentElement.getBoundingClientRect();return{width:r,height:i,top:s,left:o,updateStyle:t}}else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0,updateStyle:t};return{width:0,height:0,top:0,left:0}}function hre(n){const e=qd.get(n),t=e==null?void 0:e.fiber,r=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const i=typeof reportError=="function"?reportError:console.error,s=r||sre(CL,PL),o=t||t0.createContainer(s,dd.ConcurrentRoot,null,!1,null,"",i,null);e||qd.set(n,{fiber:o,store:s});let a,l=!1,c;return{configure(d={}){let{gl:f,size:p,scene:m,events:v,onCreated:x,shadows:y=!1,linear:g=!1,flat:w=!1,legacy:S=!1,orthographic:E=!1,frameloop:A="always",dpr:T=[1,2],performance:P,raycaster:k,camera:R,onPointerMissed:I}=d,H=s.getState(),G=H.gl;H.gl||H.set({gl:G=ure(f,n)});let re=H.raycaster;re||H.set({raycaster:re=new nz});const{params:z,...Z}=k||{};if(gn.equ(Z,re,Lu)||Iu(re,{...Z}),gn.equ(z,re.params,Lu)||Iu(re,{params:{...re.params,...z}}),!H.camera||H.camera===c&&!gn.equ(c,R,Lu)){c=R;const V=R instanceof tm,Y=V?R:E?new tl(0,0,0,0,.1,1e3):new Gn(75,0,.1,1e3);V||(Y.position.z=5,R&&(Iu(Y,R),("aspect"in R||"left"in R||"right"in R||"bottom"in R||"top"in R)&&(Y.manual=!0,Y.updateProjectionMatrix())),!H.camera&&!(R!=null&&R.rotation)&&Y.lookAt(0,0,0)),H.set({camera:Y}),re.camera=Y}if(!H.scene){let V;m!=null&&m.isScene?V=m:(V=new bT,m&&Iu(V,m)),H.set({scene:Fu(V)})}if(!H.xr){var J;const V=(K,oe)=>{const xe=s.getState();xe.frameloop!=="never"&&PL(K,!0,xe,oe)},Y=()=>{const K=s.getState();K.gl.xr.enabled=K.gl.xr.isPresenting,K.gl.xr.setAnimationLoop(K.gl.xr.isPresenting?V:null),K.gl.xr.isPresenting||CL(K)},Q={connect(){const K=s.getState().gl;K.xr.addEventListener("sessionstart",Y),K.xr.addEventListener("sessionend",Y)},disconnect(){const K=s.getState().gl;K.xr.removeEventListener("sessionstart",Y),K.xr.removeEventListener("sessionend",Y)}};typeof((J=G.xr)==null?void 0:J.addEventListener)=="function"&&Q.connect(),H.set({xr:Q})}if(G.shadowMap){const V=G.shadowMap.enabled,Y=G.shadowMap.type;if(G.shadowMap.enabled=!!y,gn.boo(y))G.shadowMap.type=Rf;else if(gn.str(y)){var te;const Q={basic:YU,percentage:Y0,soft:Rf,variance:ws};G.shadowMap.type=(te=Q[y])!=null?te:Rf}else gn.obj(y)&&Object.assign(G.shadowMap,y);(V!==G.shadowMap.enabled||Y!==G.shadowMap.type)&&(G.shadowMap.needsUpdate=!0)}const L=lz();L&&("enabled"in L?L.enabled=!S:"legacyMode"in L&&(L.legacyMode=S)),l||Iu(G,{outputEncoding:g?3e3:3001,toneMapping:w?lo:tT}),H.legacy!==S&&H.set(()=>({legacy:S})),H.linear!==g&&H.set(()=>({linear:g})),H.flat!==w&&H.set(()=>({flat:w})),f&&!gn.fun(f)&&!gz(f)&&!gn.equ(f,G,Lu)&&Iu(G,f),v&&!H.events.handlers&&H.set({events:v(s)});const U=dre(n,p);return gn.equ(U,H.size,Lu)||H.setSize(U.width,U.height,U.updateStyle,U.top,U.left),T&&H.viewport.dpr!==fz(T)&&H.setDpr(T),H.frameloop!==A&&H.setFrameloop(A),H.onPointerMissed||H.set({onPointerMissed:I}),P&&!gn.equ(P,H.performance,Lu)&&H.set(V=>({performance:{...V.performance,...P}})),a=x,l=!0,this},render(d){return l||this.configure(),t0.updateContainer(D.jsx(fre,{store:s,children:d,onCreated:a,rootElement:n}),o,null,()=>{}),s},unmount(){_z(n)}}}function fre({store:n,children:e,onCreated:t,rootElement:r}){return cm(()=>{const i=n.getState();i.set(s=>({internal:{...s.internal,active:!0}})),t&&t(i),n.getState().events.connected||i.events.connect==null||i.events.connect(r)},[]),D.jsx(vz.Provider,{value:n,children:e})}function _z(n,e){const t=qd.get(n),r=t==null?void 0:t.fiber;if(r){const i=t==null?void 0:t.store.getState();i&&(i.internal.active=!1),t0.updateContainer(null,r,null,()=>{i&&setTimeout(()=>{try{var s,o,a,l;i.events.disconnect==null||i.events.disconnect(),(s=i.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=i.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=i.gl)!=null&&l.xr&&i.xr.disconnect(),Qne(i),qd.delete(n)}catch{}},500)})}}t0.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:N.version});const gS={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function pre(n){const{handlePointer:e}=ire(n);return{priority:1,enabled:!0,compute(t,r,i){r.pointer.set(t.offsetX/r.size.width*2-1,-(t.offsetY/r.size.height)*2+1),r.raycaster.setFromCamera(r.pointer,r.camera)},connected:void 0,handlers:Object.keys(gS).reduce((t,r)=>({...t,[r]:e(r)}),{}),update:()=>{var t;const{events:r,internal:i}=n.getState();(t=i.lastEvent)!=null&&t.current&&r.handlers&&r.handlers.onPointerMove(i.lastEvent.current)},connect:t=>{var r;const{set:i,events:s}=n.getState();s.disconnect==null||s.disconnect(),i(o=>({events:{...o.events,connected:t}})),Object.entries((r=s.handlers)!=null?r:[]).forEach(([o,a])=>{const[l,c]=gS[o];t.addEventListener(l,a,{passive:c})})},disconnect:()=>{const{set:t,events:r}=n.getState();if(r.connected){var i;Object.entries((i=r.handlers)!=null?i:[]).forEach(([s,o])=>{if(r&&r.connected instanceof HTMLElement){const[a]=gS[s];r.connected.removeEventListener(a,o)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}function RL(n,e){let t;return(...r)=>{window.clearTimeout(t),t=window.setTimeout(()=>n(...r),e)}}function mre({debounce:n,scroll:e,polyfill:t,offsetSize:r}={debounce:0,scroll:!1,offsetSize:!1}){const i=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!i)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,o]=N.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),a=N.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),l=n?typeof n=="number"?n:n.scroll:null,c=n?typeof n=="number"?n:n.resize:null,d=N.useRef(!1);N.useEffect(()=>(d.current=!0,()=>void(d.current=!1)));const[f,p,m]=N.useMemo(()=>{const g=()=>{if(!a.current.element)return;const{left:w,top:S,width:E,height:A,bottom:T,right:P,x:k,y:R}=a.current.element.getBoundingClientRect(),I={left:w,top:S,width:E,height:A,bottom:T,right:P,x:k,y:R};a.current.element instanceof HTMLElement&&r&&(I.height=a.current.element.offsetHeight,I.width=a.current.element.offsetWidth),Object.freeze(I),d.current&&!_re(a.current.lastBounds,I)&&o(a.current.lastBounds=I)};return[g,c?RL(g,c):g,l?RL(g,l):g]},[o,r,l,c]);function v(){a.current.scrollContainers&&(a.current.scrollContainers.forEach(g=>g.removeEventListener("scroll",m,!0)),a.current.scrollContainers=null),a.current.resizeObserver&&(a.current.resizeObserver.disconnect(),a.current.resizeObserver=null),a.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",a.current.orientationHandler))}function x(){a.current.element&&(a.current.resizeObserver=new i(m),a.current.resizeObserver.observe(a.current.element),e&&a.current.scrollContainers&&a.current.scrollContainers.forEach(g=>g.addEventListener("scroll",m,{capture:!0,passive:!0})),a.current.orientationHandler=()=>{m()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",a.current.orientationHandler))}const y=g=>{!g||g===a.current.element||(v(),a.current.element=g,a.current.scrollContainers=xz(g),x())};return vre(m,!!e),gre(p),N.useEffect(()=>{v(),x()},[e,m,p]),N.useEffect(()=>v,[]),[y,s,f]}function gre(n){N.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function vre(n,e){N.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function xz(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:r,overflowY:i}=window.getComputedStyle(n);return[t,r,i].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...xz(n.parentElement)]}const yre=["x","y","top","bottom","left","right","width","height"],_re=(n,e)=>yre.every(t=>n[t]===e[t]);var xre=Object.defineProperty,wre=Object.defineProperties,Sre=Object.getOwnPropertyDescriptors,IL=Object.getOwnPropertySymbols,bre=Object.prototype.hasOwnProperty,Ere=Object.prototype.propertyIsEnumerable,LL=(n,e,t)=>e in n?xre(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,kL=(n,e)=>{for(var t in e||(e={}))bre.call(e,t)&&LL(n,t,e[t]);if(IL)for(var t of IL(e))Ere.call(e,t)&&LL(n,t,e[t]);return n},Mre=(n,e)=>wre(n,Sre(e)),OL,NL;typeof window<"u"&&((OL=window.document)!=null&&OL.createElement||((NL=window.navigator)==null?void 0:NL.product)==="ReactNative")?N.useLayoutEffect:N.useEffect;function wz(n,e,t){if(!n)return;if(t(n)===!0)return n;let r=n.child;for(;r;){const i=wz(r,e,t);if(i)return i;r=r.sibling}}function Sz(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const DL=console.error;console.error=function(){const n=[...arguments].join("");if(n!=null&&n.startsWith("Warning:")&&n.includes("useContext")){console.error=DL;return}return DL.apply(this,arguments)};const XT=Sz(N.createContext(null));class bz extends N.Component{render(){return N.createElement(XT.Provider,{value:this._reactInternals},this.props.children)}}function Tre(){const n=N.useContext(XT);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=N.useId();return N.useMemo(()=>{for(const r of[n,n==null?void 0:n.alternate]){if(!r)continue;const i=wz(r,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(i)return i}},[n,e])}function Are(){const n=Tre(),[e]=N.useState(()=>new Map);e.clear();let t=n;for(;t;){if(t.type&&typeof t.type=="object"){const i=t.type._context===void 0&&t.type.Provider===t.type?t.type:t.type._context;i&&i!==XT&&!e.has(i)&&e.set(i,N.useContext(Sz(i)))}t=t.return}return e}function Cre(){const n=Are();return N.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>r=>N.createElement(e,null,N.createElement(t.Provider,Mre(kL({},r),{value:n.get(t)}))),e=>N.createElement(bz,kL({},e))),[n])}const Pre=N.forwardRef(function({children:e,fallback:t,resize:r,style:i,gl:s,events:o=pre,eventSource:a,eventPrefix:l,shadows:c,linear:d,flat:f,legacy:p,orthographic:m,frameloop:v,dpr:x,performance:y,raycaster:g,camera:w,scene:S,onPointerMissed:E,onCreated:A,...T},P){N.useMemo(()=>qne(Bne),[]);const k=Cre(),[R,I]=mre({scroll:!0,debounce:{scroll:50,resize:0},...r}),H=N.useRef(null),G=N.useRef(null);N.useImperativeHandle(P,()=>H.current);const re=uz(E),[z,Z]=N.useState(!1),[J,te]=N.useState(!1);if(z)throw z;if(J)throw J;const L=N.useRef(null);cm(()=>{const V=H.current;I.width>0&&I.height>0&&V&&(L.current||(L.current=hre(V)),L.current.configure({gl:s,events:o,shadows:c,linear:d,flat:f,legacy:p,orthographic:m,frameloop:v,dpr:x,performance:y,raycaster:g,camera:w,scene:S,size:I,onPointerMissed:(...Y)=>re.current==null?void 0:re.current(...Y),onCreated:Y=>{Y.events.connect==null||Y.events.connect(a?Kne(a)?a.current:a:G.current),l&&Y.setEvents({compute:(Q,K)=>{const oe=Q[l+"X"],xe=Q[l+"Y"];K.pointer.set(oe/K.size.width*2-1,-(xe/K.size.height)*2+1),K.raycaster.setFromCamera(K.pointer,K.camera)}}),A==null||A(Y)}}),L.current.render(D.jsx(k,{children:D.jsx(dz,{set:te,children:D.jsx(N.Suspense,{fallback:D.jsx(Zne,{set:Z}),children:e??null})})})))}),N.useEffect(()=>{const V=H.current;if(V)return()=>_z(V)},[]);const U=a?"none":"auto";return D.jsx("div",{ref:G,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:U,...i},...T,children:D.jsx("div",{ref:R,style:{width:"100%",height:"100%"},children:D.jsx("canvas",{ref:H,style:{display:"block"},children:t})})})}),Rre=N.forwardRef(function(e,t){return D.jsx(bz,{children:D.jsx(Pre,{...e,ref:t})})});function n0(){return n0=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},n0.apply(null,arguments)}var Ire=Object.defineProperty,Lre=(n,e,t)=>e in n?Ire(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,kre=(n,e,t)=>(Lre(n,e+"",t),t);class Ore{constructor(){kre(this,"_listeners")}addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}}var Nre=Object.defineProperty,Dre=(n,e,t)=>e in n?Nre(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,gt=(n,e,t)=>(Dre(n,typeof e!="symbol"?e+"":e,t),t);const Av=new jc,UL=new Do,Ure=Math.cos(70*(Math.PI/180)),FL=(n,e)=>(n%e+e)%e;let Fre=class extends Ore{constructor(e,t){super(),gt(this,"object"),gt(this,"domElement"),gt(this,"enabled",!0),gt(this,"target",new j),gt(this,"minDistance",0),gt(this,"maxDistance",1/0),gt(this,"minZoom",0),gt(this,"maxZoom",1/0),gt(this,"minPolarAngle",0),gt(this,"maxPolarAngle",Math.PI),gt(this,"minAzimuthAngle",-1/0),gt(this,"maxAzimuthAngle",1/0),gt(this,"enableDamping",!1),gt(this,"dampingFactor",.05),gt(this,"enableZoom",!0),gt(this,"zoomSpeed",1),gt(this,"enableRotate",!0),gt(this,"rotateSpeed",1),gt(this,"enablePan",!0),gt(this,"panSpeed",1),gt(this,"screenSpacePanning",!0),gt(this,"keyPanSpeed",7),gt(this,"zoomToCursor",!1),gt(this,"autoRotate",!1),gt(this,"autoRotateSpeed",2),gt(this,"reverseOrbit",!1),gt(this,"reverseHorizontalOrbit",!1),gt(this,"reverseVerticalOrbit",!1),gt(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),gt(this,"mouseButtons",{LEFT:Jl.ROTATE,MIDDLE:Jl.DOLLY,RIGHT:Jl.PAN}),gt(this,"touches",{ONE:Ql.ROTATE,TWO:Ql.DOLLY_PAN}),gt(this,"target0"),gt(this,"position0"),gt(this,"zoom0"),gt(this,"_domElementKeyEvents",null),gt(this,"getPolarAngle"),gt(this,"getAzimuthalAngle"),gt(this,"setPolarAngle"),gt(this,"setAzimuthalAngle"),gt(this,"getDistance"),gt(this,"getZoomScale"),gt(this,"listenToKeyEvents"),gt(this,"stopListenToKeyEvents"),gt(this,"saveState"),gt(this,"reset"),gt(this,"update"),gt(this,"connect"),gt(this,"dispose"),gt(this,"dollyIn"),gt(this,"dollyOut"),gt(this,"getScale"),gt(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>d.phi,this.getAzimuthalAngle=()=>d.theta,this.setPolarAngle=X=>{let ye=FL(X,2*Math.PI),Ve=d.phi;Ve<0&&(Ve+=2*Math.PI),ye<0&&(ye+=2*Math.PI);let Be=Math.abs(ye-Ve);2*Math.PI-Be<Be&&(ye<Ve?ye+=2*Math.PI:Ve+=2*Math.PI),f.phi=ye-Ve,r.update()},this.setAzimuthalAngle=X=>{let ye=FL(X,2*Math.PI),Ve=d.theta;Ve<0&&(Ve+=2*Math.PI),ye<0&&(ye+=2*Math.PI);let Be=Math.abs(ye-Ve);2*Math.PI-Be<Be&&(ye<Ve?ye+=2*Math.PI:Ve+=2*Math.PI),f.theta=ye-Ve,r.update()},this.getDistance=()=>r.object.position.distanceTo(r.target),this.listenToKeyEvents=X=>{X.addEventListener("keydown",ut),this._domElementKeyEvents=X},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",ut),this._domElementKeyEvents=null},this.saveState=()=>{r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object.zoom},this.reset=()=>{r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.zoom=r.zoom0,r.object.updateProjectionMatrix(),r.dispatchEvent(i),r.update(),l=a.NONE},this.update=(()=>{const X=new j,ye=new j(0,1,0),Ve=new Br().setFromUnitVectors(e.up,ye),Be=Ve.clone().invert(),Te=new j,q=new Br,Ie=2*Math.PI;return function(){const pt=r.object.position;Ve.setFromUnitVectors(e.up,ye),Be.copy(Ve).invert(),X.copy(pt).sub(r.target),X.applyQuaternion(Ve),d.setFromVector3(X),r.autoRotate&&l===a.NONE&&z(G()),r.enableDamping?(d.theta+=f.theta*r.dampingFactor,d.phi+=f.phi*r.dampingFactor):(d.theta+=f.theta,d.phi+=f.phi);let Ee=r.minAzimuthAngle,qe=r.maxAzimuthAngle;isFinite(Ee)&&isFinite(qe)&&(Ee<-Math.PI?Ee+=Ie:Ee>Math.PI&&(Ee-=Ie),qe<-Math.PI?qe+=Ie:qe>Math.PI&&(qe-=Ie),Ee<=qe?d.theta=Math.max(Ee,Math.min(qe,d.theta)):d.theta=d.theta>(Ee+qe)/2?Math.max(Ee,d.theta):Math.min(qe,d.theta)),d.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,d.phi)),d.makeSafe(),r.enableDamping===!0?r.target.addScaledVector(m,r.dampingFactor):r.target.add(m),r.zoomToCursor&&R||r.object.isOrthographicCamera?d.radius=K(d.radius):d.radius=K(d.radius*p),X.setFromSpherical(d),X.applyQuaternion(Be),pt.copy(r.target).add(X),r.object.matrixAutoUpdate||r.object.updateMatrix(),r.object.lookAt(r.target),r.enableDamping===!0?(f.theta*=1-r.dampingFactor,f.phi*=1-r.dampingFactor,m.multiplyScalar(1-r.dampingFactor)):(f.set(0,0,0),m.set(0,0,0));let it=!1;if(r.zoomToCursor&&R){let Vt=null;if(r.object instanceof Gn&&r.object.isPerspectiveCamera){const Xt=X.length();Vt=K(Xt*p);const Ot=Xt-Vt;r.object.position.addScaledVector(P,Ot),r.object.updateMatrixWorld()}else if(r.object.isOrthographicCamera){const Xt=new j(k.x,k.y,0);Xt.unproject(r.object),r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/p)),r.object.updateProjectionMatrix(),it=!0;const Ot=new j(k.x,k.y,0);Ot.unproject(r.object),r.object.position.sub(Ot).add(Xt),r.object.updateMatrixWorld(),Vt=X.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),r.zoomToCursor=!1;Vt!==null&&(r.screenSpacePanning?r.target.set(0,0,-1).transformDirection(r.object.matrix).multiplyScalar(Vt).add(r.object.position):(Av.origin.copy(r.object.position),Av.direction.set(0,0,-1).transformDirection(r.object.matrix),Math.abs(r.object.up.dot(Av.direction))<Ure?e.lookAt(r.target):(UL.setFromNormalAndCoplanarPoint(r.object.up,r.target),Av.intersectPlane(UL,r.target))))}else r.object instanceof tl&&r.object.isOrthographicCamera&&(it=p!==1,it&&(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/p)),r.object.updateProjectionMatrix()));return p=1,R=!1,it||Te.distanceToSquared(r.object.position)>c||8*(1-q.dot(r.object.quaternion))>c?(r.dispatchEvent(i),Te.copy(r.object.position),q.copy(r.object.quaternion),it=!1,!0):!1}})(),this.connect=X=>{r.domElement=X,r.domElement.style.touchAction="none",r.domElement.addEventListener("contextmenu",Wt),r.domElement.addEventListener("pointerdown",Me),r.domElement.addEventListener("pointercancel",ve),r.domElement.addEventListener("wheel",Fe)},this.dispose=()=>{var X,ye,Ve,Be,Te,q;r.domElement&&(r.domElement.style.touchAction="auto"),(X=r.domElement)==null||X.removeEventListener("contextmenu",Wt),(ye=r.domElement)==null||ye.removeEventListener("pointerdown",Me),(Ve=r.domElement)==null||Ve.removeEventListener("pointercancel",ve),(Be=r.domElement)==null||Be.removeEventListener("wheel",Fe),(Te=r.domElement)==null||Te.ownerDocument.removeEventListener("pointermove",_e),(q=r.domElement)==null||q.ownerDocument.removeEventListener("pointerup",ve),r._domElementKeyEvents!==null&&r._domElementKeyEvents.removeEventListener("keydown",ut)};const r=this,i={type:"change"},s={type:"start"},o={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=a.NONE;const c=1e-6,d=new H1,f=new H1;let p=1;const m=new j,v=new me,x=new me,y=new me,g=new me,w=new me,S=new me,E=new me,A=new me,T=new me,P=new j,k=new me;let R=!1;const I=[],H={};function G(){return 2*Math.PI/60/60*r.autoRotateSpeed}function re(){return Math.pow(.95,r.zoomSpeed)}function z(X){r.reverseOrbit||r.reverseHorizontalOrbit?f.theta+=X:f.theta-=X}function Z(X){r.reverseOrbit||r.reverseVerticalOrbit?f.phi+=X:f.phi-=X}const J=(()=>{const X=new j;return function(Ve,Be){X.setFromMatrixColumn(Be,0),X.multiplyScalar(-Ve),m.add(X)}})(),te=(()=>{const X=new j;return function(Ve,Be){r.screenSpacePanning===!0?X.setFromMatrixColumn(Be,1):(X.setFromMatrixColumn(Be,0),X.crossVectors(r.object.up,X)),X.multiplyScalar(Ve),m.add(X)}})(),L=(()=>{const X=new j;return function(Ve,Be){const Te=r.domElement;if(Te&&r.object instanceof Gn&&r.object.isPerspectiveCamera){const q=r.object.position;X.copy(q).sub(r.target);let Ie=X.length();Ie*=Math.tan(r.object.fov/2*Math.PI/180),J(2*Ve*Ie/Te.clientHeight,r.object.matrix),te(2*Be*Ie/Te.clientHeight,r.object.matrix)}else Te&&r.object instanceof tl&&r.object.isOrthographicCamera?(J(Ve*(r.object.right-r.object.left)/r.object.zoom/Te.clientWidth,r.object.matrix),te(Be*(r.object.top-r.object.bottom)/r.object.zoom/Te.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}})();function U(X){r.object instanceof Gn&&r.object.isPerspectiveCamera||r.object instanceof tl&&r.object.isOrthographicCamera?p=X:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function V(X){U(p/X)}function Y(X){U(p*X)}function Q(X){if(!r.zoomToCursor||!r.domElement)return;R=!0;const ye=r.domElement.getBoundingClientRect(),Ve=X.clientX-ye.left,Be=X.clientY-ye.top,Te=ye.width,q=ye.height;k.x=Ve/Te*2-1,k.y=-(Be/q)*2+1,P.set(k.x,k.y,1).unproject(r.object).sub(r.object.position).normalize()}function K(X){return Math.max(r.minDistance,Math.min(r.maxDistance,X))}function oe(X){v.set(X.clientX,X.clientY)}function xe(X){Q(X),E.set(X.clientX,X.clientY)}function Ae(X){g.set(X.clientX,X.clientY)}function we(X){x.set(X.clientX,X.clientY),y.subVectors(x,v).multiplyScalar(r.rotateSpeed);const ye=r.domElement;ye&&(z(2*Math.PI*y.x/ye.clientHeight),Z(2*Math.PI*y.y/ye.clientHeight)),v.copy(x),r.update()}function lt(X){A.set(X.clientX,X.clientY),T.subVectors(A,E),T.y>0?V(re()):T.y<0&&Y(re()),E.copy(A),r.update()}function ct(X){w.set(X.clientX,X.clientY),S.subVectors(w,g).multiplyScalar(r.panSpeed),L(S.x,S.y),g.copy(w),r.update()}function He(X){Q(X),X.deltaY<0?Y(re()):X.deltaY>0&&V(re()),r.update()}function Ye(X){let ye=!1;switch(X.code){case r.keys.UP:L(0,r.keyPanSpeed),ye=!0;break;case r.keys.BOTTOM:L(0,-r.keyPanSpeed),ye=!0;break;case r.keys.LEFT:L(r.keyPanSpeed,0),ye=!0;break;case r.keys.RIGHT:L(-r.keyPanSpeed,0),ye=!0;break}ye&&(X.preventDefault(),r.update())}function $(){if(I.length==1)v.set(I[0].pageX,I[0].pageY);else{const X=.5*(I[0].pageX+I[1].pageX),ye=.5*(I[0].pageY+I[1].pageY);v.set(X,ye)}}function Se(){if(I.length==1)g.set(I[0].pageX,I[0].pageY);else{const X=.5*(I[0].pageX+I[1].pageX),ye=.5*(I[0].pageY+I[1].pageY);g.set(X,ye)}}function fe(){const X=I[0].pageX-I[1].pageX,ye=I[0].pageY-I[1].pageY,Ve=Math.sqrt(X*X+ye*ye);E.set(0,Ve)}function Ce(){r.enableZoom&&fe(),r.enablePan&&Se()}function pe(){r.enableZoom&&fe(),r.enableRotate&&$()}function et(X){if(I.length==1)x.set(X.pageX,X.pageY);else{const Ve=We(X),Be=.5*(X.pageX+Ve.x),Te=.5*(X.pageY+Ve.y);x.set(Be,Te)}y.subVectors(x,v).multiplyScalar(r.rotateSpeed);const ye=r.domElement;ye&&(z(2*Math.PI*y.x/ye.clientHeight),Z(2*Math.PI*y.y/ye.clientHeight)),v.copy(x)}function De(X){if(I.length==1)w.set(X.pageX,X.pageY);else{const ye=We(X),Ve=.5*(X.pageX+ye.x),Be=.5*(X.pageY+ye.y);w.set(Ve,Be)}S.subVectors(w,g).multiplyScalar(r.panSpeed),L(S.x,S.y),g.copy(w)}function F(X){const ye=We(X),Ve=X.pageX-ye.x,Be=X.pageY-ye.y,Te=Math.sqrt(Ve*Ve+Be*Be);A.set(0,Te),T.set(0,Math.pow(A.y/E.y,r.zoomSpeed)),V(T.y),E.copy(A)}function O(X){r.enableZoom&&F(X),r.enablePan&&De(X)}function ie(X){r.enableZoom&&F(X),r.enableRotate&&et(X)}function Me(X){var ye,Ve;r.enabled!==!1&&(I.length===0&&((ye=r.domElement)==null||ye.ownerDocument.addEventListener("pointermove",_e),(Ve=r.domElement)==null||Ve.ownerDocument.addEventListener("pointerup",ve)),Ct(X),X.pointerType==="touch"?bt(X):Qe(X))}function _e(X){r.enabled!==!1&&(X.pointerType==="touch"?be(X):Re(X))}function ve(X){var ye,Ve,Be;vt(X),I.length===0&&((ye=r.domElement)==null||ye.releasePointerCapture(X.pointerId),(Ve=r.domElement)==null||Ve.ownerDocument.removeEventListener("pointermove",_e),(Be=r.domElement)==null||Be.ownerDocument.removeEventListener("pointerup",ve)),r.dispatchEvent(o),l=a.NONE}function Qe(X){let ye;switch(X.button){case 0:ye=r.mouseButtons.LEFT;break;case 1:ye=r.mouseButtons.MIDDLE;break;case 2:ye=r.mouseButtons.RIGHT;break;default:ye=-1}switch(ye){case Jl.DOLLY:if(r.enableZoom===!1)return;xe(X),l=a.DOLLY;break;case Jl.ROTATE:if(X.ctrlKey||X.metaKey||X.shiftKey){if(r.enablePan===!1)return;Ae(X),l=a.PAN}else{if(r.enableRotate===!1)return;oe(X),l=a.ROTATE}break;case Jl.PAN:if(X.ctrlKey||X.metaKey||X.shiftKey){if(r.enableRotate===!1)return;oe(X),l=a.ROTATE}else{if(r.enablePan===!1)return;Ae(X),l=a.PAN}break;default:l=a.NONE}l!==a.NONE&&r.dispatchEvent(s)}function Re(X){if(r.enabled!==!1)switch(l){case a.ROTATE:if(r.enableRotate===!1)return;we(X);break;case a.DOLLY:if(r.enableZoom===!1)return;lt(X);break;case a.PAN:if(r.enablePan===!1)return;ct(X);break}}function Fe(X){r.enabled===!1||r.enableZoom===!1||l!==a.NONE&&l!==a.ROTATE||(X.preventDefault(),r.dispatchEvent(s),He(X),r.dispatchEvent(o))}function ut(X){r.enabled===!1||r.enablePan===!1||Ye(X)}function bt(X){switch(tt(X),I.length){case 1:switch(r.touches.ONE){case Ql.ROTATE:if(r.enableRotate===!1)return;$(),l=a.TOUCH_ROTATE;break;case Ql.PAN:if(r.enablePan===!1)return;Se(),l=a.TOUCH_PAN;break;default:l=a.NONE}break;case 2:switch(r.touches.TWO){case Ql.DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;Ce(),l=a.TOUCH_DOLLY_PAN;break;case Ql.DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;pe(),l=a.TOUCH_DOLLY_ROTATE;break;default:l=a.NONE}break;default:l=a.NONE}l!==a.NONE&&r.dispatchEvent(s)}function be(X){switch(tt(X),l){case a.TOUCH_ROTATE:if(r.enableRotate===!1)return;et(X),r.update();break;case a.TOUCH_PAN:if(r.enablePan===!1)return;De(X),r.update();break;case a.TOUCH_DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;O(X),r.update();break;case a.TOUCH_DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;ie(X),r.update();break;default:l=a.NONE}}function Wt(X){r.enabled!==!1&&X.preventDefault()}function Ct(X){I.push(X)}function vt(X){delete H[X.pointerId];for(let ye=0;ye<I.length;ye++)if(I[ye].pointerId==X.pointerId){I.splice(ye,1);return}}function tt(X){let ye=H[X.pointerId];ye===void 0&&(ye=new me,H[X.pointerId]=ye),ye.set(X.pageX,X.pageY)}function We(X){const ye=X.pointerId===I[0].pointerId?I[1]:I[0];return H[ye.pointerId]}this.dollyIn=(X=re())=>{Y(X),r.update()},this.dollyOut=(X=re())=>{V(X),r.update()},this.getScale=()=>p,this.setScale=X=>{U(X),r.update()},this.getZoomScale=()=>re(),t!==void 0&&this.connect(t),this.update()}};const Bre=N.forwardRef(({makeDefault:n,camera:e,regress:t,domElement:r,enableDamping:i=!0,keyEvents:s=!1,onChange:o,onStart:a,onEnd:l,...c},d)=>{const f=Ea(T=>T.invalidate),p=Ea(T=>T.camera),m=Ea(T=>T.gl),v=Ea(T=>T.events),x=Ea(T=>T.setEvents),y=Ea(T=>T.set),g=Ea(T=>T.get),w=Ea(T=>T.performance),S=e||p,E=r||v.connected||m.domElement,A=N.useMemo(()=>new Fre(S),[S]);return $T(()=>{A.enabled&&A.update()},-1),N.useEffect(()=>(s&&A.connect(s===!0?E:s),A.connect(E),()=>void A.dispose()),[s,E,t,A,f]),N.useEffect(()=>{const T=R=>{f(),t&&w.regress(),o&&o(R)},P=R=>{a&&a(R)},k=R=>{l&&l(R)};return A.addEventListener("change",T),A.addEventListener("start",P),A.addEventListener("end",k),()=>{A.removeEventListener("start",P),A.removeEventListener("end",k),A.removeEventListener("change",T)}},[o,a,l,A,f,x]),N.useEffect(()=>{if(n){const T=g().controls;return y({controls:A}),()=>y({controls:T})}},[n,A]),N.createElement("primitive",n0({ref:d,object:A,enableDamping:i},c))});var zre=`#define GLSLIFY 1
vec3 mod289(vec3 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 mod289(vec4 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 permute(vec4 x){return mod289(((x*34.0)+1.0)*x);}vec4 taylorInvSqrt(vec4 r){return 1.79284291400159-0.85373472095314*r;}float snoise(vec3 v){const vec2 C=vec2(1.0/6.0,1.0/3.0);const vec4 D=vec4(0.0,0.5,1.0,2.0);vec3 i=floor(v+dot(v,C.yyy));vec3 x0=v-i+dot(i,C.xxx);vec3 g=step(x0.yzx,x0.xyz);vec3 l=1.0-g;vec3 i1=min(g.xyz,l.zxy);vec3 i2=max(g.xyz,l.zxy);vec3 x1=x0-i1+C.xxx;vec3 x2=x0-i2+C.yyy;vec3 x3=x0-D.yyy;i=mod289(i);vec4 p=permute(permute(permute(i.z+vec4(0.0,i1.z,i2.z,1.0))+i.y+vec4(0.0,i1.y,i2.y,1.0))+i.x+vec4(0.0,i1.x,i2.x,1.0));float n_=0.142857142857;vec3 ns=n_*D.wyz-D.xzx;vec4 j=p-49.0*floor(p*ns.z*ns.z);vec4 x_=floor(j*ns.z);vec4 y_=floor(j-7.0*x_);vec4 x=x_*ns.x+ns.yyyy;vec4 y=y_*ns.x+ns.yyyy;vec4 h=1.0-abs(x)-abs(y);vec4 b0=vec4(x.xy,y.xy);vec4 b1=vec4(x.zw,y.zw);vec4 s0=floor(b0)*2.0+1.0;vec4 s1=floor(b1)*2.0+1.0;vec4 sh=-step(h,vec4(0.0));vec4 a0=b0.xzyw+s0.xzyw*sh.xxyy;vec4 a1=b1.xzyw+s1.xzyw*sh.zzww;vec3 p0=vec3(a0.xy,h.x);vec3 p1=vec3(a0.zw,h.y);vec3 p2=vec3(a1.xy,h.z);vec3 p3=vec3(a1.zw,h.w);vec4 norm=taylorInvSqrt(vec4(dot(p0,p0),dot(p1,p1),dot(p2,p2),dot(p3,p3)));p0*=norm.x;p1*=norm.y;p2*=norm.z;p3*=norm.w;vec4 m=max(0.6-vec4(dot(x0,x0),dot(x1,x1),dot(x2,x2),dot(x3,x3)),0.0);m=m*m;return 42.0*dot(m*m,vec4(dot(p0,x0),dot(p1,x1),dot(p2,x2),dot(p3,x3)));}`;class Vre extends OT{constructor(e={}){super(e),this.setValues(e),this._time={value:0},this._distort={value:.4},this._radius={value:1}}onBeforeCompile(e){e.uniforms.time=this._time,e.uniforms.radius=this._radius,e.uniforms.distort=this._distort,e.vertexShader=`
      uniform float time;
      uniform float radius;
      uniform float distort;
      ${zre}
      ${e.vertexShader}
    `,e.vertexShader=e.vertexShader.replace("#include <begin_vertex>",`
        float updateTime = time / 50.0;
        float noise = snoise(vec3(position / 2.0 + updateTime * 5.0));
        vec3 transformed = vec3(position * (noise * pow(distort, 2.0) + radius));
        `)}get time(){return this._time.value}set time(e){this._time.value=e}get distort(){return this._distort.value}set distort(e){this._distort.value=e}get radius(){return this._radius.value}set radius(e){this._radius.value=e}}const jre=N.forwardRef(({speed:n=1,...e},t)=>{const[r]=N.useState(()=>new Vre);return $T(i=>r&&(r.time=i.clock.elapsedTime*n)),N.createElement("primitive",n0({object:r,ref:t,attach:"material"},e))}),Hre=()=>{const n=N.useRef(null),e=N.useRef(null),t=N.useRef(null),r=N.useRef(null);return $T(i=>{const s=i.clock.getElapsedTime();n.current&&(n.current.rotation.y=s*.1),e.current&&(e.current.rotation.x=s*.3,e.current.rotation.z=s*.2),t.current&&(t.current.rotation.x=-s*.2,t.current.rotation.y=s*.3),r.current&&(r.current.position.y=Math.sin(s*.5)*.3)}),D.jsxs("group",{ref:n,children:[D.jsxs("mesh",{ref:r,children:[D.jsx("sphereGeometry",{args:[1,64,64]}),D.jsx(jre,{color:"#9333ea",attach:"material",distort:.4,speed:2,roughness:.2,metalness:.8})]}),D.jsxs("mesh",{ref:e,position:[2,1,0],children:[D.jsx("torusGeometry",{args:[.6,.2,16,50]}),D.jsx("meshStandardMaterial",{color:"#06b6d4",metalness:.9,roughness:.1})]}),D.jsxs("mesh",{ref:t,position:[-2,-1,0],children:[D.jsx("torusGeometry",{args:[.5,.15,16,50]}),D.jsx("meshStandardMaterial",{color:"#ec4899",metalness:.9,roughness:.1})]}),D.jsxs("mesh",{position:[2.5,0,1.5],children:[D.jsx("sphereGeometry",{args:[.2,32,32]}),D.jsx("meshStandardMaterial",{color:"#8b5cf6",emissive:"#8b5cf6",emissiveIntensity:.5})]}),D.jsxs("mesh",{position:[-2.5,.5,-1.5],children:[D.jsx("sphereGeometry",{args:[.15,32,32]}),D.jsx("meshStandardMaterial",{color:"#06b6d4",emissive:"#06b6d4",emissiveIntensity:.5})]})]})},Wre=()=>D.jsx("div",{className:"w-full h-full",children:D.jsxs(Rre,{camera:{position:[0,0,6],fov:45},children:[D.jsx("color",{attach:"background",args:["#0a0a1f"]}),D.jsx("ambientLight",{intensity:.4}),D.jsx("directionalLight",{position:[5,5,5],intensity:1.5,color:"#ffffff"}),D.jsx("pointLight",{position:[-5,2,-3],intensity:1,color:"#9333ea"}),D.jsx("pointLight",{position:[5,-2,3],intensity:.8,color:"#06b6d4"}),D.jsx(Hre,{}),D.jsx(Bre,{enableZoom:!1,enablePan:!1,autoRotate:!0,autoRotateSpeed:.8})]})});var $1=function(n,e){return $1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},$1(n,e)};function Ez(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");$1(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var r0=function(){return r0=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},r0.apply(this,arguments)};function hh(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function Mz(n,e,t,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s}function Tz(n,e){return function(t,r){e(t,r,n)}}function Az(n,e,t,r,i,s){function o(g){if(g!==void 0&&typeof g!="function")throw new TypeError("Function expected");return g}for(var a=r.kind,l=a==="getter"?"get":a==="setter"?"set":"value",c=!e&&n?r.static?n:n.prototype:null,d=e||(c?Object.getOwnPropertyDescriptor(c,r.name):{}),f,p=!1,m=t.length-1;m>=0;m--){var v={};for(var x in r)v[x]=x==="access"?{}:r[x];for(var x in r.access)v.access[x]=r.access[x];v.addInitializer=function(g){if(p)throw new TypeError("Cannot add initializers after decoration has completed");s.push(o(g||null))};var y=(0,t[m])(a==="accessor"?{get:d.get,set:d.set}:d[l],v);if(a==="accessor"){if(y===void 0)continue;if(y===null||typeof y!="object")throw new TypeError("Object expected");(f=o(y.get))&&(d.get=f),(f=o(y.set))&&(d.set=f),(f=o(y.init))&&i.unshift(f)}else(f=o(y))&&(a==="field"?i.unshift(f):d[l]=f)}c&&Object.defineProperty(c,r.name,d),p=!0}function Cz(n,e,t){for(var r=arguments.length>2,i=0;i<e.length;i++)t=r?e[i].call(n,t):e[i].call(n);return r?t:void 0}function Pz(n){return typeof n=="symbol"?n:"".concat(n)}function Rz(n,e,t){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(n,"name",{configurable:!0,value:t?"".concat(t," ",e):e})}function Iz(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)}function ot(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(r.next(d))}catch(f){o(f)}}function l(d){try{c(r.throw(d))}catch(f){o(f)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((r=r.apply(n,e||[])).next())})}function Lz(n,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(d){return l([c,d])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(t=0)),t;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,i=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){t.label=c[1];break}if(c[0]===6&&t.label<s[1]){t.label=s[1],s=c;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(c);break}s[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(n,t)}catch(d){c=[6,d],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}var S_=Object.create?function(n,e,t,r){r===void 0&&(r=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,i)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]};function kz(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&S_(e,n,t)}function i0(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function qT(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(o)throw o.error}}return s}function Oz(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(qT(arguments[e]));return n}function Nz(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var r=Array(n),i=0,e=0;e<t;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)r[i]=s[o];return r}function Dz(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return n.concat(s||Array.prototype.slice.call(e))}function Yd(n){return this instanceof Yd?(this.v=n,this):new Yd(n)}function Uz(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(m){return function(v){return Promise.resolve(v).then(m,f)}}function a(m,v){r[m]&&(i[m]=function(x){return new Promise(function(y,g){s.push([m,x,y,g])>1||l(m,x)})},v&&(i[m]=v(i[m])))}function l(m,v){try{c(r[m](v))}catch(x){p(s[0][3],x)}}function c(m){m.value instanceof Yd?Promise.resolve(m.value.v).then(d,f):p(s[0][2],m)}function d(m){l("next",m)}function f(m){l("throw",m)}function p(m,v){m(v),s.shift(),s.length&&l(s[0][0],s[0][1])}}function Fz(n){var e,t;return e={},r("next"),r("throw",function(i){throw i}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(i,s){e[i]=n[i]?function(o){return(t=!t)?{value:Yd(n[i](o)),done:!1}:s?s(o):o}:s}}function Bz(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof i0=="function"?i0(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,l){o=n[s](o),i(a,l,o.done,o.value)})}}function i(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}}function zz(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}var Gre=Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e},X1=function(n){return X1=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},X1(n)};function Vz(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t=X1(n),r=0;r<t.length;r++)t[r]!=="default"&&S_(e,n,t[r]);return Gre(e,n),e}function jz(n){return n&&n.__esModule?n:{default:n}}function Hz(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)}function Wz(n,e,t,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(n,t):i?i.value=t:e.set(n,t),t}function Gz(n,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof n=="function"?e===n:n.has(e)}function $z(n,e,t){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var r,i;if(t){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=e[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose],t&&(i=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");i&&(r=function(){try{i.call(this)}catch(s){return Promise.reject(s)}}),n.stack.push({value:e,dispose:r,async:t})}else t&&n.stack.push({async:!0});return e}var $re=typeof SuppressedError=="function"?SuppressedError:function(n,e,t){var r=new Error(t);return r.name="SuppressedError",r.error=n,r.suppressed=e,r};function Xz(n){function e(s){n.error=n.hasError?new $re(s,n.error,"An error was suppressed during disposal."):s,n.hasError=!0}var t,r=0;function i(){for(;t=n.stack.pop();)try{if(!t.async&&r===1)return r=0,n.stack.push(t),Promise.resolve().then(i);if(t.dispose){var s=t.dispose.call(t.value);if(t.async)return r|=2,Promise.resolve(s).then(i,function(o){return e(o),i()})}else r|=1}catch(o){e(o)}if(r===1)return n.hasError?Promise.reject(n.error):Promise.resolve();if(n.hasError)throw n.error}return i()}function qz(n,e){return typeof n=="string"&&/^\.\.?\//.test(n)?n.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(t,r,i,s,o){return r?e?".jsx":".js":i&&(!s||!o)?t:i+s+"."+o.toLowerCase()+"js"}):n}const Xre={__extends:Ez,__assign:r0,__rest:hh,__decorate:Mz,__param:Tz,__esDecorate:Az,__runInitializers:Cz,__propKey:Pz,__setFunctionName:Rz,__metadata:Iz,__awaiter:ot,__generator:Lz,__createBinding:S_,__exportStar:kz,__values:i0,__read:qT,__spread:Oz,__spreadArrays:Nz,__spreadArray:Dz,__await:Yd,__asyncGenerator:Uz,__asyncDelegator:Fz,__asyncValues:Bz,__makeTemplateObject:zz,__importStar:Vz,__importDefault:jz,__classPrivateFieldGet:Hz,__classPrivateFieldSet:Wz,__classPrivateFieldIn:Gz,__addDisposableResource:$z,__disposeResources:Xz,__rewriteRelativeImportExtension:qz},qre=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:$z,get __assign(){return r0},__asyncDelegator:Fz,__asyncGenerator:Uz,__asyncValues:Bz,__await:Yd,__awaiter:ot,__classPrivateFieldGet:Hz,__classPrivateFieldIn:Gz,__classPrivateFieldSet:Wz,__createBinding:S_,__decorate:Mz,__disposeResources:Xz,__esDecorate:Az,__exportStar:kz,__extends:Ez,__generator:Lz,__importDefault:jz,__importStar:Vz,__makeTemplateObject:zz,__metadata:Iz,__param:Tz,__propKey:Pz,__read:qT,__rest:hh,__rewriteRelativeImportExtension:qz,__runInitializers:Cz,__setFunctionName:Rz,__spread:Oz,__spreadArray:Dz,__spreadArrays:Nz,__values:i0,default:Xre},Symbol.toStringTag,{value:"Module"})),Yre=n=>n?(...e)=>n(...e):(...e)=>fetch(...e);class YT extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class BL extends YT{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class zL extends YT{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class VL extends YT{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var q1;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(q1||(q1={}));class Kre{constructor(e,{headers:t={},customFetch:r,region:i=q1.Any}={}){this.url=e,this.headers=t,this.region=i,this.fetch=Yre(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return ot(this,arguments,void 0,function*(t,r={}){var i;try{const{headers:s,method:o,body:a,signal:l}=r;let c={},{region:d}=r;d||(d=this.region);const f=new URL(`${this.url}/${t}`);d&&d!=="any"&&(c["x-region"]=d,f.searchParams.set("forceFunctionRegion",d));let p;a&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)?typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(c["Content-Type"]="application/octet-stream",p=a):typeof a=="string"?(c["Content-Type"]="text/plain",p=a):typeof FormData<"u"&&a instanceof FormData?p=a:(c["Content-Type"]="application/json",p=JSON.stringify(a)):p=a;const m=yield this.fetch(f.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},c),this.headers),s),body:p,signal:l}).catch(g=>{throw g.name==="AbortError"?g:new BL(g)}),v=m.headers.get("x-relay-error");if(v&&v==="true")throw new zL(m);if(!m.ok)throw new VL(m);let x=((i=m.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),y;return x==="application/json"?y=yield m.json():x==="application/octet-stream"||x==="application/pdf"?y=yield m.blob():x==="text/event-stream"?y=m:x==="multipart/form-data"?y=yield m.formData():y=yield m.text(),{data:y,error:null,response:m}}catch(s){return s instanceof Error&&s.name==="AbortError"?{data:null,error:new BL(s)}:{data:null,error:s,response:s instanceof VL||s instanceof zL?s.context:void 0}}})}}var Kr={};const fh=xV(qre);var Cv={},Pv={},Rv={},Iv={},Lv={},kv={},jL;function Yz(){if(jL)return kv;jL=1,Object.defineProperty(kv,"__esModule",{value:!0});class n extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return kv.default=n,kv}var HL;function Kz(){if(HL)return Lv;HL=1,Object.defineProperty(Lv,"__esModule",{value:!0});const e=fh.__importDefault(Yz());class t{constructor(i){var s,o;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(s=i.shouldThrowOnError)!==null&&s!==void 0?s:!1,this.signal=i.signal,this.isMaybeSingle=(o=i.isMaybeSingle)!==null&&o!==void 0?o:!1,i.fetch?this.fetch=i.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,s){return this.headers=new Headers(this.headers),this.headers.set(i,s),this}then(i,s){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const o=this.fetch;let a=o(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async l=>{var c,d,f,p;let m=null,v=null,x=null,y=l.status,g=l.statusText;if(l.ok){if(this.method!=="HEAD"){const A=await l.text();A===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((c=this.headers.get("Accept"))===null||c===void 0)&&c.includes("application/vnd.pgrst.plan+text"))?v=A:v=JSON.parse(A))}const S=(d=this.headers.get("Prefer"))===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),E=(f=l.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");S&&E&&E.length>1&&(x=parseInt(E[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(v)&&(v.length>1?(m={code:"PGRST116",details:`Results contain ${v.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},v=null,x=null,y=406,g="Not Acceptable"):v.length===1?v=v[0]:v=null)}else{const S=await l.text();try{m=JSON.parse(S),Array.isArray(m)&&l.status===404&&(v=[],m=null,y=200,g="OK")}catch{l.status===404&&S===""?(y=204,g="No Content"):m={message:S}}if(m&&this.isMaybeSingle&&(!((p=m==null?void 0:m.details)===null||p===void 0)&&p.includes("0 rows"))&&(m=null,y=200,g="OK"),m&&this.shouldThrowOnError)throw new e.default(m)}return{error:m,data:v,count:x,status:y,statusText:g}});return this.shouldThrowOnError||(a=a.catch(l=>{var c,d,f;return{error:{message:`${(c=l==null?void 0:l.name)!==null&&c!==void 0?c:"FetchError"}: ${l==null?void 0:l.message}`,details:`${(d=l==null?void 0:l.stack)!==null&&d!==void 0?d:""}`,hint:"",code:`${(f=l==null?void 0:l.code)!==null&&f!==void 0?f:""}`},data:null,count:null,status:0,statusText:""}})),a.then(i,s)}returns(){return this}overrideTypes(){return this}}return Lv.default=t,Lv}var WL;function Zz(){if(WL)return Iv;WL=1,Object.defineProperty(Iv,"__esModule",{value:!0});const e=fh.__importDefault(Kz());class t extends e.default{select(i){let s=!1;const o=(i??"*").split("").map(a=>/\s/.test(a)&&!s?"":(a==='"'&&(s=!s),a)).join("");return this.url.searchParams.set("select",o),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:s=!0,nullsFirst:o,foreignTable:a,referencedTable:l=a}={}){const c=l?`${l}.order`:"order",d=this.url.searchParams.get(c);return this.url.searchParams.set(c,`${d?`${d},`:""}${i}.${s?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:s,referencedTable:o=s}={}){const a=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(a,`${i}`),this}range(i,s,{foreignTable:o,referencedTable:a=o}={}){const l=typeof a>"u"?"offset":`${a}.offset`,c=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(l,`${i}`),this.url.searchParams.set(c,`${s-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:s=!1,settings:o=!1,buffers:a=!1,wal:l=!1,format:c="text"}={}){var d;const f=[i?"analyze":null,s?"verbose":null,o?"settings":null,a?"buffers":null,l?"wal":null].filter(Boolean).join("|"),p=(d=this.headers.get("Accept"))!==null&&d!==void 0?d:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${c}; for="${p}"; options=${f};`),c==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}}return Iv.default=t,Iv}var GL;function KT(){if(GL)return Rv;GL=1,Object.defineProperty(Rv,"__esModule",{value:!0});const e=fh.__importDefault(Zz()),t=new RegExp("[,()]");class r extends e.default{eq(s,o){return this.url.searchParams.append(s,`eq.${o}`),this}neq(s,o){return this.url.searchParams.append(s,`neq.${o}`),this}gt(s,o){return this.url.searchParams.append(s,`gt.${o}`),this}gte(s,o){return this.url.searchParams.append(s,`gte.${o}`),this}lt(s,o){return this.url.searchParams.append(s,`lt.${o}`),this}lte(s,o){return this.url.searchParams.append(s,`lte.${o}`),this}like(s,o){return this.url.searchParams.append(s,`like.${o}`),this}likeAllOf(s,o){return this.url.searchParams.append(s,`like(all).{${o.join(",")}}`),this}likeAnyOf(s,o){return this.url.searchParams.append(s,`like(any).{${o.join(",")}}`),this}ilike(s,o){return this.url.searchParams.append(s,`ilike.${o}`),this}ilikeAllOf(s,o){return this.url.searchParams.append(s,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(s,o){return this.url.searchParams.append(s,`ilike(any).{${o.join(",")}}`),this}is(s,o){return this.url.searchParams.append(s,`is.${o}`),this}in(s,o){const a=Array.from(new Set(o)).map(l=>typeof l=="string"&&t.test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(s,`in.(${a})`),this}contains(s,o){return typeof o=="string"?this.url.searchParams.append(s,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(s,`cs.{${o.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(o)}`),this}containedBy(s,o){return typeof o=="string"?this.url.searchParams.append(s,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(s,`cd.{${o.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(o)}`),this}rangeGt(s,o){return this.url.searchParams.append(s,`sr.${o}`),this}rangeGte(s,o){return this.url.searchParams.append(s,`nxl.${o}`),this}rangeLt(s,o){return this.url.searchParams.append(s,`sl.${o}`),this}rangeLte(s,o){return this.url.searchParams.append(s,`nxr.${o}`),this}rangeAdjacent(s,o){return this.url.searchParams.append(s,`adj.${o}`),this}overlaps(s,o){return typeof o=="string"?this.url.searchParams.append(s,`ov.${o}`):this.url.searchParams.append(s,`ov.{${o.join(",")}}`),this}textSearch(s,o,{config:a,type:l}={}){let c="";l==="plain"?c="pl":l==="phrase"?c="ph":l==="websearch"&&(c="w");const d=a===void 0?"":`(${a})`;return this.url.searchParams.append(s,`${c}fts${d}.${o}`),this}match(s){return Object.entries(s).forEach(([o,a])=>{this.url.searchParams.append(o,`eq.${a}`)}),this}not(s,o,a){return this.url.searchParams.append(s,`not.${o}.${a}`),this}or(s,{foreignTable:o,referencedTable:a=o}={}){const l=a?`${a}.or`:"or";return this.url.searchParams.append(l,`(${s})`),this}filter(s,o,a){return this.url.searchParams.append(s,`${o}.${a}`),this}}return Rv.default=r,Rv}var $L;function Jz(){if($L)return Pv;$L=1,Object.defineProperty(Pv,"__esModule",{value:!0});const e=fh.__importDefault(KT());class t{constructor(i,{headers:s={},schema:o,fetch:a}){this.url=i,this.headers=new Headers(s),this.schema=o,this.fetch=a}select(i,s){const{head:o=!1,count:a}=s??{},l=o?"HEAD":"GET";let c=!1;const d=(i??"*").split("").map(f=>/\s/.test(f)&&!c?"":(f==='"'&&(c=!c),f)).join("");return this.url.searchParams.set("select",d),a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(i,{count:s,defaultToNull:o=!0}={}){var a;const l="POST";if(s&&this.headers.append("Prefer",`count=${s}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const c=i.reduce((d,f)=>d.concat(Object.keys(f)),[]);if(c.length>0){const d=[...new Set(c)].map(f=>`"${f}"`);this.url.searchParams.set("columns",d.join(","))}}return new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}upsert(i,{onConflict:s,ignoreDuplicates:o=!1,count:a,defaultToNull:l=!0}={}){var c;const d="POST";if(this.headers.append("Prefer",`resolution=${o?"ignore":"merge"}-duplicates`),s!==void 0&&this.url.searchParams.set("on_conflict",s),a&&this.headers.append("Prefer",`count=${a}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const f=i.reduce((p,m)=>p.concat(Object.keys(m)),[]);if(f.length>0){const p=[...new Set(f)].map(m=>`"${m}"`);this.url.searchParams.set("columns",p.join(","))}}return new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}update(i,{count:s}={}){var o;const a="PATCH";return s&&this.headers.append("Prefer",`count=${s}`),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}delete({count:i}={}){var s;const o="DELETE";return i&&this.headers.append("Prefer",`count=${i}`),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}}return Pv.default=t,Pv}var XL;function Zre(){if(XL)return Cv;XL=1,Object.defineProperty(Cv,"__esModule",{value:!0});const n=fh,e=n.__importDefault(Jz()),t=n.__importDefault(KT());class r{constructor(s,{headers:o={},schema:a,fetch:l}={}){this.url=s,this.headers=new Headers(o),this.schemaName=a,this.fetch=l}from(s){const o=new URL(`${this.url}/${s}`);return new e.default(o,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(s){return new r(this.url,{headers:this.headers,schema:s,fetch:this.fetch})}rpc(s,o={},{head:a=!1,get:l=!1,count:c}={}){var d;let f;const p=new URL(`${this.url}/rpc/${s}`);let m;a||l?(f=a?"HEAD":"GET",Object.entries(o).filter(([x,y])=>y!==void 0).map(([x,y])=>[x,Array.isArray(y)?`{${y.join(",")}}`:`${y}`]).forEach(([x,y])=>{p.searchParams.append(x,y)})):(f="POST",m=o);const v=new Headers(this.headers);return c&&v.set("Prefer",`count=${c}`),new t.default({method:f,url:p,headers:v,schema:this.schemaName,body:m,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}}return Cv.default=r,Cv}Object.defineProperty(Kr,"__esModule",{value:!0});var Qz=Kr.PostgrestError=c4=Kr.PostgrestBuilder=a4=Kr.PostgrestTransformBuilder=s4=Kr.PostgrestFilterBuilder=r4=Kr.PostgrestQueryBuilder=t4=Kr.PostgrestClient=void 0;const ph=fh,e4=ph.__importDefault(Zre());var t4=Kr.PostgrestClient=e4.default;const n4=ph.__importDefault(Jz());var r4=Kr.PostgrestQueryBuilder=n4.default;const i4=ph.__importDefault(KT());var s4=Kr.PostgrestFilterBuilder=i4.default;const o4=ph.__importDefault(Zz());var a4=Kr.PostgrestTransformBuilder=o4.default;const l4=ph.__importDefault(Kz());var c4=Kr.PostgrestBuilder=l4.default;const u4=ph.__importDefault(Yz());Qz=Kr.PostgrestError=u4.default;var d4=Kr.default={PostgrestClient:e4.default,PostgrestQueryBuilder:n4.default,PostgrestFilterBuilder:i4.default,PostgrestTransformBuilder:o4.default,PostgrestBuilder:l4.default,PostgrestError:u4.default};const Jre=Dk({__proto__:null,get PostgrestBuilder(){return c4},get PostgrestClient(){return t4},get PostgrestError(){return Qz},get PostgrestFilterBuilder(){return s4},get PostgrestQueryBuilder(){return r4},get PostgrestTransformBuilder(){return a4},default:d4},[Kr]),{PostgrestClient:Qre,PostgrestQueryBuilder:tae,PostgrestFilterBuilder:nae,PostgrestTransformBuilder:rae,PostgrestBuilder:iae,PostgrestError:sae}=d4||Jre;class eie{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const t=process.versions;if(t&&t.node){const r=t.node,i=parseInt(r.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const r=this.getWebSocketConstructor();return new r(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const tie="2.80.0",nie=`realtime-js/${tie}`,rie="1.0.0",Y1=1e4,iie=1e3,sie=100;var Df;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(Df||(Df={}));var Qn;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(Qn||(Qn={}));var Ts;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(Ts||(Ts={}));var K1;(function(n){n.websocket="websocket"})(K1||(K1={}));var ic;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(ic||(ic={}));class oie{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const i=t.getUint8(1),s=t.getUint8(2);let o=this.HEADER_LENGTH+2;const a=r.decode(e.slice(o,o+i));o=o+i;const l=r.decode(e.slice(o,o+s));o=o+s;const c=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:l,payload:c}}}class h4{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var cn;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(cn||(cn={}));const qL=(n,e,t={})=>{var r;const i=(r=t.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((s,o)=>(s[o]=aie(o,n,e,i),s),{}):{}},aie=(n,e,t,r)=>{const i=e.find(a=>a.name===n),s=i==null?void 0:i.type,o=t[n];return s&&!r.includes(s)?f4(s,o):Z1(o)},f4=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return die(e,t)}switch(n){case cn.bool:return lie(e);case cn.float4:case cn.float8:case cn.int2:case cn.int4:case cn.int8:case cn.numeric:case cn.oid:return cie(e);case cn.json:case cn.jsonb:return uie(e);case cn.timestamp:return hie(e);case cn.abstime:case cn.date:case cn.daterange:case cn.int4range:case cn.int8range:case cn.money:case cn.reltime:case cn.text:case cn.time:case cn.timestamptz:case cn.timetz:case cn.tsrange:case cn.tstzrange:return Z1(e);default:return Z1(e)}},Z1=n=>n,lie=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},cie=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},uie=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},die=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,r=n[t];if(n[0]==="{"&&r==="}"){let s;const o=n.slice(1,t);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(a=>f4(e,a))}return n},hie=n=>typeof n=="string"?n.replace(" ","T"):n,p4=n=>{const e=new URL(n);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class vS{constructor(e,t,r={},i=Y1){this.channel=e,this.event=t,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var YL;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(YL||(YL={}));class Uf{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Uf.syncState(this.state,i,s,o),this.pendingDiffs.forEach(l=>{this.state=Uf.syncDiff(this.state,l,s,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Uf.syncDiff(this.state,i,s,o),a())}),this.onJoin((i,s,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:o})}),this.onLeave((i,s,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,i){const s=this.cloneDeep(e),o=this.transformState(t),a={},l={};return this.map(s,(c,d)=>{o[c]||(l[c]=d)}),this.map(o,(c,d)=>{const f=s[c];if(f){const p=d.map(y=>y.presence_ref),m=f.map(y=>y.presence_ref),v=d.filter(y=>m.indexOf(y.presence_ref)<0),x=f.filter(y=>p.indexOf(y.presence_ref)<0);v.length>0&&(a[c]=v),x.length>0&&(l[c]=x)}else a[c]=d}),this.syncDiff(s,{joins:a,leaves:l},r,i)}static syncDiff(e,t,r,i){const{joins:s,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(a,l)=>{var c;const d=(c=e[a])!==null&&c!==void 0?c:[];if(e[a]=this.cloneDeep(l),d.length>0){const f=e[a].map(m=>m.presence_ref),p=d.filter(m=>f.indexOf(m.presence_ref)<0);e[a].unshift(...p)}r(a,d,l)}),this.map(o,(a,l)=>{let c=e[a];if(!c)return;const d=l.map(f=>f.presence_ref);c=c.filter(f=>d.indexOf(f.presence_ref)<0),e[a]=c,i(a,c,l),c.length===0&&delete e[a]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const i=e[r];return"metas"in i?t[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):t[r]=i,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var KL;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(KL||(KL={}));var Ff;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(Ff||(Ff={}));var Oo;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(Oo||(Oo={}));class ZT{constructor(e,t={config:{}},r){var i,s;if(this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=Qn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new vS(this,Ts.join,this.params,this.timeout),this.rejoinTimer=new h4(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Qn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Qn.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Qn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Qn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Qn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ts.reply,{},(o,a)=>{this._trigger(this._replyEventName(a),o)}),this.presence=new Uf(this),this.broadcastEndpointURL=p4(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((s=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||s===void 0)&&s.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var r,i,s;if(this.socket.isConnected()||this.socket.connect(),this.state==Qn.closed){const{config:{broadcast:o,presence:a,private:l}}=this.params,c=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(m=>m.filter))!==null&&i!==void 0?i:[],d=!!this.bindings[Ff.PRESENCE]&&this.bindings[Ff.PRESENCE].length>0||((s=this.params.config.presence)===null||s===void 0?void 0:s.enabled)===!0,f={},p={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:d}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(m=>e==null?void 0:e(Oo.CHANNEL_ERROR,m)),this._onClose(()=>e==null?void 0:e(Oo.CLOSED)),this.updateJoinPayload(Object.assign({config:p},f)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:m})=>{var v;if(this.socket.setAuth(),m===void 0){e==null||e(Oo.SUBSCRIBED);return}else{const x=this.bindings.postgres_changes,y=(v=x==null?void 0:x.length)!==null&&v!==void 0?v:0,g=[];for(let w=0;w<y;w++){const S=x[w],{filter:{event:E,schema:A,table:T,filter:P}}=S,k=m&&m[w];if(k&&k.event===E&&k.schema===A&&k.table===T&&k.filter===P)g.push(Object.assign(Object.assign({},S),{id:k.id}));else{this.unsubscribe(),this.state=Qn.errored,e==null||e(Oo.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,e&&e(Oo.SUBSCRIBED);return}}).receive("error",m=>{this.state=Qn.errored,e==null||e(Oo.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Oo.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this.state===Qn.joined&&e===Ff.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,r)}async httpSend(e,t,r={}){var i;const s=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(t==null)return Promise.reject("Payload is required for httpSend()");const o={method:"POST",headers:{Authorization:s,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:t,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);if(a.status===202)return{success:!0};let l=a.statusText;try{const c=await a.json();l=c.error||c.message||l}catch{}return Promise.reject(new Error(l))}async send(e,t={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:s,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=t.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=c.body)===null||i===void 0?void 0:i.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var o,a,l;const c=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&s("ok"),c.receive("ok",()=>s("ok")),c.receive("error",()=>s("error")),c.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Qn.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ts.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new vS(this,Ts.leave,{},e),r.receive("ok",()=>{t(),i("ok")}).receive("timeout",()=>{t(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Qn.closed,this.bindings={}}async _fetchWithTimeout(e,t,r){const i=new AbortController,s=setTimeout(()=>i.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:i.signal}));return clearTimeout(s),o}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new vS(this,e,t,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>sie){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var i,s;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:c,join:d}=Ts;if(r&&[a,l,c,d].indexOf(o)>=0&&r!==this._joinRef())return;let p=this._onMessage(o,t,r);if(t&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(m=>{var v,x,y;return((v=m.filter)===null||v===void 0?void 0:v.event)==="*"||((y=(x=m.filter)===null||x===void 0?void 0:x.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===o}).map(m=>m.callback(p,r)):(s=this.bindings[o])===null||s===void 0||s.filter(m=>{var v,x,y,g,w,S;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in m){const E=m.id,A=(v=m.filter)===null||v===void 0?void 0:v.event;return E&&((x=t.ids)===null||x===void 0?void 0:x.includes(E))&&(A==="*"||(A==null?void 0:A.toLocaleLowerCase())===((y=t.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))}else{const E=(w=(g=m==null?void 0:m.filter)===null||g===void 0?void 0:g.event)===null||w===void 0?void 0:w.toLocaleLowerCase();return E==="*"||E===((S=t==null?void 0:t.event)===null||S===void 0?void 0:S.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===o}).map(m=>{if(typeof p=="object"&&"ids"in p){const v=p.data,{schema:x,table:y,commit_timestamp:g,type:w,errors:S}=v;p=Object.assign(Object.assign({},{schema:x,table:y,commit_timestamp:g,eventType:w,new:{},old:{},errors:S}),this._getPayloadRecords(v))}m.callback(p,r)})}_isClosed(){return this.state===Qn.closed}_isJoined(){return this.state===Qn.joined}_isJoining(){return this.state===Qn.joining}_isLeaving(){return this.state===Qn.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const i=e.toLocaleLowerCase(),s={type:i,filter:t,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&ZT.isEqual(i.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Ts.close,{},e)}_onError(e){this._on(Ts.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Qn.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=qL(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=qL(e.columns,e.old_record)),t}}const yS=()=>{},Ov={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},fie=[1e3,2e3,5e3,1e4],pie=1e4,mie=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class gie{constructor(e,t){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Y1,this.transport=null,this.heartbeatIntervalMs=Ov.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=yS,this.ref=0,this.reconnectTimer=null,this.logger=yS,this.conn=null,this.sendBuffer=[],this.serializer=new oie,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>i?(...s)=>i(...s):(...s)=>fetch(...s),!(!((r=t==null?void 0:t.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${K1.websocket}`,this.httpEndpoint=p4(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=eie.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:rie}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,t??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Df.connecting:return ic.Connecting;case Df.open:return ic.Open;case Df.closing:return ic.Closing;default:return ic.Closed}}isConnected(){return this.connectionState()===ic.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(s=>s.topic===r);if(i)return i;{const s=new ZT(`realtime:${e}`,t,this);return this.channels.push(s),s}}push(e){const{topic:t,event:r,payload:i,ref:s}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${t} ${r} (${s})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(iie,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},Ov.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply")try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error")}catch(c){this.log("error","error in heartbeat callback",c)}t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:i,payload:s,ref:o}=t,a=o?`(${o})`:"",l=s.status||"";this.log("receive",`${l} ${r} ${i} ${a}`.trim(),s),this.channels.filter(c=>c._isMember(r)).forEach(c=>c._trigger(i,s,o)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Ts.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(t);return`${e}${r}${i}`}_workerObjectUrl(e){let t;if(e)t=e;else{const r=new Blob([mie],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;e?t=e:this.accessToken?t=await this.accessToken():t=this.accessTokenValue,this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(r=>{const i={access_token:t,version:nie};t&&r.updateJoinPayload(i),r.joinedOnce&&r._isJoined()&&r._push(Ts.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(t)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new h4(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Ov.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,r,i,s,o,a,l,c,d;if(this.transport=(t=e==null?void 0:e.transport)!==null&&t!==void 0?t:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:Y1,this.heartbeatIntervalMs=(i=e==null?void 0:e.heartbeatIntervalMs)!==null&&i!==void 0?i:Ov.HEARTBEAT_INTERVAL,this.worker=(s=e==null?void 0:e.worker)!==null&&s!==void 0?s:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(a=e==null?void 0:e.heartbeatCallback)!==null&&a!==void 0?a:yS,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=e==null?void 0:e.reconnectAfterMs)!==null&&l!==void 0?l:f=>fie[f-1]||pie,this.encode=(c=e==null?void 0:e.encode)!==null&&c!==void 0?c:(f,p)=>p(JSON.stringify(f)),this.decode=(d=e==null?void 0:e.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class JT extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function En(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class vie extends JT{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class J1 extends JT{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}const QT=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),yie=()=>Response,Q1=n=>{if(Array.isArray(n))return n.map(t=>Q1(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,r])=>{const i=t.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[i]=Q1(r)}),e},_ie=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},_S=n=>{var e;return n.msg||n.message||n.error_description||(typeof n.error=="string"?n.error:(e=n.error)===null||e===void 0?void 0:e.message)||JSON.stringify(n)},xie=(n,e,t)=>ot(void 0,void 0,void 0,function*(){const r=yield yie();n instanceof r&&!(t!=null&&t.noResolveJson)?n.json().then(i=>{const s=n.status||500,o=(i==null?void 0:i.statusCode)||s+"";e(new vie(_S(i),s,o))}).catch(i=>{e(new J1(_S(i),i))}):e(new J1(_S(n),n))}),wie=(n,e,t,r)=>{const i={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"||!r?i:(_ie(r)?(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r)):i.body=r,e!=null&&e.duplex&&(i.duplex=e.duplex),Object.assign(Object.assign({},i),t))};function um(n,e,t,r,i,s){return ot(this,void 0,void 0,function*(){return new Promise((o,a)=>{n(t,wie(e,r,i,s)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>xie(l,a,r))})})}function Lp(n,e,t,r){return ot(this,void 0,void 0,function*(){return um(n,"GET",e,t,r)})}function Ss(n,e,t,r,i){return ot(this,void 0,void 0,function*(){return um(n,"POST",e,r,i,t)})}function eE(n,e,t,r,i){return ot(this,void 0,void 0,function*(){return um(n,"PUT",e,r,i,t)})}function Sie(n,e,t,r){return ot(this,void 0,void 0,function*(){return um(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),r)})}function eA(n,e,t,r,i){return ot(this,void 0,void 0,function*(){return um(n,"DELETE",e,r,i,t)})}class bie{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}execute(){return ot(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(En(e))return{data:null,error:e};throw e}})}}var m4;class Eie{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[m4]="BlobDownloadBuilder",this.promise=null}asStream(){return new bie(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return ot(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(En(e))return{data:null,error:e};throw e}})}}m4=Symbol.toStringTag;const Mie={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ZL={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Tie{constructor(e,t={},r,i){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=r,this.fetch=QT(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,r,i){return ot(this,void 0,void 0,function*(){try{let s;const o=Object.assign(Object.assign({},ZL),i);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",this.encodeMetadata(l)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.has("cacheControl")||s.append("cacheControl",o.cacheControl),l&&!s.has("metadata")&&s.append("metadata",this.encodeMetadata(l))):(s=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l))),(typeof ReadableStream<"u"&&s instanceof ReadableStream||s&&typeof s=="object"&&"pipe"in s&&typeof s.pipe=="function")&&!o.duplex&&(o.duplex="half")),i!=null&&i.headers&&(a=Object.assign(Object.assign({},a),i.headers));const c=this._removeEmptyFolders(t),d=this._getFinalPath(c),f=yield(e=="PUT"?eE:Ss)(this.fetch,`${this.url}/object/${d}`,s,Object.assign({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:c,id:f.Id,fullPath:f.Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(En(s))return{data:null,error:s};throw s}})}upload(e,t,r){return ot(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,i){return ot(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),o=this._getFinalPath(s),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",t);try{let l;const c=Object.assign({upsert:ZL.upsert},i),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",c.cacheControl)):(l=r,d["cache-control"]=`max-age=${c.cacheControl}`,d["content-type"]=c.contentType);const f=yield eE(this.fetch,a.toString(),l,{headers:d});return{data:{path:s,fullPath:f.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(En(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,t){return ot(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const i=Object.assign({},this.headers);t!=null&&t.upsert&&(i["x-upsert"]="true");const s=yield Ss(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),o=new URL(this.url+s.url),a=o.searchParams.get("token");if(!a)throw new JT("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(En(r))return{data:null,error:r};throw r}})}update(e,t,r){return ot(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return ot(this,void 0,void 0,function*(){try{return{data:yield Ss(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(En(i))return{data:null,error:i};throw i}})}copy(e,t,r){return ot(this,void 0,void 0,function*(){try{return{data:{path:(yield Ss(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(En(i))return{data:null,error:i};throw i}})}createSignedUrl(e,t,r){return ot(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),s=yield Ss(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(En(i))return{data:null,error:i};throw i}})}createSignedUrls(e,t,r){return ot(this,void 0,void 0,function*(){try{const i=yield Ss(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${s}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(En(i))return{data:null,error:i};throw i}})}download(e,t){const i=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),o=s?`?${s}`:"",a=this._getFinalPath(e),l=()=>Lp(this.fetch,`${this.url}/${i}/${a}${o}`,{headers:this.headers,noResolveJson:!0});return new Eie(l,this.shouldThrowOnError)}info(e){return ot(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const r=yield Lp(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:Q1(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(En(r))return{data:null,error:r};throw r}})}exists(e){return ot(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield Sie(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(En(r)&&r instanceof J1){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),i=[],s=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";s!==""&&i.push(s);const a=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});l!==""&&i.push(l);let c=i.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${c}`)}}}remove(e){return ot(this,void 0,void 0,function*(){try{return{data:yield eA(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(En(t))return{data:null,error:t};throw t}})}list(e,t,r){return ot(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},Mie),t),{prefix:e||""});return{data:yield Ss(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(En(i))return{data:null,error:i};throw i}})}listV2(e,t){return ot(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield Ss(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},t),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(En(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const g4="2.80.0",v4={"X-Client-Info":`storage-js/${g4}`};class Aie{constructor(e,t={},r,i){this.shouldThrowOnError=!1;const s=new URL(e);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},v4),t),this.fetch=QT(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return ot(this,void 0,void 0,function*(){try{const t=this.listBucketOptionsToQueryString(e);return{data:yield Lp(this.fetch,`${this.url}/bucket${t}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(En(t))return{data:null,error:t};throw t}})}getBucket(e){return ot(this,void 0,void 0,function*(){try{return{data:yield Lp(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(En(t))return{data:null,error:t};throw t}})}createBucket(e){return ot(this,arguments,void 0,function*(t,r={public:!1}){try{return{data:yield Ss(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(En(i))return{data:null,error:i};throw i}})}updateBucket(e,t){return ot(this,void 0,void 0,function*(){try{return{data:yield eE(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(En(r))return{data:null,error:r};throw r}})}emptyBucket(e){return ot(this,void 0,void 0,function*(){try{return{data:yield Ss(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(En(t))return{data:null,error:t};throw t}})}deleteBucket(e){return ot(this,void 0,void 0,function*(){try{return{data:yield eA(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(En(t))return{data:null,error:t};throw t}})}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}}class Cie{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},v4),t),this.fetch=QT(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return ot(this,void 0,void 0,function*(){try{return{data:yield Ss(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(En(t))return{data:null,error:t};throw t}})}listBuckets(e){return ot(this,void 0,void 0,function*(){try{const t=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&t.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&t.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&t.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&t.set("sortOrder",e.sortOrder),e!=null&&e.search&&t.set("search",e.search);const r=t.toString(),i=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`;return{data:yield Lp(this.fetch,i,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(En(t))return{data:null,error:t};throw t}})}deleteBucket(e){return ot(this,void 0,void 0,function*(){try{return{data:yield eA(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(En(t))return{data:null,error:t};throw t}})}}const tA={"X-Client-Info":`storage-js/${g4}`,"Content-Type":"application/json"};class y4 extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Ri(n){return typeof n=="object"&&n!==null&&"__isStorageVectorsError"in n}class xS extends y4{constructor(e,t,r){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Pie extends y4{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}}var JL;(function(n){n.InternalError="InternalError",n.S3VectorConflictException="S3VectorConflictException",n.S3VectorNotFoundException="S3VectorNotFoundException",n.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",n.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",n.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(JL||(JL={}));const nA=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),Rie=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},QL=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Iie=(n,e,t)=>ot(void 0,void 0,void 0,function*(){if(n&&typeof n=="object"&&"status"in n&&"ok"in n&&typeof n.status=="number"&&!(t!=null&&t.noResolveJson)){const i=n.status||500,s=n;if(typeof s.json=="function")s.json().then(o=>{const a=(o==null?void 0:o.statusCode)||(o==null?void 0:o.code)||i+"";e(new xS(QL(o),i,a))}).catch(()=>{const o=i+"",a=s.statusText||`HTTP ${i} error`;e(new xS(a,i,o))});else{const o=i+"",a=s.statusText||`HTTP ${i} error`;e(new xS(a,i,o))}}else e(new Pie(QL(n),n))}),Lie=(n,e,t,r)=>{const i={method:n,headers:(e==null?void 0:e.headers)||{}};return r?(Rie(r)?(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r)):i.body=r,Object.assign(Object.assign({},i),t)):i};function kie(n,e,t,r,i,s){return ot(this,void 0,void 0,function*(){return new Promise((o,a)=>{n(t,Lie(e,r,i,s)).then(l=>{if(!l.ok)throw l;if(r!=null&&r.noResolveJson)return l;const c=l.headers.get("content-type");return!c||!c.includes("application/json")?{}:l.json()}).then(l=>o(l)).catch(l=>Iie(l,a,r))})})}function Ii(n,e,t,r,i){return ot(this,void 0,void 0,function*(){return kie(n,"POST",e,r,i,t)})}class Oie{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},tA),t),this.fetch=nA(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return ot(this,void 0,void 0,function*(){try{return{data:(yield Ii(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ri(t))return{data:null,error:t};throw t}})}getIndex(e,t){return ot(this,void 0,void 0,function*(){try{return{data:yield Ii(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ri(r))return{data:null,error:r};throw r}})}listIndexes(e){return ot(this,void 0,void 0,function*(){try{return{data:yield Ii(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ri(t))return{data:null,error:t};throw t}})}deleteIndex(e,t){return ot(this,void 0,void 0,function*(){try{return{data:(yield Ii(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ri(r))return{data:null,error:r};throw r}})}}class Nie{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},tA),t),this.fetch=nA(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return ot(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Ii(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ri(t))return{data:null,error:t};throw t}})}getVectors(e){return ot(this,void 0,void 0,function*(){try{return{data:yield Ii(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ri(t))return{data:null,error:t};throw t}})}listVectors(e){return ot(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield Ii(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ri(t))return{data:null,error:t};throw t}})}queryVectors(e){return ot(this,void 0,void 0,function*(){try{return{data:yield Ii(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ri(t))return{data:null,error:t};throw t}})}deleteVectors(e){return ot(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Ii(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ri(t))return{data:null,error:t};throw t}})}}class Die{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},tA),t),this.fetch=nA(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return ot(this,void 0,void 0,function*(){try{return{data:(yield Ii(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ri(t))return{data:null,error:t};throw t}})}getBucket(e){return ot(this,void 0,void 0,function*(){try{return{data:yield Ii(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ri(t))return{data:null,error:t};throw t}})}listBuckets(){return ot(this,arguments,void 0,function*(e={}){try{return{data:yield Ii(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ri(t))return{data:null,error:t};throw t}})}deleteBucket(e){return ot(this,void 0,void 0,function*(){try{return{data:(yield Ii(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ri(t))return{data:null,error:t};throw t}})}}class Uie extends Die{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new Fie(this.url,this.headers,e,this.fetch)}}class Fie extends Oie{constructor(e,t,r,i){super(e,t,i),this.vectorBucketName=r}createIndex(e){const t=Object.create(null,{createIndex:{get:()=>super.createIndex}});return ot(this,void 0,void 0,function*(){return t.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return ot(this,arguments,void 0,function*(t={}){return e.listIndexes.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const t=Object.create(null,{getIndex:{get:()=>super.getIndex}});return ot(this,void 0,void 0,function*(){return t.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const t=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return ot(this,void 0,void 0,function*(){return t.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new Bie(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class Bie extends Nie{constructor(e,t,r,i,s){super(e,t,s),this.vectorBucketName=r,this.indexName=i}putVectors(e){const t=Object.create(null,{putVectors:{get:()=>super.putVectors}});return ot(this,void 0,void 0,function*(){return t.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const t=Object.create(null,{getVectors:{get:()=>super.getVectors}});return ot(this,void 0,void 0,function*(){return t.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return ot(this,arguments,void 0,function*(t={}){return e.listVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const t=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return ot(this,void 0,void 0,function*(){return t.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const t=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return ot(this,void 0,void 0,function*(){return t.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class zie extends Aie{constructor(e,t={},r,i){super(e,t,r,i)}from(e){return new Tie(this.url,this.headers,e,this.fetch)}get vectors(){return new Uie(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Cie(this.url+"/iceberg",this.headers,this.fetch)}}const Vie="2.80.0";let pf="";typeof Deno<"u"?pf="deno":typeof document<"u"?pf="web":typeof navigator<"u"&&navigator.product==="ReactNative"?pf="react-native":pf="node";const jie={"X-Client-Info":`supabase-js-${pf}/${Vie}`},Hie={headers:jie},Wie={schema:"public"},Gie={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},$ie={},Xie=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),qie=()=>Headers,Yie=(n,e,t)=>{const r=Xie(t),i=qie();return async(s,o)=>{var a;const l=(a=await e())!==null&&a!==void 0?a:n;let c=new i(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",n),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),r(s,Object.assign(Object.assign({},o),{headers:c}))}};function Kie(n){return n.endsWith("/")?n:n+"/"}function Zie(n,e){var t,r;const{db:i,auth:s,realtime:o,global:a}=n,{db:l,auth:c,realtime:d,global:f}=e,p={db:Object.assign(Object.assign({},l),i),auth:Object.assign(Object.assign({},c),s),realtime:Object.assign(Object.assign({},d),o),storage:{},global:Object.assign(Object.assign(Object.assign({},f),a),{headers:Object.assign(Object.assign({},(t=f==null?void 0:f.headers)!==null&&t!==void 0?t:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return n.accessToken?p.accessToken=n.accessToken:delete p.accessToken,p}function Jie(n){const e=n==null?void 0:n.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Kie(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const _4="2.80.0",zu=30*1e3,tE=3,wS=tE*zu,Qie="http://localhost:9999",ese="supabase.auth.token",tse={"X-Client-Info":`gotrue-js/${_4}`},nE="X-Supabase-Api-Version",x4={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},nse=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,rse=10*60*1e3;class kp extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function ft(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class ise extends kp{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}function sse(n){return ft(n)&&n.name==="AuthApiError"}class sc extends kp{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Ml extends kp{constructor(e,t,r,i){super(e,r,i),this.name=t,this.status=r}}class gs extends Ml{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function ose(n){return ft(n)&&n.name==="AuthSessionMissingError"}class ku extends Ml{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Nv extends Ml{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Dv extends Ml{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function ase(n){return ft(n)&&n.name==="AuthImplicitGrantRedirectError"}class ek extends Ml{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class rE extends Ml{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function SS(n){return ft(n)&&n.name==="AuthRetryableFetchError"}class tk extends Ml{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class iE extends Ml{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const s0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),nk=` 	
\r=`.split(""),lse=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<nk.length;e+=1)n[nk[e].charCodeAt(0)]=-2;for(let e=0;e<s0.length;e+=1)n[s0[e].charCodeAt(0)]=e;return n})();function rk(n,e,t){if(n!==null)for(e.queue=e.queue<<8|n,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(s0[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(s0[r]),e.queuedBits-=6}}function w4(n,e,t){const r=lse[n];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function ik(n){const e=[],t=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=o=>{dse(o,r,t)};for(let o=0;o<n.length;o+=1)w4(n.charCodeAt(o),i,s);return e.join("")}function cse(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function use(n,e){for(let t=0;t<n.length;t+=1){let r=n.charCodeAt(t);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(n.charCodeAt(t+1)-56320&65535|i)+65536,t+=1}cse(r,e)}}function dse(n,e,t){if(e.utf8seq===0){if(n<=127){t(n);return}for(let r=1;r<6;r+=1)if(!(n>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function Sd(n){const e=[],t={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<n.length;i+=1)w4(n.charCodeAt(i),t,r);return new Uint8Array(e)}function hse(n){const e=[];return use(n,t=>e.push(t)),new Uint8Array(e)}function pc(n){const e=[],t={queue:0,queuedBits:0},r=i=>{e.push(i)};return n.forEach(i=>rk(i,t,r)),rk(null,t,r),e.join("")}function fse(n){return Math.round(Date.now()/1e3)+n}function pse(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const kr=()=>typeof window<"u"&&typeof document<"u",$l={tested:!1,writable:!1},S4=()=>{if(!kr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if($l.tested)return $l.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),$l.tested=!0,$l.writable=!0}catch{$l.tested=!0,$l.writable=!1}return $l.writable};function mse(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((i,s)=>{e[s]=i})}catch{}return t.searchParams.forEach((r,i)=>{e[i]=r}),e}const b4=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),gse=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",Vu=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},Xl=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Ma=async(n,e)=>{await n.removeItem(e)};class b_{constructor(){this.promise=new b_.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}b_.promiseConstructor=Promise;function bS(n){const e=n.split(".");if(e.length!==3)throw new iE("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!nse.test(e[r]))throw new iE("JWT not in base64url format");return{header:JSON.parse(ik(e[0])),payload:JSON.parse(ik(e[1])),signature:Sd(e[2]),raw:{header:e[0],payload:e[1]}}}async function vse(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function yse(n,e){return new Promise((r,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const o=await n(s);if(!e(s,null,o)){r(o);return}}catch(o){if(!e(s,o)){i(o);return}}})()})}function _se(n){return("0"+n.toString(16)).substr(-2)}function xse(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let i="";for(let s=0;s<56;s++)i+=t.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,_se).join("")}async function wse(n){const t=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",t),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}async function Sse(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await wse(n);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ou(n,e,t=!1){const r=xse();let i=r;t&&(i+="/PASSWORD_RECOVERY"),await Vu(n,`${e}-code-verifier`,i);const s=await Sse(r);return[s,r===s?"plain":"s256"]}const bse=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Ese(n){const e=n.headers.get(nE);if(!e||!e.match(bse))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Mse(n){if(!n)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function Tse(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Ase=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Nu(n){if(!Ase.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function ES(){const n={};return new Proxy(n,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const r=t.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Cse(n,e){return new Proxy(n,{get:(t,r,i)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const s=r.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)"||s==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(t,r,i)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(t,r,i)}})}function sk(n){return JSON.parse(JSON.stringify(n))}const nc=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Pse=[502,503,504];async function ok(n){var e;if(!gse(n))throw new rE(nc(n),0);if(Pse.includes(n.status))throw new rE(nc(n),n.status);let t;try{t=await n.json()}catch(s){throw new sc(nc(s),s)}let r;const i=Ese(n);if(i&&i.getTime()>=x4["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?r=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(r=t.error_code),r){if(r==="weak_password")throw new tk(nc(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new gs}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0))throw new tk(nc(t),n.status,t.weak_password.reasons);throw new ise(nc(t),n.status||500,r)}const Rse=(n,e,t,r)=>{const i={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),t))};async function St(n,e,t,r){var i;const s=Object.assign({},r==null?void 0:r.headers);s[nE]||(s[nE]=x4["2024-01-01"].name),r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const o=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await Ise(n,e,t+a,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function Ise(n,e,t,r,i,s){const o=Rse(e,r,i,s);let a;try{a=await n(t,Object.assign({},o))}catch(l){throw console.error(l),new rE(nc(l),0)}if(a.ok||await ok(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await ok(l)}}function vs(n){var e;let t=null;Ose(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=fse(n.expires_in)));const r=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:r},error:null}}function ak(n){const e=vs(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=n.weak_password),e}function Oa(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function Lse(n){return{data:n,error:null}}function kse(n){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:s}=n,o=hh(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:s},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function lk(n){return n}function Ose(n){return n.access_token&&n.refresh_token&&n.expires_in}const MS=["global","local","others"];class Nse{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=b4(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=MS[0]){if(MS.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${MS.join(", ")}`);try{return await St(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(ft(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await St(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Oa})}catch(r){if(ft(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=hh(e,["options"]),i=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await St(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:kse,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(ft(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await St(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Oa})}catch(t){if(ft(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,i,s,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},d=await St(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:lk});if(d.error)throw d.error;const f=await d.json(),p=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(l=(a=d.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return m.length>0&&(m.forEach(v=>{const x=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(v.split(";")[1].split("=")[1]);c[`${y}Page`]=x}),c.total=parseInt(p)),{data:Object.assign(Object.assign({},f),c),error:null}}catch(c){if(ft(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){Nu(e);try{return await St(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Oa})}catch(t){if(ft(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Nu(e);try{return await St(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Oa})}catch(r){if(ft(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){Nu(e);try{return await St(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Oa})}catch(r){if(ft(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Nu(e.userId);try{const{data:t,error:r}=await St(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:t,error:r}}catch(t){if(ft(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Nu(e.userId),Nu(e.id);try{return{data:await St(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(ft(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,r,i,s,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},d=await St(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:lk});if(d.error)throw d.error;const f=await d.json(),p=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(l=(a=d.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return m.length>0&&(m.forEach(v=>{const x=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(v.split(";")[1].split("=")[1]);c[`${y}Page`]=x}),c.total=parseInt(p)),{data:Object.assign(Object.assign({},f),c),error:null}}catch(c){if(ft(c))return{data:{clients:[]},error:c};throw c}}async _createOAuthClient(e){try{return await St(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(ft(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await St(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(ft(t))return{data:null,error:t};throw t}}async _updateOAuthClient(e,t){try{return await St(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ft(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await St(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(t){if(ft(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await St(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(ft(t))return{data:null,error:t};throw t}}}function ck(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}const Du={debug:!!(globalThis&&S4()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class E4 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Dse extends E4{}async function Use(n,e,t){Du.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Du.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){Du.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,i.name);try{return await t()}finally{Du.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,i.name)}}else{if(e===0)throw Du.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new Dse(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(Du.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}function Fse(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function M4(n){if(!/^0x[a-fA-F0-9]{40}$/.test(n))throw new Error(`@supabase/auth-js: Address "${n}" is invalid.`);return n.toLowerCase()}function Bse(n){return parseInt(n,16)}function zse(n){const e=new TextEncoder().encode(n);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function Vse(n){var e;const{chainId:t,domain:r,expirationTime:i,issuedAt:s=new Date,nonce:o,notBefore:a,requestId:l,resources:c,scheme:d,uri:f,version:p}=n;{if(!Number.isInteger(t))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${t}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!f)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(p!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${p}`);if(!((e=n.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${n.statement}`)}const m=M4(n.address),v=d?`${d}://${r}`:r,x=n.statement?`${n.statement}
`:"",y=`${v} wants you to sign in with your Ethereum account:
${m}

${x}`;let g=`URI: ${f}
Version: ${p}
Chain ID: ${t}${o?`
Nonce: ${o}`:""}
Issued At: ${s.toISOString()}`;if(i&&(g+=`
Expiration Time: ${i.toISOString()}`),a&&(g+=`
Not Before: ${a.toISOString()}`),l&&(g+=`
Request ID: ${l}`),c){let w=`
Resources:`;for(const S of c){if(!S||typeof S!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${S}`);w+=`
- ${S}`}g+=w}return`${y}
${g}`}class Kn extends Error{constructor({message:e,code:t,cause:r,name:i}){var s;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(s=i??(r instanceof Error?r.name:void 0))!==null&&s!==void 0?s:"Unknown Error",this.code=t}}class o0 extends Kn{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function jse({error:n,options:e}){var t,r,i;const{publicKey:s}=e;if(!s)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Kn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else if(n.name==="ConstraintError"){if(((t=s.authenticatorSelection)===null||t===void 0?void 0:t.requireResidentKey)===!0)return new Kn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:n});if(e.mediation==="conditional"&&((r=s.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new Kn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:n});if(((i=s.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Kn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:n})}else{if(n.name==="InvalidStateError")return new Kn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:n});if(n.name==="NotAllowedError")return new Kn({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="NotSupportedError")return s.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new Kn({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:n}):new Kn({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:n});if(n.name==="SecurityError"){const o=window.location.hostname;if(T4(o)){if(s.rp.id!==o)return new Kn({message:`The RP ID "${s.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new Kn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="TypeError"){if(s.user.id.byteLength<1||s.user.id.byteLength>64)return new Kn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:n})}else if(n.name==="UnknownError")return new Kn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new Kn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}function Hse({error:n,options:e}){const{publicKey:t}=e;if(!t)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Kn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else{if(n.name==="NotAllowedError")return new Kn({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="SecurityError"){const r=window.location.hostname;if(T4(r)){if(t.rpId!==r)return new Kn({message:`The RP ID "${t.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new Kn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="UnknownError")return new Kn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new Kn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}class Wse{createNewAbortSignal(){if(this.controller){const t=new Error("Cancelling existing WebAuthn API call for new one");t.name="AbortError",this.controller.abort(t)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const Gse=new Wse;function $se(n){if(!n)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(n);const{challenge:e,user:t,excludeCredentials:r}=n,i=hh(n,["challenge","user","excludeCredentials"]),s=Sd(e).buffer,o=Object.assign(Object.assign({},t),{id:Sd(t.id).buffer}),a=Object.assign(Object.assign({},i),{challenge:s,user:o});if(r&&r.length>0){a.excludeCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const c=r[l];a.excludeCredentials[l]=Object.assign(Object.assign({},c),{id:Sd(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return a}function Xse(n){if(!n)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(n);const{challenge:e,allowCredentials:t}=n,r=hh(n,["challenge","allowCredentials"]),i=Sd(e).buffer,s=Object.assign(Object.assign({},r),{challenge:i});if(t&&t.length>0){s.allowCredentials=new Array(t.length);for(let o=0;o<t.length;o++){const a=t[o];s.allowCredentials[o]=Object.assign(Object.assign({},a),{id:Sd(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return s}function qse(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const t=n;return{id:n.id,rawId:n.id,response:{attestationObject:pc(new Uint8Array(n.response.attestationObject)),clientDataJSON:pc(new Uint8Array(n.response.clientDataJSON))},type:"public-key",clientExtensionResults:n.getClientExtensionResults(),authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Yse(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const t=n,r=n.getClientExtensionResults(),i=n.response;return{id:n.id,rawId:n.id,response:{authenticatorData:pc(new Uint8Array(i.authenticatorData)),clientDataJSON:pc(new Uint8Array(i.clientDataJSON)),signature:pc(new Uint8Array(i.signature)),userHandle:i.userHandle?pc(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function T4(n){return n==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(n)}function uk(){var n,e;return!!(kr()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((n=navigator==null?void 0:navigator.credentials)===null||n===void 0?void 0:n.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function Kse(n){try{const e=await navigator.credentials.create(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new o0("Browser returned unexpected credential type",e)}:{data:null,error:new o0("Empty credential response",e)}}catch(e){return{data:null,error:jse({error:e,options:n})}}}async function Zse(n){try{const e=await navigator.credentials.get(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new o0("Browser returned unexpected credential type",e)}:{data:null,error:new o0("Empty credential response",e)}}catch(e){return{data:null,error:Hse({error:e,options:n})}}}const Jse={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},Qse={userVerification:"preferred",hints:["security-key"]};function a0(...n){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),t=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of n)if(i)for(const s in i){const o=i[s];if(o!==void 0)if(Array.isArray(o))r[s]=o;else if(t(o))r[s]=o;else if(e(o)){const a=r[s];e(a)?r[s]=a0(a,o):r[s]=a0(o)}else r[s]=o}return r}function eoe(n,e){return a0(Jse,n,e||{})}function toe(n,e){return a0(Qse,n,e||{})}class noe{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:t,friendlyName:r,signal:i},s){try{const{data:o,error:a}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!o)return{data:null,error:a};const l=i??Gse.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:c}=o.webauthn.credential_options.publicKey;c.name||(c.name=`${c.id}:${r}`),c.displayName||(c.displayName=c.name)}switch(o.webauthn.type){case"create":{const c=eoe(o.webauthn.credential_options.publicKey,s==null?void 0:s.create),{data:d,error:f}=await Kse({publicKey:c,signal:l});return d?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:d}},error:null}:{data:null,error:f}}case"request":{const c=toe(o.webauthn.credential_options.publicKey,s==null?void 0:s.request),{data:d,error:f}=await Zse(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:c,signal:l}));return d?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:d}},error:null}:{data:null,error:f}}}}catch(o){return ft(o)?{data:null,error:o}:{data:null,error:new sc("Unexpected error in challenge",o)}}}async _verify({challengeId:e,factorId:t,webauthn:r}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}},s){if(!t)return{data:null,error:new kp("rpId is required for WebAuthn authentication")};try{if(!uk())return{data:null,error:new sc("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:r},signal:i},{request:s});if(!o)return{data:null,error:a};const{webauthn:l}=o;return this._verify({factorId:e,challengeId:o.challengeId,webauthn:{type:l.type,rpId:t,rpOrigins:r,credential_response:l.credential_response}})}catch(o){return ft(o)?{data:null,error:o}:{data:null,error:new sc("Unexpected error in authenticate",o)}}}async _register({friendlyName:e,rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i},s){if(!t)return{data:null,error:new kp("rpId is required for WebAuthn registration")};try{if(!uk())return{data:null,error:new sc("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this._enroll({friendlyName:e});if(!o)return await this.client.mfa.listFactors().then(d=>{var f;return(f=d.data)===null||f===void 0?void 0:f.all.find(p=>p.factor_type==="webauthn"&&p.friendly_name===e&&p.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:a};const{data:l,error:c}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:t,rpOrigins:r},signal:i},{create:s});return l?this._verify({factorId:o.id,challengeId:l.challengeId,webauthn:{rpId:t,rpOrigins:r,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:c}}catch(o){return ft(o)?{data:null,error:o}:{data:null,error:new sc("Unexpected error in register",o)}}}}Fse();const roe={url:Qie,storageKey:ese,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:tse,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function dk(n,e,t){return await t()}const Uu={};class Op{get jwks(){var e,t;return(t=(e=Uu[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){Uu[this.storageKey]=Object.assign(Object.assign({},Uu[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=Uu[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Uu[this.storageKey]=Object.assign(Object.assign({},Uu[this.storageKey]),{cachedAt:e})}constructor(e){var t,r,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const s=Object.assign(Object.assign({},roe),e);if(this.storageKey=s.storageKey,this.instanceID=(t=Op.nextInstanceID[this.storageKey])!==null&&t!==void 0?t:0,Op.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.instanceID>0&&kr()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=s.persistSession,this.autoRefreshToken=s.autoRefreshToken,this.admin=new Nse({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=b4(s.fetch),this.lock=s.lock||dk,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,this.throwOnError=s.throwOnError,s.lock?this.lock=s.lock:kr()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=Use:this.lock=dk,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new noe(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:S4()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=ck(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=ck(this.memoryStorage)),kr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${_4}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let t={},r="none";if(kr()&&(t=mse(window.location.href),this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce")),kr()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:s}=await this._getSessionFromURL(t,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),ase(s)){const l=(e=s.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:o,redirectType:a}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return ft(t)?this._returnResult({error:t}):this._returnResult({error:new sc("Unexpected error during initialization",t)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,i;try{const s=await St(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:vs}),{data:o,error:a}=s;if(a||!o)return this._returnResult({data:{user:null,session:null},error:a});const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(s){if(ft(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signUp(e){var t,r,i;try{let s;if("email"in e){const{email:d,password:f,options:p}=e;let m=null,v=null;this.flowType==="pkce"&&([m,v]=await Ou(this.storage,this.storageKey)),s=await St(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p==null?void 0:p.emailRedirectTo,body:{email:d,password:f,data:(t=p==null?void 0:p.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:m,code_challenge_method:v},xform:vs})}else if("phone"in e){const{phone:d,password:f,options:p}=e;s=await St(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:f,data:(r=p==null?void 0:p.data)!==null&&r!==void 0?r:{},channel:(i=p==null?void 0:p.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:vs})}else throw new Nv("You must provide either an email or phone number and a password");const{data:o,error:a}=s;if(a||!o)return this._returnResult({data:{user:null,session:null},error:a});const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(s){if(ft(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithPassword(e){try{let t;if("email"in e){const{email:s,password:o,options:a}=e;t=await St(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:ak})}else if("phone"in e){const{phone:s,password:o,options:a}=e;t=await St(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:ak})}else throw new Nv("You must provide either an email or phone number and a password");const{data:r,error:i}=t;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!r||!r.session||!r.user){const s=new ku;return this._returnResult({data:{user:null,session:null},error:s})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(t){if(ft(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOAuth(e){var t,r,i,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,r,i,s,o,a,l,c,d,f,p;let m,v;if("message"in e)m=e.message,v=e.signature;else{const{chain:x,wallet:y,statement:g,options:w}=e;let S;if(kr())if(typeof y=="object")S=y;else{const R=window;if("ethereum"in R&&typeof R.ethereum=="object"&&"request"in R.ethereum&&typeof R.ethereum.request=="function")S=R.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");S=y}const E=new URL((t=w==null?void 0:w.url)!==null&&t!==void 0?t:window.location.href),A=await S.request({method:"eth_requestAccounts"}).then(R=>R).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!A||A.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const T=M4(A[0]);let P=(r=w==null?void 0:w.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!P){const R=await S.request({method:"eth_chainId"});P=Bse(R)}const k={domain:E.host,address:T,statement:g,uri:E.href,version:"1",chainId:P,nonce:(i=w==null?void 0:w.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(o=(s=w==null?void 0:w.signInWithEthereum)===null||s===void 0?void 0:s.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(a=w==null?void 0:w.signInWithEthereum)===null||a===void 0?void 0:a.expirationTime,notBefore:(l=w==null?void 0:w.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(c=w==null?void 0:w.signInWithEthereum)===null||c===void 0?void 0:c.requestId,resources:(d=w==null?void 0:w.signInWithEthereum)===null||d===void 0?void 0:d.resources};m=Vse(k),v=await S.request({method:"personal_sign",params:[zse(m),T]})}try{const{data:x,error:y}=await St(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:m,signature:v},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=e.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:vs});if(y)throw y;if(!x||!x.session||!x.user){const g=new ku;return this._returnResult({data:{user:null,session:null},error:g})}return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),this._returnResult({data:Object.assign({},x),error:y})}catch(x){if(ft(x))return this._returnResult({data:{user:null,session:null},error:x});throw x}}async signInWithSolana(e){var t,r,i,s,o,a,l,c,d,f,p,m;let v,x;if("message"in e)v=e.message,x=e.signature;else{const{chain:y,wallet:g,statement:w,options:S}=e;let E;if(kr())if(typeof g=="object")E=g;else{const T=window;if("solana"in T&&typeof T.solana=="object"&&("signIn"in T.solana&&typeof T.solana.signIn=="function"||"signMessage"in T.solana&&typeof T.solana.signMessage=="function"))E=T.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!(S!=null&&S.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");E=g}const A=new URL((t=S==null?void 0:S.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in E&&E.signIn){const T=await E.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},S==null?void 0:S.signInWithSolana),{version:"1",domain:A.host,uri:A.href}),w?{statement:w}:null));let P;if(Array.isArray(T)&&T[0]&&typeof T[0]=="object")P=T[0];else if(T&&typeof T=="object"&&"signedMessage"in T&&"signature"in T)P=T;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in P&&"signature"in P&&(typeof P.signedMessage=="string"||P.signedMessage instanceof Uint8Array)&&P.signature instanceof Uint8Array)v=typeof P.signedMessage=="string"?P.signedMessage:new TextDecoder().decode(P.signedMessage),x=P.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in E)||typeof E.signMessage!="function"||!("publicKey"in E)||typeof E!="object"||!E.publicKey||!("toBase58"in E.publicKey)||typeof E.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${A.host} wants you to sign in with your Solana account:`,E.publicKey.toBase58(),...w?["",w,""]:[""],"Version: 1",`URI: ${A.href}`,`Issued At: ${(i=(r=S==null?void 0:S.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((s=S==null?void 0:S.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${S.signInWithSolana.notBefore}`]:[],...!((o=S==null?void 0:S.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${S.signInWithSolana.expirationTime}`]:[],...!((a=S==null?void 0:S.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${S.signInWithSolana.chainId}`]:[],...!((l=S==null?void 0:S.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${S.signInWithSolana.nonce}`]:[],...!((c=S==null?void 0:S.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${S.signInWithSolana.requestId}`]:[],...!((f=(d=S==null?void 0:S.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||f===void 0)&&f.length?["Resources",...S.signInWithSolana.resources.map(P=>`- ${P}`)]:[]].join(`
`);const T=await E.signMessage(new TextEncoder().encode(v),"utf8");if(!T||!(T instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");x=T}}try{const{data:y,error:g}=await St(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:pc(x)},!((p=e.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(m=e.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:vs});if(g)throw g;if(!y||!y.session||!y.user){const w=new ku;return this._returnResult({data:{user:null,session:null},error:w})}return y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),this._returnResult({data:Object.assign({},y),error:g})}catch(y){if(ft(y))return this._returnResult({data:{user:null,session:null},error:y});throw y}}async _exchangeCodeForSession(e){const t=await Xl(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(t??"").split("/");try{const{data:s,error:o}=await St(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:vs});if(await Ma(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!s||!s.session||!s.user){const a=new ku;return this._returnResult({data:{user:null,session:null,redirectType:null},error:a})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:o})}catch(s){if(ft(s))return this._returnResult({data:{user:null,session:null,redirectType:null},error:s});throw s}}async signInWithIdToken(e){try{const{options:t,provider:r,token:i,access_token:s,nonce:o}=e,a=await St(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:s,nonce:o,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:vs}),{data:l,error:c}=a;if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l||!l.session||!l.user){const d=new ku;return this._returnResult({data:{user:null,session:null},error:d})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:c})}catch(t){if(ft(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOtp(e){var t,r,i,s,o;try{if("email"in e){const{email:a,options:l}=e;let c=null,d=null;this.flowType==="pkce"&&([c,d]=await Ou(this.storage,this.storageKey));const{error:f}=await St(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(t=l==null?void 0:l.data)!==null&&t!==void 0?t:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:d},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:f})}if("phone"in e){const{phone:a,options:l}=e,{data:c,error:d}=await St(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:d})}throw new Nv("You must provide either an email or phone number.")}catch(a){if(ft(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async verifyOtp(e){var t,r;try{let i,s;"options"in e&&(i=(t=e.options)===null||t===void 0?void 0:t.redirectTo,s=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await St(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:vs});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(i){if(ft(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(e){var t,r,i;try{let s=null,o=null;this.flowType==="pkce"&&([s,o]=await Ou(this.storage,this.storageKey));const a=await St(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:o}),headers:this.headers,xform:Lse});return this._returnResult(a)}catch(s){if(ft(s))return this._returnResult({data:null,error:s});throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new gs;const{error:i}=await St(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(e){if(ft(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:s}=e,{error:o}=await St(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in e){const{phone:r,type:i,options:s}=e,{data:o,error:a}=await St(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a})}throw new Nv("You must provide either an email or phone number and a type")}catch(t){if(ft(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await t()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=t();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await Xl(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<wS:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const o=await Xl(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=ES()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};e.user=Cse(e.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?this._returnResult({data:{session:null},error:s}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await St(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Oa}):await this._useSession(async t=>{var r,i,s;const{data:o,error:a}=t;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new gs}:await St(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:Oa})})}catch(t){if(ft(t))return ose(t)&&(await this._removeSession(),await Ma(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:t});throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:i,error:s}=r;if(s)throw s;if(!i.session)throw new gs;const o=i.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await Ou(this.storage,this.storageKey));const{data:c,error:d}=await St(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:Oa});if(d)throw d;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(r){if(ft(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new gs;const t=Date.now()/1e3;let r=t,i=!0,s=null;const{payload:o}=bS(e.access_token);if(o.exp&&(r=o.exp,i=r<=t),i){const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!a)return{data:{user:null,session:null},error:null};s=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;s={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return this._returnResult({data:{user:s.user,session:s},error:null})}catch(t){if(ft(t))return this._returnResult({data:{session:null,user:null},error:t});throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:o,error:a}=t;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new gs;const{data:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?this._returnResult({data:{user:null,session:null},error:s}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(t){if(ft(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async _getSessionFromURL(e,t){try{if(!kr())throw new Dv("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Dv(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new ek("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Dv("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new ek("No code detected.");const{data:w,error:S}=await this._exchangeCodeForSession(e.code);if(S)throw S;const E=new URL(window.location.href);return E.searchParams.delete("code"),window.history.replaceState(window.history.state,"",E.toString()),{data:{session:w.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:s,refresh_token:o,expires_in:a,expires_at:l,token_type:c}=e;if(!s||!a||!o||!c)throw new Dv("No session defined in URL");const d=Math.round(Date.now()/1e3),f=parseInt(a);let p=d+f;l&&(p=parseInt(l));const m=p-d;m*1e3<=zu&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${f}s`);const v=p-f;d-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,p,d):d-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,p,d);const{data:x,error:y}=await this._getUser(s);if(y)throw y;const g={provider_token:r,provider_refresh_token:i,access_token:s,expires_in:f,expires_at:p,refresh_token:o,token_type:c,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:g,redirectType:e.type},error:null})}catch(r){if(ft(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Xl(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:i,error:s}=t;if(s)return this._returnResult({error:s});const o=(r=i.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(sse(a)&&(a.status===404||a.status===401||a.status===403)))return this._returnResult({error:a})}return e!=="others"&&(await this._removeSession(),await Ma(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const t=pse(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,i;try{const{data:{session:s},error:o}=t;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,t={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await Ou(this.storage,this.storageKey,!0));try{return await St(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(s){if(ft(s))return this._returnResult({data:null,error:s});throw s}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(t){if(ft(t))return this._returnResult({data:null,error:t});throw t}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:r,error:i}=await this._useSession(async s=>{var o,a,l,c,d;const{data:f,error:p}=s;if(p)throw p;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await St(this.fetch,"GET",m,{headers:this.headers,jwt:(d=(c=f.session)===null||c===void 0?void 0:c.access_token)!==null&&d!==void 0?d:void 0})});if(i)throw i;return kr()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:e.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(ft(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var r;try{const{error:i,data:{session:s}}=t;if(i)throw i;const{options:o,provider:a,token:l,access_token:c,nonce:d}=e,f=await St(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=s==null?void 0:s.access_token)!==null&&r!==void 0?r:void 0,body:{provider:a,id_token:l,access_token:c,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:vs}),{data:p,error:m}=f;return m?this._returnResult({data:{user:null,session:null},error:m}):!p||!p.session||!p.user?this._returnResult({data:{user:null,session:null},error:new ku}):(p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("USER_UPDATED",p.session)),this._returnResult({data:p,error:m}))}catch(i){if(ft(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,i;const{data:s,error:o}=t;if(o)throw o;return await St(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(t){if(ft(t))return this._returnResult({data:null,error:t});throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await yse(async i=>(i>0&&await vse(200*Math.pow(2,i-1)),this._debug(t,"refreshing attempt",i),await St(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:vs})),(i,s)=>{const o=200*Math.pow(2,i);return s&&SS(s)&&Date.now()+o-r<zu})}catch(r){if(this._debug(t,"error",r),ft(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),kr()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await Xl(this.storage,this.storageKey);if(i&&this.userStorage){let o=await Xl(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:i.user},await Vu(this.userStorage,this.storageKey+"-user",o)),i.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:ES()}else if(i&&!i.user&&!i.user){const o=await Xl(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(i.user=o.user,await Ma(this.storage,this.storageKey+"-user"),await Vu(this.storage,this.storageKey,i)):i.user=ES()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const s=((t=i.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<wS;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${wS}s`),s){if(this.autoRefreshToken&&i.refresh_token){const{error:o}=await this._callRefreshToken(i.refresh_token);o&&(console.error(o),SS(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(i.access_token);!a&&(o!=null&&o.user)?(i.user=o.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new gs;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new b_;const{data:s,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!s.session)throw new gs;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const a={data:s.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(s){if(this._debug(i,"error",s),ft(s)){const o={data:null,error:s};return SS(s)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,t,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const s=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,t)}catch(l){s.push(l)}});if(await Promise.all(o),s.length>0){for(let a=0;a<s.length;a+=1)console.error(s[a]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),r=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&t.user&&await Vu(this.userStorage,this.storageKey+"-user",{user:t.user});const i=Object.assign({},t);delete i.user;const s=sk(i);await Vu(this.storage,this.storageKey,s)}else{const i=sk(t);await Vu(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await Ma(this.storage,this.storageKey),await Ma(this.storage,this.storageKey+"-code-verifier"),await Ma(this.storage,this.storageKey+"-user"),this.userStorage&&await Ma(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&kr()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),zu);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/zu);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${zu}ms, refresh threshold is ${tE} ticks`),i<=tE&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof E4)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!kr()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const i=[`provider=${encodeURIComponent(t)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,o]=await Ou(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(a.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);i.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:i,error:s}=t;return s?this._returnResult({data:null,error:s}):await St(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(ft(t))return this._returnResult({data:null,error:t});throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,i;const{data:s,error:o}=t;if(o)return this._returnResult({data:null,error:o});const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:l,error:c}=await St(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return c?this._returnResult({data:null,error:c}):(e.factorType==="totp"&&l.type==="totp"&&(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(t){if(ft(t))return this._returnResult({data:null,error:t});throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:i,error:s}=t;if(s)return this._returnResult({data:null,error:s});const o=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?qse(e.webauthn.credential_response):Yse(e.webauthn.credential_response)})}:{code:e.code}),{data:a,error:l}=await St(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:o,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),this._returnResult({data:a,error:l}))})}catch(t){if(ft(t))return this._returnResult({data:null,error:t});throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:i,error:s}=t;if(s)return this._returnResult({data:null,error:s});const o=await St(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});if(o.error)return o;const{data:a}=o;if(a.type!=="webauthn")return{data:a,error:null};switch(a.webauthn.type){case"create":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:$se(a.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:Xse(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if(ft(t))return this._returnResult({data:null,error:t});throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const i={all:[],phone:[],totp:[],webauthn:[]};for(const s of(e=t==null?void 0:t.factors)!==null&&e!==void 0?e:[])i.all.push(s),s.status==="verified"&&i[s.factor_type].push(s);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var e,t;const{data:{session:r},error:i}=await this.getSession();if(i)return this._returnResult({data:null,error:i});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:s}=bS(r.access_token);let o=null;s.aal&&(o=s.aal);let a=o;((t=(e=r.user.factors)===null||e===void 0?void 0:e.filter(d=>d.status==="verified"))!==null&&t!==void 0?t:[]).length>0&&(a="aal2");const c=s.amr||[];return{data:{currentLevel:o,nextLevel:a,currentAuthenticationMethods:c},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async t=>{const{data:{session:r},error:i}=t;return i?this._returnResult({data:null,error:i}):r?await St(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new gs})})}catch(t){if(ft(t))return this._returnResult({data:null,error:t});throw t}}async _approveAuthorization(e,t){try{return await this._useSession(async r=>{const{data:{session:i},error:s}=r;if(s)return this._returnResult({data:null,error:s});if(!i)return this._returnResult({data:null,error:new gs});const o=await St(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&kr()&&!(t!=null&&t.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(r){if(ft(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,t){try{return await this._useSession(async r=>{const{data:{session:i},error:s}=r;if(s)return this._returnResult({data:null,error:s});if(!i)return this._returnResult({data:null,error:new gs});const o=await St(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&kr()&&!(t!=null&&t.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(r){if(ft(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(e,t={keys:[]}){let r=t.keys.find(a=>a.kid===e);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(a=>a.kid===e),r&&this.jwks_cached_at+rse>i)return r;const{data:s,error:o}=await St(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=i,r=s.keys.find(a=>a.kid===e),!r)?null:r}async getClaims(e,t={}){try{let r=e;if(!r){const{data:m,error:v}=await this.getSession();if(v||!m.session)return this._returnResult({data:null,error:v});r=m.session.access_token}const{header:i,payload:s,signature:o,raw:{header:a,payload:l}}=bS(r);t!=null&&t.allowExpired||Mse(s.exp);const c=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,t!=null&&t.keys?{keys:t.keys}:t==null?void 0:t.jwks);if(!c){const{error:m}=await this.getUser(r);if(m)throw m;return{data:{claims:s,header:i,signature:o},error:null}}const d=Tse(i.alg),f=await crypto.subtle.importKey("jwk",c,d,!0,["verify"]);if(!await crypto.subtle.verify(d,f,o,hse(`${a}.${l}`)))throw new iE("Invalid JWT signature");return{data:{claims:s,header:i,signature:o},error:null}}catch(r){if(ft(r))return this._returnResult({data:null,error:r});throw r}}}Op.nextInstanceID={};const ioe=Op;class soe extends ioe{constructor(e){super(e)}}class ooe{constructor(e,t,r){var i,s,o;this.supabaseUrl=e,this.supabaseKey=t;const a=Jie(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const l=`sb-${a.hostname.split(".")[0]}-auth-token`,c={db:Wie,realtime:$ie,auth:Object.assign(Object.assign({},Gie),{storageKey:l}),global:Hie},d=Zie(r??{},c);this.storageKey=(i=d.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(s=d.global.headers)!==null&&s!==void 0?s:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(f,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=Yie(t,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new Qre(new URL("rest/v1",a).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new zie(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new Kre(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,t;if(this.accessToken)return await this.accessToken();const{data:r}=await this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,userStorage:s,storageKey:o,flowType:a,lock:l,debug:c,throwOnError:d},f,p){const m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new soe({url:this.authUrl.href,headers:Object.assign(Object.assign({},m),f),storageKey:o,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,userStorage:s,flowType:a,lock:l,debug:c,throwOnError:d,fetch:p,hasCustomAuthorizationHeader:Object.keys(this.headers).some(v=>v.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new gie(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const aoe=(n,e,t)=>new ooe(n,e,t);function loe(){if(typeof window<"u"||typeof process>"u")return!1;const n=process.version;if(n==null)return!1;const e=n.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}loe()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const coe="https://bijfoxbowqrslsjzumkz.supabase.co",uoe="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJpamZveGJvd3Fyc2xzanp1bWt6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI0MzUwNTAsImV4cCI6MjA3ODAxMTA1MH0.b3UuHKdSlvzgWQU1XtvuX9OV2wYjKatnD90PMl0srJE",doe=aoe(coe,uoe,{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0}});var tn;(function(n){n.assertEqual=i=>{};function e(i){}n.assertIs=e;function t(i){throw new Error}n.assertNever=t,n.arrayToEnum=i=>{const s={};for(const o of i)s[o]=o;return s},n.getValidEnumValues=i=>{const s=n.objectKeys(i).filter(a=>typeof i[i[a]]!="number"),o={};for(const a of s)o[a]=i[a];return n.objectValues(o)},n.objectValues=i=>n.objectKeys(i).map(function(s){return i[s]}),n.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const s=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&s.push(o);return s},n.find=(i,s)=>{for(const o of i)if(s(o))return o},n.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&Number.isFinite(i)&&Math.floor(i)===i;function r(i,s=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(s)}n.joinValues=r,n.jsonStringifyReplacer=(i,s)=>typeof s=="bigint"?s.toString():s})(tn||(tn={}));var hk;(function(n){n.mergeShapes=(e,t)=>({...e,...t})})(hk||(hk={}));const nt=tn.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Ra=n=>{switch(typeof n){case"undefined":return nt.undefined;case"string":return nt.string;case"number":return Number.isNaN(n)?nt.nan:nt.number;case"boolean":return nt.boolean;case"function":return nt.function;case"bigint":return nt.bigint;case"symbol":return nt.symbol;case"object":return Array.isArray(n)?nt.array:n===null?nt.null:n.then&&typeof n.then=="function"&&n.catch&&typeof n.catch=="function"?nt.promise:typeof Map<"u"&&n instanceof Map?nt.map:typeof Set<"u"&&n instanceof Set?nt.set:typeof Date<"u"&&n instanceof Date?nt.date:nt.object;default:return nt.unknown}},ke=tn.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class go extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(s){return s.message},r={_errors:[]},i=s=>{for(const o of s.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)r._errors.push(t(o));else{let a=r,l=0;for(;l<o.path.length;){const c=o.path[l];l===o.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(t(o))):a[c]=a[c]||{_errors:[]},a=a[c],l++}}};return i(this),r}static assert(e){if(!(e instanceof go))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,tn.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},r=[];for(const i of this.issues)if(i.path.length>0){const s=i.path[0];t[s]=t[s]||[],t[s].push(e(i))}else r.push(e(i));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}go.create=n=>new go(n);const sE=(n,e)=>{let t;switch(n.code){case ke.invalid_type:n.received===nt.undefined?t="Required":t=`Expected ${n.expected}, received ${n.received}`;break;case ke.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(n.expected,tn.jsonStringifyReplacer)}`;break;case ke.unrecognized_keys:t=`Unrecognized key(s) in object: ${tn.joinValues(n.keys,", ")}`;break;case ke.invalid_union:t="Invalid input";break;case ke.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${tn.joinValues(n.options)}`;break;case ke.invalid_enum_value:t=`Invalid enum value. Expected ${tn.joinValues(n.options)}, received '${n.received}'`;break;case ke.invalid_arguments:t="Invalid function arguments";break;case ke.invalid_return_type:t="Invalid function return type";break;case ke.invalid_date:t="Invalid date";break;case ke.invalid_string:typeof n.validation=="object"?"includes"in n.validation?(t=`Invalid input: must include "${n.validation.includes}"`,typeof n.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${n.validation.position}`)):"startsWith"in n.validation?t=`Invalid input: must start with "${n.validation.startsWith}"`:"endsWith"in n.validation?t=`Invalid input: must end with "${n.validation.endsWith}"`:tn.assertNever(n.validation):n.validation!=="regex"?t=`Invalid ${n.validation}`:t="Invalid";break;case ke.too_small:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at least":"more than"} ${n.minimum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at least":"over"} ${n.minimum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${n.minimum}`:n.type==="bigint"?t=`Number must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${n.minimum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(n.minimum))}`:t="Invalid input";break;case ke.too_big:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at most":"less than"} ${n.maximum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at most":"under"} ${n.maximum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="bigint"?t=`BigInt must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly":n.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(n.maximum))}`:t="Invalid input";break;case ke.custom:t="Invalid input";break;case ke.invalid_intersection_types:t="Intersection results could not be merged";break;case ke.not_multiple_of:t=`Number must be a multiple of ${n.multipleOf}`;break;case ke.not_finite:t="Number must be finite";break;default:t=e.defaultError,tn.assertNever(n)}return{message:t}};let hoe=sE;function foe(){return hoe}const poe=n=>{const{data:e,path:t,errorMaps:r,issueData:i}=n,s=[...t,...i.path||[]],o={...i,path:s};if(i.message!==void 0)return{...i,path:s,message:i.message};let a="";const l=r.filter(c=>!!c).slice().reverse();for(const c of l)a=c(o,{data:e,defaultError:a}).message;return{...i,path:s,message:a}};function Ge(n,e){const t=foe(),r=poe({issueData:e,data:n.data,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,t,t===sE?void 0:sE].filter(i=>!!i)});n.common.issues.push(r)}class Bi{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const r=[];for(const i of t){if(i.status==="aborted")return Pt;i.status==="dirty"&&e.dirty(),r.push(i.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){const r=[];for(const i of t){const s=await i.key,o=await i.value;r.push({key:s,value:o})}return Bi.mergeObjectSync(e,r)}static mergeObjectSync(e,t){const r={};for(const i of t){const{key:s,value:o}=i;if(s.status==="aborted"||o.status==="aborted")return Pt;s.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof o.value<"u"||i.alwaysSet)&&(r[s.value]=o.value)}return{status:e.value,value:r}}}const Pt=Object.freeze({status:"aborted"}),mf=n=>({status:"dirty",value:n}),ls=n=>({status:"valid",value:n}),fk=n=>n.status==="aborted",pk=n=>n.status==="dirty",Kd=n=>n.status==="valid",l0=n=>typeof Promise<"u"&&n instanceof Promise;var st;(function(n){n.errToObj=e=>typeof e=="string"?{message:e}:e||{},n.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(st||(st={}));class pl{constructor(e,t,r,i){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=i}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const mk=(n,e)=>{if(Kd(e))return{success:!0,data:e.value};if(!n.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new go(n.common.issues);return this._error=t,this._error}}};function Gt(n){if(!n)return{};const{errorMap:e,invalid_type_error:t,required_error:r,description:i}=n;if(e&&(t||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(o,a)=>{const{message:l}=n;return o.code==="invalid_enum_value"?{message:l??a.defaultError}:typeof a.data>"u"?{message:l??r??a.defaultError}:o.code!=="invalid_type"?{message:a.defaultError}:{message:l??t??a.defaultError}},description:i}}class Kt{get description(){return this._def.description}_getType(e){return Ra(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:Ra(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Bi,ctx:{common:e.parent.common,data:e.data,parsedType:Ra(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(l0(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){const r={common:{issues:[],async:(t==null?void 0:t.async)??!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ra(e)},i=this._parseSync({data:e,path:r.path,parent:r});return mk(r,i)}"~validate"(e){var r,i;const t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ra(e)};if(!this["~standard"].async)try{const s=this._parseSync({data:e,path:[],parent:t});return Kd(s)?{value:s.value}:{issues:t.common.issues}}catch(s){(i=(r=s==null?void 0:s.message)==null?void 0:r.toLowerCase())!=null&&i.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(s=>Kd(s)?{value:s.value}:{issues:t.common.issues})}async parseAsync(e,t){const r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){const r={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ra(e)},i=this._parse({data:e,path:r.path,parent:r}),s=await(l0(i)?i:Promise.resolve(i));return mk(r,s)}refine(e,t){const r=i=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(i):t;return this._refinement((i,s)=>{const o=e(i),a=()=>s.addIssue({code:ke.custom,...r(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(l=>l?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,t){return this._refinement((r,i)=>e(r)?!0:(i.addIssue(typeof t=="function"?t(r,i):t),!1))}_refinement(e){return new Jd({schema:this,typeName:Rt.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return nl.create(this,this._def)}nullable(){return Qd.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ho.create(this)}promise(){return h0.create(this,this._def)}or(e){return u0.create([this,e],this._def)}and(e){return d0.create(this,e,this._def)}transform(e){return new Jd({...Gt(this._def),schema:this,typeName:Rt.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new aE({...Gt(this._def),innerType:this,defaultValue:t,typeName:Rt.ZodDefault})}brand(){return new Uoe({typeName:Rt.ZodBranded,type:this,...Gt(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new lE({...Gt(this._def),innerType:this,catchValue:t,typeName:Rt.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return rA.create(this,e)}readonly(){return cE.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const moe=/^c[^\s-]{8,}$/i,goe=/^[0-9a-z]+$/,voe=/^[0-9A-HJKMNP-TV-Z]{26}$/i,yoe=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,_oe=/^[a-z0-9_-]{21}$/i,xoe=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,woe=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Soe=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,boe="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let TS;const Eoe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Moe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Toe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Aoe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Coe=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Poe=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,A4="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Roe=new RegExp(`^${A4}$`);function C4(n){let e="[0-5]\\d";n.precision?e=`${e}\\.\\d{${n.precision}}`:n.precision==null&&(e=`${e}(\\.\\d+)?`);const t=n.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${t}`}function Ioe(n){return new RegExp(`^${C4(n)}$`)}function Loe(n){let e=`${A4}T${C4(n)}`;const t=[];return t.push(n.local?"Z?":"Z"),n.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function koe(n,e){return!!((e==="v4"||!e)&&Eoe.test(n)||(e==="v6"||!e)&&Toe.test(n))}function Ooe(n,e){if(!xoe.test(n))return!1;try{const[t]=n.split(".");if(!t)return!1;const r=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),i=JSON.parse(atob(r));return!(typeof i!="object"||i===null||"typ"in i&&(i==null?void 0:i.typ)!=="JWT"||!i.alg||e&&i.alg!==e)}catch{return!1}}function Noe(n,e){return!!((e==="v4"||!e)&&Moe.test(n)||(e==="v6"||!e)&&Aoe.test(n))}class Ha extends Kt{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==nt.string){const s=this._getOrReturnCtx(e);return Ge(s,{code:ke.invalid_type,expected:nt.string,received:s.parsedType}),Pt}const r=new Bi;let i;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(i=this._getOrReturnCtx(e,i),Ge(i,{code:ke.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="max")e.data.length>s.value&&(i=this._getOrReturnCtx(e,i),Ge(i,{code:ke.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="length"){const o=e.data.length>s.value,a=e.data.length<s.value;(o||a)&&(i=this._getOrReturnCtx(e,i),o?Ge(i,{code:ke.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):a&&Ge(i,{code:ke.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),r.dirty())}else if(s.kind==="email")Soe.test(e.data)||(i=this._getOrReturnCtx(e,i),Ge(i,{validation:"email",code:ke.invalid_string,message:s.message}),r.dirty());else if(s.kind==="emoji")TS||(TS=new RegExp(boe,"u")),TS.test(e.data)||(i=this._getOrReturnCtx(e,i),Ge(i,{validation:"emoji",code:ke.invalid_string,message:s.message}),r.dirty());else if(s.kind==="uuid")yoe.test(e.data)||(i=this._getOrReturnCtx(e,i),Ge(i,{validation:"uuid",code:ke.invalid_string,message:s.message}),r.dirty());else if(s.kind==="nanoid")_oe.test(e.data)||(i=this._getOrReturnCtx(e,i),Ge(i,{validation:"nanoid",code:ke.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid")moe.test(e.data)||(i=this._getOrReturnCtx(e,i),Ge(i,{validation:"cuid",code:ke.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid2")goe.test(e.data)||(i=this._getOrReturnCtx(e,i),Ge(i,{validation:"cuid2",code:ke.invalid_string,message:s.message}),r.dirty());else if(s.kind==="ulid")voe.test(e.data)||(i=this._getOrReturnCtx(e,i),Ge(i,{validation:"ulid",code:ke.invalid_string,message:s.message}),r.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),Ge(i,{validation:"url",code:ke.invalid_string,message:s.message}),r.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),Ge(i,{validation:"regex",code:ke.invalid_string,message:s.message}),r.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(i=this._getOrReturnCtx(e,i),Ge(i,{code:ke.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),r.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(i=this._getOrReturnCtx(e,i),Ge(i,{code:ke.invalid_string,validation:{startsWith:s.value},message:s.message}),r.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(i=this._getOrReturnCtx(e,i),Ge(i,{code:ke.invalid_string,validation:{endsWith:s.value},message:s.message}),r.dirty()):s.kind==="datetime"?Loe(s).test(e.data)||(i=this._getOrReturnCtx(e,i),Ge(i,{code:ke.invalid_string,validation:"datetime",message:s.message}),r.dirty()):s.kind==="date"?Roe.test(e.data)||(i=this._getOrReturnCtx(e,i),Ge(i,{code:ke.invalid_string,validation:"date",message:s.message}),r.dirty()):s.kind==="time"?Ioe(s).test(e.data)||(i=this._getOrReturnCtx(e,i),Ge(i,{code:ke.invalid_string,validation:"time",message:s.message}),r.dirty()):s.kind==="duration"?woe.test(e.data)||(i=this._getOrReturnCtx(e,i),Ge(i,{validation:"duration",code:ke.invalid_string,message:s.message}),r.dirty()):s.kind==="ip"?koe(e.data,s.version)||(i=this._getOrReturnCtx(e,i),Ge(i,{validation:"ip",code:ke.invalid_string,message:s.message}),r.dirty()):s.kind==="jwt"?Ooe(e.data,s.alg)||(i=this._getOrReturnCtx(e,i),Ge(i,{validation:"jwt",code:ke.invalid_string,message:s.message}),r.dirty()):s.kind==="cidr"?Noe(e.data,s.version)||(i=this._getOrReturnCtx(e,i),Ge(i,{validation:"cidr",code:ke.invalid_string,message:s.message}),r.dirty()):s.kind==="base64"?Coe.test(e.data)||(i=this._getOrReturnCtx(e,i),Ge(i,{validation:"base64",code:ke.invalid_string,message:s.message}),r.dirty()):s.kind==="base64url"?Poe.test(e.data)||(i=this._getOrReturnCtx(e,i),Ge(i,{validation:"base64url",code:ke.invalid_string,message:s.message}),r.dirty()):tn.assertNever(s);return{status:r.value,value:e.data}}_regex(e,t,r){return this.refinement(i=>e.test(i),{validation:t,code:ke.invalid_string,...st.errToObj(r)})}_addCheck(e){return new Ha({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...st.errToObj(e)})}url(e){return this._addCheck({kind:"url",...st.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...st.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...st.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...st.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...st.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...st.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...st.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...st.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...st.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...st.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...st.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...st.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...st.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...st.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...st.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...st.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...st.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...st.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...st.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...st.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...st.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...st.errToObj(t)})}nonempty(e){return this.min(1,st.errToObj(e))}trim(){return new Ha({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Ha({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Ha({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Ha.create=n=>new Ha({checks:[],typeName:Rt.ZodString,coerce:(n==null?void 0:n.coerce)??!1,...Gt(n)});function Doe(n,e){const t=(n.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,i=t>r?t:r,s=Number.parseInt(n.toFixed(i).replace(".","")),o=Number.parseInt(e.toFixed(i).replace(".",""));return s%o/10**i}class Np extends Kt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==nt.number){const s=this._getOrReturnCtx(e);return Ge(s,{code:ke.invalid_type,expected:nt.number,received:s.parsedType}),Pt}let r;const i=new Bi;for(const s of this._def.checks)s.kind==="int"?tn.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),Ge(r,{code:ke.invalid_type,expected:"integer",received:"float",message:s.message}),i.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),Ge(r,{code:ke.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),Ge(r,{code:ke.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="multipleOf"?Doe(e.data,s.value)!==0&&(r=this._getOrReturnCtx(e,r),Ge(r,{code:ke.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),Ge(r,{code:ke.not_finite,message:s.message}),i.dirty()):tn.assertNever(s);return{status:i.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,st.toString(t))}gt(e,t){return this.setLimit("min",e,!1,st.toString(t))}lte(e,t){return this.setLimit("max",e,!0,st.toString(t))}lt(e,t){return this.setLimit("max",e,!1,st.toString(t))}setLimit(e,t,r,i){return new Np({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:st.toString(i)}]})}_addCheck(e){return new Np({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:st.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:st.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:st.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:st.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:st.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:st.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:st.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:st.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:st.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&tn.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(t===null||r.value>t)&&(t=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}}Np.create=n=>new Np({checks:[],typeName:Rt.ZodNumber,coerce:(n==null?void 0:n.coerce)||!1,...Gt(n)});class Dp extends Kt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==nt.bigint)return this._getInvalidInput(e);let r;const i=new Bi;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),Ge(r,{code:ke.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),Ge(r,{code:ke.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),Ge(r,{code:ke.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):tn.assertNever(s);return{status:i.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return Ge(t,{code:ke.invalid_type,expected:nt.bigint,received:t.parsedType}),Pt}gte(e,t){return this.setLimit("min",e,!0,st.toString(t))}gt(e,t){return this.setLimit("min",e,!1,st.toString(t))}lte(e,t){return this.setLimit("max",e,!0,st.toString(t))}lt(e,t){return this.setLimit("max",e,!1,st.toString(t))}setLimit(e,t,r,i){return new Dp({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:st.toString(i)}]})}_addCheck(e){return new Dp({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:st.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:st.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:st.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:st.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:st.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Dp.create=n=>new Dp({checks:[],typeName:Rt.ZodBigInt,coerce:(n==null?void 0:n.coerce)??!1,...Gt(n)});class gk extends Kt{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==nt.boolean){const r=this._getOrReturnCtx(e);return Ge(r,{code:ke.invalid_type,expected:nt.boolean,received:r.parsedType}),Pt}return ls(e.data)}}gk.create=n=>new gk({typeName:Rt.ZodBoolean,coerce:(n==null?void 0:n.coerce)||!1,...Gt(n)});class c0 extends Kt{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==nt.date){const s=this._getOrReturnCtx(e);return Ge(s,{code:ke.invalid_type,expected:nt.date,received:s.parsedType}),Pt}if(Number.isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return Ge(s,{code:ke.invalid_date}),Pt}const r=new Bi;let i;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(i=this._getOrReturnCtx(e,i),Ge(i,{code:ke.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),r.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(i=this._getOrReturnCtx(e,i),Ge(i,{code:ke.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),r.dirty()):tn.assertNever(s);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new c0({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:st.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:st.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}c0.create=n=>new c0({checks:[],coerce:(n==null?void 0:n.coerce)||!1,typeName:Rt.ZodDate,...Gt(n)});class vk extends Kt{_parse(e){if(this._getType(e)!==nt.symbol){const r=this._getOrReturnCtx(e);return Ge(r,{code:ke.invalid_type,expected:nt.symbol,received:r.parsedType}),Pt}return ls(e.data)}}vk.create=n=>new vk({typeName:Rt.ZodSymbol,...Gt(n)});class yk extends Kt{_parse(e){if(this._getType(e)!==nt.undefined){const r=this._getOrReturnCtx(e);return Ge(r,{code:ke.invalid_type,expected:nt.undefined,received:r.parsedType}),Pt}return ls(e.data)}}yk.create=n=>new yk({typeName:Rt.ZodUndefined,...Gt(n)});class _k extends Kt{_parse(e){if(this._getType(e)!==nt.null){const r=this._getOrReturnCtx(e);return Ge(r,{code:ke.invalid_type,expected:nt.null,received:r.parsedType}),Pt}return ls(e.data)}}_k.create=n=>new _k({typeName:Rt.ZodNull,...Gt(n)});class xk extends Kt{constructor(){super(...arguments),this._any=!0}_parse(e){return ls(e.data)}}xk.create=n=>new xk({typeName:Rt.ZodAny,...Gt(n)});class wk extends Kt{constructor(){super(...arguments),this._unknown=!0}_parse(e){return ls(e.data)}}wk.create=n=>new wk({typeName:Rt.ZodUnknown,...Gt(n)});class ml extends Kt{_parse(e){const t=this._getOrReturnCtx(e);return Ge(t,{code:ke.invalid_type,expected:nt.never,received:t.parsedType}),Pt}}ml.create=n=>new ml({typeName:Rt.ZodNever,...Gt(n)});class Sk extends Kt{_parse(e){if(this._getType(e)!==nt.undefined){const r=this._getOrReturnCtx(e);return Ge(r,{code:ke.invalid_type,expected:nt.void,received:r.parsedType}),Pt}return ls(e.data)}}Sk.create=n=>new Sk({typeName:Rt.ZodVoid,...Gt(n)});class ho extends Kt{_parse(e){const{ctx:t,status:r}=this._processInputParams(e),i=this._def;if(t.parsedType!==nt.array)return Ge(t,{code:ke.invalid_type,expected:nt.array,received:t.parsedType}),Pt;if(i.exactLength!==null){const o=t.data.length>i.exactLength.value,a=t.data.length<i.exactLength.value;(o||a)&&(Ge(t,{code:o?ke.too_big:ke.too_small,minimum:a?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&t.data.length<i.minLength.value&&(Ge(t,{code:ke.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&t.data.length>i.maxLength.value&&(Ge(t,{code:ke.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map((o,a)=>i.type._parseAsync(new pl(t,o,t.path,a)))).then(o=>Bi.mergeArray(r,o));const s=[...t.data].map((o,a)=>i.type._parseSync(new pl(t,o,t.path,a)));return Bi.mergeArray(r,s)}get element(){return this._def.type}min(e,t){return new ho({...this._def,minLength:{value:e,message:st.toString(t)}})}max(e,t){return new ho({...this._def,maxLength:{value:e,message:st.toString(t)}})}length(e,t){return new ho({...this._def,exactLength:{value:e,message:st.toString(t)}})}nonempty(e){return this.min(1,e)}}ho.create=(n,e)=>new ho({type:n,minLength:null,maxLength:null,exactLength:null,typeName:Rt.ZodArray,...Gt(e)});function ju(n){if(n instanceof Nn){const e={};for(const t in n.shape){const r=n.shape[t];e[t]=nl.create(ju(r))}return new Nn({...n._def,shape:()=>e})}else return n instanceof ho?new ho({...n._def,type:ju(n.element)}):n instanceof nl?nl.create(ju(n.unwrap())):n instanceof Qd?Qd.create(ju(n.unwrap())):n instanceof Fc?Fc.create(n.items.map(e=>ju(e))):n}class Nn extends Kt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=tn.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==nt.object){const c=this._getOrReturnCtx(e);return Ge(c,{code:ke.invalid_type,expected:nt.object,received:c.parsedType}),Pt}const{status:r,ctx:i}=this._processInputParams(e),{shape:s,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof ml&&this._def.unknownKeys==="strip"))for(const c in i.data)o.includes(c)||a.push(c);const l=[];for(const c of o){const d=s[c],f=i.data[c];l.push({key:{status:"valid",value:c},value:d._parse(new pl(i,f,i.path,c)),alwaysSet:c in i.data})}if(this._def.catchall instanceof ml){const c=this._def.unknownKeys;if(c==="passthrough")for(const d of a)l.push({key:{status:"valid",value:d},value:{status:"valid",value:i.data[d]}});else if(c==="strict")a.length>0&&(Ge(i,{code:ke.unrecognized_keys,keys:a}),r.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const d of a){const f=i.data[d];l.push({key:{status:"valid",value:d},value:c._parse(new pl(i,f,i.path,d)),alwaysSet:d in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const c=[];for(const d of l){const f=await d.key,p=await d.value;c.push({key:f,value:p,alwaysSet:d.alwaysSet})}return c}).then(c=>Bi.mergeObjectSync(r,c)):Bi.mergeObjectSync(r,l)}get shape(){return this._def.shape()}strict(e){return st.errToObj,new Nn({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,r)=>{var s,o;const i=((o=(s=this._def).errorMap)==null?void 0:o.call(s,t,r).message)??r.defaultError;return t.code==="unrecognized_keys"?{message:st.errToObj(e).message??i}:{message:i}}}:{}})}strip(){return new Nn({...this._def,unknownKeys:"strip"})}passthrough(){return new Nn({...this._def,unknownKeys:"passthrough"})}extend(e){return new Nn({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Nn({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Rt.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new Nn({...this._def,catchall:e})}pick(e){const t={};for(const r of tn.objectKeys(e))e[r]&&this.shape[r]&&(t[r]=this.shape[r]);return new Nn({...this._def,shape:()=>t})}omit(e){const t={};for(const r of tn.objectKeys(this.shape))e[r]||(t[r]=this.shape[r]);return new Nn({...this._def,shape:()=>t})}deepPartial(){return ju(this)}partial(e){const t={};for(const r of tn.objectKeys(this.shape)){const i=this.shape[r];e&&!e[r]?t[r]=i:t[r]=i.optional()}return new Nn({...this._def,shape:()=>t})}required(e){const t={};for(const r of tn.objectKeys(this.shape))if(e&&!e[r])t[r]=this.shape[r];else{let s=this.shape[r];for(;s instanceof nl;)s=s._def.innerType;t[r]=s}return new Nn({...this._def,shape:()=>t})}keyof(){return P4(tn.objectKeys(this.shape))}}Nn.create=(n,e)=>new Nn({shape:()=>n,unknownKeys:"strip",catchall:ml.create(),typeName:Rt.ZodObject,...Gt(e)});Nn.strictCreate=(n,e)=>new Nn({shape:()=>n,unknownKeys:"strict",catchall:ml.create(),typeName:Rt.ZodObject,...Gt(e)});Nn.lazycreate=(n,e)=>new Nn({shape:n,unknownKeys:"strip",catchall:ml.create(),typeName:Rt.ZodObject,...Gt(e)});class u0 extends Kt{_parse(e){const{ctx:t}=this._processInputParams(e),r=this._def.options;function i(s){for(const a of s)if(a.result.status==="valid")return a.result;for(const a of s)if(a.result.status==="dirty")return t.common.issues.push(...a.ctx.common.issues),a.result;const o=s.map(a=>new go(a.ctx.common.issues));return Ge(t,{code:ke.invalid_union,unionErrors:o}),Pt}if(t.common.async)return Promise.all(r.map(async s=>{const o={...t,common:{...t.common,issues:[]},parent:null};return{result:await s._parseAsync({data:t.data,path:t.path,parent:o}),ctx:o}})).then(i);{let s;const o=[];for(const l of r){const c={...t,common:{...t.common,issues:[]},parent:null},d=l._parseSync({data:t.data,path:t.path,parent:c});if(d.status==="valid")return d;d.status==="dirty"&&!s&&(s={result:d,ctx:c}),c.common.issues.length&&o.push(c.common.issues)}if(s)return t.common.issues.push(...s.ctx.common.issues),s.result;const a=o.map(l=>new go(l));return Ge(t,{code:ke.invalid_union,unionErrors:a}),Pt}}get options(){return this._def.options}}u0.create=(n,e)=>new u0({options:n,typeName:Rt.ZodUnion,...Gt(e)});function oE(n,e){const t=Ra(n),r=Ra(e);if(n===e)return{valid:!0,data:n};if(t===nt.object&&r===nt.object){const i=tn.objectKeys(e),s=tn.objectKeys(n).filter(a=>i.indexOf(a)!==-1),o={...n,...e};for(const a of s){const l=oE(n[a],e[a]);if(!l.valid)return{valid:!1};o[a]=l.data}return{valid:!0,data:o}}else if(t===nt.array&&r===nt.array){if(n.length!==e.length)return{valid:!1};const i=[];for(let s=0;s<n.length;s++){const o=n[s],a=e[s],l=oE(o,a);if(!l.valid)return{valid:!1};i.push(l.data)}return{valid:!0,data:i}}else return t===nt.date&&r===nt.date&&+n==+e?{valid:!0,data:n}:{valid:!1}}class d0 extends Kt{_parse(e){const{status:t,ctx:r}=this._processInputParams(e),i=(s,o)=>{if(fk(s)||fk(o))return Pt;const a=oE(s.value,o.value);return a.valid?((pk(s)||pk(o))&&t.dirty(),{status:t.value,value:a.data}):(Ge(r,{code:ke.invalid_intersection_types}),Pt)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([s,o])=>i(s,o)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}d0.create=(n,e,t)=>new d0({left:n,right:e,typeName:Rt.ZodIntersection,...Gt(t)});class Fc extends Kt{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==nt.array)return Ge(r,{code:ke.invalid_type,expected:nt.array,received:r.parsedType}),Pt;if(r.data.length<this._def.items.length)return Ge(r,{code:ke.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Pt;!this._def.rest&&r.data.length>this._def.items.length&&(Ge(r,{code:ke.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const s=[...r.data].map((o,a)=>{const l=this._def.items[a]||this._def.rest;return l?l._parse(new pl(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(s).then(o=>Bi.mergeArray(t,o)):Bi.mergeArray(t,s)}get items(){return this._def.items}rest(e){return new Fc({...this._def,rest:e})}}Fc.create=(n,e)=>{if(!Array.isArray(n))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Fc({items:n,typeName:Rt.ZodTuple,rest:null,...Gt(e)})};class bk extends Kt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==nt.map)return Ge(r,{code:ke.invalid_type,expected:nt.map,received:r.parsedType}),Pt;const i=this._def.keyType,s=this._def.valueType,o=[...r.data.entries()].map(([a,l],c)=>({key:i._parse(new pl(r,a,r.path,[c,"key"])),value:s._parse(new pl(r,l,r.path,[c,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const l of o){const c=await l.key,d=await l.value;if(c.status==="aborted"||d.status==="aborted")return Pt;(c.status==="dirty"||d.status==="dirty")&&t.dirty(),a.set(c.value,d.value)}return{status:t.value,value:a}})}else{const a=new Map;for(const l of o){const c=l.key,d=l.value;if(c.status==="aborted"||d.status==="aborted")return Pt;(c.status==="dirty"||d.status==="dirty")&&t.dirty(),a.set(c.value,d.value)}return{status:t.value,value:a}}}}bk.create=(n,e,t)=>new bk({valueType:e,keyType:n,typeName:Rt.ZodMap,...Gt(t)});class Up extends Kt{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==nt.set)return Ge(r,{code:ke.invalid_type,expected:nt.set,received:r.parsedType}),Pt;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(Ge(r,{code:ke.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),t.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(Ge(r,{code:ke.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),t.dirty());const s=this._def.valueType;function o(l){const c=new Set;for(const d of l){if(d.status==="aborted")return Pt;d.status==="dirty"&&t.dirty(),c.add(d.value)}return{status:t.value,value:c}}const a=[...r.data.values()].map((l,c)=>s._parse(new pl(r,l,r.path,c)));return r.common.async?Promise.all(a).then(l=>o(l)):o(a)}min(e,t){return new Up({...this._def,minSize:{value:e,message:st.toString(t)}})}max(e,t){return new Up({...this._def,maxSize:{value:e,message:st.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}Up.create=(n,e)=>new Up({valueType:n,minSize:null,maxSize:null,typeName:Rt.ZodSet,...Gt(e)});class Ek extends Kt{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}Ek.create=(n,e)=>new Ek({getter:n,typeName:Rt.ZodLazy,...Gt(e)});class Mk extends Kt{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return Ge(t,{received:t.data,code:ke.invalid_literal,expected:this._def.value}),Pt}return{status:"valid",value:e.data}}get value(){return this._def.value}}Mk.create=(n,e)=>new Mk({value:n,typeName:Rt.ZodLiteral,...Gt(e)});function P4(n,e){return new Zd({values:n,typeName:Rt.ZodEnum,...Gt(e)})}class Zd extends Kt{_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),r=this._def.values;return Ge(t,{expected:tn.joinValues(r),received:t.parsedType,code:ke.invalid_type}),Pt}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const t=this._getOrReturnCtx(e),r=this._def.values;return Ge(t,{received:t.data,code:ke.invalid_enum_value,options:r}),Pt}return ls(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return Zd.create(e,{...this._def,...t})}exclude(e,t=this._def){return Zd.create(this.options.filter(r=>!e.includes(r)),{...this._def,...t})}}Zd.create=P4;class Tk extends Kt{_parse(e){const t=tn.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==nt.string&&r.parsedType!==nt.number){const i=tn.objectValues(t);return Ge(r,{expected:tn.joinValues(i),received:r.parsedType,code:ke.invalid_type}),Pt}if(this._cache||(this._cache=new Set(tn.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const i=tn.objectValues(t);return Ge(r,{received:r.data,code:ke.invalid_enum_value,options:i}),Pt}return ls(e.data)}get enum(){return this._def.values}}Tk.create=(n,e)=>new Tk({values:n,typeName:Rt.ZodNativeEnum,...Gt(e)});class h0 extends Kt{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==nt.promise&&t.common.async===!1)return Ge(t,{code:ke.invalid_type,expected:nt.promise,received:t.parsedType}),Pt;const r=t.parsedType===nt.promise?t.data:Promise.resolve(t.data);return ls(r.then(i=>this._def.type.parseAsync(i,{path:t.path,errorMap:t.common.contextualErrorMap})))}}h0.create=(n,e)=>new h0({type:n,typeName:Rt.ZodPromise,...Gt(e)});class Jd extends Kt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Rt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:r}=this._processInputParams(e),i=this._def.effect||null,s={addIssue:o=>{Ge(r,o),o.fatal?t.abort():t.dirty()},get path(){return r.path}};if(s.addIssue=s.addIssue.bind(s),i.type==="preprocess"){const o=i.transform(r.data,s);if(r.common.async)return Promise.resolve(o).then(async a=>{if(t.value==="aborted")return Pt;const l=await this._def.schema._parseAsync({data:a,path:r.path,parent:r});return l.status==="aborted"?Pt:l.status==="dirty"||t.value==="dirty"?mf(l.value):l});{if(t.value==="aborted")return Pt;const a=this._def.schema._parseSync({data:o,path:r.path,parent:r});return a.status==="aborted"?Pt:a.status==="dirty"||t.value==="dirty"?mf(a.value):a}}if(i.type==="refinement"){const o=a=>{const l=i.refinement(a,s);if(r.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?Pt:(a.status==="dirty"&&t.dirty(),o(a.value),{status:t.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?Pt:(a.status==="dirty"&&t.dirty(),o(a.value).then(()=>({status:t.value,value:a.value}))))}if(i.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Kd(o))return Pt;const a=i.transform(o.value,s);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>Kd(o)?Promise.resolve(i.transform(o.value,s)).then(a=>({status:t.value,value:a})):Pt);tn.assertNever(i)}}Jd.create=(n,e,t)=>new Jd({schema:n,typeName:Rt.ZodEffects,effect:e,...Gt(t)});Jd.createWithPreprocess=(n,e,t)=>new Jd({schema:e,effect:{type:"preprocess",transform:n},typeName:Rt.ZodEffects,...Gt(t)});class nl extends Kt{_parse(e){return this._getType(e)===nt.undefined?ls(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}nl.create=(n,e)=>new nl({innerType:n,typeName:Rt.ZodOptional,...Gt(e)});class Qd extends Kt{_parse(e){return this._getType(e)===nt.null?ls(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Qd.create=(n,e)=>new Qd({innerType:n,typeName:Rt.ZodNullable,...Gt(e)});class aE extends Kt{_parse(e){const{ctx:t}=this._processInputParams(e);let r=t.data;return t.parsedType===nt.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}aE.create=(n,e)=>new aE({innerType:n,typeName:Rt.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Gt(e)});class lE extends Kt{_parse(e){const{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return l0(i)?i.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new go(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new go(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}lE.create=(n,e)=>new lE({innerType:n,typeName:Rt.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Gt(e)});class Ak extends Kt{_parse(e){if(this._getType(e)!==nt.nan){const r=this._getOrReturnCtx(e);return Ge(r,{code:ke.invalid_type,expected:nt.nan,received:r.parsedType}),Pt}return{status:"valid",value:e.data}}}Ak.create=n=>new Ak({typeName:Rt.ZodNaN,...Gt(n)});class Uoe extends Kt{_parse(e){const{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class rA extends Kt{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?Pt:s.status==="dirty"?(t.dirty(),mf(s.value)):this._def.out._parseAsync({data:s.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?Pt:i.status==="dirty"?(t.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(e,t){return new rA({in:e,out:t,typeName:Rt.ZodPipeline})}}class cE extends Kt{_parse(e){const t=this._def.innerType._parse(e),r=i=>(Kd(i)&&(i.value=Object.freeze(i.value)),i);return l0(t)?t.then(i=>r(i)):r(t)}unwrap(){return this._def.innerType}}cE.create=(n,e)=>new cE({innerType:n,typeName:Rt.ZodReadonly,...Gt(e)});Nn.lazycreate;var Rt;(function(n){n.ZodString="ZodString",n.ZodNumber="ZodNumber",n.ZodNaN="ZodNaN",n.ZodBigInt="ZodBigInt",n.ZodBoolean="ZodBoolean",n.ZodDate="ZodDate",n.ZodSymbol="ZodSymbol",n.ZodUndefined="ZodUndefined",n.ZodNull="ZodNull",n.ZodAny="ZodAny",n.ZodUnknown="ZodUnknown",n.ZodNever="ZodNever",n.ZodVoid="ZodVoid",n.ZodArray="ZodArray",n.ZodObject="ZodObject",n.ZodUnion="ZodUnion",n.ZodDiscriminatedUnion="ZodDiscriminatedUnion",n.ZodIntersection="ZodIntersection",n.ZodTuple="ZodTuple",n.ZodRecord="ZodRecord",n.ZodMap="ZodMap",n.ZodSet="ZodSet",n.ZodFunction="ZodFunction",n.ZodLazy="ZodLazy",n.ZodLiteral="ZodLiteral",n.ZodEnum="ZodEnum",n.ZodEffects="ZodEffects",n.ZodNativeEnum="ZodNativeEnum",n.ZodOptional="ZodOptional",n.ZodNullable="ZodNullable",n.ZodDefault="ZodDefault",n.ZodCatch="ZodCatch",n.ZodPromise="ZodPromise",n.ZodBranded="ZodBranded",n.ZodPipeline="ZodPipeline",n.ZodReadonly="ZodReadonly"})(Rt||(Rt={}));const AS=Ha.create;ml.create;ho.create;const Foe=Nn.create;Nn.strictCreate;u0.create;d0.create;Fc.create;Zd.create;h0.create;nl.create;Qd.create;const Boe=Foe({name:AS().trim().min(1,"Name is required").max(100,"Name must be less than 100 characters"),email:AS().trim().email("Invalid email address").max(255,"Email must be less than 255 characters"),message:AS().trim().min(1,"Message is required").max(2e3,"Message must be less than 2000 characters")}),zoe=()=>{const[n,e]=N.useState({name:"",email:"",message:""}),[t,r]=N.useState(!1),i=async s=>{s.preventDefault();try{Boe.parse(n)}catch(o){if(o instanceof go){Tg.error(o.errors[0].message);return}}r(!0);try{const{data:o,error:a}=await doe.functions.invoke("send-contact-email",{body:{name:n.name.trim(),email:n.email.trim(),message:n.message.trim()}});if(a){console.error("Error sending email:",a),Tg.error("Failed to send message. Please try again.");return}Tg.success("Message sent successfully! I'll get back to you soon."),e({name:"",email:"",message:""})}catch(o){console.error("Error:",o),Tg.error("Failed to send message. Please try again.")}finally{r(!1)}};return D.jsxs("section",{id:"contact",className:"py-20 relative overflow-hidden",children:[D.jsx("div",{className:"absolute inset-0 overflow-hidden",children:D.jsx("div",{className:"absolute top-1/4 right-1/4 w-96 h-96 bg-secondary/10 rounded-full blur-3xl"})}),D.jsxs("div",{className:"container mx-auto px-6 relative z-10",children:[D.jsxs(rr.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6},viewport:{once:!0},className:"text-center mb-16",children:[D.jsx("p",{className:"text-sm text-muted-foreground font-semibold mb-2",children:"GET IN TOUCH"}),D.jsx("h2",{className:"text-5xl md:text-7xl font-black",children:"Contact."})]}),D.jsxs("div",{className:"grid lg:grid-cols-[1.2fr,1fr] gap-16 max-w-7xl mx-auto items-start",children:[D.jsxs(rr.div,{initial:{opacity:0,x:-50},whileInView:{opacity:1,x:0},transition:{duration:.6},viewport:{once:!0},className:"card-gradient p-8 md:p-10 rounded-3xl border-2 border-primary/30 bg-gradient-to-br from-card/80 to-card/40 backdrop-blur-xl",children:[D.jsx("h3",{className:"text-3xl font-black text-gradient mb-8",children:"Let's Talk"}),D.jsxs("form",{onSubmit:i,className:"space-y-6 mb-8",children:[D.jsxs("div",{children:[D.jsx("label",{className:"block text-sm font-bold mb-3 text-foreground",children:"Your Name"}),D.jsx(Qb,{type:"text",placeholder:"What's your name?",value:n.name,onChange:s=>e({...n,name:s.target.value}),required:!0,className:"bg-background/50 border-border focus:border-primary h-12"})]}),D.jsxs("div",{children:[D.jsx("label",{className:"block text-sm font-bold mb-3 text-foreground",children:"Your Email"}),D.jsx(Qb,{type:"email",placeholder:"What's your email?",value:n.email,onChange:s=>e({...n,email:s.target.value}),required:!0,className:"bg-background/50 border-border focus:border-primary h-12"})]}),D.jsxs("div",{children:[D.jsx("label",{className:"block text-sm font-bold mb-3 text-foreground",children:"Your Message"}),D.jsx($U,{placeholder:"What do you want to say?",value:n.message,onChange:s=>e({...n,message:s.target.value}),required:!0,rows:6,className:"bg-background/50 border-border focus:border-primary resize-none"})]}),D.jsxs(Vy,{type:"submit",disabled:t,className:"w-full bg-gradient-to-r from-primary to-secondary hover:opacity-90 font-bold text-lg py-6 rounded-xl disabled:opacity-50",children:[D.jsx(s9,{className:"mr-2 h-5 w-5"}),t?"Sending...":"Send Message"]})]})]}),D.jsx(rr.div,{initial:{opacity:0,x:50},whileInView:{opacity:1,x:0},transition:{duration:.6},viewport:{once:!0},className:"h-[500px] lg:h-[600px] rounded-3xl overflow-hidden border-2 border-primary/20 bg-gradient-to-br from-card/50 to-card/20 backdrop-blur-sm",children:D.jsx(Wre,{})})]})]})]})},Voe=()=>D.jsxs("div",{className:"relative",children:[D.jsx(c9,{}),D.jsx(Nq,{}),D.jsxs("div",{className:"relative",children:[D.jsxs("div",{className:"fixed inset-0 z-0 pointer-events-none",style:{top:"100vh"},children:[D.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-background via-background to-background/95"}),D.jsx("div",{className:"stars"}),D.jsx("div",{className:"stars2"}),D.jsx("div",{className:"stars3"})]}),D.jsx(Dq,{}),D.jsx(Vq,{}),D.jsx(Wq,{}),D.jsx($q,{}),D.jsx(Xq,{}),D.jsx(zoe,{})]}),D.jsx("style",{children:`
        @keyframes animStar {
          from {
            transform: translateY(0px);
          }
          to {
            transform: translateY(-2000px);
          }
        }

        .stars {
          width: 1px;
          height: 1px;
          background: transparent;
          box-shadow: ${Array.from({length:700},()=>{const n=Math.floor(Math.random()*2e3),e=Math.floor(Math.random()*2e3);return`${n}px ${e}px #FFF`}).join(", ")};
          animation: animStar 50s linear infinite;
        }

        .stars::after {
          content: " ";
          position: absolute;
          top: 2000px;
          width: 1px;
          height: 1px;
          background: transparent;
          box-shadow: ${Array.from({length:700},()=>{const n=Math.floor(Math.random()*2e3),e=Math.floor(Math.random()*2e3);return`${n}px ${e}px #FFF`}).join(", ")};
        }

        .stars2 {
          width: 2px;
          height: 2px;
          background: transparent;
          box-shadow: ${Array.from({length:200},()=>{const n=Math.floor(Math.random()*2e3),e=Math.floor(Math.random()*2e3);return`${n}px ${e}px #FFF`}).join(", ")};
          animation: animStar 100s linear infinite;
        }

        .stars2::after {
          content: " ";
          position: absolute;
          top: 2000px;
          width: 2px;
          height: 2px;
          background: transparent;
          box-shadow: ${Array.from({length:200},()=>{const n=Math.floor(Math.random()*2e3),e=Math.floor(Math.random()*2e3);return`${n}px ${e}px #FFF`}).join(", ")};
        }

        .stars3 {
          width: 3px;
          height: 3px;
          background: transparent;
          box-shadow: ${Array.from({length:100},()=>{const n=Math.floor(Math.random()*2e3),e=Math.floor(Math.random()*2e3);return`${n}px ${e}px #FFF`}).join(", ")};
          animation: animStar 150s linear infinite;
        }

        .stars3::after {
          content: " ";
          position: absolute;
          top: 2000px;
          width: 3px;
          height: 3px;
          background: transparent;
          box-shadow: ${Array.from({length:100},()=>{const n=Math.floor(Math.random()*2e3),e=Math.floor(Math.random()*2e3);return`${n}px ${e}px #FFF`}).join(", ")};
        }
      `})]}),joe=()=>{const n=m3();return N.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",n.pathname)},[n.pathname]),D.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-100",children:D.jsxs("div",{className:"text-center",children:[D.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"404"}),D.jsx("p",{className:"mb-4 text-xl text-gray-600",children:"Oops! Page not found"}),D.jsx("a",{href:"/",className:"text-blue-500 underline hover:text-blue-700",children:"Return to Home"})]})})},Hoe=new u8,Woe=()=>D.jsx(h8,{client:Hoe,children:D.jsxs(z6,{children:[D.jsx(GH,{}),D.jsx(bW,{}),D.jsx(Z8,{children:D.jsxs(q8,{children:[D.jsx(Ob,{path:"/",element:D.jsx(Voe,{})}),D.jsx(Ob,{path:"*",element:D.jsx(joe,{})})]})})]})});ZN(document.getElementById("root")).render(D.jsx(Woe,{}));
